!function($){$.fn.pathTool=function(o){var e=this;e.unbind(),o.clicks=0;var t,s,c,n,r,a,i,u,f=function(){e.drawLine({strokeWidth:o.stroke,strokeStyle:o.color,strokeCap:"round",strokeJoin:"round",x1:t,y1:s,x2:c,y2:n})};$(document).keydown(function(e){16===e.keyCode&&(o.press=!0)}),$(document).keyup(function(e){16===e.keyCode&&(o.press=!1)}),e.on(o.getTouchEventName("mousedown"),function(r){return o.hist.push(o.last.src=e[0].toDataURL("image/png")),o.undoHist.length=0,o.press===!0&&(o.clicks=0),0===o.clicks?(t=r.offsetX,s=r.offsetY,e.drawArc({fillStyle:o.color,x:t,y:s,radius:o.stroke/2,start:0,end:360}),o.clicks++):1===o.clicks?(c=r.offsetX,n=r.offsetY,f(),o.drag=!0,o.clicks++):o.clicks>=1&&(t=c,s=n,c=r.offsetX,n=r.offsetY,f(),o.drag=!0),!1}),e.on(o.getTouchEventName("mouseup"),function(){o.clicks>=1&&(o.drag=!1),o.clicks>=1&&(o.last.src=e[0].toDataURL("image/png"))}),e.on(o.getTouchEventName("mousemove"),function(f){o.drag===!0&&e.clearCanvas().drawImage({source:o.last.src,x:0,y:0,fromCenter:!1,load:function(){i=f.offsetX,u=f.offsetY,r=c-(i-c),a=n-(u-n),e.drawQuadratic({strokeWidth:o.stroke,strokeStyle:o.color,strokeCap:"round",x1:t,y1:s,cx1:r,cy1:a,x2:c,y2:n})}})})}}(jQuery);