/**
 * @license jCanvas v14.07.16
 * Copyright 2014 Caleb Evans
 * Released under the MIT license
 */
!function($,e,t,r,n,a,o,i,s,l){function h(e){var t=this,r;for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function c(){mt(this,c.baseDefaults)}function g(e){return"string"===xt(e)}function f(e){return e&&e.getContext?e.getContext("2d"):s}function d(e){var t,r,n;for(t in e)e.hasOwnProperty(t)&&(n=e[t],r=xt(n),"string"!==r||""===n||isNaN(n)||(e[t]=a(n)));e.text=String(e.text)}function u(e){return e=mt({},e),e.masks=e.masks.slice(0),e}function y(e,t){var r;e.save(),r=u(t.transforms),t.savedTransforms.push(r)}function v(e,t){0===t.savedTransforms.length?t.transforms=u(zt):(e.restore(),t.transforms=t.savedTransforms.pop())}function p(e,t,r,n){r[n]&&(t[n]=bt(r[n])?r[n].call(e,r):r[n])}function m(e,t,r){p(e,t,r,"fillStyle"),p(e,t,r,"strokeStyle"),t.lineWidth=r.strokeWidth,r.rounded?t.lineCap=t.lineJoin="round":(t.lineCap=r.strokeCap,t.lineJoin=r.strokeJoin,t.miterLimit=r.miterLimit),r.strokeDash||(r.strokeDash=[]),t.setLineDash&&t.setLineDash(r.strokeDash),t.webkitLineDash=t.mozDash=r.strokeDash,t.lineDashOffset=t.webkitLineDashOffset=t.mozDashOffset=r.strokeDashOffset,t.shadowOffsetX=r.shadowX,t.shadowOffsetY=r.shadowY,t.shadowBlur=r.shadowBlur,t.shadowColor=r.shadowColor,t.globalAlpha=r.opacity,t.globalCompositeOperation=r.compositing,r.imageSmoothing&&(t.webkitImageSmoothingEnabled=t.mozImageSmoothingEnabled=r.imageSmoothing)}function w(e,t,r){r.mask&&(r.autosave&&y(e,t),e.clip(),t.transforms.masks.push(r._args))}function x(e,t){t._transformed&&e.restore()}function b(e,t,r){var n;r.closed&&t.closePath(),r.shadowStroke&&0!==r.strokeWidth?(t.stroke(),t.fill(),t.shadowColor="transparent",t.shadowBlur=0,t.stroke()):(t.fill(),"transparent"!==r.fillStyle&&(t.shadowColor="transparent"),0!==r.strokeWidth&&t.stroke()),r.closed||t.closePath(),x(t,r),r.mask&&(n=k(e),w(t,n,r))}function _(e,t,r,n,a){r._toRad=r.inDegrees?kt/180:1,r._transformed=o,t.save(),r.fromCenter||r._centered||n===l||(a===l&&(a=n),r.x+=n/2,r.y+=a/2,r._centered=o),r.rotate&&M(t,r,s),(1!==r.scale||1!==r.scaleX||1!==r.scaleY)&&K(t,r,s),(r.translate||r.translateX||r.translateY)&&Z(t,r,s)}function k(e){var t=Ot.dataCache,r;return t._canvas===e&&t._data?r=t._data:(r=$.data(e,"jCanvas"),r||(r={canvas:e,layers:[],layer:{names:{},groups:{}},eventHooks:{},intersecting:[],lastIntersected:s,cursor:$(e).css("cursor"),drag:{layer:s,dragging:i},event:{type:s,x:s,y:s},events:{},transforms:u(zt),savedTransforms:[],animating:i,animated:s,pixelRatio:1,scaled:i},$.data(e,"jCanvas",r)),t._canvas=e,t._data=r),r}function L(e,t,r){var n;for(n in Wt.events)Wt.events.hasOwnProperty(n)&&(r[n]||r.cursors&&r.cursors[n])&&C(e,t,r,n)}function C(e,t,r,n){Wt.events[n](e,t),r._event=o}function S(e,t,r){var n,a,i;if(r.draggable||r.cursors){for(n=["mousedown","mousemove","mouseup"],i=0;i<n.length;i+=1)a=n[i],C(e,t,r,a);t.events.mouseoutdrag||(e.bind("mouseout.jCanvas",function(){var r=t.drag.layer;r&&(t.drag={},W(e,t,r,"dragcancel"),e.drawLayers())}),t.events.mouseoutdrag=o),r._event=o}}function T(e,t,r,n){var a=t.layer.names;n?n.name!==l&&g(r.name)&&r.name!==n.name&&delete a[r.name]:n=r,g(n.name)&&(a[n.name]=r)}function P(e,t,r,n){var a=t.layer.groups,o,i,h,c,g;if(n){if(n.groups!==l&&r.groups!==s)for(h=0;h<r.groups.length;h+=1)if(i=r.groups[h],o=a[i]){for(g=0;g<o.length;g+=1)if(o[g]===r){c=g,o.splice(g,1);break}0===o.length&&delete a[i]}}else n=r;if(n.groups!==l&&n.groups!==s)for(h=0;h<n.groups.length;h+=1)i=n.groups[h],o=a[i],o||(o=a[i]=[],o.name=i),c===l&&(c=o.length),o.splice(c,0,r)}function R(e){var t,r,n,a;for(t=s,r=e.intersecting.length-1;r>=0;r-=1)if(t=e.intersecting[r],t._masks){for(a=t._masks.length-1;a>=0;a-=1)if(n=t._masks[a],!n.intersects){t.intersects=i;break}if(t.intersects&&!t.intangible)break}return t&&t.intangible&&(t=s),t}function X(e,t,r,n){r&&r.visible&&r._method&&(r._next=n?n:s,r._method.call(e,r))}function Y(e,t,r){var n,a,s,l,h,c,g,f,d,u;if(l=t.drag,a=l.layer,h=a&&a.dragGroups||[],n=t.layers,"mousemove"===r||"touchmove"===r){if(l.dragging||(l.dragging=o,a.dragging=o,a.bringToFront&&(n.splice(a.index,1),a.index=n.push(a)),a._startX=a.x,a._startY=a.y,a._endX=a._eventX,a._endY=a._eventY,W(e,t,a,"dragstart")),l.dragging)for(d=a._eventX-(a._endX-a._startX),u=a._eventY-(a._endY-a._startY),a.dx=d-a.x,a.dy=u-a.y,a.x=d,a.y=u,W(e,t,a,"drag"),f=0;f<h.length;f+=1)if(g=h[f],c=t.layer.groups[g],a.groups&&c)for(s=0;s<c.length;s+=1)c[s]!==a&&(c[s].x+=a.dx,c[s].y+=a.dy)}else("mouseup"===r||"touchend"===r)&&(l.dragging&&(a.dragging=i,l.dragging=i,W(e,t,a,"dragstop")),t.drag={})}function O(e,t,r){var n;t.cursors&&(n=t.cursors[r]),-1!==$.inArray(n,Dt.cursors)&&(n=Dt.prefix+n),n&&e.css({cursor:n})}function z(e,t){e.css({cursor:t.cursor})}function D(e,t,r,n,a){n[r]&&t._running&&!t._running[r]&&(t._running[r]=o,n[r].call(e[0],t,a),t._running[r]=i)}function H(e,t){return!(e.disableEvents||e.intangible&&-1!==$.inArray(t,Ht))}function W(e,t,r,n,a){H(r,n)&&("mouseout"!==n&&O(e,r,n),D(e,r,n,r,a),D(e,r,n,t.eventHooks,a),D(e,r,n,Wt.eventHooks,a))}function A(e,t,r,n){var a,i,c,f=t._layer?r:t;return t._args=r,(t.draggable||t.dragGroups)&&(t.layer=o,t.draggable=o),t._method=n?n:t.method?$.fn[t.method]:t.type?$.fn[Yt.drawings[t.type]]:function(){},t.layer&&!t._layer?(a=$(e),i=k(e),c=i.layers,(f.name===s||g(f.name)&&i.layer.names[f.name]===l)&&(d(t),f=new h(t),f.canvas=e,f.layer=o,f._layer=o,f._running={},f.data=f.data!==s?mt({},f.data):{},f.groups=f.groups!==s?f.groups.slice(0):[],T(a,i,f),P(a,i,f),L(a,i,f),S(a,i,f),t._event=f._event,f._method===$.fn.drawText&&a.measureText(f),f.index===s&&(f.index=c.length),c.splice(f.index,0,f),t._args=f,W(a,i,f,"add"))):t.layer||d(t),f}function j(e){var t,r;for(r=0;r<Dt.props.length;r+=1)t=Dt.props[r],e[t]=e["_"+t]}function E(e,t){var r,n;for(n=0;n<Dt.props.length;n+=1)r=Dt.props[n],e[r]!==l&&(e["_"+r]=e[r],Dt.propsObj[r]=o,t&&delete e[r])}function G(e,t,r){var n,a,o,i;for(n in r)if(r.hasOwnProperty(n)&&(a=r[n],bt(a)&&(r[n]=a.call(e,t,n)),"object"===xt(a)&&_t(a))){for(o in a)a.hasOwnProperty(o)&&(i=a[o],t[n]!==l&&(t[n+"."+o]=t[n][o],r[n+"."+o]=i));delete r[n]}return r}function I(e){var t;for(t in e)e.hasOwnProperty(t)&&-1!==t.indexOf(".")&&delete e[t]}function F(t){var r,n,o=[],i=1;return t.match(/^([a-z]+|#[0-9a-f]+)$/gi)&&("transparent"===t&&(t="rgba( 0,0,0,0 )"),n=e.head,r=n.style.color,n.style.color=t,t=$.css(n,"color"),n.style.color=r),t.match(/^rgb/gi)&&(o=t.match(/(\d+(\.\d+)?)/gi),t.match(/%/gi)&&(i=2.55),o[0]*=i,o[1]*=i,o[2]*=i,o[3]=o[3]!==l?a(o[3]):1),o}function B(e){var t=3,r;for("array"!==xt(e.start)&&(e.start=F(e.start),e.end=F(e.end)),e.now=[],(1!==e.start[3]||1!==e.end[3])&&(t=4),r=0;t>r;r+=1)e.now[r]=e.start[r]+(e.end[r]-e.start[r])*e.pos,3>r&&(e.now[r]=Lt(e.now[r]));1!==e.start[3]||1!==e.end[3]?e.now="rgba( "+e.now.join(",")+" )":(e.now.slice(0,3),e.now="rgb( "+e.now.join(",")+" )"),e.elem.nodeName?e.elem.style[e.prop]=e.now:e.elem[e.prop]=e.now}function N(e){var t;for(t=0;t<e.length;t+=1)$.fx.step[e[t]]=B}function J(e){return Yt.touchEvents[e]&&(e=Yt.touchEvents[e]),e}function q(e){return Yt.mouseEvents[e]&&(e=Yt.mouseEvents[e]),e}function Q(e){Wt.events[e]=function(t,r){function n(e){s.x=e.offsetX,s.y=e.offsetY,s.type=a,s.event=e,t.drawLayers({resetFire:o}),e.preventDefault()}var a,i,s;s=r.event,a="mouseover"===e||"mouseout"===e?"mousemove":e,i=J(a),r.events[a]||(i!==a?t.bind(a+".jCanvas "+i+".jCanvas",n):t.bind(a+".jCanvas",n),r.events[a]=o)}}function U(e){var t;for(t=0;t<e.length;t+=1)Q(e[t])}function V(e,t,r){var n,a,o,i,l,h,c,g;n=r._args,n&&(a=k(e),o=a.event,o.x!==s&&o.y!==s&&(h=o.x*a.pixelRatio,c=o.y*a.pixelRatio,i=t.isPointInPath(h,c)||t.isPointInStroke&&t.isPointInStroke(h,c)),l=a.transforms,n.eventX=o.x,n.eventY=o.y,n.event=o.event,g=a.transforms.rotate,h=n.eventX,c=n.eventY,0!==g?(n._eventX=h*Tt(-g)-c*St(-g),n._eventY=c*Tt(-g)+h*St(-g)):(n._eventX=h,n._eventY=c),n._eventX/=l.scaleX,n._eventY/=l.scaleY,i&&a.intersecting.push(n),n.intersects=!!i)}function M(e,t,r){t._toRad=t.inDegrees?kt/180:1,e.translate(t.x,t.y),e.rotate(t.rotate*t._toRad),e.translate(-t.x,-t.y),r&&(r.rotate+=t.rotate*t._toRad)}function K(e,t,r){1!==t.scale&&(t.scaleX=t.scaleY=t.scale),e.translate(t.x,t.y),e.scale(t.scaleX,t.scaleY),e.translate(-t.x,-t.y),r&&(r.scaleX*=t.scaleX,r.scaleY*=t.scaleY)}function Z(e,t,r){t.translate&&(t.translateX=t.translateY=t.translate),e.translate(t.translateX,t.translateY),r&&(r.translateX+=t.translateX,r.translateY+=t.translateY)}function et(e){for(;0>e;)e+=2*kt;return e}function tt(e,t){return e.x+e.radius*Tt(t)}function rt(e,t){return e.y+e.radius*St(t)}function nt(e,t,r,n){var a,o,i,s,l,h,c,g,f,d,u;r===n?(f=0,d=0):(f=r.x,d=r.y),n.inDegrees||360!==n.end||(n.end=2*kt),n.start*=r._toRad,n.end*=r._toRad,n.start-=kt/2,n.end-=kt/2,u=kt/180,n.ccw&&(u*=-1),a=tt(n,n.start+u),o=rt(n,n.start+u),i=tt(n,n.start),s=rt(n,n.start),ot(e,t,r,n,a,o,i,s),t.arc(n.x+f,n.y+d,n.radius,n.start,n.end,n.ccw),l=tt(n,n.end+u),h=rt(n,n.end+u),c=tt(n,n.end),g=rt(n,n.end),it(e,t,r,n,c,g,l,h)}function at(e,t,r,n,a,o,i,s){var l,h,c,g,f,d,u;n.arrowRadius&&!r.closed&&(u=Pt(s-o,i-a),u-=kt,f=r.strokeWidth*Tt(u),d=r.strokeWidth*St(u),l=i+n.arrowRadius*Tt(u+n.arrowAngle/2),h=s+n.arrowRadius*St(u+n.arrowAngle/2),c=i+n.arrowRadius*Tt(u-n.arrowAngle/2),g=s+n.arrowRadius*St(u-n.arrowAngle/2),t.moveTo(l-f,h-d),t.lineTo(i-f,s-d),t.lineTo(c-f,g-d),t.moveTo(i-f,s-d),t.lineTo(i+f,s+d),t.moveTo(i,s))}function ot(e,t,r,n,a,i,s,l){n._arrowAngleConverted||(n.arrowAngle*=r._toRad,n._arrowAngleConverted=o),n.startArrow&&at(e,t,r,n,a,i,s,l)}function it(e,t,r,n,a,i,s,l){n._arrowAngleConverted||(n.arrowAngle*=r._toRad,n._arrowAngleConverted=o),n.endArrow&&at(e,t,r,n,a,i,s,l)}function st(e,t,r,n){var a,i,s;for(a=2,ot(e,t,r,n,n.x2+r.x,n.y2+r.y,n.x1+r.x,n.y1+r.y),n.x1!==l&&n.y1!==l&&t.moveTo(n.x1+r.x,n.y1+r.y);o&&(i=n["x"+a],s=n["y"+a],i!==l&&s!==l);)t.lineTo(i+r.x,s+r.y),a+=1;a-=1,it(e,t,r,n,n["x"+(a-1)]+r.x,n["y"+(a-1)]+r.y,n["x"+a]+r.x,n["y"+a]+r.y)}function lt(e,t,r,n){var a,i,s,h,c;for(a=2,ot(e,t,r,n,n.cx1+r.x,n.cy1+r.y,n.x1+r.x,n.y1+r.y),n.x1!==l&&n.y1!==l&&t.moveTo(n.x1+r.x,n.y1+r.y);o&&(i=n["x"+a],s=n["y"+a],h=n["cx"+(a-1)],c=n["cy"+(a-1)],i!==l&&s!==l&&h!==l&&c!==l);)t.quadraticCurveTo(h+r.x,c+r.y,i+r.x,s+r.y),a+=1;a-=1,it(e,t,r,n,n["cx"+(a-1)]+r.x,n["cy"+(a-1)]+r.y,n["x"+a]+r.x,n["y"+a]+r.y)}function ht(e,t,r,n){var a,i,s,h,c,g,f,d;for(a=2,i=1,ot(e,t,r,n,n.cx1+r.x,n.cy1+r.y,n.x1+r.x,n.y1+r.y),n.x1!==l&&n.y1!==l&&t.moveTo(n.x1+r.x,n.y1+r.y);o&&(s=n["x"+a],h=n["y"+a],c=n["cx"+i],g=n["cy"+i],f=n["cx"+(i+1)],d=n["cy"+(i+1)],s!==l&&h!==l&&c!==l&&g!==l&&f!==l&&d!==l);)t.bezierCurveTo(c+r.x,g+r.y,f+r.x,d+r.y,s+r.x,h+r.y),a+=1,i+=2;a-=1,i-=2,it(e,t,r,n,n["cx"+(i+1)]+r.x,n["cy"+(i+1)]+r.y,n["x"+a]+r.x,n["y"+a]+r.y)}function ct(e,t,r){return t*=e._toRad,t-=kt/2,r*Tt(t)}function gt(e,t,r){return t*=e._toRad,t-=kt/2,r*St(t)}function ft(e,t,r,n){var a,i,s,h,c,g,f,d,u,y,v,p,m;for(r===n?(h=0,c=0):(h=r.x,c=r.y),a=1,g=d=y=p=n.x+h,f=u=v=m=n.y+c,ot(e,t,r,n,g+ct(r,n.a1,n.l1),f+gt(r,n.a1,n.l1),g,f),n.x!==l&&n.y!==l&&t.moveTo(g,f);o&&(i=n["a"+a],s=n["l"+a],i!==l&&s!==l);)y=p,v=m,p+=ct(r,i,s),m+=gt(r,i,s),1===a&&(d=p,u=m),t.lineTo(p,m),a+=1;it(e,t,r,n,y,v,p,m)}function dt(e,t,r){isNaN(Number(r.fontSize))||(r.fontSize+="px"),t.font=r.fontStyle+" "+r.fontSize+" "+r.fontFamily}function ut(e,t,r,n){var o,i,s,l=Ot.propCache;if(l.text===r.text&&l.fontStyle===r.fontStyle&&l.fontSize===r.fontSize&&l.fontFamily===r.fontFamily&&l.maxWidth===r.maxWidth&&l.lineHeight===r.lineHeight)r.width=l.width,r.height=l.height;else{for(r.width=t.measureText(n[0]).width,s=1;s<n.length;s+=1)i=t.measureText(n[s]).width,i>r.width&&(r.width=i);o=e.style.fontSize,e.style.fontSize=r.fontSize,r.height=a($.css(e,"fontSize"))*n.length*r.lineHeight,e.style.fontSize=o}}function yt(e,t){var r=t.text,n=t.maxWidth,a=r.split("\n"),o=[],i,s,l,h,c,g;for(l=0;l<a.length;l+=1){if(h=a[l],c=h.split(" "),i=[],s="",1===c.length||e.measureText(h).width<n)i=[h];else{for(g=0;g<c.length;g+=1)e.measureText(s+c[g]).width>n&&(""!==s&&i.push(s),s=""),s+=c[g],g!==c.length-1&&(s+=" ");i.push(s)}o=o.concat(i.join("\n").replace(/( (\n))|( $)/gi,"$2").split("\n"))}return o}var vt,pt,mt=$.extend,wt=$.inArray,xt=$.type,bt=$.isFunction,_t=$.isPlainObject,kt=n.PI,Lt=n.round,Ct=n.abs,St=n.sin,Tt=n.cos,Pt=n.atan2,Rt=r.prototype.slice,Xt=$.event.fix,Yt={},Ot={dataCache:{},propCache:{},imageCache:{}},zt={rotate:0,scaleX:1,scaleY:1,translateX:0,translateY:0,masks:[]},Dt={},Ht=["mousedown","mousemove","mouseup","mouseover","mouseout","touchstart","touchmove","touchend"],Wt={events:{},eventHooks:{},future:{}};c.baseDefaults={align:"center",arrowAngle:90,arrowRadius:0,autosave:o,baseline:"middle",bringToFront:i,ccw:i,closed:i,compositing:"source-over",concavity:0,cornerRadius:0,count:1,cropFromCenter:o,crossOrigin:"",cursors:s,disableEvents:i,draggable:i,dragGroups:s,groups:s,data:s,dx:s,dy:s,end:360,eventX:s,eventY:s,fillStyle:"transparent",fontStyle:"normal",fontSize:"12pt",fontFamily:"sans-serif",fromCenter:o,height:s,imageSmoothing:o,inDegrees:o,intangible:i,index:s,letterSpacing:s,lineHeight:1,layer:i,mask:i,maxWidth:s,miterLimit:10,name:s,opacity:1,r1:s,r2:s,radius:0,repeat:"repeat",respectAlign:i,rotate:0,rounded:i,scale:1,scaleX:1,scaleY:1,shadowBlur:0,shadowColor:"transparent",shadowStroke:i,shadowX:0,shadowY:0,sHeight:s,sides:0,source:"",spread:0,start:0,strokeCap:"butt",strokeDash:s,strokeDashOffset:0,strokeJoin:"miter",strokeStyle:"transparent",strokeWidth:1,sWidth:s,sx:s,sy:s,text:"",translate:0,translateX:0,translateY:0,type:s,visible:o,width:s,x:0,y:0},vt=new c,h.prototype=vt,Wt.extend=function At(e){return e.name&&(e.props&&mt(vt,e.props),$.fn[e.name]=function t(r){var n=this,a,o,i,s,l;for(o=0;o<n.length;o+=1)a=n[o],i=f(a),i&&(s=new h(r),l=A(a,s,r,t),m(a,i,s),e.fn.call(a,i,s));return n},e.type&&(Yt.drawings[e.type]=e.name)),$.fn[e.name]},$.fn.getEventHooks=function jt(){var e=this,t,r,n={};return 0!==e.length&&(t=e[0],r=k(t),n=r.eventHooks),n},$.fn.setEventHooks=function Et(e){var t=this,r,n,a;for(n=0;n<t.length;n+=1)r=$(t[n]),a=k(t[n]),mt(a.eventHooks,e);return t},$.fn.getLayers=function Gt(e){var t=this,r,n,a,o,i,s=[];if(0!==t.length)if(r=t[0],n=k(r),a=n.layers,bt(e))for(i=0;i<a.length;i+=1)o=a[i],e.call(r,o)&&s.push(o);else s=a;return s},$.fn.getLayer=function It(e){var t=this,r,n,a,o,i,s;if(0!==t.length)if(r=t[0],n=k(r),a=n.layers,s=xt(e),e&&e.layer)o=e;else if("number"===s)0>e&&(e=a.length+e),o=a[e];else if("regexp"===s){for(i=0;i<a.length;i+=1)if(g(a[i].name)&&a[i].name.match(e)){o=a[i];break}}else o=n.layer.names[e];return o},$.fn.getLayerGroup=function Ft(e){var t=this,r,n,a,o,i,s=xt(e);if(0!==t.length)if(r=t[0],"array"===s)i=e;else if("regexp"===s){n=k(r),a=n.layer.groups;for(o in a)if(o.match(e)){i=a[o];break}}else n=k(r),i=n.layer.groups[e];return i},$.fn.getLayerIndex=function Bt(e){var t=this,r=t.getLayers(),n=t.getLayer(e);return wt(n,r)},$.fn.setLayer=function Nt(e,t){var r=this,n,o,s,l,h,c,g;for(o=0;o<r.length;o+=1)if(n=$(r[o]),s=k(r[o]),l=$(r[o]).getLayer(e)){T(n,s,l,t),P(n,s,l,t);for(h in t)t.hasOwnProperty(h)&&(c=t[h],g=xt(c),"object"===g&&_t(c)?l[h]=mt({},c):"array"===g?l[h]=c.slice(0):"string"===g?0===c.indexOf("+=")?l[h]+=a(c.substr(2)):0===c.indexOf("-=")?l[h]-=a(c.substr(2)):l[h]=isNaN(c)?c:a(c):l[h]=c);L(n,s,l),S(n,s,l),$.isEmptyObject(t)===i&&W(n,s,l,"change",t)}return r},$.fn.setLayers=function Jt(e,t){var r=this,n,a,o,i;for(a=0;a<r.length;a+=1)for(n=$(r[a]),o=n.getLayers(t),i=0;i<o.length;i+=1)n.setLayer(o[i],e);return r},$.fn.setLayerGroup=function qt(e,t){var r=this,n,a,o,i;for(a=0;a<r.length;a+=1)if(n=$(r[a]),o=n.getLayerGroup(e))for(i=0;i<o.length;i+=1)n.setLayer(o[i],t);return r},$.fn.moveLayer=function Qt(e,t){var r=this,n,a,o,i,s;for(a=0;a<r.length;a+=1)n=$(r[a]),o=k(r[a]),i=o.layers,s=n.getLayer(e),s&&(s.index=wt(s,i),i.splice(s.index,1),i.splice(t,0,s),0>t&&(t=i.length+t),s.index=t,W(n,o,s,"move"));return r},$.fn.removeLayer=function $t(e){var t=this,r,n,a,o,i;for(n=0;n<t.length;n+=1)r=$(t[n]),a=k(t[n]),o=r.getLayers(),i=r.getLayer(e),i&&(i.index=wt(i,o),o.splice(i.index,1),T(r,a,i,{name:s}),P(r,a,i,{groups:s}),W(r,a,i,"remove"));return t},$.fn.removeLayers=function Ut(e){var t=this,r,n,a,o,i,s;for(n=0;n<t.length;n+=1){for(r=$(t[n]),a=k(t[n]),o=r.getLayers(e),s=0;s<o.length;s+=1)i=o[s],r.removeLayer(i),s-=1;a.layer.names={},a.layer.groups={}}return t},$.fn.removeLayerGroup=function Vt(e){var t=this,r,n,a,o,i,s;if(e!==l)for(n=0;n<t.length;n+=1)if(r=$(t[n]),a=k(t[n]),o=r.getLayers(),i=r.getLayerGroup(e))for(i=i.slice(0),s=0;s<i.length;s+=1)r.removeLayer(i[s]);return t},$.fn.addLayerToGroup=function Mt(e,t){var r=this,n,a,o,i=[t];for(a=0;a<r.length;a+=1)n=$(r[a]),o=n.getLayer(e),o.groups&&(i=o.groups.slice(0),-1===wt(t,o.groups)&&i.push(t)),n.setLayer(o,{groups:i});return r},$.fn.removeLayerFromGroup=function Kt(e,t){var r=this,n,a,o,i=[],s;for(a=0;a<r.length;a+=1)n=$(r[a]),o=n.getLayer(e),o.groups&&(s=wt(t,o.groups),-1!==s&&(i=o.groups.slice(0),i.splice(s,1),n.setLayer(o,{groups:i})));return r},Dt.cursors=["grab","grabbing","zoom-in","zoom-out"],Dt.prefix=function(){var t=getComputedStyle(e.documentElement,""),r=(Rt.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return"-"+r+"-"}(),$.fn.triggerLayerEvent=function(e,t){var r=this,n,a,o;for(a=0;a<r.length;a+=1)n=$(r[a]),o=k(r[a]),e=n.getLayer(e),e&&W(n,o,e,t);return r},$.fn.drawLayer=function Zt(e){var t=this,r,n,a,o;for(r=0;r<t.length;r+=1)a=$(t[r]),n=f(t[r]),n&&(o=a.getLayer(e),X(a,n,o));return t},$.fn.drawLayers=function er(e){var t=this,r,n,a,l=mt({},e),h,c,g,d,y,v,p,m,w;for(l.index||(l.index=0),n=0;n<t.length;n+=1)if(r=$(t[n]),a=f(t[n])){for(v=k(t[n]),l.clear!==i&&r.clearCanvas(),h=v.layers,d=l.index;d<h.length;d+=1)if(c=h[d],c.index=d,l.resetFire&&(c._fired=i),X(r,a,c,d+1),c._masks=v.transforms.masks.slice(0),c._method===$.fn.drawImage&&c.visible){w=!0;break}if(w)break;y=d,c=R(v),p=v.event,m=p.type,v.drag.layer&&Y(r,v,m),g=v.lastIntersected,g===s||c===g||!g._hovered||g._fired||v.drag.dragging||(v.lastIntersected=s,g._fired=o,g._hovered=i,W(r,v,g,"mouseout"),z(r,v)),c&&(c[m]||(m=q(m)),c._event&&c.intersects&&(v.lastIntersected=c,(c.mouseover||c.mouseout||c.cursors)&&!v.drag.dragging&&(c._hovered||c._fired||(c._fired=o,c._hovered=o,W(r,v,c,"mouseover"))),c._fired||(c._fired=o,p.type=s,W(r,v,c,m)),!c.draggable||c.disableEvents||"mousedown"!==m&&"touchstart"!==m||(v.drag.layer=c))),c!==s||v.drag.dragging||z(r,v),y===h.length&&(v.intersecting.length=0,v.transforms=u(zt),v.savedTransforms.length=0)}return t},$.fn.addLayer=function tr(e){var t=this,r,n,a;for(r=0;r<t.length;r+=1)n=f(t[r]),n&&(a=new h(e),a.layer=o,A(t[r],a,e));return t},Dt.props=["width","height","opacity","lineHeight"],Dt.propsObj={},$.fn.animateLayer=function rr(){function e(e,t,r){return function(){j(r),I(r),t.animating&&t.animated!==r||e.drawLayers(),r._animating=i,t.animating=i,t.animated=s,c[4]&&c[4].call(e[0],r),W(e,t,r,"animateend")}}function t(e,t,r){return function(n,a){var i,s,l,h=!1;"_"===a.prop[0]&&(h=!0,a.prop=a.prop.replace("_",""),r[a.prop]=r["_"+a.prop]),-1!==a.prop.indexOf(".")&&(i=a.prop.split("."),s=i[0],l=i[1],r[s]&&(r[s][l]=a.now)),r._pos!==a.pos&&(r._pos=a.pos,r._animating||t.animating||(r._animating=o,t.animating=o,t.animated=r),t.animating&&t.animated!==r||e.drawLayers()),c[5]&&c[5].call(e[0],n,a,r),W(e,t,r,"animate",a),h&&(a.prop="_"+a.prop)}}var r=this,n,a,h,c=Rt.call(arguments,0),g,d,u;for("object"===xt(c[2])?(c.splice(2,0,c[2].duration||s),c.splice(3,0,c[3].easing||s),c.splice(4,0,c[4].complete||s),c.splice(5,0,c[5].step||s)):(c[2]===l?(c.splice(2,0,s),c.splice(3,0,s),c.splice(4,0,s)):bt(c[2])&&(c.splice(2,0,s),c.splice(3,0,s)),c[3]===l?(c[3]=s,c.splice(4,0,s)):bt(c[3])&&c.splice(3,0,s)),a=0;a<r.length;a+=1)n=$(r[a]),h=f(r[a]),h&&(g=k(r[a]),d=n.getLayer(c[0]),d&&d._method!==$.fn.draw&&(u=mt({},c[1]),u=G(r[a],d,u),E(u,o),E(d),d.style=Dt.propsObj,$(d).animate(u,{duration:c[2],easing:$.easing[c[3]]?c[3]:s,complete:e(n,g,d),step:t(n,g,d)}),W(n,g,d,"animatestart")));return r},$.fn.animateLayerGroup=function nr(e){var t=this,r,n,a=Rt.call(arguments,0),o,i;for(n=0;n<t.length;n+=1)if(r=$(t[n]),o=r.getLayerGroup(e))for(i=0;i<o.length;i+=1)a[0]=o[i],r.animateLayer.apply(r,a);return t},$.fn.delayLayer=function ar(e,t){var r=this,n,a,o,i;for(t=t||0,a=0;a<r.length;a+=1)n=$(r[a]),o=k(r[a]),i=n.getLayer(e),i&&($(i).delay(t),W(n,o,i,"delay"));return r},$.fn.delayLayerGroup=function or(e,t){var r=this,n,a,o,i,s;for(t=t||0,a=0;a<r.length;a+=1)if(n=$(r[a]),o=n.getLayerGroup(e))for(s=0;s<o.length;s+=1)i=o[s],n.delayLayer(i,t);return r},$.fn.stopLayer=function ir(e,t){var r=this,n,a,o,i;for(a=0;a<r.length;a+=1)n=$(r[a]),o=k(r[a]),i=n.getLayer(e),i&&($(i).stop(t),W(n,o,i,"stop"));return r},$.fn.stopLayerGroup=function sr(e,t){var r=this,n,a,o,i,s;for(a=0;a<r.length;a+=1)if(n=$(r[a]),o=n.getLayerGroup(e))for(s=0;s<o.length;s+=1)i=o[s],n.stopLayer(i,t);return r},N(["color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","fillStyle","outlineColor","strokeStyle","shadowColor"]),Yt.touchEvents={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},Yt.mouseEvents={touchstart:"mousedown",touchend:"mouseup",touchmove:"mousemove"},U(["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","touchstart","touchmove","touchend"]),$.event.fix=function(e){var t,r,n;return e=Xt.call($.event,e),r=e.originalEvent,r&&(n=r.changedTouches,e.pageX!==l&&e.offsetX===l?(t=$(e.currentTarget).offset(),t&&(e.offsetX=e.pageX-t.left,e.offsetY=e.pageY-t.top)):n&&(t=$(e.currentTarget).offset(),t&&(e.offsetX=n[0].pageX-t.left,e.offsetY=n[0].pageY-t.top))),e},Yt.drawings={arc:"drawArc",bezier:"drawBezier",ellipse:"drawEllipse","function":"draw",image:"drawImage",line:"drawLine",path:"drawPath",polygon:"drawPolygon",slice:"drawSlice",quadratic:"drawQuadratic",rectangle:"drawRect",text:"drawText",vector:"drawVector",save:"saveCanvas",restore:"restoreCanvas",rotate:"rotateCanvas",scale:"scaleCanvas",translate:"translateCanvas"},$.fn.draw=function lr(e){var t=this,r,n,a,o=new h(e),i;if(Yt.drawings[o.type]&&"function"!==o.type)t[Yt.drawings[o.type]](e);else for(n=0;n<t.length;n+=1)r=$(t[n]),a=f(t[n]),a&&(o=new h(e),i=A(t[n],o,e,lr),o.visible&&o.fn&&o.fn.call(t[n],a,o));return t},$.fn.clearCanvas=function hr(e){var t=this,r,n,a=new h(e),o;for(r=0;r<t.length;r+=1)n=f(t[r]),n&&(a.width===s||a.height===s?(n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,t[r].width,t[r].height),n.restore()):(o=A(t[r],a,e,hr),_(t[r],n,a,a.width,a.height),n.clearRect(a.x-a.width/2,a.y-a.height/2,a.width,a.height),x(n,a)));return t},$.fn.saveCanvas=function cr(e){var t=this,r,n,a,o,i,s;for(r=0;r<t.length;r+=1)if(n=f(t[r]))for(i=k(t[r]),a=new h(e),o=A(t[r],a,e,cr),s=0;s<a.count;s+=1)y(n,i);return t},$.fn.restoreCanvas=function gr(e){var t=this,r,n,a,o,i,s;for(r=0;r<t.length;r+=1)if(n=f(t[r]))for(i=k(t[r]),a=new h(e),o=A(t[r],a,e,gr),s=0;s<a.count;s+=1)v(n,i);return t},$.fn.rotateCanvas=function fr(e){var t=this,r,n,a,o,i;for(r=0;r<t.length;r+=1)n=f(t[r]),n&&(i=k(t[r]),a=new h(e),o=A(t[r],a,e,fr),a.autosave&&y(n,i),M(n,a,i.transforms));return t},$.fn.scaleCanvas=function dr(e){var t=this,r,n,a,o,i;for(r=0;r<t.length;r+=1)n=f(t[r]),n&&(i=k(t[r]),a=new h(e),o=A(t[r],a,e,dr),a.autosave&&y(n,i),K(n,a,i.transforms));return t},$.fn.translateCanvas=function ur(e){var t=this,r,n,a,o,i;for(r=0;r<t.length;r+=1)n=f(t[r]),n&&(i=k(t[r]),a=new h(e),o=A(t[r],a,e,ur),a.autosave&&y(n,i),Z(n,a,i.transforms));return t},$.fn.drawRect=function yr(e){var t=this,r,n,a,s,l,c,g,d,u,y;for(r=0;r<t.length;r+=1)n=f(t[r]),n&&(a=new h(e),s=A(t[r],a,e,yr),a.visible&&(m(t[r],n,a),_(t[r],n,a,a.width,a.height),n.beginPath(),a.width&&a.height&&(l=a.x-a.width/2,c=a.y-a.height/2,u=Ct(a.cornerRadius),u?(g=a.x+a.width/2,d=a.y+a.height/2,a.width<0&&(y=l,l=g,g=y),a.height<0&&(y=c,c=d,d=y),0>g-l-2*u&&(u=(g-l)/2),0>d-c-2*u&&(u=(d-c)/2),n.moveTo(l+u,c),n.lineTo(g-u,c),n.arc(g-u,c+u,u,3*kt/2,2*kt,i),n.lineTo(g,d-u),n.arc(g-u,d-u,u,0,kt/2,i),n.lineTo(l+u,d),n.arc(l+u,d-u,u,kt/2,kt,i),n.lineTo(l,c+u),n.arc(l+u,c+u,u,kt,3*kt/2,i),a.closed=o):n.rect(l,c,a.width,a.height)),V(t[r],n,a),b(t[r],n,a)));return t},$.fn.drawArc=function vr(e){var t=this,r,n,a,o;for(r=0;r<t.length;r+=1)n=f(t[r]),n&&(a=new h(e),o=A(t[r],a,e,vr),a.visible&&(m(t[r],n,a),_(t[r],n,a,2*a.radius),n.beginPath(),nt(t[r],n,a,a),V(t[r],n,a),b(t[r],n,a)));return t},$.fn.drawEllipse=function pr(e){var t=this,r,n,a,i,s,l;for(r=0;r<t.length;r+=1)n=f(t[r]),n&&(a=new h(e),i=A(t[r],a,e,pr),a.visible&&(m(t[r],n,a),_(t[r],n,a,a.width,a.height),s=a.width*(4/3),l=a.height,n.beginPath(),n.moveTo(a.x,a.y-l/2),n.bezierCurveTo(a.x-s/2,a.y-l/2,a.x-s/2,a.y+l/2,a.x,a.y+l/2),n.bezierCurveTo(a.x+s/2,a.y+l/2,a.x+s/2,a.y-l/2,a.x,a.y-l/2),V(t[r],n,a),a.closed=o,b(t[r],n,a)));return t},$.fn.drawPolygon=function mr(e){var t=this,r,n,a,i,s,l,c,g,d,u,y;for(r=0;r<t.length;r+=1)if(n=f(t[r]),n&&(a=new h(e),i=A(t[r],a,e,mr),a.visible)){for(m(t[r],n,a),_(t[r],n,a,2*a.radius),l=2*kt/a.sides,c=l/2,s=c+kt/2,g=a.radius*Tt(c),n.beginPath(),y=0;y<a.sides;y+=1)d=a.x+a.radius*Tt(s),u=a.y+a.radius*St(s),n.lineTo(d,u),a.concavity&&(d=a.x+(g+-g*a.concavity)*Tt(s+c),u=a.y+(g+-g*a.concavity)*St(s+c),n.lineTo(d,u)),s+=l;V(t[r],n,a),a.closed=o,b(t[r],n,a)}return t},$.fn.drawSlice=function wr(e){var t=this,r,n,a,i,s,l,c,g;for(n=0;n<t.length;n+=1)r=$(t[n]),a=f(t[n]),a&&(i=new h(e),s=A(t[n],i,e,wr),i.visible&&(m(t[n],a,i),_(t[n],a,i,2*i.radius),i.start*=i._toRad,i.end*=i._toRad,i.start-=kt/2,i.end-=kt/2,i.start=et(i.start),i.end=et(i.end),i.end<i.start&&(i.end+=2*kt),l=(i.start+i.end)/2,c=i.radius*i.spread*Tt(l),g=i.radius*i.spread*St(l),i.x+=c,i.y+=g,a.beginPath(),a.arc(i.x,i.y,i.radius,i.start,i.end,i.ccw),a.lineTo(i.x,i.y),V(t[n],a,i),i.closed=o,b(t[n],a,i)));return t},$.fn.drawLine=function xr(e){var t=this,r,n,a,o;for(r=0;r<t.length;r+=1)n=f(t[r]),n&&(a=new h(e),o=A(t[r],a,e,xr),a.visible&&(m(t[r],n,a),_(t[r],n,a),n.beginPath(),st(t[r],n,a,a),V(t[r],n,a),b(t[r],n,a)));return t},$.fn.drawQuadratic=function br(e){var t=this,r,n,a,o;for(r=0;r<t.length;r+=1)n=f(t[r]),n&&(a=new h(e),o=A(t[r],a,e,br),a.visible&&(m(t[r],n,a),_(t[r],n,a),n.beginPath(),lt(t[r],n,a,a),V(t[r],n,a),b(t[r],n,a)));return t},$.fn.drawBezier=function _r(e){var t=this,r,n,a,o;for(r=0;r<t.length;r+=1)n=f(t[r]),n&&(a=new h(e),o=A(t[r],a,e,_r),a.visible&&(m(t[r],n,a),_(t[r],n,a),n.beginPath(),ht(t[r],n,a,a),V(t[r],n,a),b(t[r],n,a)));return t},$.fn.drawVector=function kr(e){var t=this,r,n,a,o;for(r=0;r<t.length;r+=1)n=f(t[r]),n&&(a=new h(e),o=A(t[r],a,e,kr),a.visible&&(m(t[r],n,a),_(t[r],n,a),n.beginPath(),ft(t[r],n,a,a),V(t[r],n,a),b(t[r],n,a)));return t},$.fn.drawPath=function Lr(e){var t=this,r,n,a,i,s,c;for(r=0;r<t.length;r+=1)if(n=f(t[r]),n&&(a=new h(e),i=A(t[r],a,e,Lr),a.visible)){for(m(t[r],n,a),_(t[r],n,a),n.beginPath(),s=1;o&&(c=a["p"+s],c!==l);)c=new h(c),"line"===c.type?st(t[r],n,a,c):"quadratic"===c.type?lt(t[r],n,a,c):"bezier"===c.type?ht(t[r],n,a,c):"vector"===c.type?ft(t[r],n,a,c):"arc"===c.type&&nt(t[r],n,a,c),s+=1;V(t[r],n,a),b(t[r],n,a)}return t},$.fn.drawText=function Cr(e){var t=this,r,n,o,i,l,c,g,d,u,y=500,v,p,w,b,k;for(n=0;n<t.length;n+=1)if(r=$(t[n]),o=f(t[n]),o&&(i=new h(e),l=A(t[n],i,e,Cr),i.visible)){if(m(t[n],o,i),o.textBaseline=i.baseline,o.textAlign=i.align,dt(t[n],o,i),c=i.maxWidth!==s?yt(o,i):i.text.toString().split("\n"),ut(t[n],o,i,c),l&&(l.width=i.width,l.height=i.height),_(t[n],o,i,i.width,i.height),b=i.x,"left"===i.align?i.respectAlign?i.x+=i.width/2:b-=i.width/2:"right"===i.align&&(i.respectAlign?i.x-=i.width/2:b+=i.width/2),i.radius)for(u=a(i.fontSize),i.letterSpacing===s&&(i.letterSpacing=u/y),d=0;d<c.length;d+=1){for(o.save(),o.translate(i.x,i.y),g=c[d],v=g.length,o.rotate(-(kt*i.letterSpacing*(v-1))/2),w=0;v>w;w+=1)p=g[w],0!==w&&o.rotate(kt*i.letterSpacing),o.save(),o.translate(0,-i.radius),o.fillText(p,0,0),o.restore();i.radius-=u,i.letterSpacing+=u/(2*y*kt),o.restore()}else for(d=0;d<c.length;d+=1)g=c[d],k=i.y+d*i.height/c.length-(c.length-1)*i.height/c.length/2,o.shadowColor=i.shadowColor,o.fillText(g,b,k),"transparent"!==i.fillStyle&&(o.shadowColor="transparent"),0!==i.strokeWidth&&o.strokeText(g,b,k);k=0,"top"===i.baseline?k+=i.height/2:"bottom"===i.baseline&&(k-=i.height/2),i._event&&(o.beginPath(),o.rect(i.x-i.width/2,i.y-i.height/2+k,i.width,i.height),V(t[n],o,i),o.closePath()),x(o,i)}return Ot.propCache=i,t},$.fn.measureText=function Sr(e){var t=this,r,n,a;return n=t.getLayer(e),(!n||n&&!n._layer)&&(n=new h(e)),r=f(t[0]),r&&(dt(t[0],r,n),a=yt(r,n),ut(t[0],r,n,a)),n},$.fn.drawImage=function Tr(e){function r(e,t,r,n,a){m(e,t,n),n.width===s&&n.sWidth===s&&(n.width=n.sWidth=v.width),n.height===s&&n.sHeight===s&&(n.height=n.sHeight=v.height),a&&(a.width=n.width,a.height=n.height),n.sWidth!==s&&n.sHeight!==s&&n.sx!==s&&n.sy!==s?(n.width===s&&(n.width=n.sWidth),n.height===s&&(n.height=n.sHeight),n.cropFromCenter&&(n.sx+=n.sWidth/2,n.sy+=n.sHeight/2),n.sy-n.sHeight/2<0&&(n.sy=n.sHeight/2),n.sy+n.sHeight/2>v.height&&(n.sy=v.height-n.sHeight/2),n.sx-n.sWidth/2<0&&(n.sx=n.sWidth/2),n.sx+n.sWidth/2>v.width&&(n.sx=v.width-n.sWidth/2),_(e,t,n,n.width,n.height),t.drawImage(v,n.sx-n.sWidth/2,n.sy-n.sHeight/2,n.sWidth,n.sHeight,n.x-n.width/2,n.y-n.height/2,n.width,n.height)):(_(e,t,n,n.width,n.height),t.drawImage(v,n.x-n.width/2,n.y-n.height/2,n.width,n.height)),t.beginPath(),t.rect(n.x-n.width/2,n.y-n.height/2,n.width,n.height),V(e,t,n),t.closePath(),x(t,n),w(t,r,n)}function n(e,t,n,a,s){return function(){var l=$(e);r(e,t,n,a,s),a.layer?W(l,n,s,"load"):a.load&&a.load.call(l[0],s),a.layer&&(s._masks=n.transforms.masks.slice(0),a._next&&l.drawLayers({clear:i,resetFire:o,index:a._next}))}}var a=this,l,c,g,d,u,y,v,p,b,L=Ot.imageCache;for(c=0;c<a.length;c+=1)l=a[c],g=f(a[c]),g&&(d=k(a[c]),u=new h(e),y=A(a[c],u,e,Tr),u.visible&&(b=u.source,p=b.getContext,b.src||p?v=b:b&&(L[b]&&L[b].complete?v=L[b]:(v=new t,b.match(/^data:/i)||(v.crossOrigin=u.crossOrigin),v.src=b,L[b]=v)),v&&(v.complete||p?n(l,g,d,u,y)():(v.onload=n(l,g,d,u,y),v.src=v.src))));return a},$.fn.createPattern=function Pr(e){function r(){c=a.createPattern(i,o.repeat),o.load&&o.load.call(n[0],c)}var n=this,a,o,i,l,c,g;return a=f(n[0]),a?(o=new h(e),g=o.source,bt(g)?(i=$("<canvas />")[0],i.width=o.width,i.height=o.height,l=f(i),g.call(i,l),r()):(l=g.getContext,g.src||l?i=g:(i=new t,i.crossOrigin=o.crossOrigin,i.src=g),i.complete||l?r():(i.onload=r(),i.src=i.src))):c=s,c},$.fn.createGradient=function Rr(e){var t=this,r,n,a,o=[],i,c,g,d,u,y,v;if(n=new h(e),r=f(t[0])){for(n.x1=n.x1||0,n.y1=n.y1||0,n.x2=n.x2||0,n.y2=n.y2||0,a=n.r1!==s&&n.r2!==s?r.createRadialGradient(n.x1,n.y1,n.r1,n.x2,n.y2,n.r2):r.createLinearGradient(n.x1,n.y1,n.x2,n.y2),d=1;n["c"+d]!==l;d+=1)o.push(n["s"+d]!==l?n["s"+d]:s);for(i=o.length,o[0]===s&&(o[0]=0),o[i-1]===s&&(o[i-1]=1),d=0;i>d;d+=1){if(o[d]!==s){for(y=1,v=0,c=o[d],u=d+1;i>u;u+=1){if(o[u]!==s){g=o[u];break}y+=1}c>g&&(o[u]=o[d])}else o[d]===s&&(v+=1,o[d]=c+v*((g-c)/y));a.addColorStop(o[d],n["c"+(d+1)])}}else a=s;return a},$.fn.setPixels=function Xr(e){var t=this,r,n,a,o,i,l,c,g,d,u;for(n=0;n<t.length;n+=1)if(r=t[n],a=f(r),a&&(o=new h(e),i=A(r,o,e,Xr),_(t[n],a,o,o.width,o.height),(o.width===s||o.height===s)&&(o.width=r.width,o.height=r.height,o.x=o.width/2,o.y=o.height/2),0!==o.width&&0!==o.height)){if(c=a.getImageData(o.x-o.width/2,o.y-o.height/2,o.width,o.height),g=c.data,u=g.length,o.each)for(d=0;u>d;d+=4)l={r:g[d],g:g[d+1],b:g[d+2],a:g[d+3]},o.each.call(r,l,o),g[d]=l.r,g[d+1]=l.g,g[d+2]=l.b,g[d+3]=l.a;a.putImageData(c,o.x-o.width/2,o.y-o.height/2),a.restore()}return t},$.fn.getCanvasImage=function Yr(e,t){var r=this,n,a=s;return 0!==r.length&&(n=r[0],n.toDataURL&&(t===l&&(t=1),a=n.toDataURL("image/"+e,t))),a},$.fn.detectPixelRatio=function Or(e){var t=this,r,n,a,i,s,l,h,c,g,d;for(a=0;a<t.length;a+=1)n=t[a],r=$(t[a]),i=f(n),d=k(t[a]),d.scaled||(s=window.devicePixelRatio||1,l=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,h=s/l,1!==h&&(c=n.width,g=n.height,n.width=c*h,n.height=g*h,n.style.width=c+"px",n.style.height=g+"px",i.scale(h,h)),d.pixelRatio=h,d.scaled=o,e&&e.call(n,h));
return t},Wt.clearCache=function zr(){var e;for(e in Ot)Ot.hasOwnProperty(e)&&(Ot[e]={})},$.support.canvas=$("<canvas />")[0].getContext!==l,mt(Wt,{defaults:vt,prefs:pt,setGlobalProps:m,transformShape:_,detectEvents:V,closePath:b,setCanvasFont:dt,measureText:ut}),$.jCanvas=Wt,$.jCanvasObject=h}(jQuery,document,Image,Array,Math,parseFloat,!0,!1,null);