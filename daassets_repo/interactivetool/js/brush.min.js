!function($){$.fn.brushTool=function(o){var t=this;t.unbind(),o.clicks=0;var e,n,s,c,r=function(){t.drawLine({strokeWidth:o.stroke,strokeStyle:o.color,strokeCap:"round",strokeJoin:"round",x1:e,y1:n,x2:s,y2:c})};t.on(o.getTouchEventName("mousedown"),function(r){return o.hist.push(o.last.src=t[0].toDataURL("image/png")),o.undoHist.length=0,o.press===!0&&(o.clicks=0),0===o.clicks&&(o.drag=!0,e=r.offsetX,n=r.offsetY,s=e,c=n,console.log(e,n),t.drawArc({fillStyle:o.color,x:e,y:n,radius:o.stroke/2,start:0,end:360}),o.clicks+=1),console.log("DOWN"),!1}),t.on(o.getTouchEventName("mouseup"),function(){console.log("UP"),o.drag=!1,o.last.src=t[0].toDataURL("image/png"),o.clicks=0}),t.on(o.getTouchEventName("mousemove"),function(t){o.drag===!0&&o.clicks>=1&&(console.log("DRAG"),e=s,n=c,s=t.offsetX,c=t.offsetY,r())})}}(jQuery);