/* global ActiveText, Innovation */
Innovation.Controls = function(options) {
    'use strict';

    if(!options) {
        options = {};
    }

    var leftButtons = (options.leftButtons) ? options.leftButtons : 'settings';
    var rightButtons = (options.rightButtons) ? options.rightButtons : 'contents,previous,next';

    function init(activeTextInstance) {
        if(!activeTextInstance.options.defaults) {
            activeTextInstance.options.defaults = {};
        }
        activeTextInstance.options.defaults.generatePageEdges = false;

        activeTextInstance.options.containerCoordinates = {
            top: 10,
            right: 10,
            bottom: 10,
            left: 10
        };

        var contentsSVG = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="50%" ' +
            'height="50%" viewBox="0 0 54.988 10.596" enable-background="new 0 0 54.988 10.596" xml:space="preserve">' +
            '<g>' +
            '<path fill="url(#SVGID_1_)" d="M7.554,1.005c0.693,0.67,1.079,1.431,1.155,2.283H7.383C7.235,2.641,6.941,2.128,6.5,1.75S5.44,1.183,4.644,1.183 c-0.971,0-1.755,0.348-2.353,1.043C1.693,2.921,1.395,3.988,1.395,5.424c0,1.177,0.27,2.131,0.809,2.863 c0.54,0.732,1.344,1.098,2.414,1.098c0.985,0,1.735-0.385,2.25-1.155c0.273-0.406,0.477-0.939,0.611-1.6h1.326 C8.688,7.688,8.3,8.575,7.643,9.29c-0.789,0.861-1.852,1.292-3.189,1.292c-1.153,0-2.122-0.354-2.906-1.06 C0.516,8.587,0,7.144,0,5.192C0,3.71,0.387,2.495,1.162,1.546C2,0.515,3.155,0,4.628,0C5.885,0,6.86,0.335,7.554,1.005z"/>' +
            '<path fill="url(#SVGID_1_)" d="M15.702,3.725c0.647,0.628,0.971,1.553,0.971,2.773c0,1.18-0.285,2.154-0.855,2.923c-0.57,0.77-1.455,1.154-2.654,1.154 c-1,0-1.794-0.34-2.383-1.021S9.898,7.959,9.898,6.812c0-1.229,0.31-2.208,0.93-2.937c0.62-0.729,1.453-1.093,2.498-1.093 C14.263,2.782,15.055,3.097,15.702,3.725z M14.938,8.59c0.3-0.617,0.45-1.303,0.45-2.059c0-0.683-0.108-1.238-0.325-1.666 c-0.342-0.674-0.933-1.011-1.771-1.011c-0.744,0-1.285,0.287-1.623,0.86s-0.507,1.266-0.507,2.076c0,0.778,0.169,1.427,0.507,1.946 s0.874,0.778,1.609,0.778C14.085,9.516,14.638,9.207,14.938,8.59z"/>' +
            '<path fill="url(#SVGID_1_)" d="M18.184,2.994h1.169v1.039c0.346-0.428,0.713-0.736,1.101-0.923s0.818-0.28,1.292-0.28c1.039,0,1.741,0.362,2.105,1.087 c0.201,0.396,0.301,0.964,0.301,1.702v4.696H22.9V5.701c0-0.447-0.066-0.807-0.198-1.08c-0.219-0.456-0.615-0.684-1.189-0.684 c-0.292,0-0.531,0.03-0.718,0.089c-0.337,0.1-0.633,0.301-0.889,0.602c-0.205,0.242-0.338,0.491-0.4,0.749 s-0.092,0.625-0.092,1.104v3.835h-1.23V2.994z"/>' +
            '<path fill="url(#SVGID_1_)" d="M26.216,0.95h1.244v2.044h1.169v1.005H27.46v4.778c0,0.255,0.086,0.426,0.26,0.513c0.096,0.05,0.255,0.075,0.479,0.075 c0.059,0,0.123-0.001,0.191-0.004s0.148-0.011,0.239-0.023v0.978c-0.141,0.041-0.288,0.071-0.441,0.089s-0.318,0.027-0.496,0.027 c-0.574,0-0.964-0.147-1.169-0.441s-0.308-0.676-0.308-1.145V3.999h-0.991V2.994h0.991V0.95z"/>' +
            '<path fill="url(#SVGID_1_)" d="M34.381,3.196c0.485,0.244,0.854,0.56,1.107,0.947c0.245,0.369,0.408,0.8,0.489,1.292c0.073,0.337,0.109,0.875,0.109,1.613 h-5.325c0.022,0.745,0.197,1.342,0.522,1.792c0.325,0.45,0.83,0.675,1.512,0.675c0.638,0,1.146-0.213,1.526-0.639 c0.212-0.247,0.363-0.533,0.452-0.858h1.21c-0.032,0.269-0.138,0.568-0.318,0.899s-0.381,0.601-0.603,0.81 c-0.371,0.365-0.83,0.611-1.377,0.738c-0.294,0.073-0.626,0.109-0.998,0.109c-0.906,0-1.673-0.332-2.303-0.995 c-0.63-0.663-0.944-1.592-0.944-2.786c0-1.176,0.317-2.13,0.951-2.864c0.634-0.734,1.463-1.101,2.486-1.101 C33.396,2.83,33.897,2.952,34.381,3.196z M34.822,6.07c-0.05-0.533-0.165-0.959-0.346-1.278c-0.334-0.592-0.893-0.889-1.674-0.889 c-0.561,0-1.03,0.204-1.41,0.612c-0.38,0.408-0.581,0.926-0.604,1.555H34.822z"/>' +
            '<path fill="url(#SVGID_1_)" d="M37.646,2.994h1.169v1.039c0.346-0.428,0.713-0.736,1.101-0.923s0.818-0.28,1.292-0.28c1.039,0,1.741,0.362,2.105,1.087 c0.201,0.396,0.301,0.964,0.301,1.702v4.696h-1.251V5.701c0-0.447-0.066-0.807-0.198-1.08c-0.219-0.456-0.615-0.684-1.189-0.684 c-0.292,0-0.531,0.03-0.718,0.089c-0.337,0.1-0.633,0.301-0.889,0.602c-0.205,0.242-0.338,0.491-0.4,0.749 s-0.092,0.625-0.092,1.104v3.835h-1.23V2.994z"/>' +
            '<path fill="url(#SVGID_1_)" d="M45.678,0.95h1.244v2.044h1.169v1.005h-1.169v4.778c0,0.255,0.086,0.426,0.26,0.513c0.096,0.05,0.255,0.075,0.479,0.075 c0.059,0,0.123-0.001,0.191-0.004S48,9.35,48.091,9.338v0.978c-0.141,0.041-0.288,0.071-0.441,0.089s-0.318,0.027-0.496,0.027 c-0.574,0-0.964-0.147-1.169-0.441s-0.308-0.676-0.308-1.145V3.999h-0.991V2.994h0.991V0.95z"/>' +
            '<path fill="url(#SVGID_1_)" d="M50.053,8.019c0.037,0.41,0.142,0.725,0.314,0.943c0.316,0.396,0.865,0.595,1.646,0.595c0.465,0,0.875-0.099,1.228-0.297 s0.53-0.505,0.53-0.919c0-0.314-0.141-0.554-0.424-0.718c-0.181-0.1-0.537-0.216-1.07-0.349l-0.994-0.246 c-0.634-0.155-1.102-0.328-1.403-0.52c-0.537-0.333-0.806-0.793-0.806-1.381c0-0.693,0.253-1.253,0.759-1.682 c0.505-0.428,1.186-0.643,2.04-0.643c1.118,0,1.923,0.324,2.417,0.971c0.31,0.41,0.46,0.852,0.451,1.326H53.58 c-0.023-0.276-0.124-0.528-0.301-0.754c-0.29-0.322-0.791-0.483-1.505-0.483c-0.476,0-0.836,0.088-1.081,0.266 c-0.245,0.177-0.367,0.411-0.367,0.702c0,0.318,0.161,0.572,0.483,0.763c0.186,0.114,0.459,0.214,0.822,0.3l0.829,0.198 c0.901,0.214,1.504,0.421,1.811,0.622c0.479,0.314,0.718,0.809,0.718,1.483c0,0.652-0.25,1.214-0.751,1.688 s-1.263,0.711-2.288,0.711c-1.103,0-1.883-0.247-2.342-0.742c-0.459-0.495-0.705-1.106-0.737-1.835H50.053z"/>' +
            '</g>' +
            '</svg>';

        var nextSVG = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="50%" ' +
            'height="50%" viewBox="0 0 6.364 11.29" enable-background="new 0 0 6.364 11.29" xml:space="preserve">' +
            '<polygon fill="url(#SVGID_1_)" points="5.657,6.364 6.364,5.657 5.657,4.95 4.48,3.773 0.707,0 0,0.707 4.95,5.657 0.023,10.583 0.73,11.29 3.554,8.467 "/>' +
            '</svg>';

        var previousSVG = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="50%" ' +
            'height="50%" viewBox="0 0 6.363 11.29" enable-background="new 0 0 6.363 11.29" xml:space="preserve">' +
            '<polygon fill="url(#SVGID_1_)" points="0.707,4.926 0,5.633 0.707,6.34 1.883,7.517 5.655,11.29 6.363,10.583 1.414,5.633 6.34,0.707 5.632,0 2.809,2.824 "/>' +
            '</svg>';

        var settingsSVG = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="50%" ' +
            'height="50%" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve"><path fill="url(#SVGID_1_)" ' +
            'd="M28,2v3.325v1.549l1.5,0.388c1.697,0.438,3.316,1.12,4.812,2.028l1.342,0.814l1.109-1.11l2.379-2.378 l4.242,' +
            '4.242l-2.459,2.459l-1.083,1.082l0.763,1.328c0.846,1.473,1.479,3.067,1.879,4.739L42.852,22h1.577H48v6h-3.74h-' +
            '1.523 l-0.405,1.468c-0.438,1.583-1.094,3.102-1.951,4.514l-0.814,1.343l1.11,1.109l2.708,2.708l-4.242,4.242l-' +
            '2.789-2.788l-1.083-1.083 l-1.327,0.763c-1.377,0.792-2.872,1.398-4.442,1.803L28,42.465v1.55V48h-6v-3.985v-1.' +
            '55l-1.501-0.387 c-1.57-0.405-3.065-1.011-4.442-1.803l-1.328-0.763l-1.082,1.083l-2.789,2.789l-4.242-4.243l2.7' +
            '08-2.708l1.11-1.109l-0.815-1.343 c-0.857-1.412-1.514-2.931-1.951-4.514L7.263,28H5.74H2v-6h3.57h1.577l0.368-1' +
            '.533c0.4-1.672,1.033-3.267,1.879-4.739l0.763-1.328 l-1.083-1.082l-2.459-2.459l4.242-4.242l2.379,2.378l1.109,1' +
            '.11l1.342-0.814c1.496-0.908,3.115-1.59,4.812-2.028L22,6.874V5.325V2 H28 M25,34.002c4.963,0,9-4.038,9-9.002c0-' +
            '4.963-4.037-9.001-9-9.001S16,20.037,16,25C16,29.964,20.037,34.002,25,34.002 M30,0H20 v5.325c-1.91,0.493-3.705' +
            ',1.257-5.35,2.255l-3.793-3.793l-7.07,7.071l3.873,3.873C6.726,16.358,6.019,18.127,5.57,20H0v10h5.74 c0.494,1.78' +
            '8,1.228,3.47,2.169,5.02l-4.122,4.122l7.07,7.072l4.203-4.204c1.531,0.88,3.188,1.554,4.94,2.005V50h10v-5.985 c' +
            '1.751-0.451,3.408-1.125,4.939-2.005l4.203,4.203l7.07-7.071l-4.122-4.122c0.94-1.55,1.675-3.232,2.169-5.02H50V' +
            '20h-5.57 c-0.449-1.873-1.155-3.642-2.09-5.269l3.873-3.873l-7.07-7.071L35.35,7.58C33.705,6.582,31.91,5.818,30,' +
            '5.325V0L30,0z M25,32.002 c-3.867,0-7-3.135-7-7.002c0-3.867,3.133-7.001,7-7.001s7,3.134,7,7.001C32,28.867,28.8' +
            '67,32.002,25,32.002L25,32.002z"/>' +
            '</svg>';

        var instance = new ActiveText.UI.BasicControls(activeTextInstance, {
            leftButtons: leftButtons,
            rightButtons: rightButtons,
            leftButtonOptions: {
                left: '10px'
            },
            rightButtonOptions: {
                right: '10px'
            },
            openByDefault: true,
            overlay: false,
            barHeight: 74,
            barStyles: {
                backgroundColor: ActiveText.ColourUtils.convertHexToRGB('#000000', 0.8)
            },
            minWidth: 530,
            scaleMode: 'scale',
            buttonStyles: {
                width: 44,
                height: 44,
                barClass: 'innovation-2014'
            },
            options: {
                contents: {
                    popupnavwidth: 280,
                    svgData: contentsSVG,
                    style: {
                        width: 119
                    }
                },
                next: {
                    svgData: nextSVG
                },
                previous: {
                    svgData: previousSVG
                },
                settings: {
                    svgData: settingsSVG
                }
            }
        });
        activeTextInstance.extensions.push(instance);
        return instance;
    }

    return  {
        init: init,
        key: 'innovationcontrols'
    };
};