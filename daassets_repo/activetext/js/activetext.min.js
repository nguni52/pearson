/*! ActiveText ePub Renderer version 0.0.0 */
function FastClick(a) {
    "use strict";
    var b, c = this;
    if (this.trackingClick = !1, this.trackingClickStart = 0, this.targetElement = null, this.touchStartX = 0, this.touchStartY = 0, this.lastTouchIdentifier = 0, this.touchBoundary = 10, this.layer = a, !a || !a.nodeType)throw new TypeError("Layer must be a document node");
    this.onClick = function () {
        return FastClick.prototype.onClick.apply(c, arguments)
    }, this.onMouse = function () {
        return FastClick.prototype.onMouse.apply(c, arguments)
    }, this.onTouchStart = function () {
        return FastClick.prototype.onTouchStart.apply(c, arguments)
    }, this.onTouchMove = function () {
        return FastClick.prototype.onTouchMove.apply(c, arguments)
    }, this.onTouchEnd = function () {
        return FastClick.prototype.onTouchEnd.apply(c, arguments)
    }, this.onTouchCancel = function () {
        return FastClick.prototype.onTouchCancel.apply(c, arguments)
    }, FastClick.notNeeded(a) || (this.deviceIsAndroid && (a.addEventListener("mouseover", this.onMouse, !0), a.addEventListener("mousedown", this.onMouse, !0), a.addEventListener("mouseup", this.onMouse, !0)), a.addEventListener("click", this.onClick, !0), a.addEventListener("touchstart", this.onTouchStart, !1), a.addEventListener("touchmove", this.onTouchMove, !1), a.addEventListener("touchend", this.onTouchEnd, !1), a.addEventListener("touchcancel", this.onTouchCancel, !1), Event.prototype.stopImmediatePropagation || (a.removeEventListener = function (b, c, d) {
        var e = Node.prototype.removeEventListener;
        "click" === b ? e.call(a, b, c.hijacked || c, d) : e.call(a, b, c, d)
    }, a.addEventListener = function (b, c, d) {
        var e = Node.prototype.addEventListener;
        "click" === b ? e.call(a, b, c.hijacked || (c.hijacked = function (a) {
            a.propagationStopped || c(a)
        }), d) : e.call(a, b, c, d)
    }), "function" == typeof a.onclick && (b = a.onclick, a.addEventListener("click", function (a) {
        b(a)
    }, !1), a.onclick = null))
}
!function (a) {
    "use strict";
    a.SM2_DEFER = !0
}(window), window.Modernizr = function (a, b, c) {
    function d(a) {
        s.cssText = a
    }

    function e(a, b) {
        return typeof a === b
    }

    function f(a, b) {
        return!!~("" + a).indexOf(b)
    }

    function g(a, b) {
        for (var d in a) {
            var e = a[d];
            if (!f(e, "-") && s[e] !== c)return"pfx" == b ? e : !0
        }
        return!1
    }

    function h(a, b, d) {
        for (var f in a) {
            var g = b[a[f]];
            if (g !== c)return d === !1 ? a[f] : e(g, "function") ? g.bind(d || b) : g
        }
        return!1
    }

    function i(a, b, c) {
        var d = a.charAt(0).toUpperCase() + a.slice(1), f = (a + " " + v.join(d + " ") + d).split(" ");
        return e(b, "string") || e(b, "undefined") ? g(f, b) : (f = (a + " " + w.join(d + " ") + d).split(" "), h(f, b, c))
    }

    var j, k, l, m = "2.7.1", n = {}, o = !0, p = b.documentElement, q = "modernizr", r = b.createElement(q), s = r.style, t = ({}.toString, " -webkit- -moz- -o- -ms- ".split(" ")), u = "Webkit Moz O ms", v = u.split(" "), w = u.toLowerCase().split(" "), x = {svg: "http://www.w3.org/2000/svg"}, y = {}, z = [], A = z.slice, B = function (a, c, d, e) {
        var f, g, h, i, j = b.createElement("div"), k = b.body, l = k || b.createElement("body");
        if (parseInt(d, 10))for (; d--;)h = b.createElement("div"), h.id = e ? e[d] : q + (d + 1), j.appendChild(h);
        return f = ["&#173;", '<style id="s', q, '">', a, "</style>"].join(""), j.id = q, (k ? j : l).innerHTML += f, l.appendChild(j), k || (l.style.background = "", l.style.overflow = "hidden", i = p.style.overflow, p.style.overflow = "hidden", p.appendChild(l)), g = c(j, a), k ? j.parentNode.removeChild(j) : (l.parentNode.removeChild(l), p.style.overflow = i), !!g
    }, C = {}.hasOwnProperty;
    l = e(C, "undefined") || e(C.call, "undefined") ? function (a, b) {
        return b in a && e(a.constructor.prototype[b], "undefined")
    } : function (a, b) {
        return C.call(a, b)
    }, Function.prototype.bind || (Function.prototype.bind = function (a) {
        var b = this;
        if ("function" != typeof b)throw new TypeError;
        var c = A.call(arguments, 1), d = function () {
            if (this instanceof d) {
                var e = function () {
                };
                e.prototype = b.prototype;
                var f = new e, g = b.apply(f, c.concat(A.call(arguments)));
                return Object(g) === g ? g : f
            }
            return b.apply(a, c.concat(A.call(arguments)))
        };
        return d
    }), y.canvas = function () {
        var a = b.createElement("canvas");
        return!(!a.getContext || !a.getContext("2d"))
    }, y.touch = function () {
        var c;
        return"ontouchstart"in a || a.DocumentTouch && b instanceof DocumentTouch ? c = !0 : B(["@media (", t.join("touch-enabled),("), q, ")", "{#modernizr{top:9px;position:absolute}}"].join(""), function (a) {
            c = 9 === a.offsetTop
        }), c
    }, y.rgba = function () {
        return d("background-color:rgba(150,255,150,.5)"), f(s.backgroundColor, "rgba")
    }, y.multiplebgs = function () {
        return d("background:url(https://),url(https://),red url(https://)"), /(url\s*\(.*?){3}/.test(s.background)
    }, y.boxshadow = function () {
        return i("boxShadow")
    }, y.csstransforms = function () {
        return!!i("transform")
    }, y.csstransforms3d = function () {
        var a = !!i("perspective");
        return a && "webkitPerspective"in p.style && B("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}", function (b) {
            a = 9 === b.offsetLeft && 3 === b.offsetHeight
        }), a
    }, y.csstransitions = function () {
        return i("transition")
    }, y.audio = function () {
        var a = b.createElement("audio"), c = !1;
        try {
            (c = !!a.canPlayType) && (c = new Boolean(c), c.ogg = a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""), c.mp3 = a.canPlayType("audio/mpeg;").replace(/^no$/, ""), c.wav = a.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""), c.m4a = (a.canPlayType("audio/x-m4a;") || a.canPlayType("audio/aac;")).replace(/^no$/, ""))
        } catch (d) {
        }
        return c
    }, y.localstorage = function () {
        try {
            return localStorage.setItem(q, q), localStorage.removeItem(q), !0
        } catch (a) {
            return!1
        }
    }, y.svg = function () {
        return!!b.createElementNS && !!b.createElementNS(x.svg, "svg").createSVGRect
    };
    for (var D in y)l(y, D) && (k = D.toLowerCase(), n[k] = y[D](), z.push((n[k] ? "" : "no-") + k));
    return n.addTest = function (a, b) {
        if ("object" == typeof a)for (var d in a)l(a, d) && n.addTest(d, a[d]); else {
            if (a = a.toLowerCase(), n[a] !== c)return n;
            b = "function" == typeof b ? b() : b, "undefined" != typeof o && o && (p.className += " " + (b ? "" : "no-") + a), n[a] = b
        }
        return n
    }, d(""), r = j = null, function (a, b) {
        function c(a, b) {
            var c = a.createElement("p"), d = a.getElementsByTagName("head")[0] || a.documentElement;
            return c.innerHTML = "x<style>" + b + "</style>", d.insertBefore(c.lastChild, d.firstChild)
        }

        function d() {
            var a = s.elements;
            return"string" == typeof a ? a.split(" ") : a
        }

        function e(a) {
            var b = r[a[p]];
            return b || (b = {}, q++, a[p] = q, r[q] = b), b
        }

        function f(a, c, d) {
            if (c || (c = b), k)return c.createElement(a);
            d || (d = e(c));
            var f;
            return f = d.cache[a] ? d.cache[a].cloneNode() : o.test(a) ? (d.cache[a] = d.createElem(a)).cloneNode() : d.createElem(a), !f.canHaveChildren || n.test(a) || f.tagUrn ? f : d.frag.appendChild(f)
        }

        function g(a, c) {
            if (a || (a = b), k)return a.createDocumentFragment();
            c = c || e(a);
            for (var f = c.frag.cloneNode(), g = 0, h = d(), i = h.length; i > g; g++)f.createElement(h[g]);
            return f
        }

        function h(a, b) {
            b.cache || (b.cache = {}, b.createElem = a.createElement, b.createFrag = a.createDocumentFragment, b.frag = b.createFrag()), a.createElement = function (c) {
                return s.shivMethods ? f(c, a, b) : b.createElem(c)
            }, a.createDocumentFragment = Function("h,f", "return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(" + d().join().replace(/[\w\-]+/g, function (a) {
                return b.createElem(a), b.frag.createElement(a), 'c("' + a + '")'
            }) + ");return n}")(s, b.frag)
        }

        function i(a) {
            a || (a = b);
            var d = e(a);
            return!s.shivCSS || j || d.hasCSS || (d.hasCSS = !!c(a, "article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")), k || h(a, d), a
        }

        var j, k, l = "3.7.0", m = a.html5 || {}, n = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i, o = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i, p = "_html5shiv", q = 0, r = {};
        !function () {
            try {
                var a = b.createElement("a");
                a.innerHTML = "<xyz></xyz>", j = "hidden"in a, k = 1 == a.childNodes.length || function () {
                    b.createElement("a");
                    var a = b.createDocumentFragment();
                    return"undefined" == typeof a.cloneNode || "undefined" == typeof a.createDocumentFragment || "undefined" == typeof a.createElement
                }()
            } catch (c) {
                j = !0, k = !0
            }
        }();
        var s = {elements: m.elements || "abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video", version: l, shivCSS: m.shivCSS !== !1, supportsUnknownElements: k, shivMethods: m.shivMethods !== !1, type: "default", shivDocument: i, createElement: f, createDocumentFragment: g};
        a.html5 = s, i(b)
    }(this, b), n._version = m, n._prefixes = t, n._domPrefixes = w, n._cssomPrefixes = v, n.testProp = function (a) {
        return g([a])
    }, n.testAllProps = i, n.testStyles = B, n.prefixed = function (a, b, c) {
        return b ? i(a, b, c) : i(a, "pfx")
    }, p.className = p.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") + (o ? " js " + z.join(" ") : ""), n
}(this, this.document), function (a, b, c, d) {
    "use strict";
    var e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F = [].indexOf || function (a) {
        for (var b = 0, c = this.length; c > b; b++)if (b in this && this[b] === a)return b;
        return-1
    };
    y = "notify", x = y + "js", g = y + "!blank", A = {t: "top", m: "middle", b: "bottom", l: "left", c: "center", r: "right"}, q = ["l", "c", "r"], E = ["t", "m", "b"], u = ["t", "b", "l", "r"], v = {t: "b", m: null, b: "t", l: "r", c: null, r: "l"}, w = function (a) {
        var b;
        return b = [], c.each(a.split(/\W+/), function (a, c) {
            var d;
            return d = c.toLowerCase().charAt(0), A[d] ? b.push(d) : void 0
        }), b
    }, D = {}, h = {name: "core", html: '<div class="' + x + '-wrapper">\n  <div class="' + x + '-arrow"></div>\n  <div class="' + x + '-container"></div>\n</div>', css: "." + x + "-corner {\n  position: fixed;\n  margin: 5px;\n  z-index: 1050;\n}\n\n." + x + "-corner ." + x + "-wrapper,\n." + x + "-corner ." + x + "-container {\n  position: relative;\n  display: block;\n  height: inherit;\n  width: inherit;\n  margin: 3px;\n}\n\n." + x + "-wrapper {\n  z-index: 1;\n  position: absolute;\n  display: inline-block;\n  height: 0;\n  width: 0;\n}\n\n." + x + "-container {\n  display: none;\n  z-index: 1;\n  position: absolute;\n  cursor: pointer;\n}\n\n[data-notify-text],[data-notify-html] {\n  position: relative;\n}\n\n." + x + "-arrow {\n  position: absolute;\n  z-index: 2;\n  width: 0;\n  height: 0;\n}"}, C = {"border-radius": ["-webkit-", "-moz-"]}, o = function (a) {
        return D[a]
    }, f = function (a, b) {
        var d, e, f, g;
        if (!a)throw"Missing Style name";
        if (!b)throw"Missing Style definition";
        if (!b.html)throw"Missing Style HTML";
        return(null != (g = D[a]) ? g.cssElem : void 0) && D[a].cssElem.remove(), b.name = a, D[a] = b, d = "", b.classes && c.each(b.classes, function (a, e) {
            return d += "." + x + "-" + b.name + "-" + a + " {\n", c.each(e, function (a, b) {
                return C[a] && c.each(C[a], function (c, e) {
                    return d += "  " + e + a + ": " + b + ";\n"
                }), d += "  " + a + ": " + b + ";\n"
            }), d += "}\n"
        }), b.css && (d += "/* styles for " + b.name + " */\n" + b.css), d && (b.cssElem = t(d), b.cssElem.attr("id", "notify-" + b.name)), f = {}, e = c(b.html), m("html", e, f), m("text", e, f), b.fields = f
    }, t = function (a) {
        var b;
        b = i("style"), b.attr("type", "text/css"), c("head").append(b);
        try {
            b.html(a)
        } catch (d) {
            b[0].styleSheet.cssText = a
        }
        return b
    }, m = function (a, b, d) {
        var e;
        return"html" !== a && (a = "text"), e = "data-notify-" + a, l(b, "[" + e + "]").each(function () {
            var b;
            return b = c(this).attr(e), b || (b = g), d[b] = a
        })
    }, l = function (a, b) {
        return a.is(b) ? a : a.find(b)
    }, z = {clickToHide: !0, autoHide: !0, autoHideDelay: 5e3, arrowShow: !0, arrowSize: 5, breakNewLines: !0, elementPosition: "bottom", globalPosition: "top right", style: "bootstrap", className: "error", showAnimation: "slideDown", showDuration: 400, hideAnimation: "slideUp", hideDuration: 200, gap: 5}, s = function (a, b) {
        var d;
        return d = function () {
        }, d.prototype = a, c.extend(!0, new d, b)
    }, j = function (a) {
        return c.extend(z, a)
    }, i = function (a) {
        return c("<" + a + "></" + a + ">")
    }, p = {}, n = function (a) {
        var b;
        return a.is("[type=radio]") && (b = a.parents("form:first").find("[type=radio]").filter(function (b, d) {
            return c(d).attr("name") === a.attr("name")
        }), a = b.first()), a
    }, r = function (a, b, c) {
        var e, f;
        if ("string" == typeof c)c = parseInt(c, 10); else if ("number" != typeof c)return;
        if (!isNaN(c))return e = A[v[b.charAt(0)]], f = b, a[e] !== d && (b = A[e.charAt(0)], c = -c), a[b] === d ? a[b] = c : a[b] += c, null
    }, B = function (a, b, c) {
        if ("l" === a || "t" === a)return 0;
        if ("c" === a || "m" === a)return c / 2 - b / 2;
        if ("r" === a || "b" === a)return c - b;
        throw"Invalid alignment"
    }, k = function (a) {
        return k.e = k.e || i("div"), k.e.text(a).html()
    }, e = function () {
        function a(a, b, d) {
            "string" == typeof d && (d = {className: d}), this.options = s(z, c.isPlainObject(d) ? d : {}), this.loadHTML(), this.wrapper = c(h.html), this.wrapper.data(x, this), this.arrow = this.wrapper.find("." + x + "-arrow"), this.container = this.wrapper.find("." + x + "-container"), this.container.append(this.userContainer), a && a.length && (this.elementType = a.attr("type"), this.originalElement = a, this.elem = n(a), this.elem.data(x, this), this.elem.before(this.wrapper)), this.container.hide(), this.run(b)
        }

        return a.prototype.loadHTML = function () {
            var a;
            return a = this.getStyle(), this.userContainer = c(a.html), this.userFields = a.fields
        }, a.prototype.show = function (a, b) {
            var c, d, e, f, g, h = this;
            if (d = function () {
                return a || h.elem || h.destroy(), b ? b() : void 0
            }, g = this.container.parent().parents(":hidden").length > 0, e = this.container.add(this.arrow), c = [], g && a)f = "show"; else if (g && !a)f = "hide"; else if (!g && a)f = this.options.showAnimation, c.push(this.options.showDuration); else {
                if (g || a)return d();
                f = this.options.hideAnimation, c.push(this.options.hideDuration)
            }
            return c.push(d), e[f].apply(e, c)
        }, a.prototype.setGlobalPosition = function () {
            var a, b, d, e, f, g, h, j;
            return j = this.getPosition(), h = j[0], g = j[1], f = A[h], a = A[g], e = h + "|" + g, b = p[e], b || (b = p[e] = i("div"), d = {}, d[f] = 0, "middle" === a ? d.top = "45%" : "center" === a ? d.left = "45%" : d[a] = 0, b.css(d).addClass("" + x + "-corner"), c("body").append(b)), b.prepend(this.wrapper)
        }, a.prototype.setElementPosition = function () {
            var a, b, d, e, f, g, h, i, j, k, l, m, n, o, p, s, t, w, x, y, z, C, D, G, H, I, J, K, L;
            for (D = this.getPosition(), y = D[0], w = D[1], x = D[2], l = this.elem.position(), i = this.elem.outerHeight(), m = this.elem.outerWidth(), j = this.elem.innerHeight(), k = this.elem.innerWidth(), G = this.wrapper.position(), f = this.container.height(), g = this.container.width(), o = A[y], s = v[y], t = A[s], h = {}, h[t] = "b" === y ? i : "r" === y ? m : 0, r(h, "top", l.top - G.top), r(h, "left", l.left - G.left), L = ["top", "left"], H = 0, J = L.length; J > H; H++)z = L[H], p = parseInt(this.elem.css("margin-" + z), 10), p && r(h, z, p);
            if (n = Math.max(0, this.options.gap - (this.options.arrowShow ? d : 0)), r(h, t, n), this.options.arrowShow) {
                for (d = this.options.arrowSize, b = c.extend({}, h), a = this.userContainer.css("border-color") || this.userContainer.css("background-color") || "white", I = 0, K = u.length; K > I; I++)z = u[I], C = A[z], z !== s && (e = C === o ? a : "transparent", b["border-" + C] = "" + d + "px solid " + e);
                r(h, A[s], d), F.call(u, w) >= 0 && r(b, A[w], 2 * d)
            } else this.arrow.hide();
            return F.call(E, y) >= 0 ? (r(h, "left", B(w, g, m)), b && r(b, "left", B(w, d, k))) : F.call(q, y) >= 0 && (r(h, "top", B(w, f, i)), b && r(b, "top", B(w, d, j))), this.container.is(":visible") && (h.display = "block"), this.container.removeAttr("style").css(h), b ? this.arrow.removeAttr("style").css(b) : void 0
        }, a.prototype.getPosition = function () {
            var a, b, c, d, e, f, g, h;
            if (b = this.options.position || (this.elem ? this.options.elementPosition : this.options.globalPosition), a = w(b), 0 === a.length && (a[0] = "b"), c = a[0], F.call(u, c) < 0)throw"Must be one of [" + u + "]";
            return(1 === a.length || (d = a[0], F.call(E, d) >= 0 && (e = a[1], F.call(q, e) < 0)) || (f = a[0], F.call(q, f) >= 0 && (g = a[1], F.call(E, g) < 0))) && (a[1] = (h = a[0], F.call(q, h) >= 0 ? "m" : "l")), 2 === a.length && (a[2] = a[1]), a
        }, a.prototype.getStyle = function (a) {
            var b;
            if (a || (a = this.options.style), a || (a = "default"), b = D[a], !b)throw"Missing style: " + a;
            return b
        }, a.prototype.updateClasses = function () {
            var a, b;
            return a = ["base"], c.isArray(this.options.className) ? a = a.concat(this.options.className) : this.options.className && a.push(this.options.className), b = this.getStyle(), a = c.map(a, function (a) {
                return"" + x + "-" + b.name + "-" + a
            }).join(" "), this.userContainer.attr("class", a)
        }, a.prototype.run = function (a, b) {
            var d, e, f, h, i, j = this;
            if (c.isPlainObject(b) ? c.extend(this.options, b) : "string" === c.type(b) && (this.options.color = b), this.container && !a)return void this.show(!1);
            if (this.container || a) {
                e = {}, c.isPlainObject(a) ? e = a : e[g] = a;
                for (f in e)d = e[f], h = this.userFields[f], h && ("text" === h && (d = k(d), this.options.breakNewLines && (d = d.replace(/\n/g, "<br/>"))), i = f === g ? "" : "=" + f, l(this.userContainer, "[data-notify-" + h + i + "]").html(d));
                return this.updateClasses(), this.elem ? this.setElementPosition() : this.setGlobalPosition(), this.show(!0), this.options.autoHide ? (clearTimeout(this.autohideTimer), this.autohideTimer = setTimeout(function () {
                    return j.show(!1)
                }, this.options.autoHideDelay)) : void 0
            }
        }, a.prototype.destroy = function () {
            return this.wrapper.remove()
        }, a
    }(), c[y] = function (a, b, d) {
        return a && a.nodeName || a.jquery ? c(a)[y](b, d) : (d = b, b = a, new e(null, b, d)), a
    }, c.fn[y] = function (a, b) {
        return c(this).each(function () {
            var d;
            return d = n(c(this)).data(x), d ? d.run(a, b) : new e(c(this), a, b)
        }), this
    }, c.extend(c[y], {defaults: j, addStyle: f, pluginOptions: z, getStyle: o, insertCSS: t}), c(function () {
        return t(h.css).attr("id", "core-notify"), c(b).on("click notify-hide", "." + x + "-wrapper", function (a) {
            var b;
            return b = c(this).data(x), b && (b.options.clickToHide || "notify-hide" === a.type) ? b.show(!1) : void 0
        })
    })
}(window, document, jQuery), $.notify.addStyle("activetext", {html: "<div><span data-notify-text></span></div>", classes: {base: {"white-space": "nowrap", "background-color": "white", padding: "5px", "-webkit-border-radius": "3px", "-moz-border-radius": "3px", "border-radius": "3px", "font-size": "0.8em"}, info: {color: "black", border: "1px solid black"}}}), $.notify.defaults({style: "activetext", className: "info", showAnimation: "fadeIn", showDuration: 100, hideAnimation: "fadeOut", hideDuration: 100}), function () {
    function a(a, b, c) {
        for (var d = (c || 0) - 1, e = a ? a.length : 0; ++d < e;)if (a[d] === b)return d;
        return-1
    }

    function b(b, c) {
        var d = typeof c;
        if (b = b.cache, "boolean" == d || null == c)return b[c] ? 0 : -1;
        "number" != d && "string" != d && (d = "object");
        var e = "number" == d ? c : v + c;
        return b = (b = b[d]) && b[e], "object" == d ? b && a(b, c) > -1 ? 0 : -1 : b ? 0 : -1
    }

    function c(a) {
        var b = this.cache, c = typeof a;
        if ("boolean" == c || null == a)b[a] = !0; else {
            "number" != c && "string" != c && (c = "object");
            var d = "number" == c ? a : v + a, e = b[c] || (b[c] = {});
            "object" == c ? (e[d] || (e[d] = [])).push(a) : e[d] = !0
        }
    }

    function d(a) {
        return a.charCodeAt(0)
    }

    function e(a, b) {
        var c = a.criteria, d = b.criteria;
        if (c !== d) {
            if (c > d || "undefined" == typeof c)return 1;
            if (d > c || "undefined" == typeof d)return-1
        }
        return a.index - b.index
    }

    function f(a) {
        var b = -1, d = a.length, e = a[0], f = a[d / 2 | 0], g = a[d - 1];
        if (e && "object" == typeof e && f && "object" == typeof f && g && "object" == typeof g)return!1;
        var h = i();
        h["false"] = h["null"] = h["true"] = h.undefined = !1;
        var j = i();
        for (j.array = a, j.cache = h, j.push = c; ++b < d;)j.push(a[b]);
        return j
    }

    function g(a) {
        return"\\" + Z[a]
    }

    function h() {
        return r.pop() || []
    }

    function i() {
        return s.pop() || {args: "", array: null, bottom: "", cache: null, configurable: !1, criteria: null, enumerable: !1, "false": !1, firstArg: "", index: 0, init: "", keys: null, leading: !1, loop: "", maxWait: 0, "null": !1, number: null, object: null, push: null, shadowedProps: null, string: null, top: "", trailing: !1, "true": !1, undefined: !1, useHas: !1, value: null, writable: !1}
    }

    function j(a) {
        return"function" != typeof a.toString && "string" == typeof(a + "")
    }

    function l() {
    }

    function m(a) {
        a.length = 0, r.length < x && r.push(a)
    }

    function n(a) {
        var b = a.cache;
        b && n(b), a.array = a.cache = a.criteria = a.object = a.number = a.string = a.value = null, s.length < x && s.push(a)
    }

    function o(a, b, c) {
        b || (b = 0), "undefined" == typeof c && (c = a ? a.length : 0);
        for (var d = -1, e = c - b || 0, f = Array(0 > e ? 0 : e); ++d < e;)f[d] = a[b + d];
        return f
    }

    function p(c) {
        function r(a) {
            return a && "object" == typeof a && !de(a) && Ed.call(a, "__wrapped__") ? a : new s(a)
        }

        function s(a, b) {
            this.__chain__ = !!b, this.__wrapped__ = a
        }

        function x(a, b, c, d, e) {
            var f = a;
            if (c) {
                if (f = c(f), "undefined" != typeof f)return f;
                f = a
            }
            var g = Eb(f);
            if (g) {
                var i = Kd.call(f);
                if (!X[i] || !ae.nodeClass && j(f))return f;
                var k = de(f)
            }
            if (!g || !b)return g ? k ? o(f) : oe({}, f) : f;
            var l = $d[i];
            switch (i) {
                case P:
                case Q:
                    return new l(+f);
                case T:
                case W:
                    return new l(f);
                case V:
                    return l(f.source, D.exec(f))
            }
            var n = !d;
            d || (d = h()), e || (e = h());
            for (var p = d.length; p--;)if (d[p] == a)return e[p];
            return f = k ? l(f.length) : {}, k && (Ed.call(a, "index") && (f.index = a.index), Ed.call(a, "input") && (f.input = a.input)), d.push(a), e.push(f), (k ? ne : re)(a, function (a, g) {
                f[g] = x(a, b, c, d, e)
            }), n && (m(d), m(e)), f
        }

        function Z(a, b, c) {
            if ("function" != typeof a)return Wc;
            if ("undefined" == typeof b)return a;
            var d = a.__bindData__ || ae.funcNames && !a.name;
            if ("undefined" == typeof d) {
                var e = I && Cd.call(a);
                ae.funcNames || !e || E.test(e) || (d = !0), (ae.funcNames || !d) && (d = !ae.funcDecomp || I.test(e), ce(a, d))
            }
            if (d !== !0 && d && 1 & d[1])return a;
            switch (c) {
                case 1:
                    return function (c) {
                        return a.call(b, c)
                    };
                case 2:
                    return function (c, d) {
                        return a.call(b, c, d)
                    };
                case 3:
                    return function (c, d, e) {
                        return a.call(b, c, d, e)
                    };
                case 4:
                    return function (c, d, e, f) {
                        return a.call(b, c, d, e, f)
                    }
            }
            return Gc(a, b)
        }

        function _(a, b, c, d) {
            for (var e = (d || 0) - 1, f = a ? a.length : 0, g = []; ++e < f;) {
                var h = a[e];
                if (h && "object" == typeof h && "number" == typeof h.length && (de(h) || nb(h))) {
                    b || (h = _(h, b, c));
                    var i = -1, j = h.length, k = g.length;
                    for (g.length += j; ++i < j;)g[k++] = h[i]
                } else c || g.push(h)
            }
            return g
        }

        function ab(a, b, c, d, e, f) {
            if (c) {
                var g = c(a, b);
                if ("undefined" != typeof g)return!!g
            }
            if (a === b)return 0 !== a || 1 / a == 1 / b;
            var i = typeof a, k = typeof b;
            if (!(a !== a || a && Y[i] || b && Y[k]))return!1;
            if (null == a || null == b)return a === b;
            var l = Kd.call(a), n = Kd.call(b);
            if (l == N && (l = U), n == N && (n = U), l != n)return!1;
            switch (l) {
                case P:
                case Q:
                    return+a == +b;
                case T:
                    return a != +a ? b != +b : 0 == a ? 1 / a == 1 / b : a == +b;
                case V:
                case W:
                    return a == rd(b)
            }
            var o = l == O;
            if (!o) {
                if (Ed.call(a, "__wrapped__ ") || Ed.call(b, "__wrapped__"))return ab(a.__wrapped__ || a, b.__wrapped__ || b, c, d, e, f);
                if (l != U || !ae.nodeClass && (j(a) || j(b)))return!1;
                var p = !ae.argsObject && nb(a) ? pd : a.constructor, q = !ae.argsObject && nb(b) ? pd : b.constructor;
                if (p != q && !(Db(p) && p instanceof p && Db(q) && q instanceof q))return!1
            }
            var r = !e;
            e || (e = h()), f || (f = h());
            for (var s = e.length; s--;)if (e[s] == a)return f[s] == b;
            var t = 0;
            if (g = !0, e.push(a), f.push(b), o) {
                if (s = a.length, t = b.length, g = t == a.length, !g && !d)return g;
                for (; t--;) {
                    var u = s, v = b[t];
                    if (d)for (; u-- && !(g = ab(a[u], v, c, d, e, f));); else if (!(g = ab(a[t], v, c, d, e, f)))break
                }
                return g
            }
            return qe(b, function (b, h, i) {
                return Ed.call(i, h) ? (t++, g = Ed.call(a, h) && ab(a[h], b, c, d, e, f)) : void 0
            }), g && !d && qe(a, function (a, b, c) {
                return Ed.call(c, b) ? g = --t > -1 : void 0
            }), r && (m(e), m(f)), g
        }

        function cb(a, b, c, d, e) {
            (de(b) ? Xb : re)(b, function (b, f) {
                var g, h, i = b, j = a[f];
                if (b && ((h = de(b)) || se(b))) {
                    for (var k = d.length; k--;)if (g = d[k] == b) {
                        j = e[k];
                        break
                    }
                    if (!g) {
                        var l;
                        c && (i = c(j, b), (l = "undefined" != typeof i) && (j = i)), l || (j = h ? de(j) ? j : [] : se(j) ? j : {}), d.push(b), e.push(j), l || cb(j, b, c, d, e)
                    }
                } else c && (i = c(j, b), "undefined" == typeof i && (i = b)), "undefined" != typeof i && (j = i);
                a[f] = j
            })
        }

        function eb(c, d, e) {
            var g = -1, i = kb(), j = c ? c.length : 0, k = [], l = !d && j >= w && i === a, o = e || l ? h() : k;
            if (l) {
                var p = f(o);
                p ? (i = b, o = p) : (l = !1, o = e ? o : (m(o), k))
            }
            for (; ++g < j;) {
                var q = c[g], r = e ? e(q, g, c) : q;
                (d ? !g || o[o.length - 1] !== r : i(o, r) < 0) && ((e || l) && o.push(r), k.push(q))
            }
            return l ? (m(o.array), n(o)) : e && m(o), k
        }

        function fb(a) {
            return function (b, c, d) {
                var e = {};
                if (c = r.createCallback(c, d, 3), de(b))for (var f = -1, g = b.length; ++f < g;) {
                    var h = b[f];
                    a(e, h, c(h, f, b), b)
                } else ne(b, function (b, d, f) {
                    a(e, b, c(b, d, f), f)
                });
                return e
            }
        }

        function gb(a, b, c, d, e, f) {
            var g = 1 & b, h = 2 & b, i = 4 & b, j = 8 & b, k = 16 & b, l = 32 & b, m = a;
            if (!h && !Db(a))throw new sd;
            k && !c.length && (b &= -17, k = c = !1), l && !d.length && (b &= -33, l = d = !1);
            var n = a && a.__bindData__;
            if (n)return!g || 1 & n[1] || (n[4] = e), !g && 1 & n[1] && (b |= 8), !i || 4 & n[1] || (n[5] = f), k && Fd.apply(n[2] || (n[2] = []), c), l && Fd.apply(n[3] || (n[3] = []), d), n[1] |= b, gb.apply(null, n);
            if (g && !(h || i || l) && (ae.fastBind || Nd && k)) {
                if (k) {
                    var o = [e];
                    Fd.apply(o, c)
                }
                var p = k ? Nd.apply(a, o) : Nd.call(a, e)
            } else p = function () {
                var n = arguments, o = g ? e : this;
                if ((i || k || l) && (n = Xd.call(n), k && Ld.apply(n, c), l && Fd.apply(n, d), i && n.length < f))return b |= 16, gb(a, j ? b : -4 & b, n, null, e, f);
                if (h && (a = o[m]), this instanceof p) {
                    o = ib(a.prototype);
                    var q = a.apply(o, n);
                    return Eb(q) ? q : o
                }
                return a.apply(o, n)
            };
            return ce(p, Xd.call(arguments)), p
        }

        function hb() {
            var a = i();
            a.shadowedProps = L, a.array = a.bottom = a.loop = a.top = "", a.init = "iterable", a.useHas = !0;
            for (var b, c = 0; b = arguments[c]; c++)for (var d in b)a[d] = b[d];
            var e = a.args;
            a.firstArg = /^[^,]+/.exec(e)[0];
            var f = md("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString", "return function(" + e + ") {\n" + be(a) + "\n}");
            return n(a), f(Z, R, ud, Ed, u, nb, de, Jb, a.keys, vd, Y, _d, W, wd, Kd)
        }

        function ib(a) {
            return Eb(a) ? Od(a) : {}
        }

        function jb(a) {
            return je[a]
        }

        function kb() {
            var b = (b = r.indexOf) === qc ? a : b;
            return b
        }

        function lb(a) {
            var b, c;
            return!a || Kd.call(a) != U || (b = a.constructor, Db(b) && !(b instanceof b)) || !ae.argsClass && nb(a) || !ae.nodeClass && j(a) ? !1 : ae.ownLast ? (qe(a, function (a, b, d) {
                return c = Ed.call(d, b), !1
            }), c !== !1) : (qe(a, function (a, b) {
                c = b
            }), "undefined" == typeof c || Ed.call(a, c))
        }

        function mb(a) {
            return ke[a]
        }

        function nb(a) {
            return a && "object" == typeof a && "number" == typeof a.length && Kd.call(a) == N || !1
        }

        function ob(a, b, c, d) {
            return"boolean" != typeof b && null != b && (d = c, c = b, b = !1), x(a, b, "function" == typeof c && Z(c, d, 1))
        }

        function pb(a, b, c) {
            return x(a, !0, "function" == typeof b && Z(b, c, 1))
        }

        function qb(a, b, c) {
            var d;
            return b = r.createCallback(b, c, 3), re(a, function (a, c, e) {
                return b(a, c, e) ? (d = c, !1) : void 0
            }), d
        }

        function rb(a, b, c) {
            var d;
            return b = r.createCallback(b, c, 3), tb(a, function (a, c, e) {
                return b(a, c, e) ? (d = c, !1) : void 0
            }), d
        }

        function sb(a, b, c) {
            var d = [];
            qe(a, function (a, b) {
                d.push(b, a)
            });
            var e = d.length;
            for (b = Z(b, c, 3); e-- && b(d[e--], d[e], a) !== !1;);
            return a
        }

        function tb(a, b, c) {
            var d = fe(a), e = d.length;
            for (b = Z(b, c, 3); e--;) {
                var f = d[e];
                if (b(a[f], f, a) === !1)break
            }
            return a
        }

        function ub(a) {
            var b = [];
            return qe(a, function (a, c) {
                Db(a) && b.push(c)
            }), b.sort()
        }

        function vb(a, b) {
            return a ? Ed.call(a, b) : !1
        }

        function wb(a) {
            for (var b = -1, c = fe(a), d = c.length, e = {}; ++b < d;) {
                var f = c[b];
                e[a[f]] = f
            }
            return e
        }

        function xb(a) {
            return a === !0 || a === !1 || Kd.call(a) == P
        }

        function yb(a) {
            return a ? "object" == typeof a && Kd.call(a) == Q : !1
        }

        function zb(a) {
            return a ? 1 === a.nodeType : !1
        }

        function Ab(a) {
            var b = !0;
            if (!a)return b;
            var c = Kd.call(a), d = a.length;
            return c == O || c == W || (ae.argsClass ? c == N : nb(a)) || c == U && "number" == typeof d && Db(a.splice) ? !d : (re(a, function () {
                return b = !1
            }), b)
        }

        function Bb(a, b, c, d) {
            return ab(a, b, "function" == typeof c && Z(c, d, 2))
        }

        function Cb(a) {
            return Qd(a) && !Rd(parseFloat(a))
        }

        function Db(a) {
            return"function" == typeof a
        }

        function Eb(a) {
            return!(!a || !Y[typeof a])
        }

        function Fb(a) {
            return Hb(a) && a != +a
        }

        function Gb(a) {
            return null === a
        }

        function Hb(a) {
            return"number" == typeof a || Kd.call(a) == T
        }

        function Ib(a) {
            return a && Y[typeof a] ? Kd.call(a) == V : !1
        }

        function Jb(a) {
            return"string" == typeof a || Kd.call(a) == W
        }

        function Kb(a) {
            return"undefined" == typeof a
        }

        function Lb(a) {
            var b = arguments, c = 2;
            if (!Eb(a))return a;
            if ("number" != typeof b[2] && (c = b.length), c > 3 && "function" == typeof b[c - 2])var d = Z(b[--c - 1], b[c--], 2); else c > 2 && "function" == typeof b[c - 1] && (d = b[--c]);
            for (var e = Xd.call(arguments, 1, c), f = -1, g = h(), i = h(); ++f < c;)cb(a, e[f], d, g, i);
            return m(g), m(i), a
        }

        function Mb(a, b, c) {
            var d = kb(), e = "function" == typeof b, f = {};
            if (e)b = r.createCallback(b, c, 3); else var g = _(arguments, !0, !1, 1);
            return qe(a, function (a, c, h) {
                (e ? !b(a, c, h) : d(g, c) < 0) && (f[c] = a)
            }), f
        }

        function Nb(a) {
            for (var b = -1, c = fe(a), d = c.length, e = id(d); ++b < d;) {
                var f = c[b];
                e[b] = [f, a[f]]
            }
            return e
        }

        function Ob(a, b, c) {
            var d = {};
            if ("function" != typeof b)for (var e = -1, f = _(arguments, !0, !1, 1), g = Eb(a) ? f.length : 0; ++e < g;) {
                var h = f[e];
                h in a && (d[h] = a[h])
            } else b = r.createCallback(b, c, 3), qe(a, function (a, c, e) {
                b(a, c, e) && (d[c] = a)
            });
            return d
        }

        function Pb(a, b, c, d) {
            var e = de(a);
            if (b = Z(b, d, 4), null == c)if (e)c = []; else {
                var f = a && a.constructor, g = f && f.prototype;
                c = ib(g)
            }
            return(e ? ne : re)(a, function (a, d, e) {
                return b(c, a, d, e)
            }), c
        }

        function Qb(a) {
            for (var b = -1, c = fe(a), d = c.length, e = id(d); ++b < d;)e[b] = a[c[b]];
            return e
        }

        function Rb(a) {
            var b = arguments, c = -1, d = _(b, !0, !1, 1), e = b[2] && b[2][b[1]] === a ? 1 : d.length, f = id(e);
            for (ae.unindexedChars && Jb(a) && (a = a.split("")); ++c < e;)f[c] = a[d[c]];
            return f
        }

        function Sb(a, b, c) {
            var d = -1, e = kb(), f = a ? a.length : 0, g = !1;
            return c = (0 > c ? Td(0, f + c) : c) || 0, de(a) ? g = e(a, b, c) > -1 : "number" == typeof f ? g = (Jb(a) ? a.indexOf(b, c) : e(a, b, c)) > -1 : ne(a, function (a) {
                return++d >= c ? !(g = a === b) : void 0
            }), g
        }

        function Tb(a, b, c) {
            var d = !0;
            if (b = r.createCallback(b, c, 3), de(a))for (var e = -1, f = a.length; ++e < f && (d = !!b(a[e], e, a));); else ne(a, function (a, c, e) {
                return d = !!b(a, c, e)
            });
            return d
        }

        function Ub(a, b, c) {
            var d = [];
            if (b = r.createCallback(b, c, 3), de(a))for (var e = -1, f = a.length; ++e < f;) {
                var g = a[e];
                b(g, e, a) && d.push(g)
            } else ne(a, function (a, c, e) {
                b(a, c, e) && d.push(a)
            });
            return d
        }

        function Vb(a, b, c) {
            if (b = r.createCallback(b, c, 3), !de(a)) {
                var d;
                return ne(a, function (a, c, e) {
                    return b(a, c, e) ? (d = a, !1) : void 0
                }), d
            }
            for (var e = -1, f = a.length; ++e < f;) {
                var g = a[e];
                if (b(g, e, a))return g
            }
        }

        function Wb(a, b, c) {
            var d;
            return b = r.createCallback(b, c, 3), Yb(a, function (a, c, e) {
                return b(a, c, e) ? (d = a, !1) : void 0
            }), d
        }

        function Xb(a, b, c) {
            if (b && "undefined" == typeof c && de(a))for (var d = -1, e = a.length; ++d < e && b(a[d], d, a) !== !1;); else ne(a, b, c);
            return a
        }

        function Yb(a, b, c) {
            var d = a, e = a ? a.length : 0;
            if (b = b && "undefined" == typeof c ? b : Z(b, c, 3), de(a))for (; e-- && b(a[e], e, a) !== !1;); else {
                if ("number" != typeof e) {
                    var f = fe(a);
                    e = f.length
                } else ae.unindexedChars && Jb(a) && (d = a.split(""));
                ne(a, function (a, c, g) {
                    return c = f ? f[--e] : --e, b(d[c], c, g)
                })
            }
            return a
        }

        function Zb(a, b) {
            var c = Xd.call(arguments, 2), d = -1, e = "function" == typeof b, f = a ? a.length : 0, g = id("number" == typeof f ? f : 0);
            return Xb(a, function (a) {
                g[++d] = (e ? b : a[b]).apply(a, c)
            }), g
        }

        function $b(a, b, c) {
            var d = -1, e = a ? a.length : 0, f = id("number" == typeof e ? e : 0);
            if (b = r.createCallback(b, c, 3), de(a))for (; ++d < e;)f[d] = b(a[d], d, a); else ne(a, function (a, c, e) {
                f[++d] = b(a, c, e)
            });
            return f
        }

        function _b(a, b, c) {
            var e = -1 / 0, f = e;
            if (!b && de(a))for (var g = -1, h = a.length; ++g < h;) {
                var i = a[g];
                i > f && (f = i)
            } else b = !b && Jb(a) ? d : r.createCallback(b, c, 3), ne(a, function (a, c, d) {
                var g = b(a, c, d);
                g > e && (e = g, f = a)
            });
            return f
        }

        function ac(a, b, c) {
            var e = 1 / 0, f = e;
            if (!b && de(a))for (var g = -1, h = a.length; ++g < h;) {
                var i = a[g];
                f > i && (f = i)
            } else b = !b && Jb(a) ? d : r.createCallback(b, c, 3), ne(a, function (a, c, d) {
                var g = b(a, c, d);
                e > g && (e = g, f = a)
            });
            return f
        }

        function bc(a, b, c, d) {
            var e = arguments.length < 3;
            if (b = Z(b, d, 4), de(a)) {
                var f = -1, g = a.length;
                for (e && (c = a[++f]); ++f < g;)c = b(c, a[f], f, a)
            } else ne(a, function (a, d, f) {
                c = e ? (e = !1, a) : b(c, a, d, f)
            });
            return c
        }

        function cc(a, b, c, d) {
            var e = arguments.length < 3;
            return b = Z(b, d, 4), Yb(a, function (a, d, f) {
                c = e ? (e = !1, a) : b(c, a, d, f)
            }), c
        }

        function dc(a, b, c) {
            return b = r.createCallback(b, c, 3), Ub(a, function (a, c, d) {
                return!b(a, c, d)
            })
        }

        function ec(a, b, c) {
            var d = a ? a.length : 0;
            if ("number" != typeof d ? a = Qb(a) : ae.unindexedChars && Jb(a) && (a = a.split("")), null == b || c)return a ? a[Zc(d - 1)] : q;
            var e = fc(a);
            return e.length = Ud(Td(0, b), e.length), e
        }

        function fc(a) {
            var b = -1, c = a ? a.length : 0, d = id("number" == typeof c ? c : 0);
            return Xb(a, function (a) {
                var c = Zc(++b);
                d[b] = d[c], d[c] = a
            }), d
        }

        function gc(a) {
            var b = a ? a.length : 0;
            return"number" == typeof b ? b : fe(a).length
        }

        function hc(a, b, c) {
            var d;
            if (b = r.createCallback(b, c, 3), de(a))for (var e = -1, f = a.length; ++e < f && !(d = b(a[e], e, a));); else ne(a, function (a, c, e) {
                return!(d = b(a, c, e))
            });
            return!!d
        }

        function ic(a, b, c) {
            var d = -1, f = a ? a.length : 0, g = id("number" == typeof f ? f : 0);
            for (b = r.createCallback(b, c, 3), Xb(a, function (a, c, e) {
                var f = g[++d] = i();
                f.criteria = b(a, c, e), f.index = d, f.value = a
            }), f = g.length, g.sort(e); f--;) {
                var h = g[f];
                g[f] = h.value, n(h)
            }
            return g
        }

        function jc(a) {
            return a && "number" == typeof a.length ? ae.unindexedChars && Jb(a) ? a.split("") : o(a) : Qb(a)
        }

        function kc(a) {
            for (var b = -1, c = a ? a.length : 0, d = []; ++b < c;) {
                var e = a[b];
                e && d.push(e)
            }
            return d
        }

        function lc(c) {
            var d = -1, e = kb(), g = c ? c.length : 0, h = _(arguments, !0, !0, 1), i = [], j = g >= w && e === a;
            if (j) {
                var k = f(h);
                k ? (e = b, h = k) : j = !1
            }
            for (; ++d < g;) {
                var l = c[d];
                e(h, l) < 0 && i.push(l)
            }
            return j && n(h), i
        }

        function mc(a, b, c) {
            var d = -1, e = a ? a.length : 0;
            for (b = r.createCallback(b, c, 3); ++d < e;)if (b(a[d], d, a))return d;
            return-1
        }

        function nc(a, b, c) {
            var d = a ? a.length : 0;
            for (b = r.createCallback(b, c, 3); d--;)if (b(a[d], d, a))return d;
            return-1
        }

        function oc(a, b, c) {
            var d = 0, e = a ? a.length : 0;
            if ("number" != typeof b && null != b) {
                var f = -1;
                for (b = r.createCallback(b, c, 3); ++f < e && b(a[f], f, a);)d++
            } else if (d = b, null == d || c)return a ? a[0] : q;
            return o(a, 0, Ud(Td(0, d), e))
        }

        function pc(a, b, c, d) {
            return"boolean" != typeof b && null != b && (d = c, c = d && d[b] === a ? null : b, b = !1), null != c && (a = $b(a, c, d)), _(a, b)
        }

        function qc(b, c, d) {
            if ("number" == typeof d) {
                var e = b ? b.length : 0;
                d = 0 > d ? Td(0, e + d) : d || 0
            } else if (d) {
                var f = zc(b, c);
                return b[f] === c ? f : -1
            }
            return a(b, c, d)
        }

        function rc(a, b, c) {
            var d = 0, e = a ? a.length : 0;
            if ("number" != typeof b && null != b) {
                var f = e;
                for (b = r.createCallback(b, c, 3); f-- && b(a[f], f, a);)d++
            } else d = null == b || c ? 1 : b || d;
            return o(a, 0, Ud(Td(0, e - d), e))
        }

        function sc(c) {
            for (var d = arguments, e = d.length, g = -1, i = h(), j = -1, k = kb(), l = c ? c.length : 0, o = [], p = h(); ++g < e;) {
                var q = d[g];
                i[g] = k === a && (q ? q.length : 0) >= w && f(g ? d[g] : p)
            }
            a:for (; ++j < l;) {
                var r = i[0];
                if (q = c[j], (r ? b(r, q) : k(p, q)) < 0) {
                    for (g = e, (r || p).push(q); --g;)if (r = i[g], (r ? b(r, q) : k(d[g], q)) < 0)continue a;
                    o.push(q)
                }
            }
            for (; e--;)r = i[e], r && n(r);
            return m(i), m(p), o
        }

        function tc(a, b, c) {
            var d = 0, e = a ? a.length : 0;
            if ("number" != typeof b && null != b) {
                var f = e;
                for (b = r.createCallback(b, c, 3); f-- && b(a[f], f, a);)d++
            } else if (d = b, null == d || c)return a ? a[e - 1] : q;
            return o(a, Td(0, e - d))
        }

        function uc(a, b, c) {
            var d = a ? a.length : 0;
            for ("number" == typeof c && (d = (0 > c ? Td(0, d + c) : Ud(c, d - 1)) + 1); d--;)if (a[d] === b)return d;
            return-1
        }

        function vc(a) {
            for (var b = arguments, c = 0, d = b.length, e = a ? a.length : 0; ++c < d;)for (var f = -1, g = b[c]; ++f < e;)a[f] === g && (Jd.call(a, f--, 1), e--);
            return a
        }

        function wc(a, b, c) {
            a = +a || 0, c = "number" == typeof c ? c : +c || 1, null == b && (b = a, a = 0);
            for (var d = -1, e = Td(0, zd((b - a) / (c || 1))), f = id(e); ++d < e;)f[d] = a, a += c;
            return f
        }

        function xc(a, b, c) {
            var d = -1, e = a ? a.length : 0, f = [];
            for (b = r.createCallback(b, c, 3); ++d < e;) {
                var g = a[d];
                b(g, d, a) && (f.push(g), Jd.call(a, d--, 1), e--)
            }
            return f
        }

        function yc(a, b, c) {
            if ("number" != typeof b && null != b) {
                var d = 0, e = -1, f = a ? a.length : 0;
                for (b = r.createCallback(b, c, 3); ++e < f && b(a[e], e, a);)d++
            } else d = null == b || c ? 1 : Td(0, b);
            return o(a, d)
        }

        function zc(a, b, c, d) {
            var e = 0, f = a ? a.length : e;
            for (c = c ? r.createCallback(c, d, 1) : Wc, b = c(b); f > e;) {
                var g = e + f >>> 1;
                c(a[g]) < b ? e = g + 1 : f = g
            }
            return e
        }

        function Ac() {
            return eb(_(arguments, !0, !0))
        }

        function Bc(a, b, c, d) {
            return"boolean" != typeof b && null != b && (d = c, c = d && d[b] === a ? null : b, b = !1), null != c && (c = r.createCallback(c, d, 3)), eb(a, b, c)
        }

        function Cc(a) {
            return lc(a, Xd.call(arguments, 1))
        }

        function Dc() {
            for (var a = arguments.length > 1 ? arguments : arguments[0], b = -1, c = a ? _b(we(a, "length")) : 0, d = id(0 > c ? 0 : c); ++b < c;)d[b] = we(a, b);
            return d
        }

        function Ec(a, b) {
            for (var c = -1, d = a ? a.length : 0, e = {}; ++c < d;) {
                var f = a[c];
                b ? e[f] = b[c] : f && (e[f[0]] = f[1])
            }
            return e
        }

        function Fc(a, b) {
            if (!Db(b))throw new sd;
            return function () {
                return--a < 1 ? b.apply(this, arguments) : void 0
            }
        }

        function Gc(a, b) {
            return arguments.length > 2 ? gb(a, 17, Xd.call(arguments, 2), null, b) : gb(a, 1, null, null, b)
        }

        function Hc(a) {
            for (var b = arguments.length > 1 ? _(arguments, !0, !1, 1) : ub(a), c = -1, d = b.length; ++c < d;) {
                var e = b[c];
                a[e] = gb(a[e], 1, null, null, a)
            }
            return a
        }

        function Ic(a, b) {
            return arguments.length > 2 ? gb(b, 19, Xd.call(arguments, 2), null, a) : gb(b, 3, null, null, a)
        }

        function Jc() {
            for (var a = arguments, b = a.length; b--;)if (!Db(a[b]))throw new sd;
            return function () {
                for (var b = arguments, c = a.length; c--;)b = [a[c].apply(this, b)];
                return b[0]
            }
        }

        function Kc(a, b, c) {
            var d = typeof a;
            if (null == a || "function" == d)return Z(a, b, c);
            if ("object" != d)return function (b) {
                return b[a]
            };
            var e = fe(a), f = e[0], g = a[f];
            return 1 != e.length || g !== g || Eb(g) ? function (b) {
                for (var c = e.length, d = !1; c-- && (d = ab(b[e[c]], a[e[c]], null, !0)););
                return d
            } : function (a) {
                var b = a[f];
                return g === b && (0 !== g || 1 / g == 1 / b)
            }
        }

        function Lc(a, b) {
            return b = "number" == typeof b ? b : +b || a.length, gb(a, 4, null, null, null, b)
        }

        function Mc(a, b, c) {
            var d, e, f, g, h, i, j, k = 0, l = !1, m = !0;
            if (!Db(a))throw new sd;
            if (b = Td(0, b) || 0, c === !0) {
                var n = !0;
                m = !1
            } else Eb(c) && (n = c.leading, l = "maxWait"in c && (Td(b, c.maxWait) || 0), m = "trailing"in c ? c.trailing : m);
            var o = function () {
                var c = b - (new kd - g);
                if (0 >= c) {
                    e && Ad(e);
                    var l = j;
                    e = i = j = q, l && (k = +new kd, f = a.apply(h, d))
                } else i = Id(o, c)
            }, p = function () {
                i && Ad(i), e = i = j = q, (m || l !== b) && (k = +new kd, f = a.apply(h, d))
            };
            return function () {
                if (d = arguments, g = +new kd, h = this, j = m && (i || !n), l === !1)var c = n && !i; else {
                    e || n || (k = g);
                    var q = l - (g - k);
                    0 >= q ? (e && (e = Ad(e)), k = g, f = a.apply(h, d)) : e || (e = Id(p, q))
                }
                return i || b === l || (i = Id(o, b)), c && (f = a.apply(h, d)), f
            }
        }

        function Nc(a) {
            if (!Db(a))throw new sd;
            var b = Xd.call(arguments, 1);
            return Id(function () {
                a.apply(q, b)
            }, 1)
        }

        function Oc(a, b) {
            if (!Db(a))throw new sd;
            var c = Xd.call(arguments, 2);
            return Id(function () {
                a.apply(q, c)
            }, b)
        }

        function Pc(a, b) {
            if (!Db(a))throw new sd;
            var c = function () {
                var d = c.cache, e = b ? b.apply(this, arguments) : v + arguments[0];
                return Ed.call(d, e) ? d[e] : d[e] = a.apply(this, arguments)
            };
            return c.cache = {}, c
        }

        function Qc(a) {
            var b, c;
            if (!Db(a))throw new sd;
            return function () {
                return b ? c : (b = !0, c = a.apply(this, arguments), a = null, c)
            }
        }

        function Rc(a) {
            return gb(a, 16, Xd.call(arguments, 1))
        }

        function Sc(a) {
            return gb(a, 32, null, Xd.call(arguments, 1))
        }

        function Tc(a, b, c) {
            var d = !0, e = !0;
            if (!Db(a))throw new sd;
            c === !1 ? d = !1 : Eb(c) && (d = "leading"in c ? c.leading : d, e = "trailing"in c ? c.trailing : e), c = i(), c.leading = d, c.maxWait = b, c.trailing = e;
            var f = Mc(a, b, c);
            return n(c), f
        }

        function Uc(a, b) {
            if (!Db(b))throw new sd;
            return function () {
                var c = [a];
                return Fd.apply(c, arguments), b.apply(this, c)
            }
        }

        function Vc(a) {
            return null == a ? "" : rd(a).replace(me, jb)
        }

        function Wc(a) {
            return a
        }

        function Xc(a, b) {
            var c = a, d = !b || Db(c);
            b || (c = s, b = a, a = r), Xb(ub(b), function (e) {
                var f = a[e] = b[e];
                d && (c.prototype[e] = function () {
                    var b = this.__wrapped__, d = [b];
                    Fd.apply(d, arguments);
                    var e = f.apply(a, d);
                    return b && "object" == typeof b && b === e ? this : new c(e)
                })
            })
        }

        function Yc() {
            return c._ = xd, this
        }

        function Zc(a, b, c) {
            var d = null == a, e = null == b;
            null == c && ("boolean" == typeof a && e ? (c = a, a = 1) : e || "boolean" != typeof b || (c = b, e = !0)), d && e && (b = 1), a = +a || 0, e ? (b = a, a = 0) : b = +b || 0;
            var f = Wd();
            return c || a % 1 || b % 1 ? a + Ud(f * (b - a + parseFloat("1e-" + ((f + "").length - 1))), b) : a + Bd(f * (b - a + 1))
        }

        function $c(a, b) {
            if (a) {
                var c = a[b];
                return Db(c) ? a[b]() : c
            }
        }

        function _c(a, b, c) {
            var d = r.templateSettings;
            a || (a = ""), c = pe({}, c, d);
            var e, f = pe({}, c.imports, d.imports), h = fe(f), i = Qb(f), j = 0, k = c.interpolate || H, l = "__p += '", m = qd((c.escape || H).source + "|" + k.source + "|" + (k === F ? C : H).source + "|" + (c.evaluate || H).source + "|$", "g");
            a.replace(m, function (b, c, d, f, h, i) {
                return d || (d = f), l += a.slice(j, i).replace(J, g), c && (l += "' +\n__e(" + c + ") +\n'"), h && (e = !0, l += "';\n" + h + ";\n__p += '"), d && (l += "' +\n((__t = (" + d + ")) == null ? '' : __t) +\n'"), j = i + b.length, b
            }), l += "';\n";
            var n = c.variable, o = n;
            o || (n = "obj", l = "with (" + n + ") {\n" + l + "\n}\n"), l = (e ? l.replace(z, "") : l).replace(A, "$1").replace(B, "$1;"), l = "function(" + n + ") {\n" + (o ? "" : n + " || (" + n + " = {});\n") + "var __t, __p = '', __e = _.escape" + (e ? ", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n" : ";\n") + l + "return __p\n}";
            var p = "\n/*\n//# sourceURL=" + (c.sourceURL || "/lodash/template/source[" + M++ + "]") + "\n*/";
            try {
                var s = md(h, "return " + l + p).apply(q, i)
            } catch (t) {
                throw t.source = l, t
            }
            return b ? s(b) : (s.source = l, s)
        }

        function ad(a, b, c) {
            a = (a = +a) > -1 ? a : 0;
            var d = -1, e = id(a);
            for (b = Z(b, c, 1); ++d < a;)e[d] = b(d);
            return e
        }

        function bd(a) {
            return null == a ? "" : rd(a).replace(le, mb)
        }

        function cd(a) {
            var b = ++t;
            return rd(null == a ? "" : a) + b
        }

        function dd(a) {
            return a = new s(a), a.__chain__ = !0, a
        }

        function ed(a, b) {
            return b(a), a
        }

        function fd() {
            return this.__chain__ = !0, this
        }

        function gd() {
            return rd(this.__wrapped__)
        }

        function hd() {
            return this.__wrapped__
        }

        c = c ? db.defaults($.Object(), c, db.pick($, K)) : $;
        var id = c.Array, jd = c.Boolean, kd = c.Date, ld = c.Error, md = c.Function, nd = c.Math, od = c.Number, pd = c.Object, qd = c.RegExp, rd = c.String, sd = c.TypeError, td = [], ud = ld.prototype, vd = pd.prototype, wd = rd.prototype, xd = c._, yd = qd("^" + rd(vd.valueOf).replace(/[.*+?^${}()|[\]\\]/g, "\\$&").replace(/valueOf|for [^\]]+/g, ".+?") + "$"), zd = nd.ceil, Ad = c.clearTimeout, Bd = nd.floor, Cd = md.prototype.toString, Dd = yd.test(Dd = pd.getPrototypeOf) && Dd, Ed = vd.hasOwnProperty, Fd = td.push, Gd = vd.propertyIsEnumerable, Hd = c.setImmediate, Id = c.setTimeout, Jd = td.splice, Kd = vd.toString, Ld = td.unshift, Md = function () {
            try {
                var a = {}, b = yd.test(b = pd.defineProperty) && b, c = b(a, a, a) && b
            } catch (d) {
            }
            return c
        }(), Nd = yd.test(Nd = Kd.bind) && Nd, Od = yd.test(Od = pd.create) && Od, Pd = yd.test(Pd = id.isArray) && Pd, Qd = c.isFinite, Rd = c.isNaN, Sd = yd.test(Sd = pd.keys) && Sd, Td = nd.max, Ud = nd.min, Vd = c.parseInt, Wd = nd.random, Xd = td.slice, Yd = yd.test(c.attachEvent), Zd = Nd && !/\n|true/.test(Nd + Yd), $d = {};
        $d[O] = id, $d[P] = jd, $d[Q] = kd, $d[S] = md, $d[U] = pd, $d[T] = od, $d[V] = qd, $d[W] = rd;
        var _d = {};
        _d[O] = _d[Q] = _d[T] = {constructor: !0, toLocaleString: !0, toString: !0, valueOf: !0}, _d[P] = _d[W] = {constructor: !0, toString: !0, valueOf: !0}, _d[R] = _d[S] = _d[V] = {constructor: !0, toString: !0}, _d[U] = {constructor: !0}, function () {
            for (var a = L.length; a--;) {
                var b = L[a];
                for (var c in _d)Ed.call(_d, c) && !Ed.call(_d[c], b) && (_d[c][b] = !1)
            }
        }(), s.prototype = r.prototype;
        var ae = r.support = {};
        !function () {
            var a = function () {
                this.x = 1
            }, b = {0: 1, length: 1}, d = [];
            a.prototype = {valueOf: 1, y: 1};
            for (var e in new a)d.push(e);
            for (e in arguments);
            ae.argsClass = Kd.call(arguments) == N, ae.argsObject = arguments.constructor == pd && !(arguments instanceof id), ae.enumErrorProps = Gd.call(ud, "message") || Gd.call(ud, "name"), ae.enumPrototypes = Gd.call(a, "prototype"), ae.fastBind = Nd && !Zd, ae.funcDecomp = !yd.test(c.WinRTError) && I.test(p), ae.funcNames = "string" == typeof md.name, ae.nonEnumArgs = 0 != e, ae.nonEnumShadows = !/valueOf/.test(d), ae.ownLast = "x" != d[0], ae.spliceObjects = (td.splice.call(b, 0, 1), !b[0]), ae.unindexedChars = "x"[0] + pd("x")[0] != "xx";
            try {
                ae.nodeClass = !(Kd.call(document) == U && !({toString: 0} + ""))
            } catch (f) {
                ae.nodeClass = !0
            }
        }(1), r.templateSettings = {escape: /<%-([\s\S]+?)%>/g, evaluate: /<%([\s\S]+?)%>/g, interpolate: F, variable: "", imports: {_: r}};
        var be = function (a) {
            var b = "var index, iterable = " + a.firstArg + ", result = " + a.init + ";\nif (!iterable) return result;\n" + a.top + ";";
            a.array ? (b += "\nvar length = iterable.length; index = -1;\nif (" + a.array + ") {  ", ae.unindexedChars && (b += "\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "), b += "\n  while (++index < length) {\n    " + a.loop + ";\n  }\n}\nelse {  ") : ae.nonEnumArgs && (b += "\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      " + a.loop + ";\n    }\n  } else {  "), ae.enumPrototypes && (b += "\n  var skipProto = typeof iterable == 'function';\n  "), ae.enumErrorProps && (b += "\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");
            var c = [];
            if (ae.enumPrototypes && c.push('!(skipProto && index == "prototype")'), ae.enumErrorProps && c.push('!(skipErrorProps && (index == "message" || index == "name"))'), a.useHas && a.keys)b += "\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n", c.length && (b += "    if (" + c.join(" && ") + ") {\n  "), b += a.loop + ";    ", c.length && (b += "\n    }"), b += "\n  }  "; else if (b += "\n  for (index in iterable) {\n", a.useHas && c.push("hasOwnProperty.call(iterable, index)"), c.length && (b += "    if (" + c.join(" && ") + ") {\n  "), b += a.loop + ";    ", c.length && (b += "\n    }"), b += "\n  }    ", ae.nonEnumShadows) {
                for (b += "\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ", k = 0; 7 > k; k++)b += "\n    index = '" + a.shadowedProps[k] + "';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))", a.useHas || (b += " || (!nonEnum[index] && iterable[index] !== objectProto[index])"), b += ") {\n      " + a.loop + ";\n    }      ";
                b += "\n  }    "
            }
            return(a.array || ae.nonEnumArgs) && (b += "\n}"), b += a.bottom + ";\nreturn result"
        };
        Od || (ib = function (a) {
            if (Eb(a)) {
                l.prototype = a;
                var b = new l;
                l.prototype = null
            }
            return b || {}
        });
        var ce = Md ? function (a, b) {
            var c = i();
            c.value = b, Md(a, "__bindData__", c), n(c)
        } : l;
        ae.argsClass || (nb = function (a) {
            return a && "object" == typeof a && "number" == typeof a.length && Ed.call(a, "callee") || !1
        });
        var de = Pd || function (a) {
            return a && "object" == typeof a && "number" == typeof a.length && Kd.call(a) == O || !1
        }, ee = hb({args: "object", init: "[]", top: "if (!(objectTypes[typeof object])) return result", loop: "result.push(index)"}), fe = Sd ? function (a) {
            return Eb(a) ? ae.enumPrototypes && "function" == typeof a || ae.nonEnumArgs && a.length && nb(a) ? ee(a) : Sd(a) : []
        } : ee, ge = {args: "collection, callback, thisArg", top: "callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)", array: "typeof length == 'number'", keys: fe, loop: "if (callback(iterable[index], index, collection) === false) return result"}, he = {args: "object, source, guard", top: "var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {", keys: fe, loop: "if (typeof result[index] == 'undefined') result[index] = iterable[index]", bottom: "  }\n}"}, ie = {top: "if (!objectTypes[typeof iterable]) return result;\n" + ge.top, array: !1}, je = {"&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;"}, ke = wb(je), le = qd("(" + fe(ke).join("|") + ")", "g"), me = qd("[" + fe(je).join("") + "]", "g"), ne = hb(ge), oe = hb(he, {top: he.top.replace(";", ";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"), loop: "result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}), pe = hb(he), qe = hb(ge, ie, {useHas: !1}), re = hb(ge, ie);
        Db(/x/) && (Db = function (a) {
            return"function" == typeof a && Kd.call(a) == S
        });
        var se = Dd ? function (a) {
            if (!a || Kd.call(a) != U || !ae.argsClass && nb(a))return!1;
            var b = a.valueOf, c = "function" == typeof b && (c = Dd(b)) && Dd(c);
            return c ? a == c || Dd(a) == c : lb(a)
        } : lb, te = fb(function (a, b, c) {
            Ed.call(a, c) ? a[c]++ : a[c] = 1
        }), ue = fb(function (a, b, c) {
            (Ed.call(a, c) ? a[c] : a[c] = []).push(b)
        }), ve = fb(function (a, b, c) {
            a[c] = b
        }), we = $b, xe = Ub;
        Zd && bb && "function" == typeof Hd && (Nc = function (a) {
            if (!Db(a))throw new sd;
            return Hd.apply(c, arguments)
        });
        var ye = 8 == Vd(y + "08") ? Vd : function (a, b) {
            return Vd(Jb(a) ? a.replace(G, "") : a, b || 0)
        };
        return r.after = Fc, r.assign = oe, r.at = Rb, r.bind = Gc, r.bindAll = Hc, r.bindKey = Ic, r.chain = dd, r.compact = kc, r.compose = Jc, r.countBy = te, r.createCallback = Kc, r.curry = Lc, r.debounce = Mc, r.defaults = pe, r.defer = Nc, r.delay = Oc, r.difference = lc, r.filter = Ub, r.flatten = pc, r.forEach = Xb, r.forEachRight = Yb, r.forIn = qe, r.forInRight = sb, r.forOwn = re, r.forOwnRight = tb, r.functions = ub, r.groupBy = ue, r.indexBy = ve, r.initial = rc, r.intersection = sc, r.invert = wb, r.invoke = Zb, r.keys = fe, r.map = $b, r.max = _b, r.memoize = Pc, r.merge = Lb, r.min = ac, r.omit = Mb, r.once = Qc, r.pairs = Nb, r.partial = Rc, r.partialRight = Sc, r.pick = Ob, r.pluck = we, r.pull = vc, r.range = wc, r.reject = dc, r.remove = xc, r.rest = yc, r.shuffle = fc, r.sortBy = ic, r.tap = ed, r.throttle = Tc, r.times = ad, r.toArray = jc, r.transform = Pb, r.union = Ac, r.uniq = Bc, r.values = Qb, r.where = xe, r.without = Cc, r.wrap = Uc, r.zip = Dc, r.zipObject = Ec, r.collect = $b, r.drop = yc, r.each = Xb, r.eachRight = Yb, r.extend = oe, r.methods = ub, r.object = Ec, r.select = Ub, r.tail = yc, r.unique = Bc, r.unzip = Dc, Xc(r), r.clone = ob, r.cloneDeep = pb, r.contains = Sb, r.escape = Vc, r.every = Tb, r.find = Vb, r.findIndex = mc, r.findKey = qb, r.findLast = Wb, r.findLastIndex = nc, r.findLastKey = rb, r.has = vb, r.identity = Wc, r.indexOf = qc, r.isArguments = nb, r.isArray = de, r.isBoolean = xb, r.isDate = yb, r.isElement = zb, r.isEmpty = Ab, r.isEqual = Bb, r.isFinite = Cb, r.isFunction = Db, r.isNaN = Fb,r.isNull = Gb,r.isNumber = Hb,r.isObject = Eb,r.isPlainObject = se,r.isRegExp = Ib,r.isString = Jb,r.isUndefined = Kb,r.lastIndexOf = uc,r.mixin = Xc,r.noConflict = Yc,r.parseInt = ye,r.random = Zc,r.reduce = bc,r.reduceRight = cc,r.result = $c,r.runInContext = p,r.size = gc,r.some = hc,r.sortedIndex = zc,r.template = _c,r.unescape = bd,r.uniqueId = cd,r.all = Tb,r.any = hc,r.detect = Vb,r.findWhere = Vb,r.foldl = bc,r.foldr = cc,r.include = Sb,r.inject = bc,re(r, function (a, b) {
            r.prototype[b] || (r.prototype[b] = function () {
                var b = [this.__wrapped__], c = this.__chain__;
                Fd.apply(b, arguments);
                var d = a.apply(r, b);
                return c ? new s(d, c) : d
            })
        }),r.first = oc,r.last = tc,r.sample = ec,r.take = oc,r.head = oc,re(r, function (a, b) {
            var c = "sample" !== b;
            r.prototype[b] || (r.prototype[b] = function (b, d) {
                var e = this.__chain__, f = a(this.__wrapped__, b, d);
                return e || null != b && (!d || c && "function" == typeof b) ? new s(f, e) : f
            })
        }),r.VERSION = "2.1.0",r.prototype.chain = fd,r.prototype.toString = gd,r.prototype.value = hd,r.prototype.valueOf = hd,ne(["join", "pop", "shift"], function (a) {
            var b = td[a];
            r.prototype[a] = function () {
                var a = this.__chain__, c = b.apply(this.__wrapped__, arguments);
                return a ? new s(c, a) : c
            }
        }),ne(["push", "reverse", "sort", "unshift"], function (a) {
            var b = td[a];
            r.prototype[a] = function () {
                return b.apply(this.__wrapped__, arguments), this
            }
        }),ne(["concat", "slice", "splice"], function (a) {
            var b = td[a];
            r.prototype[a] = function () {
                return new s(b.apply(this.__wrapped__, arguments), this.__chain__)
            }
        }),ae.spliceObjects || ne(["pop", "shift", "splice"], function (a) {
            var b = td[a], c = "splice" == a;
            r.prototype[a] = function () {
                var a = this.__chain__, d = this.__wrapped__, e = b.apply(d, arguments);
                return 0 === d.length && delete d[0], a || c ? new s(e, a) : e
            }
        }),r
    }

    var q, r = [], s = [], t = 0, u = {}, v = +new Date + "", w = 75, x = 40, y = " 	\f\n\r\u2028\u2029", z = /\b__p \+= '';/g, A = /\b(__p \+=) '' \+/g, B = /(__e\(.*?\)|\b__t\)) \+\n'';/g, C = /\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g, D = /\w*$/, E = /^function[ \n\r\t]+\w/, F = /<%=([\s\S]+?)%>/g, G = RegExp("^[" + y + "]*0+(?=.$)"), H = /($^)/, I = /\bthis\b/, J = /['\n\r\t\u2028\u2029\\]/g, K = ["Array", "Boolean", "Date", "Error", "Function", "Math", "Number", "Object", "RegExp", "String", "_", "attachEvent", "clearTimeout", "isFinite", "isNaN", "parseInt", "setImmediate", "setTimeout"], L = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"], M = 0, N = "[object Arguments]", O = "[object Array]", P = "[object Boolean]", Q = "[object Date]", R = "[object Error]", S = "[object Function]", T = "[object Number]", U = "[object Object]", V = "[object RegExp]", W = "[object String]", X = {};
    X[S] = !1, X[N] = X[O] = X[P] = X[Q] = X[T] = X[U] = X[V] = X[W] = !0;
    var Y = {"boolean": !1, "function": !0, object: !0, number: !1, string: !1, undefined: !1}, Z = {"\\": "\\", "'": "'", "\n": "n", "\r": "r", "	": "t", "\u2028": "u2028", "\u2029": "u2029"}, $ = Y[typeof window] && window || this, _ = Y[typeof exports] && exports && !exports.nodeType && exports, ab = Y[typeof module] && module && !module.nodeType && module, bb = ab && ab.exports === _ && _, cb = Y[typeof global] && global;
    !cb || cb.global !== cb && cb.window !== cb || ($ = cb);
    var db = p();
    "function" == typeof define && "object" == typeof define.amd && define.amd ? ($._ = db, define(function () {
        return db
    })) : _ && ab ? bb ? (ab.exports = db)._ = db : _._ = db : $._ = db
}.call(this), window.debug = function () {
    function a(a) {
        !c || !d && g && g.log || c.apply(e, a)
    }

    function b(a) {
        return i > 0 ? i > a : j.length + i <= a
    }

    for (var c, d, e = this, f = Array.prototype.slice, g = e.console, h = {}, i = 9, j = ["error", "warn", "info", "debug", "log"], k = "assert clear count dir dirxml exception group groupCollapsed groupEnd profile profileEnd table time timeEnd trace".split(" "), l = k.length, m = []; --l >= 0;)!function (a) {
        h[a] = function () {
            0 !== i && g && g[a] && g[a].apply(g, arguments)
        }
    }(k[l]);
    for (l = j.length; --l >= 0;)!function (c, d) {
        h[d] = function () {
            var h = f.call(arguments), i = [d].concat(h);
            m.push(i), a(i), g && b(c) && (g.firebug ? g[d].apply(e, h) : g[d] ? g[d](h) : g.log(h))
        }
    }(l, j[l]);
    return h.setLevel = function (a) {
        i = "number" == typeof a ? a : 9
    }, h.setCallback = function () {
        var b = f.call(arguments), e = m.length, g = e;
        for (c = b.shift() || null, d = "boolean" == typeof b[0] ? b.shift() : !1, g -= "number" == typeof b[0] ? b.shift() : e; e > g;)a(m[g++])
    }, h
}(), function (a, b) {
    "use strict";
    function c(c, d) {
        function e(a) {
            return nb.preferFlash && gb && !nb.ignoreFlash && nb.flash[a] !== b && nb.flash[a]
        }

        function f(a) {
            return function (b) {
                var c, d = this._s;
                return c = d && d._a ? a.call(this, b) : null
            }
        }

        this.setupOptions = {url: c || null, flashVersion: 8, debugMode: !0, debugFlash: !1, useConsole: !0, consoleOnly: !0, waitForWindowLoad: !1, bgColor: "#ffffff", useHighPerformance: !1, flashPollingInterval: null, html5PollingInterval: null, flashLoadTimeout: 1e3, wmode: null, allowScriptAccess: "always", useFlashBlock: !1, useHTML5Audio: !0, html5Test: /^(probably|maybe)$/i, preferFlash: !1, noSWFCache: !1, idPrefix: "sound"}, this.defaultOptions = {autoLoad: !1, autoPlay: !1, from: null, loops: 1, onid3: null, onload: null, whileloading: null, onplay: null, onpause: null, onresume: null, whileplaying: null, onposition: null, onstop: null, onfailure: null, onfinish: null, multiShot: !0, multiShotEvents: !1, position: null, pan: 0, stream: !0, to: null, type: null, usePolicyFile: !1, volume: 100}, this.flash9Options = {isMovieStar: null, usePeakData: !1, useWaveformData: !1, useEQData: !1, onbufferchange: null, ondataerror: null}, this.movieStarOptions = {bufferTime: 3, serverURL: null, onconnect: null, duration: null}, this.audioFormats = {mp3: {type: ['audio/mpeg; codecs="mp3"', "audio/mpeg", "audio/mp3", "audio/MPA", "audio/mpa-robust"], required: !0}, mp4: {related: ["aac", "m4a", "m4b"], type: ['audio/mp4; codecs="mp4a.40.2"', "audio/aac", "audio/x-m4a", "audio/MP4A-LATM", "audio/mpeg4-generic"], required: !1}, ogg: {type: ["audio/ogg; codecs=vorbis"], required: !1}, opus: {type: ["audio/ogg; codecs=opus", "audio/opus"], required: !1}, wav: {type: ['audio/wav; codecs="1"', "audio/wav", "audio/wave", "audio/x-wav"], required: !1}}, this.movieID = "sm2-container", this.id = d || "sm2movie", this.debugID = "soundmanager-debug", this.debugURLParam = /([#?&])debug=1/i, this.versionNumber = "V2.97a.20140901", this.version = null, this.movieURL = null, this.altURL = null, this.swfLoaded = !1, this.enabled = !1, this.oMC = null, this.sounds = {}, this.soundIDs = [], this.muted = !1, this.didFlashBlock = !1, this.filePattern = null, this.filePatterns = {flash8: /\.mp3(\?.*)?$/i, flash9: /\.mp3(\?.*)?$/i}, this.features = {buffering: !1, peakData: !1, waveformData: !1, eqData: !1, movieStar: !1}, this.sandbox = {}, this.html5 = {usingFlash: null}, this.flash = {}, this.html5Only = !1, this.ignoreFlash = !1;
        var g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, $, _, ab, bb, cb, db, eb, fb, gb, hb, ib, jb, kb, lb, mb, nb = this, ob = null, pb = null, qb = navigator.userAgent, rb = a.location.href.toString(), sb = document, tb = [], ub = !1, vb = !1, wb = !1, xb = !1, yb = !1, zb = 8, Ab = null, Bb = null, Cb = !1, Db = !1, Eb = 0, Fb = null, Gb = [], Hb = null, Ib = Array.prototype.slice, Jb = !1, Kb = 0, Lb = qb.match(/(ipad|iphone|ipod)/i), Mb = qb.match(/android/i), Nb = qb.match(/msie/i), Ob = qb.match(/webkit/i), Pb = qb.match(/safari/i) && !qb.match(/chrome/i), Qb = qb.match(/opera/i), Rb = qb.match(/(mobile|pre\/|xoom)/i) || Lb || Mb, Sb = !rb.match(/usehtml5audio/i) && !rb.match(/sm2\-ignorebadua/i) && Pb && !qb.match(/silk/i) && qb.match(/OS X 10_6_([3-7])/i), Tb = (a.console !== b && console.log !== b, sb.hasFocus !== b ? sb.hasFocus() : null), Ub = Pb && (sb.hasFocus === b || !sb.hasFocus()), Vb = !Ub, Wb = /(mp3|mp4|mpa|m4a|m4b)/i, Xb = 1e3, Yb = "about:blank", Zb = "data:audio/wave;base64,/UklGRiYAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQIAAAD//w==", $b = sb.location ? sb.location.protocol.match(/http/i) : null, _b = $b ? "" : "http://", ac = /^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i, bc = ["mpeg4", "aac", "flv", "mov", "mp4", "m4v", "f4v", "m4a", "m4b", "mp4v", "3gp", "3g2"], cc = new RegExp("\\.(" + bc.join("|") + ")(\\?.*)?$", "i");
        this.mimePattern = /^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i, this.useAltURL = !$b, P = {swfBox: "sm2-object-box", swfDefault: "movieContainer", swfError: "swf_error", swfTimedout: "swf_timedout", swfLoaded: "swf_loaded", swfUnblocked: "swf_unblocked", sm2Debug: "sm2_debug", highPerf: "high_performance", flashDebug: "flash_debug"}, this.hasHTML5 = function () {
            try {
                return Audio !== b && (Qb && opera !== b && opera.version() < 10 ? new Audio(null) : new Audio).canPlayType !== b
            } catch (a) {
                return!1
            }
        }(), this.setup = function (a) {
            var c = !nb.url;
            return a !== b && wb && Hb && nb.ok() && (a.flashVersion !== b || a.url !== b || a.html5Test !== b), o(a), a && (c && D && a.url !== b && nb.beginDelayedInit(), D || a.url === b || "complete" !== sb.readyState || setTimeout(B, 1)), nb
        }, this.ok = function () {
            return Hb ? wb && !xb : nb.useHTML5Audio && nb.hasHTML5
        }, this.supported = this.ok, this.getMovie = function (b) {
            return h(b) || sb[b] || a[b]
        }, this.createSound = function (a, c) {
            function d() {
                return f = Q(f), nb.sounds[f.id] = new g(f), nb.soundIDs.push(f.id), nb.sounds[f.id]
            }

            var e, f, h = null;
            if (!wb || !nb.ok())return!1;
            if (c !== b && (a = {id: a, url: c}), f = n(a), f.url = X(f.url), void 0 === f.id && (f.id = nb.setupOptions.idPrefix + Kb++), T(f.id, !0))return nb.sounds[f.id];
            if ($(f))h = d(), h._setup_html5(f); else {
                if (nb.html5Only)return d();
                if (nb.html5.usingFlash && f.url && f.url.match(/data\:/i))return d();
                l > 8 && null === f.isMovieStar && (f.isMovieStar = !!(f.serverURL || (f.type ? f.type.match(ac) : !1) || f.url && f.url.match(cc))), f = R(f, e), h = d(), 8 === l ? pb._createSound(f.id, f.loops || 1, f.usePolicyFile) : (pb._createSound(f.id, f.url, f.usePeakData, f.useWaveformData, f.useEQData, f.isMovieStar, f.isMovieStar ? f.bufferTime : !1, f.loops || 1, f.serverURL, f.duration || null, f.autoPlay, !0, f.autoLoad, f.usePolicyFile), f.serverURL || (h.connected = !0, f.onconnect && f.onconnect.apply(h))), f.serverURL || !f.autoLoad && !f.autoPlay || h.load(f)
            }
            return!f.serverURL && f.autoPlay && h.play(), h
        }, this.destroySound = function (a, b) {
            if (!T(a))return!1;
            var c, d = nb.sounds[a];
            for (d._iO = {}, d.stop(), d.unload(), c = 0; c < nb.soundIDs.length; c++)if (nb.soundIDs[c] === a) {
                nb.soundIDs.splice(c, 1);
                break
            }
            return b || d.destruct(!0), d = null, delete nb.sounds[a], !0
        }, this.load = function (a, b) {
            return T(a) ? nb.sounds[a].load(b) : !1
        }, this.unload = function (a) {
            return T(a) ? nb.sounds[a].unload() : !1
        }, this.onPosition = function (a, b, c, d) {
            return T(a) ? nb.sounds[a].onposition(b, c, d) : !1
        }, this.onposition = this.onPosition, this.clearOnPosition = function (a, b, c) {
            return T(a) ? nb.sounds[a].clearOnPosition(b, c) : !1
        }, this.play = function (a, b) {
            var c = null, d = b && !(b instanceof Object);
            if (!wb || !nb.ok())return!1;
            if (T(a, d))d && (b = {url: b}); else {
                if (!d)return!1;
                d && (b = {url: b}), b && b.url && (b.id = a, c = nb.createSound(b).play())
            }
            return null === c && (c = nb.sounds[a].play(b)), c
        }, this.start = this.play, this.setPosition = function (a, b) {
            return T(a) ? nb.sounds[a].setPosition(b) : !1
        }, this.stop = function (a) {
            return T(a) ? nb.sounds[a].stop() : !1
        }, this.stopAll = function () {
            var a;
            for (a in nb.sounds)nb.sounds.hasOwnProperty(a) && nb.sounds[a].stop()
        }, this.pause = function (a) {
            return T(a) ? nb.sounds[a].pause() : !1
        }, this.pauseAll = function () {
            var a;
            for (a = nb.soundIDs.length - 1; a >= 0; a--)nb.sounds[nb.soundIDs[a]].pause()
        }, this.resume = function (a) {
            return T(a) ? nb.sounds[a].resume() : !1
        }, this.resumeAll = function () {
            var a;
            for (a = nb.soundIDs.length - 1; a >= 0; a--)nb.sounds[nb.soundIDs[a]].resume()
        }, this.togglePause = function (a) {
            return T(a) ? nb.sounds[a].togglePause() : !1
        }, this.setPan = function (a, b) {
            return T(a) ? nb.sounds[a].setPan(b) : !1
        }, this.setVolume = function (a, b) {
            return T(a) ? nb.sounds[a].setVolume(b) : !1
        }, this.mute = function (a) {
            var b = 0;
            if (a instanceof String && (a = null), a)return T(a) ? nb.sounds[a].mute() : !1;
            for (b = nb.soundIDs.length - 1; b >= 0; b--)nb.sounds[nb.soundIDs[b]].mute();
            return nb.muted = !0, !0
        }, this.muteAll = function () {
            nb.mute()
        }, this.unmute = function (a) {
            var b;
            if (a instanceof String && (a = null), a)return T(a) ? nb.sounds[a].unmute() : !1;
            for (b = nb.soundIDs.length - 1; b >= 0; b--)nb.sounds[nb.soundIDs[b]].unmute();
            return nb.muted = !1, !0
        }, this.unmuteAll = function () {
            nb.unmute()
        }, this.toggleMute = function (a) {
            return T(a) ? nb.sounds[a].toggleMute() : !1
        }, this.getMemoryUse = function () {
            var a = 0;
            return pb && 8 !== l && (a = parseInt(pb._getMemoryUse(), 10)), a
        }, this.disable = function (c) {
            var d;
            if (c === b && (c = !1), xb)return!1;
            for (xb = !0, d = nb.soundIDs.length - 1; d >= 0; d--)J(nb.sounds[nb.soundIDs[d]]);
            return m(c), eb.remove(a, "load", s), !0
        }, this.canPlayMIME = function (a) {
            var b;
            return nb.hasHTML5 && (b = _({type: a})), !b && Hb && (b = a && nb.ok() ? !!((l > 8 ? a.match(ac) : null) || a.match(nb.mimePattern)) : null), b
        }, this.canPlayURL = function (a) {
            var b;
            return nb.hasHTML5 && (b = _({url: a})), !b && Hb && (b = a && nb.ok() ? !!a.match(nb.filePattern) : null), b
        }, this.canPlayLink = function (a) {
            return a.type !== b && a.type && nb.canPlayMIME(a.type) ? !0 : nb.canPlayURL(a.href)
        }, this.getSoundById = function (a) {
            if (!a)return null;
            var b = nb.sounds[a];
            return b
        }, this.onready = function (b, c) {
            var d = "onready", e = !1;
            if ("function" != typeof b)throw M("needFunction", d);
            return c || (c = a), q(d, b, c), r(), e = !0, e
        }, this.ontimeout = function (b, c) {
            var d = "ontimeout", e = !1;
            if ("function" != typeof b)throw M("needFunction", d);
            return c || (c = a), q(d, b, c), r({type: d}), e = !0, e
        }, this._writeDebug = function () {
            return!0
        }, this._wD = this._writeDebug, this._debug = function () {
        }, this.reboot = function (b, c) {
            var d, e, f;
            for (d = nb.soundIDs.length - 1; d >= 0; d--)nb.sounds[nb.soundIDs[d]].destruct();
            if (pb)try {
                Nb && (Bb = pb.innerHTML), Ab = pb.parentNode.removeChild(pb)
            } catch (g) {
            }
            if (Bb = Ab = Hb = pb = null, nb.enabled = D = wb = Cb = Db = ub = vb = xb = Jb = nb.swfLoaded = !1, nb.soundIDs = [], nb.sounds = {}, Kb = 0, b)tb = []; else for (d in tb)if (tb.hasOwnProperty(d))for (e = 0, f = tb[d].length; f > e; e++)tb[d][e].fired = !1;
            return nb.html5 = {usingFlash: null}, nb.flash = {}, nb.html5Only = !1, nb.ignoreFlash = !1, a.setTimeout(function () {
                A(), c || nb.beginDelayedInit()
            }, 20), nb
        }, this.reset = function () {
            return nb.reboot(!0, !0)
        }, this.getMoviePercent = function () {
            return pb && "PercentLoaded"in pb ? pb.PercentLoaded() : null
        }, this.beginDelayedInit = function () {
            yb = !0, B(), setTimeout(function () {
                return Db ? !1 : (F(), z(), Db = !0, !0)
            }, 20), t()
        }, this.destruct = function () {
            nb.disable(!0)
        }, g = function (a) {
            var c, d, e, f, g, h, i, j, k, m, o = this, p = !1, q = [], r = 0, s = null;
            k = {duration: null, time: null}, this.id = a.id, this.sID = this.id, this.url = a.url, this.options = n(a), this.instanceOptions = this.options, this._iO = this.instanceOptions, this.pan = this.options.pan, this.volume = this.options.volume, this.isHTML5 = !1, this._a = null, m = this.url ? !1 : !0, this.id3 = {}, this._debug = function () {
            }, this.load = function (a) {
                var c, d = null;
                if (a !== b ? o._iO = n(a, o.options) : (a = o.options, o._iO = a, s && s !== o.url && (o._iO.url = o.url, o.url = null)), o._iO.url || (o._iO.url = o.url), o._iO.url = X(o._iO.url), o.instanceOptions = o._iO, c = o._iO, !c.url && !o.url)return o;
                if (c.url === o.url && 0 !== o.readyState && 2 !== o.readyState)return 3 === o.readyState && c.onload && mb(o, function () {
                    c.onload.apply(o, [!!o.duration])
                }), o;
                if (o.loaded = !1, o.readyState = 1, o.playState = 0, o.id3 = {}, $(c))d = o._setup_html5(c), d._called_load || (o._html5_canplay = !1, o.url !== c.url && (o._a.src = c.url, o.setPosition(0)), o._a.autobuffer = "auto", o._a.preload = "auto", o._a._called_load = !0); else {
                    if (nb.html5Only)return o;
                    if (o._iO.url && o._iO.url.match(/data\:/i))return o;
                    try {
                        o.isHTML5 = !1, o._iO = R(Q(c)), o._iO.autoPlay && (o._iO.position || o._iO.from) && (o._iO.autoPlay = !1), c = o._iO, 8 === l ? pb._load(o.id, c.url, c.stream, c.autoPlay, c.usePolicyFile) : pb._load(o.id, c.url, !!c.stream, !!c.autoPlay, c.loops || 1, !!c.autoLoad, c.usePolicyFile)
                    } catch (e) {
                        G({type: "SMSOUND_LOAD_JS_EXCEPTION", fatal: !0})
                    }
                }
                return o.url = c.url, o
            }, this.unload = function () {
                return 0 !== o.readyState && (o.isHTML5 ? (f(), o._a && (o._a.pause(), s = bb(o._a))) : 8 === l ? pb._unload(o.id, Yb) : pb._unload(o.id), c()), o
            }, this.destruct = function (a) {
                o.isHTML5 ? (f(), o._a && (o._a.pause(), bb(o._a), Jb || e(), o._a._s = null, o._a = null)) : (o._iO.onfailure = null, pb._destroySound(o.id)), a || nb.destroySound(o.id, !0)
            }, this.play = function (a, c) {
                var d, e, f, i, k, q, r = !0, s = null;
                if (c = c === b ? !0 : c, a || (a = {}), o.url && (o._iO.url = o.url), o._iO = n(o._iO, o.options), o._iO = n(a, o._iO), o._iO.url = X(o._iO.url), o.instanceOptions = o._iO, !o.isHTML5 && o._iO.serverURL && !o.connected)return o.getAutoPlay() || o.setAutoPlay(!0), o;
                if ($(o._iO) && (o._setup_html5(o._iO), g()), 1 !== o.playState || o.paused || (d = o._iO.multiShot, d || (o.isHTML5 && o.setPosition(o._iO.position), s = o)), null !== s)return s;
                if (a.url && a.url !== o.url && (o.readyState || o.isHTML5 || 8 !== l || !m ? o.load(o._iO) : m = !1), o.loaded || (0 === o.readyState ? (o.isHTML5 || nb.html5Only ? o.isHTML5 ? o.load(o._iO) : s = o : (o._iO.autoPlay = !0, o.load(o._iO)), o.instanceOptions = o._iO) : 2 === o.readyState && (s = o)), null !== s)return s;
                if (!o.isHTML5 && 9 === l && o.position > 0 && o.position === o.duration && (a.position = 0), o.paused && o.position >= 0 && (!o._iO.serverURL || o.position > 0))o.resume(); else {
                    if (o._iO = n(a, o._iO), (!o.isHTML5 && null !== o._iO.position && o._iO.position > 0 || null !== o._iO.from && o._iO.from > 0 || null !== o._iO.to) && 0 === o.instanceCount && 0 === o.playState && !o._iO.serverURL) {
                        if (f = function () {
                            o._iO = n(a, o._iO), o.play(o._iO)
                        }, o.isHTML5 && !o._html5_canplay ? (o.load({_oncanplay: f}), s = !1) : o.isHTML5 || o.loaded || o.readyState && 2 === o.readyState || (o.load({onload: f}), s = !1), null !== s)return s;
                        o._iO = j()
                    }
                    (!o.instanceCount || o._iO.multiShotEvents || o.isHTML5 && o._iO.multiShot && !Jb || !o.isHTML5 && l > 8 && !o.getAutoPlay()) && o.instanceCount++, o._iO.onposition && 0 === o.playState && h(o), o.playState = 1, o.paused = !1, o.position = o._iO.position === b || isNaN(o._iO.position) ? 0 : o._iO.position, o.isHTML5 || (o._iO = R(Q(o._iO))), o._iO.onplay && c && (o._iO.onplay.apply(o), p = !0), o.setVolume(o._iO.volume, !0), o.setPan(o._iO.pan, !0), o.isHTML5 ? o.instanceCount < 2 ? (g(), e = o._setup_html5(), o.setPosition(o._iO.position), e.play()) : (i = new Audio(o._iO.url), k = function () {
                        eb.remove(i, "ended", k), o._onfinish(o), bb(i), i = null
                    }, q = function () {
                        eb.remove(i, "canplay", q);
                        try {
                            i.currentTime = o._iO.position / Xb
                        } catch (a) {
                        }
                        i.play()
                    }, eb.add(i, "ended", k), void 0 !== o._iO.volume && (i.volume = Math.max(0, Math.min(1, o._iO.volume / 100))), o.muted && (i.muted = !0), o._iO.position ? eb.add(i, "canplay", q) : i.play()) : (r = pb._start(o.id, o._iO.loops || 1, 9 === l ? o.position : o.position / Xb, o._iO.multiShot || !1), 9 !== l || r || o._iO.onplayerror && o._iO.onplayerror.apply(o))
                }
                return o
            }, this.start = this.play, this.stop = function (a) {
                var b, c = o._iO;
                return 1 === o.playState && (o._onbufferchange(0), o._resetOnPosition(0), o.paused = !1, o.isHTML5 || (o.playState = 0), i(), c.to && o.clearOnPosition(c.to), o.isHTML5 ? o._a && (b = o.position, o.setPosition(0), o.position = b, o._a.pause(), o.playState = 0, o._onTimer(), f()) : (pb._stop(o.id, a), c.serverURL && o.unload()), o.instanceCount = 0, o._iO = {}, c.onstop && c.onstop.apply(o)), o
            }, this.setAutoPlay = function (a) {
                o._iO.autoPlay = a, o.isHTML5 || (pb._setAutoPlay(o.id, a), a && (o.instanceCount || 1 !== o.readyState || o.instanceCount++))
            }, this.getAutoPlay = function () {
                return o._iO.autoPlay
            }, this.setPosition = function (a) {
                a === b && (a = 0);
                var c, d, e = o.isHTML5 ? Math.max(a, 0) : Math.min(o.duration || o._iO.duration, Math.max(a, 0));
                if (o.position = e, d = o.position / Xb, o._resetOnPosition(o.position), o._iO.position = e, o.isHTML5) {
                    if (o._a) {
                        if (o._html5_canplay) {
                            if (o._a.currentTime !== d)try {
                                o._a.currentTime = d, (0 === o.playState || o.paused) && o._a.pause()
                            } catch (f) {
                            }
                        } else if (d)return o;
                        o.paused && o._onTimer(!0)
                    }
                } else c = 9 === l ? o.position : d, o.readyState && 2 !== o.readyState && pb._setPosition(o.id, c, o.paused || !o.playState, o._iO.multiShot);
                return o
            }, this.pause = function (a) {
                return o.paused || 0 === o.playState && 1 !== o.readyState ? o : (o.paused = !0, o.isHTML5 ? (o._setup_html5().pause(), f()) : (a || a === b) && pb._pause(o.id, o._iO.multiShot), o._iO.onpause && o._iO.onpause.apply(o), o)
            }, this.resume = function () {
                var a = o._iO;
                return o.paused ? (o.paused = !1, o.playState = 1, o.isHTML5 ? (o._setup_html5().play(), g()) : (a.isMovieStar && !a.serverURL && o.setPosition(o.position), pb._pause(o.id, a.multiShot)), !p && a.onplay ? (a.onplay.apply(o), p = !0) : a.onresume && a.onresume.apply(o), o) : o
            }, this.togglePause = function () {
                return 0 === o.playState ? (o.play({position: 9 !== l || o.isHTML5 ? o.position / Xb : o.position}), o) : (o.paused ? o.resume() : o.pause(), o)
            }, this.setPan = function (a, c) {
                return a === b && (a = 0), c === b && (c = !1), o.isHTML5 || pb._setPan(o.id, a), o._iO.pan = a, c || (o.pan = a, o.options.pan = a), o
            }, this.setVolume = function (a, c) {
                return a === b && (a = 100), c === b && (c = !1), o.isHTML5 ? o._a && (nb.muted && !o.muted && (o.muted = !0, o._a.muted = !0), o._a.volume = Math.max(0, Math.min(1, a / 100))) : pb._setVolume(o.id, nb.muted && !o.muted || o.muted ? 0 : a), o._iO.volume = a, c || (o.volume = a, o.options.volume = a), o
            }, this.mute = function () {
                return o.muted = !0, o.isHTML5 ? o._a && (o._a.muted = !0) : pb._setVolume(o.id, 0), o
            }, this.unmute = function () {
                o.muted = !1;
                var a = o._iO.volume !== b;
                return o.isHTML5 ? o._a && (o._a.muted = !1) : pb._setVolume(o.id, a ? o._iO.volume : o.options.volume), o
            }, this.toggleMute = function () {
                return o.muted ? o.unmute() : o.mute()
            }, this.onPosition = function (a, c, d) {
                return q.push({position: parseInt(a, 10), method: c, scope: d !== b ? d : o, fired: !1}), o
            }, this.onposition = this.onPosition, this.clearOnPosition = function (a, b) {
                var c;
                if (a = parseInt(a, 10), isNaN(a))return!1;
                for (c = 0; c < q.length; c++)a === q[c].position && (b && b !== q[c].method || (q[c].fired && r--, q.splice(c, 1)))
            }, this._processOnPosition = function () {
                var a, b, c = q.length;
                if (!c || !o.playState || r >= c)return!1;
                for (a = c - 1; a >= 0; a--)b = q[a], !b.fired && o.position >= b.position && (b.fired = !0, r++, b.method.apply(b.scope, [b.position]), c = q.length);
                return!0
            }, this._resetOnPosition = function (a) {
                var b, c, d = q.length;
                if (!d)return!1;
                for (b = d - 1; b >= 0; b--)c = q[b], c.fired && a <= c.position && (c.fired = !1, r--);
                return!0
            }, j = function () {
                var a, b, c = o._iO, d = c.from, e = c.to;
                return b = function () {
                    o.clearOnPosition(e, b), o.stop()
                }, a = function () {
                    null === e || isNaN(e) || o.onPosition(e, b)
                }, null === d || isNaN(d) || (c.position = d, c.multiShot = !1, a()), c
            }, h = function () {
                var a, b = o._iO.onposition;
                if (b)for (a in b)b.hasOwnProperty(a) && o.onPosition(parseInt(a, 10), b[a])
            }, i = function () {
                var a, b = o._iO.onposition;
                if (b)for (a in b)b.hasOwnProperty(a) && o.clearOnPosition(parseInt(a, 10))
            }, g = function () {
                o.isHTML5 && U(o)
            }, f = function () {
                o.isHTML5 && V(o)
            }, c = function (a) {
                a || (q = [], r = 0), p = !1, o._hasTimer = null, o._a = null, o._html5_canplay = !1, o.bytesLoaded = null, o.bytesTotal = null, o.duration = o._iO && o._iO.duration ? o._iO.duration : null, o.durationEstimate = null, o.buffered = [], o.eqData = [], o.eqData.left = [], o.eqData.right = [], o.failures = 0, o.isBuffering = !1, o.instanceOptions = {}, o.instanceCount = 0, o.loaded = !1, o.metadata = {}, o.readyState = 0, o.muted = !1, o.paused = !1, o.peakData = {left: 0, right: 0}, o.waveformData = {left: [], right: []}, o.playState = 0, o.position = null, o.id3 = {}
            }, c(), this._onTimer = function (a) {
                var b, c, d = !1, e = {};
                return o._hasTimer || a ? (o._a && (a || (o.playState > 0 || 1 === o.readyState) && !o.paused) && (b = o._get_html5_duration(), b !== k.duration && (k.duration = b, o.duration = b, d = !0), o.durationEstimate = o.duration, c = o._a.currentTime * Xb || 0, c !== k.time && (k.time = c, d = !0), (d || a) && o._whileplaying(c, e, e, e, e)), d) : void 0
            }, this._get_html5_duration = function () {
                var a = o._iO, b = o._a && o._a.duration ? o._a.duration * Xb : a && a.duration ? a.duration : null, c = b && !isNaN(b) && 1 / 0 !== b ? b : null;
                return c
            }, this._apply_loop = function (a, b) {
                a.loop = b > 1 ? "loop" : ""
            }, this._setup_html5 = function (a) {
                var b, e = n(o._iO, a), f = Jb ? ob : o._a, g = decodeURI(e.url);
                if (Jb ? g === decodeURI(fb) && (b = !0) : g === decodeURI(s) && (b = !0), f) {
                    if (f._s)if (Jb)f._s && f._s.playState && !b && f._s.stop(); else if (!Jb && g === decodeURI(s))return o._apply_loop(f, e.loops), f;
                    b || (s && c(!1), f.src = e.url, o.url = e.url, s = e.url, fb = e.url, f._called_load = !1)
                } else e.autoLoad || e.autoPlay ? (o._a = new Audio(e.url), o._a.load()) : o._a = Qb && opera.version() < 10 ? new Audio(null) : new Audio, f = o._a, f._called_load = !1, Jb && (ob = f);
                return o.isHTML5 = !0, o._a = f, f._s = o, d(), o._apply_loop(f, e.loops), e.autoLoad || e.autoPlay ? o.load() : (f.autobuffer = !1, f.preload = "auto"), f
            }, d = function () {
                function a(a, b, c) {
                    return o._a ? o._a.addEventListener(a, b, c || !1) : null
                }

                if (o._a._added_events)return!1;
                var b;
                o._a._added_events = !0;
                for (b in jb)jb.hasOwnProperty(b) && a(b, jb[b]);
                return!0
            }, e = function () {
                function a(a, b, c) {
                    return o._a ? o._a.removeEventListener(a, b, c || !1) : null
                }

                var b;
                o._a._added_events = !1;
                for (b in jb)jb.hasOwnProperty(b) && a(b, jb[b])
            }, this._onload = function (a) {
                var b = !!a || !o.isHTML5 && 8 === l && o.duration;
                return o.loaded = b, o.readyState = b ? 3 : 2, o._onbufferchange(0), o._iO.onload && mb(o, function () {
                    o._iO.onload.apply(o, [b])
                }), !0
            }, this._onbufferchange = function (a) {
                return 0 === o.playState ? !1 : a && o.isBuffering || !a && !o.isBuffering ? !1 : (o.isBuffering = 1 === a, o._iO.onbufferchange && o._iO.onbufferchange.apply(o, [a]), !0)
            }, this._onsuspend = function () {
                return o._iO.onsuspend && o._iO.onsuspend.apply(o), !0
            }, this._onfailure = function (a, b, c) {
                o.failures++, o._iO.onfailure && 1 === o.failures && o._iO.onfailure(a, b, c)
            }, this._onwarning = function (a, b, c) {
                o._iO.onwarning && o._iO.onwarning(a, b, c)
            }, this._onfinish = function () {
                var a = o._iO.onfinish;
                o._onbufferchange(0), o._resetOnPosition(0), o.instanceCount && (o.instanceCount--, o.instanceCount || (i(), o.playState = 0, o.paused = !1, o.instanceCount = 0, o.instanceOptions = {}, o._iO = {}, f(), o.isHTML5 && (o.position = 0)), (!o.instanceCount || o._iO.multiShotEvents) && a && mb(o, function () {
                    a.apply(o)
                }))
            }, this._whileloading = function (a, b, c, d) {
                var e = o._iO;
                o.bytesLoaded = a, o.bytesTotal = b, o.duration = Math.floor(c), o.bufferLength = d, o.durationEstimate = o.isHTML5 || e.isMovieStar ? o.duration : e.duration ? o.duration > e.duration ? o.duration : e.duration : parseInt(o.bytesTotal / o.bytesLoaded * o.duration, 10), o.isHTML5 || (o.buffered = [
                    {start: 0, end: o.duration}
                ]), (3 !== o.readyState || o.isHTML5) && e.whileloading && e.whileloading.apply(o)
            }, this._whileplaying = function (a, c, d, e, f) {
                var g, h = o._iO;
                return isNaN(a) || null === a ? !1 : (o.position = Math.max(0, a), o._processOnPosition(), !o.isHTML5 && l > 8 && (h.usePeakData && c !== b && c && (o.peakData = {left: c.leftPeak, right: c.rightPeak}), h.useWaveformData && d !== b && d && (o.waveformData = {left: d.split(","), right: e.split(",")}), h.useEQData && f !== b && f && f.leftEQ && (g = f.leftEQ.split(","), o.eqData = g, o.eqData.left = g, f.rightEQ !== b && f.rightEQ && (o.eqData.right = f.rightEQ.split(",")))), 1 === o.playState && (o.isHTML5 || 8 !== l || o.position || !o.isBuffering || o._onbufferchange(0), h.whileplaying && h.whileplaying.apply(o)), !0)
            }, this._oncaptiondata = function (a) {
                o.captiondata = a, o._iO.oncaptiondata && o._iO.oncaptiondata.apply(o, [a])
            }, this._onmetadata = function (a, b) {
                var c, d, e = {};
                for (c = 0, d = a.length; d > c; c++)e[a[c]] = b[c];
                o.metadata = e, console.log("updated metadata", o.metadata), o._iO.onmetadata && o._iO.onmetadata.call(o, o.metadata)
            }, this._onid3 = function (a, b) {
                var c, d, e = [];
                for (c = 0, d = a.length; d > c; c++)e[a[c]] = b[c];
                o.id3 = n(o.id3, e), o._iO.onid3 && o._iO.onid3.apply(o)
            }, this._onconnect = function (a) {
                a = 1 === a, o.connected = a, a && (o.failures = 0, T(o.id) && (o.getAutoPlay() ? o.play(b, o.getAutoPlay()) : o._iO.autoLoad && o.load()), o._iO.onconnect && o._iO.onconnect.apply(o, [a]))
            }, this._ondataerror = function () {
                o.playState > 0 && o._iO.ondataerror && o._iO.ondataerror.apply(o)
            }
        }, E = function () {
            return sb.body || sb.getElementsByTagName("div")[0]
        }, h = function (a) {
            return sb.getElementById(a)
        }, n = function (a, c) {
            var d, e, f = a || {};
            d = c === b ? nb.defaultOptions : c;
            for (e in d)d.hasOwnProperty(e) && f[e] === b && (f[e] = "object" != typeof d[e] || null === d[e] ? d[e] : n(f[e], d[e]));
            return f
        }, mb = function (b, c) {
            b.isHTML5 || 8 !== l ? c() : a.setTimeout(c, 0)
        }, p = {onready: 1, ontimeout: 1, defaultOptions: 1, flash9Options: 1, movieStarOptions: 1}, o = function (a, c) {
            var d, e = !0, f = c !== b, g = nb.setupOptions, h = p;
            for (d in a)if (a.hasOwnProperty(d))if ("object" != typeof a[d] || null === a[d] || a[d]instanceof Array || a[d]instanceof RegExp)f && h[c] !== b ? nb[c][d] = a[d] : g[d] !== b ? (nb.setupOptions[d] = a[d], nb[d] = a[d]) : h[d] === b ? e = !1 : nb[d]instanceof Function ? nb[d].apply(nb, a[d]instanceof Array ? a[d] : [a[d]]) : nb[d] = a[d]; else {
                if (h[d] !== b)return o(a[d], d);
                e = !1
            }
            return e
        }, eb = function () {
            function b(a) {
                var b = Ib.call(a), c = b.length;
                return f ? (b[1] = "on" + b[1], c > 3 && b.pop()) : 3 === c && b.push(!1), b
            }

            function c(a, b) {
                var c = a.shift(), d = [g[b]];
                f ? c[d](a[0], a[1]) : c[d].apply(c, a)
            }

            function d() {
                c(b(arguments), "add")
            }

            function e() {
                c(b(arguments), "remove")
            }

            var f = a.attachEvent, g = {add: f ? "attachEvent" : "addEventListener", remove: f ? "detachEvent" : "removeEventListener"};
            return{add: d, remove: e}
        }(), jb = {abort: f(function () {
        }), canplay: f(function () {
            var a, c = this._s;
            if (c._html5_canplay)return!0;
            if (c._html5_canplay = !0, c._onbufferchange(0), a = c._iO.position === b || isNaN(c._iO.position) ? null : c._iO.position / Xb, this.currentTime !== a)try {
                this.currentTime = a
            } catch (d) {
            }
            c._iO._oncanplay && c._iO._oncanplay()
        }), canplaythrough: f(function () {
            var a = this._s;
            a.loaded || (a._onbufferchange(0), a._whileloading(a.bytesLoaded, a.bytesTotal, a._get_html5_duration()), a._onload(!0))
        }), durationchange: f(function () {
            var a, b = this._s;
            a = b._get_html5_duration(), isNaN(a) || a === b.duration || (b.durationEstimate = b.duration = a)
        }), ended: f(function () {
            var a = this._s;
            a._onfinish()
        }), error: f(function () {
            this._s._onload(!1)
        }), loadeddata: f(function () {
            var a = this._s;
            a._loaded || Pb || (a.duration = a._get_html5_duration())
        }), loadedmetadata: f(function () {
        }), loadstart: f(function () {
            this._s._onbufferchange(1)
        }), play: f(function () {
            this._s._onbufferchange(0)
        }), playing: f(function () {
            this._s._onbufferchange(0)
        }), progress: f(function (a) {
            var b, c, d = this._s, e = 0, f = ("progress" === a.type, a.target.buffered), g = a.loaded || 0, h = a.total || 1;
            if (d.buffered = [], f && f.length) {
                for (b = 0, c = f.length; c > b; b++)d.buffered.push({start: f.start(b) * Xb, end: f.end(b) * Xb});
                e = (f.end(0) - f.start(0)) * Xb, g = Math.min(1, e / (a.target.duration * Xb))
            }
            isNaN(g) || (d._whileloading(g, h, d._get_html5_duration()), g && h && g === h && jb.canplaythrough.call(this, a))
        }), ratechange: f(function () {
        }), suspend: f(function (a) {
            var b = this._s;
            jb.progress.call(this, a), b._onsuspend()
        }), stalled: f(function () {
        }), timeupdate: f(function () {
            this._s._onTimer()
        }), waiting: f(function () {
            var a = this._s;
            a._onbufferchange(1)
        })}, $ = function (a) {
            var b;
            return b = a && (a.type || a.url || a.serverURL) ? a.serverURL || a.type && e(a.type) ? !1 : a.type ? _({type: a.type}) : _({url: a.url}) || nb.html5Only || a.url.match(/data\:/i) : !1
        }, bb = function (a) {
            var b;
            return a && (b = Pb ? Yb : nb.html5.canPlayType("audio/wav") ? Zb : Yb, a.src = b, void 0 !== a._called_unload && (a._called_load = !1)), Jb && (fb = null), b
        }, _ = function (a) {
            if (!nb.useHTML5Audio || !nb.hasHTML5)return!1;
            var c, d, f, g, h = a.url || null, i = a.type || null, j = nb.audioFormats;
            if (i && nb.html5[i] !== b)return nb.html5[i] && !e(i);
            if (!ab) {
                ab = [];
                for (g in j)j.hasOwnProperty(g) && (ab.push(g), j[g].related && (ab = ab.concat(j[g].related)));
                ab = new RegExp("\\.(" + ab.join("|") + ")(\\?.*)?$", "i")
            }
            return f = h ? h.toLowerCase().match(ab) : null, f && f.length ? f = f[1] : i ? (d = i.indexOf(";"), f = (-1 !== d ? i.substr(0, d) : i).substr(6)) : c = !1, f && nb.html5[f] !== b ? c = nb.html5[f] && !e(f) : (i = "audio/" + f, c = nb.html5.canPlayType({type: i}), nb.html5[f] = c, c = c && nb.html5[i] && !e(i)), c
        }, db = function () {
            function a(a) {
                var b, c, d = !1, e = !1;
                if (!g || "function" != typeof g.canPlayType)return d;
                if (a instanceof Array) {
                    for (f = 0, c = a.length; c > f; f++)(nb.html5[a[f]] || g.canPlayType(a[f]).match(nb.html5Test)) && (e = !0, nb.html5[a[f]] = !0, nb.flash[a[f]] = !!a[f].match(Wb));
                    d = e
                } else b = g && "function" == typeof g.canPlayType ? g.canPlayType(a) : !1, d = !(!b || !b.match(nb.html5Test));
                return d
            }

            if (!nb.useHTML5Audio || !nb.hasHTML5)return nb.html5.usingFlash = !0, Hb = !0, !1;
            var c, d, e, f, g = Audio !== b ? Qb && opera.version() < 10 ? new Audio(null) : new Audio : null, h = {};
            e = nb.audioFormats;
            for (c in e)if (e.hasOwnProperty(c) && (d = "audio/" + c, h[c] = a(e[c].type), h[d] = h[c], c.match(Wb) ? (nb.flash[c] = !0, nb.flash[d] = !0) : (nb.flash[c] = !1, nb.flash[d] = !1), e[c] && e[c].related))for (f = e[c].related.length - 1; f >= 0; f--)h["audio/" + e[c].related[f]] = h[c], nb.html5[e[c].related[f]] = h[c], nb.flash[e[c].related[f]] = h[c];
            return h.canPlayType = g ? a : null, nb.html5 = n(nb.html5, h), nb.html5.usingFlash = Z(), Hb = nb.html5.usingFlash, !0
        }, y = {}, M = function () {
        }, Q = function (a) {
            return 8 === l && a.loops > 1 && a.stream && (a.stream = !1), a
        }, R = function (a) {
            return a && !a.usePolicyFile && (a.onid3 || a.usePeakData || a.useWaveformData || a.useEQData) && (a.usePolicyFile = !0), a
        }, S = function () {
        }, i = function () {
            return!1
        }, J = function (a) {
            var b;
            for (b in a)a.hasOwnProperty(b) && "function" == typeof a[b] && (a[b] = i);
            b = null
        }, K = function (a) {
            a === b && (a = !1), (xb || a) && nb.disable(a)
        }, L = function (a) {
            var b, c = null;
            if (a)if (a.match(/\.swf(\?.*)?$/i)) {
                if (c = a.substr(a.toLowerCase().lastIndexOf(".swf?") + 4))return a
            } else a.lastIndexOf("/") !== a.length - 1 && (a += "/");
            return b = (a && -1 !== a.lastIndexOf("/") ? a.substr(0, a.lastIndexOf("/") + 1) : "./") + nb.movieURL, nb.noSWFCache && (b += "?ts=" + (new Date).getTime()), b
        }, w = function () {
            l = parseInt(nb.flashVersion, 10), 8 !== l && 9 !== l && (nb.flashVersion = l = zb);
            var a = nb.debugMode || nb.debugFlash ? "_debug.swf" : ".swf";
            nb.useHTML5Audio && !nb.html5Only && nb.audioFormats.mp4.required && 9 > l && (nb.flashVersion = l = 9), nb.version = nb.versionNumber + (nb.html5Only ? " (HTML5-only mode)" : 9 === l ? " (AS3/Flash 9)" : " (AS2/Flash 8)"), l > 8 ? (nb.defaultOptions = n(nb.defaultOptions, nb.flash9Options), nb.features.buffering = !0, nb.defaultOptions = n(nb.defaultOptions, nb.movieStarOptions), nb.filePatterns.flash9 = new RegExp("\\.(mp3|" + bc.join("|") + ")(\\?.*)?$", "i"), nb.features.movieStar = !0) : nb.features.movieStar = !1, nb.filePattern = nb.filePatterns[8 !== l ? "flash9" : "flash8"], nb.movieURL = (8 === l ? "soundmanager2.swf" : "soundmanager2_flash9.swf").replace(".swf", a), nb.features.peakData = nb.features.waveformData = nb.features.eqData = l > 8
        }, H = function (a, b) {
            return pb ? void pb._setPolling(a, b) : !1
        }, I = function () {
        }, T = this.getSoundById, O = function () {
            var a = [];
            return nb.debugMode && a.push(P.sm2Debug), nb.debugFlash && a.push(P.flashDebug), nb.useHighPerformance && a.push(P.highPerf), a.join(" ")
        }, N = function () {
            var a = (M("fbHandler"), nb.getMoviePercent()), b = P, c = {type: "FLASHBLOCK"};
            return nb.html5Only ? !1 : void(nb.ok() ? nb.oMC && (nb.oMC.className = [O(), b.swfDefault, b.swfLoaded + (nb.didFlashBlock ? " " + b.swfUnblocked : "")].join(" ")) : (Hb && (nb.oMC.className = O() + " " + b.swfDefault + " " + (null === a ? b.swfTimedout : b.swfError)), nb.didFlashBlock = !0, r({type: "ontimeout", ignoreInit: !0, error: c}), G(c)))
        }, q = function (a, c, d) {
            tb[a] === b && (tb[a] = []), tb[a].push({method: c, scope: d || null, fired: !1})
        }, r = function (a) {
            if (a || (a = {type: nb.ok() ? "onready" : "ontimeout"}), !wb && a && !a.ignoreInit)return!1;
            if ("ontimeout" === a.type && (nb.ok() || xb && !a.ignoreInit))return!1;
            var b, c, d = {success: a && a.ignoreInit ? nb.ok() : !xb}, e = a && a.type ? tb[a.type] || [] : [], f = [], g = [d], h = Hb && !nb.ok();
            for (a.error && (g[0].error = a.error), b = 0, c = e.length; c > b; b++)e[b].fired !== !0 && f.push(e[b]);
            if (f.length)for (b = 0, c = f.length; c > b; b++)f[b].scope ? f[b].method.apply(f[b].scope, g) : f[b].method.apply(this, g), h || (f[b].fired = !0);
            return!0
        }, s = function () {
            a.setTimeout(function () {
                nb.useFlashBlock && N(), r(), "function" == typeof nb.onload && nb.onload.apply(a), nb.waitForWindowLoad && eb.add(a, "load", s)
            }, 1)
        }, hb = function () {
            if (gb !== b)return gb;
            var c, d, e, f = !1, g = navigator, h = g.plugins, i = a.ActiveXObject;
            if (h && h.length)d = "application/x-shockwave-flash", e = g.mimeTypes, e && e[d] && e[d].enabledPlugin && e[d].enabledPlugin.description && (f = !0); else if (i !== b && !qb.match(/MSAppHost/i)) {
                try {
                    c = new i("ShockwaveFlash.ShockwaveFlash")
                } catch (j) {
                    c = null
                }
                f = !!c, c = null
            }
            return gb = f, f
        }, Z = function () {
            var a, b, c = nb.audioFormats, d = Lb && !!qb.match(/os (1|2|3_0|3_1)\s/i);
            if (d ? (nb.hasHTML5 = !1, nb.html5Only = !0, nb.oMC && (nb.oMC.style.display = "none")) : nb.useHTML5Audio && (nb.html5 && nb.html5.canPlayType || (nb.hasHTML5 = !1)), nb.useHTML5Audio && nb.hasHTML5) {
                Y = !0;
                for (b in c)c.hasOwnProperty(b) && c[b].required && (nb.html5.canPlayType(c[b].type) ? nb.preferFlash && (nb.flash[b] || nb.flash[c[b].type]) && (a = !0) : (Y = !1, a = !0))
            }
            return nb.ignoreFlash && (a = !1, Y = !0), nb.html5Only = nb.hasHTML5 && nb.useHTML5Audio && !a, !nb.html5Only
        }, X = function (a) {
            var b, c, d, e = 0;
            if (a instanceof Array) {
                for (b = 0, c = a.length; c > b; b++)if (a[b]instanceof Object) {
                    if (nb.canPlayMIME(a[b].type)) {
                        e = b;
                        break
                    }
                } else if (nb.canPlayURL(a[b])) {
                    e = b;
                    break
                }
                a[e].url && (a[e] = a[e].url), d = a[e]
            } else d = a;
            return d
        }, U = function (a) {
            a._hasTimer || (a._hasTimer = !0, !Rb && nb.html5PollingInterval && (null === Fb && 0 === Eb && (Fb = setInterval(W, nb.html5PollingInterval)), Eb++))
        }, V = function (a) {
            a._hasTimer && (a._hasTimer = !1, !Rb && nb.html5PollingInterval && Eb--)
        }, W = function () {
            var a;
            if (null !== Fb && !Eb)return clearInterval(Fb), Fb = null, !1;
            for (a = nb.soundIDs.length - 1; a >= 0; a--)nb.sounds[nb.soundIDs[a]].isHTML5 && nb.sounds[nb.soundIDs[a]]._hasTimer && nb.sounds[nb.soundIDs[a]]._onTimer()
        }, G = function (c) {
            c = c !== b ? c : {}, "function" == typeof nb.onerror && nb.onerror.apply(a, [
                {type: c.type !== b ? c.type : null}
            ]), c.fatal !== b && c.fatal && nb.disable()
        }, ib = function () {
            if (!Sb || !hb())return!1;
            var a, b, c = nb.audioFormats;
            for (b in c)if (c.hasOwnProperty(b) && ("mp3" === b || "mp4" === b) && (nb.html5[b] = !1, c[b] && c[b].related))for (a = c[b].related.length - 1; a >= 0; a--)nb.html5[c[b].related[a]] = !1
        }, this._setSandboxType = function () {
        }, this._externalInterfaceOK = function () {
            if (nb.swfLoaded)return!1;
            nb.swfLoaded = !0, Ub = !1, Sb && ib(), setTimeout(k, Nb ? 100 : 1)
        }, F = function (a, c) {
            function d() {
            }

            function e(a, b) {
                return'<param name="' + a + '" value="' + b + '" />'
            }

            if (ub && vb)return!1;
            if (nb.html5Only)return w(), d(), nb.oMC = h(nb.movieID), k(), ub = !0, vb = !0, !1;
            var f, g, i, j, l, m, n, o, p = c || nb.url, q = nb.altURL || p, r = "JS/Flash audio component (SoundManager 2)", s = E(), t = O(), u = null, v = sb.getElementsByTagName("html")[0];
            if (u = v && v.dir && v.dir.match(/rtl/i), a = a === b ? nb.id : a, w(), nb.url = L($b ? p : q), c = nb.url, nb.wmode = !nb.wmode && nb.useHighPerformance ? "transparent" : nb.wmode, null !== nb.wmode && (qb.match(/msie 8/i) || !Nb && !nb.useHighPerformance) && navigator.platform.match(/win32|win64/i) && (Gb.push(y.spcWmode), nb.wmode = null), f = {name: a, id: a, src: c, quality: "high", allowScriptAccess: nb.allowScriptAccess, bgcolor: nb.bgColor, pluginspage: _b + "www.macromedia.com/go/getflashplayer", title: r, type: "application/x-shockwave-flash", wmode: nb.wmode, hasPriority: "true"}, nb.debugFlash && (f.FlashVars = "debug=1"), nb.wmode || delete f.wmode, Nb)g = sb.createElement("div"), j = ['<object id="' + a + '" data="' + c + '" type="' + f.type + '" title="' + f.title + '" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="' + _b + 'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">', e("movie", c), e("AllowScriptAccess", nb.allowScriptAccess), e("quality", f.quality), nb.wmode ? e("wmode", nb.wmode) : "", e("bgcolor", nb.bgColor), e("hasPriority", "true"), nb.debugFlash ? e("FlashVars", f.FlashVars) : "", "</object>"].join(""); else {
                g = sb.createElement("embed");
                for (i in f)f.hasOwnProperty(i) && g.setAttribute(i, f[i])
            }
            if (I(), t = O(), s = E())if (nb.oMC = h(nb.movieID) || sb.createElement("div"), nb.oMC.id)o = nb.oMC.className, nb.oMC.className = (o ? o + " " : P.swfDefault) + (t ? " " + t : ""), nb.oMC.appendChild(g), Nb && (l = nb.oMC.appendChild(sb.createElement("div")), l.className = P.swfBox, l.innerHTML = j), vb = !0; else {
                if (nb.oMC.id = nb.movieID, nb.oMC.className = P.swfDefault + " " + t, m = null, l = null, nb.useFlashBlock || (nb.useHighPerformance ? m = {position: "fixed", width: "8px", height: "8px", bottom: "0px", left: "0px", overflow: "hidden"} : (m = {position: "absolute", width: "6px", height: "6px", top: "-9999px", left: "-9999px"}, u && (m.left = Math.abs(parseInt(m.left, 10)) + "px"))), Ob && (nb.oMC.style.zIndex = 1e4), !nb.debugFlash)for (n in m)m.hasOwnProperty(n) && (nb.oMC.style[n] = m[n]);
                try {
                    Nb || nb.oMC.appendChild(g), s.appendChild(nb.oMC), Nb && (l = nb.oMC.appendChild(sb.createElement("div")), l.className = P.swfBox, l.innerHTML = j), vb = !0
                } catch (x) {
                    throw new Error(M("domError") + " \n" + x.toString())
                }
            }
            return ub = !0, d(), !0
        }, z = function () {
            return nb.html5Only ? (F(), !1) : pb ? !1 : nb.url ? (pb = nb.getMovie(nb.id), pb || (Ab ? (Nb ? nb.oMC.innerHTML = Bb : nb.oMC.appendChild(Ab), Ab = null, ub = !0) : F(nb.id, nb.url), pb = nb.getMovie(nb.id)), "function" == typeof nb.oninitmovie && setTimeout(nb.oninitmovie, 1), !0) : !1
        }, t = function () {
            setTimeout(u, 1e3)
        }, v = function () {
            a.setTimeout(function () {
                nb.setup({preferFlash: !1}).reboot(), nb.didFlashBlock = !0, nb.beginDelayedInit()
            }, 1)
        }, u = function () {
            var b, c = !1;
            return nb.url ? Cb ? !1 : (Cb = !0, eb.remove(a, "load", t), gb && Ub && !Tb ? !1 : (wb || (b = nb.getMoviePercent(), b > 0 && 100 > b && (c = !0)), void setTimeout(function () {
                return b = nb.getMoviePercent(), c ? (Cb = !1, a.setTimeout(t, 1), !1) : void(!wb && Vb && (null === b ? nb.useFlashBlock || 0 === nb.flashLoadTimeout ? nb.useFlashBlock && N() : !nb.useFlashBlock && Y ? v() : r({type: "ontimeout", ignoreInit: !0, error: {type: "INIT_FLASHBLOCK"}}) : 0 === nb.flashLoadTimeout || (!nb.useFlashBlock && Y ? v() : K(!0))))
            }, nb.flashLoadTimeout))) : !1
        }, x = function () {
            function b() {
                eb.remove(a, "focus", x)
            }

            return Tb || !Ub ? (b(), !0) : (Vb = !0, Tb = !0, Cb = !1, t(), b(), !0)
        }, lb = function () {
        }, kb = function () {
        }, m = function (b) {
            if (wb)return!1;
            if (nb.html5Only)return wb = !0, s(), !0;
            var c, d = nb.useFlashBlock && nb.flashLoadTimeout && !nb.getMoviePercent(), e = !0;
            return d || (wb = !0), c = {type: !gb && Hb ? "NO_FLASH" : "INIT_TIMEOUT"}, (xb || b) && (nb.useFlashBlock && nb.oMC && (nb.oMC.className = O() + " " + (null === nb.getMoviePercent() ? P.swfTimedout : P.swfError)), r({type: "ontimeout", error: c, ignoreInit: !0}), G(c), e = !1), xb || (nb.waitForWindowLoad && !yb ? eb.add(a, "load", s) : s()), e
        }, j = function () {
            var a, c = nb.setupOptions;
            for (a in c)c.hasOwnProperty(a) && (nb[a] === b ? nb[a] = c[a] : nb[a] !== c[a] && (nb.setupOptions[a] = nb[a]))
        }, k = function () {
            function b() {
                eb.remove(a, "load", nb.beginDelayedInit)
            }

            if (wb)return!1;
            if (nb.html5Only)return wb || (b(), nb.enabled = !0, m()), !0;
            z();
            try {
                pb._externalInterfaceTest(!1), H(!0, nb.flashPollingInterval || (nb.useHighPerformance ? 10 : 50)), nb.debugMode || pb._disableDebug(), nb.enabled = !0, nb.html5Only || eb.add(a, "unload", i)
            } catch (c) {
                return G({type: "JS_TO_FLASH_EXCEPTION", fatal: !0}), K(!0), m(), !1
            }
            return m(), b(), !0
        }, B = function () {
            return D ? !1 : (D = !0, j(), I(), !gb && nb.hasHTML5 && nb.setup({useHTML5Audio: !0, preferFlash: !1}), db(), !gb && Hb && (Gb.push(y.needFlash), nb.setup({flashLoadTimeout: 1})), sb.removeEventListener && sb.removeEventListener("DOMContentLoaded", B, !1), z(), !0)
        },cb = function () {
            return"complete" === sb.readyState && (B(), sb.detachEvent("onreadystatechange", cb)), !0
        },C = function () {
            yb = !0, B(), eb.remove(a, "load", C)
        },A = function () {
            Rb && (nb.setupOptions.useHTML5Audio = !0, nb.setupOptions.preferFlash = !1, (Lb || Mb && !qb.match(/android\s2\.3/i)) && (Lb && (nb.ignoreFlash = !0), Jb = !0))
        },A(),hb(),eb.add(a, "focus", x),eb.add(a, "load", t),eb.add(a, "load", C),sb.addEventListener ? sb.addEventListener("DOMContentLoaded", B, !1) : sb.attachEvent ? sb.attachEvent("onreadystatechange", cb) : G({type: "NO_DOM2_EVENTS", fatal: !0})
    }

    if (!a || !a.document)throw new Error("SoundManager requires a browser with window and document objects.");
    var d = null;
    void 0 !== a.SM2_DEFER && SM2_DEFER || (d = new c), "object" == typeof module && module && "object" == typeof module.exports ? (a.soundManager = d, module.exports.SoundManager = c, module.exports.soundManager = d) : "function" == typeof define && define.amd ? define("SoundManager", [], function () {
        return{SoundManager: c, soundManager: d}
    }) : (a.SoundManager = c, a.soundManager = d)
}(window);
var swfobject = function () {
    function a() {
        if (!R) {
            try {
                var a = K.getElementsByTagName("body")[0].appendChild(q("span"));
                a.parentNode.removeChild(a)
            } catch (b) {
                return
            }
            R = !0;
            for (var c = N.length, d = 0; c > d; d++)N[d]()
        }
    }

    function b(a) {
        R ? a() : N[N.length] = a
    }

    function c(a) {
        if (typeof J.addEventListener != C)J.addEventListener("load", a, !1); else if (typeof K.addEventListener != C)K.addEventListener("load", a, !1); else if (typeof J.attachEvent != C)r(J, "onload", a); else if ("function" == typeof J.onload) {
            var b = J.onload;
            J.onload = function () {
                b(), a()
            }
        } else J.onload = a
    }

    function d() {
        M ? e() : f()
    }

    function e() {
        var a = K.getElementsByTagName("body")[0], b = q(D);
        b.setAttribute("type", G);
        var c = a.appendChild(b);
        if (c) {
            var d = 0;
            !function () {
                if (typeof c.GetVariable != C) {
                    var e = c.GetVariable("$version");
                    e && (e = e.split(" ")[1].split(","), U.pv = [parseInt(e[0], 10), parseInt(e[1], 10), parseInt(e[2], 10)])
                } else if (10 > d)return d++, void setTimeout(arguments.callee, 10);
                a.removeChild(b), c = null, f()
            }()
        } else f()
    }

    function f() {
        var a = O.length;
        if (a > 0)for (var b = 0; a > b; b++) {
            var c = O[b].id, d = O[b].callbackFn, e = {success: !1, id: c};
            if (U.pv[0] > 0) {
                var f = p(c);
                if (f)if (!s(O[b].swfVersion) || U.wk && U.wk < 312)if (O[b].expressInstall && h()) {
                    var k = {};
                    k.data = O[b].expressInstall, k.width = f.getAttribute("width") || "0", k.height = f.getAttribute("height") || "0", f.getAttribute("class") && (k.styleclass = f.getAttribute("class")), f.getAttribute("align") && (k.align = f.getAttribute("align"));
                    for (var l = {}, m = f.getElementsByTagName("param"), n = m.length, o = 0; n > o; o++)"movie" != m[o].getAttribute("name").toLowerCase() && (l[m[o].getAttribute("name")] = m[o].getAttribute("value"));
                    i(k, l, c, d)
                } else j(f), d && d(e); else u(c, !0), d && (e.success = !0, e.ref = g(c), d(e))
            } else if (u(c, !0), d) {
                var q = g(c);
                q && typeof q.SetVariable != C && (e.success = !0, e.ref = q), d(e)
            }
        }
    }

    function g(a) {
        var b = null, c = p(a);
        if (c && "OBJECT" == c.nodeName)if (typeof c.SetVariable != C)b = c; else {
            var d = c.getElementsByTagName(D)[0];
            d && (b = d)
        }
        return b
    }

    function h() {
        return!S && s("6.0.65") && (U.win || U.mac) && !(U.wk && U.wk < 312)
    }

    function i(a, b, c, d) {
        S = !0, y = d || null, z = {success: !1, id: c};
        var e = p(c);
        if (e) {
            "OBJECT" == e.nodeName ? (w = k(e), x = null) : (w = e, x = c), a.id = H, (typeof a.width == C || !/%$/.test(a.width) && parseInt(a.width, 10) < 310) && (a.width = "310"), (typeof a.height == C || !/%$/.test(a.height) && parseInt(a.height, 10) < 137) && (a.height = "137"), K.title = K.title.slice(0, 47) + " - Flash Player Installation";
            var f = U.ie && U.win ? "ActiveX" : "PlugIn", g = "MMredirectURL=" + J.location.toString().replace(/&/g, "%26") + "&MMplayerType=" + f + "&MMdoctitle=" + K.title;
            if (typeof b.flashvars != C ? b.flashvars += "&" + g : b.flashvars = g, U.ie && U.win && 4 != e.readyState) {
                var h = q("div");
                c += "SWFObjectNew", h.setAttribute("id", c), e.parentNode.insertBefore(h, e), e.style.display = "none", function () {
                    4 == e.readyState ? e.parentNode.removeChild(e) : setTimeout(arguments.callee, 10)
                }()
            }
            l(a, b, c)
        }
    }

    function j(a) {
        if (U.ie && U.win && 4 != a.readyState) {
            var b = q("div");
            a.parentNode.insertBefore(b, a), b.parentNode.replaceChild(k(a), b), a.style.display = "none", function () {
                4 == a.readyState ? a.parentNode.removeChild(a) : setTimeout(arguments.callee, 10)
            }()
        } else a.parentNode.replaceChild(k(a), a)
    }

    function k(a) {
        var b = q("div");
        if (U.win && U.ie)b.innerHTML = a.innerHTML; else {
            var c = a.getElementsByTagName(D)[0];
            if (c) {
                var d = c.childNodes;
                if (d)for (var e = d.length, f = 0; e > f; f++)1 == d[f].nodeType && "PARAM" == d[f].nodeName || 8 == d[f].nodeType || b.appendChild(d[f].cloneNode(!0))
            }
        }
        return b
    }

    function l(a, b, c) {
        var d, e = p(c);
        if (U.wk && U.wk < 312)return d;
        if (e)if (typeof a.id == C && (a.id = c), U.ie && U.win) {
            var f = "";
            for (var g in a)a[g] != Object.prototype[g] && ("data" == g.toLowerCase() ? b.movie = a[g] : "styleclass" == g.toLowerCase() ? f += ' class="' + a[g] + '"' : "classid" != g.toLowerCase() && (f += " " + g + '="' + a[g] + '"'));
            var h = "";
            for (var i in b)b[i] != Object.prototype[i] && (h += '<param name="' + i + '" value="' + b[i] + '" />');
            e.outerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"' + f + ">" + h + "</object>", P[P.length] = a.id, d = p(a.id)
        } else {
            var j = q(D);
            j.setAttribute("type", G);
            for (var k in a)a[k] != Object.prototype[k] && ("styleclass" == k.toLowerCase() ? j.setAttribute("class", a[k]) : "classid" != k.toLowerCase() && j.setAttribute(k, a[k]));
            for (var l in b)b[l] != Object.prototype[l] && "movie" != l.toLowerCase() && m(j, l, b[l]);
            e.parentNode.replaceChild(j, e), d = j
        }
        return d
    }

    function m(a, b, c) {
        var d = q("param");
        d.setAttribute("name", b), d.setAttribute("value", c), a.appendChild(d)
    }

    function n(a) {
        var b = p(a);
        b && "OBJECT" == b.nodeName && (U.ie && U.win ? (b.style.display = "none", function () {
            4 == b.readyState ? o(a) : setTimeout(arguments.callee, 10)
        }()) : b.parentNode.removeChild(b))
    }

    function o(a) {
        var b = p(a);
        if (b) {
            for (var c in b)"function" == typeof b[c] && (b[c] = null);
            b.parentNode.removeChild(b)
        }
    }

    function p(a) {
        var b = null;
        try {
            b = K.getElementById(a)
        } catch (c) {
        }
        return b
    }

    function q(a) {
        return K.createElement(a)
    }

    function r(a, b, c) {
        a.attachEvent(b, c), Q[Q.length] = [a, b, c]
    }

    function s(a) {
        var b = U.pv, c = a.split(".");
        return c[0] = parseInt(c[0], 10), c[1] = parseInt(c[1], 10) || 0, c[2] = parseInt(c[2], 10) || 0, b[0] > c[0] || b[0] == c[0] && b[1] > c[1] || b[0] == c[0] && b[1] == c[1] && b[2] >= c[2] ? !0 : !1
    }

    function t(a, b, c, d) {
        if (!U.ie || !U.mac) {
            var e = K.getElementsByTagName("head")[0];
            if (e) {
                var f = c && "string" == typeof c ? c : "screen";
                if (d && (A = null, B = null), !A || B != f) {
                    var g = q("style");
                    g.setAttribute("type", "text/css"), g.setAttribute("media", f), A = e.appendChild(g), U.ie && U.win && typeof K.styleSheets != C && K.styleSheets.length > 0 && (A = K.styleSheets[K.styleSheets.length - 1]), B = f
                }
                U.ie && U.win ? A && typeof A.addRule == D && A.addRule(a, b) : A && typeof K.createTextNode != C && A.appendChild(K.createTextNode(a + " {" + b + "}"))
            }
        }
    }

    function u(a, b) {
        if (T) {
            var c = b ? "visible" : "hidden";
            R && p(a) ? p(a).style.visibility = c : t("#" + a, "visibility:" + c)
        }
    }

    function v(a) {
        var b = /[\\\"<>\.;]/, c = null != b.exec(a);
        return c && typeof encodeURIComponent != C ? encodeURIComponent(a) : a
    }

    {
        var w, x, y, z, A, B, C = "undefined", D = "object", E = "Shockwave Flash", F = "ShockwaveFlash.ShockwaveFlash", G = "application/x-shockwave-flash", H = "SWFObjectExprInst", I = "onreadystatechange", J = window, K = document, L = navigator, M = !1, N = [d], O = [], P = [], Q = [], R = !1, S = !1, T = !0, U = function () {
            var a = typeof K.getElementById != C && typeof K.getElementsByTagName != C && typeof K.createElement != C, b = L.userAgent.toLowerCase(), c = L.platform.toLowerCase(), d = /win/.test(c ? c : b), e = /mac/.test(c ? c : b), f = /webkit/.test(b) ? parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/, "$1")) : !1, g = !1, h = [0, 0, 0], i = null;
            if (typeof L.plugins != C && typeof L.plugins[E] == D)i = L.plugins[E].description, !i || typeof L.mimeTypes != C && L.mimeTypes[G] && !L.mimeTypes[G].enabledPlugin || (M = !0, g = !1, i = i.replace(/^.*\s+(\S+\s+\S+$)/, "$1"), h[0] = parseInt(i.replace(/^(.*)\..*$/, "$1"), 10), h[1] = parseInt(i.replace(/^.*\.(.*)\s.*$/, "$1"), 10), h[2] = /[a-zA-Z]/.test(i) ? parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/, "$1"), 10) : 0); else if (typeof J.ActiveXObject != C)try {
                var j = new ActiveXObject(F);
                j && (i = j.GetVariable("$version"), i && (g = !0, i = i.split(" ")[1].split(","), h = [parseInt(i[0], 10), parseInt(i[1], 10), parseInt(i[2], 10)]))
            } catch (k) {
            }
            return{w3: a, pv: h, wk: f, ie: g, win: d, mac: e}
        }();
        !function () {
            U.w3 && ((typeof K.readyState != C && "complete" == K.readyState || typeof K.readyState == C && (K.getElementsByTagName("body")[0] || K.body)) && a(), R || (typeof K.addEventListener != C && K.addEventListener("DOMContentLoaded", a, !1), U.ie && U.win && (K.attachEvent(I, function () {
                "complete" == K.readyState && (K.detachEvent(I, arguments.callee), a())
            }), J == top && !function () {
                if (!R) {
                    try {
                        K.documentElement.doScroll("left")
                    } catch (b) {
                        return void setTimeout(arguments.callee, 0)
                    }
                    a()
                }
            }()), U.wk && !function () {
                return R ? void 0 : /loaded|complete/.test(K.readyState) ? void a() : void setTimeout(arguments.callee, 0)
            }(), c(a)))
        }(), function () {
            U.ie && U.win && window.attachEvent("onunload", function () {
                for (var a = Q.length, b = 0; a > b; b++)Q[b][0].detachEvent(Q[b][1], Q[b][2]);
                for (var c = P.length, d = 0; c > d; d++)n(P[d]);
                for (var e in U)U[e] = null;
                U = null;
                for (var f in swfobject)swfobject[f] = null;
                swfobject = null
            })
        }()
    }
    return{registerObject: function (a, b, c, d) {
        if (U.w3 && a && b) {
            var e = {};
            e.id = a, e.swfVersion = b, e.expressInstall = c, e.callbackFn = d, O[O.length] = e, u(a, !1)
        } else d && d({success: !1, id: a})
    }, getObjectById: function (a) {
        return U.w3 ? g(a) : void 0
    }, embedSWF: function (a, c, d, e, f, g, j, k, m, n) {
        var o = {success: !1, id: c};
        U.w3 && !(U.wk && U.wk < 312) && a && c && d && e && f ? (u(c, !1), b(function () {
            d += "", e += "";
            var b = {};
            if (m && typeof m === D)for (var p in m)b[p] = m[p];
            b.data = a, b.width = d, b.height = e;
            var q = {};
            if (k && typeof k === D)for (var r in k)q[r] = k[r];
            if (j && typeof j === D)for (var t in j)typeof q.flashvars != C ? q.flashvars += "&" + t + "=" + j[t] : q.flashvars = t + "=" + j[t];
            if (s(f)) {
                var v = l(b, q, c);
                b.id == c && u(c, !0), o.success = !0, o.ref = v
            } else {
                if (g && h())return b.data = g, void i(b, q, c, n);
                u(c, !0)
            }
            n && n(o)
        })) : n && n(o)
    }, switchOffAutoHideShow: function () {
        T = !1
    }, ua: U, getFlashPlayerVersion: function () {
        return{major: U.pv[0], minor: U.pv[1], release: U.pv[2]}
    }, hasFlashPlayerVersion: s, createSWF: function (a, b, c) {
        return U.w3 ? l(a, b, c) : void 0
    }, showExpressInstall: function (a, b, c, d) {
        U.w3 && h() && i(a, b, c, d)
    }, removeSWF: function (a) {
        U.w3 && n(a)
    }, createCSS: function (a, b, c, d) {
        U.w3 && t(a, b, c, d)
    }, addDomLoadEvent: b, addLoadEvent: c, getQueryParamValue: function (a) {
        var b = K.location.search || K.location.hash;
        if (b) {
            if (/\?/.test(b) && (b = b.split("?")[1]), null == a)return v(b);
            for (var c = b.split("&"), d = 0; d < c.length; d++)if (c[d].substring(0, c[d].indexOf("=")) == a)return v(c[d].substring(c[d].indexOf("=") + 1))
        }
        return""
    }, expressInstallCallback: function () {
        if (S) {
            var a = p(H);
            a && w && (a.parentNode.replaceChild(w, a), x && (u(x, !0), U.ie && U.win && (w.style.display = "block")), y && y(z)), S = !1
        }
    }}
}();
!function () {
    var a, b = function (b) {
        a = b()
    };
    b.amd = !0, function (a) {
        "use strict";
        function c(a, b) {
            var c = (65535 & a) + (65535 & b), d = (a >> 16) + (b >> 16) + (c >> 16);
            return d << 16 | 65535 & c
        }

        function d(a, b) {
            return a << b | a >>> 32 - b
        }

        function e(a, b, e, f, g, h) {
            return c(d(c(c(b, a), c(f, h)), g), e)
        }

        function f(a, b, c, d, f, g, h) {
            return e(b & c | ~b & d, a, b, f, g, h)
        }

        function g(a, b, c, d, f, g, h) {
            return e(b & d | c & ~d, a, b, f, g, h)
        }

        function h(a, b, c, d, f, g, h) {
            return e(b ^ c ^ d, a, b, f, g, h)
        }

        function i(a, b, c, d, f, g, h) {
            return e(c ^ (b | ~d), a, b, f, g, h)
        }

        function j(a, b) {
            a[b >> 5] |= 128 << b % 32, a[(b + 64 >>> 9 << 4) + 14] = b;
            var d, e, j, k, l, m = 1732584193, n = -271733879, o = -1732584194, p = 271733878;
            for (d = 0; d < a.length; d += 16)e = m, j = n, k = o, l = p, m = f(m, n, o, p, a[d], 7, -680876936), p = f(p, m, n, o, a[d + 1], 12, -389564586), o = f(o, p, m, n, a[d + 2], 17, 606105819), n = f(n, o, p, m, a[d + 3], 22, -1044525330), m = f(m, n, o, p, a[d + 4], 7, -176418897), p = f(p, m, n, o, a[d + 5], 12, 1200080426), o = f(o, p, m, n, a[d + 6], 17, -1473231341), n = f(n, o, p, m, a[d + 7], 22, -45705983), m = f(m, n, o, p, a[d + 8], 7, 1770035416), p = f(p, m, n, o, a[d + 9], 12, -1958414417), o = f(o, p, m, n, a[d + 10], 17, -42063), n = f(n, o, p, m, a[d + 11], 22, -1990404162), m = f(m, n, o, p, a[d + 12], 7, 1804603682), p = f(p, m, n, o, a[d + 13], 12, -40341101), o = f(o, p, m, n, a[d + 14], 17, -1502002290), n = f(n, o, p, m, a[d + 15], 22, 1236535329), m = g(m, n, o, p, a[d + 1], 5, -165796510), p = g(p, m, n, o, a[d + 6], 9, -1069501632), o = g(o, p, m, n, a[d + 11], 14, 643717713), n = g(n, o, p, m, a[d], 20, -373897302), m = g(m, n, o, p, a[d + 5], 5, -701558691), p = g(p, m, n, o, a[d + 10], 9, 38016083), o = g(o, p, m, n, a[d + 15], 14, -660478335), n = g(n, o, p, m, a[d + 4], 20, -405537848), m = g(m, n, o, p, a[d + 9], 5, 568446438), p = g(p, m, n, o, a[d + 14], 9, -1019803690), o = g(o, p, m, n, a[d + 3], 14, -187363961), n = g(n, o, p, m, a[d + 8], 20, 1163531501), m = g(m, n, o, p, a[d + 13], 5, -1444681467), p = g(p, m, n, o, a[d + 2], 9, -51403784), o = g(o, p, m, n, a[d + 7], 14, 1735328473), n = g(n, o, p, m, a[d + 12], 20, -1926607734), m = h(m, n, o, p, a[d + 5], 4, -378558), p = h(p, m, n, o, a[d + 8], 11, -2022574463), o = h(o, p, m, n, a[d + 11], 16, 1839030562), n = h(n, o, p, m, a[d + 14], 23, -35309556), m = h(m, n, o, p, a[d + 1], 4, -1530992060), p = h(p, m, n, o, a[d + 4], 11, 1272893353), o = h(o, p, m, n, a[d + 7], 16, -155497632), n = h(n, o, p, m, a[d + 10], 23, -1094730640), m = h(m, n, o, p, a[d + 13], 4, 681279174), p = h(p, m, n, o, a[d], 11, -358537222), o = h(o, p, m, n, a[d + 3], 16, -722521979), n = h(n, o, p, m, a[d + 6], 23, 76029189), m = h(m, n, o, p, a[d + 9], 4, -640364487), p = h(p, m, n, o, a[d + 12], 11, -421815835), o = h(o, p, m, n, a[d + 15], 16, 530742520), n = h(n, o, p, m, a[d + 2], 23, -995338651), m = i(m, n, o, p, a[d], 6, -198630844), p = i(p, m, n, o, a[d + 7], 10, 1126891415), o = i(o, p, m, n, a[d + 14], 15, -1416354905), n = i(n, o, p, m, a[d + 5], 21, -57434055), m = i(m, n, o, p, a[d + 12], 6, 1700485571), p = i(p, m, n, o, a[d + 3], 10, -1894986606), o = i(o, p, m, n, a[d + 10], 15, -1051523), n = i(n, o, p, m, a[d + 1], 21, -2054922799), m = i(m, n, o, p, a[d + 8], 6, 1873313359), p = i(p, m, n, o, a[d + 15], 10, -30611744), o = i(o, p, m, n, a[d + 6], 15, -1560198380), n = i(n, o, p, m, a[d + 13], 21, 1309151649), m = i(m, n, o, p, a[d + 4], 6, -145523070), p = i(p, m, n, o, a[d + 11], 10, -1120210379), o = i(o, p, m, n, a[d + 2], 15, 718787259), n = i(n, o, p, m, a[d + 9], 21, -343485551), m = c(m, e), n = c(n, j), o = c(o, k), p = c(p, l);
            return[m, n, o, p]
        }

        function k(a) {
            var b, c = "";
            for (b = 0; b < 32 * a.length; b += 8)c += String.fromCharCode(a[b >> 5] >>> b % 32 & 255);
            return c
        }

        function l(a) {
            var b, c = [];
            for (c[(a.length >> 2) - 1] = void 0, b = 0; b < c.length; b += 1)c[b] = 0;
            for (b = 0; b < 8 * a.length; b += 8)c[b >> 5] |= (255 & a.charCodeAt(b / 8)) << b % 32;
            return c
        }

        function m(a) {
            return k(j(l(a), 8 * a.length))
        }

        function n(a, b) {
            var c, d, e = l(a), f = [], g = [];
            for (f[15] = g[15] = void 0, e.length > 16 && (e = j(e, 8 * a.length)), c = 0; 16 > c; c += 1)f[c] = 909522486 ^ e[c], g[c] = 1549556828 ^ e[c];
            return d = j(f.concat(l(b)), 512 + 8 * b.length), k(j(g.concat(d), 640))
        }

        function o(a) {
            var b, c, d = "0123456789abcdef", e = "";
            for (c = 0; c < a.length; c += 1)b = a.charCodeAt(c), e += d.charAt(b >>> 4 & 15) + d.charAt(15 & b);
            return e
        }

        function p(a) {
            return unescape(encodeURIComponent(a))
        }

        function q(a) {
            return m(p(a))
        }

        function r(a) {
            return o(q(a))
        }

        function s(a, b) {
            return n(p(a), p(b))
        }

        function t(a, b) {
            return o(s(a, b))
        }

        function u(a, b, c) {
            return b ? c ? s(b, a) : t(b, a) : c ? q(a) : r(a)
        }

        "function" == typeof b && b.amd ? b(function () {
            return u
        }) : a.md5 = u
    }(this), function (b, c, d, e) {
        function f(a, b, c, d) {
            d = d || k;
            try {
                c ? (localStorage.setItem(a, JSON.stringify(b.p)), localStorage.setItem(a + "cachettl", JSON.stringify(b.t))) : localStorage.setItem(j + a, JSON.stringify(b))
            } catch (e) {
                c ? (localStorage.removeItem(a), localStorage.removeItem(a + "cachettl")) : localStorage.removeItem(j + a), d(e, b)
            }
        }

        function g(a, b, c, d, e) {
            var g = +new Date + 36e5 * c;
            f(a, {t: g, p: b}, d, e)
        }

        function h(b) {
            var c, d = localStorage.getItem(b + "cachettl"), e = localStorage.getItem(b);
            return d && e && (e = JSON.parse(e), localStorage.removeItem(b + "cachettl"), localStorage.removeItem(b), c = {t: d, p: e}, f(a(b), c)), c
        }

        function i(a, b) {
            var c, d;
            return b ? (c = localStorage.getItem(a), d = localStorage.getItem(a + "cachettl")) : c = localStorage.getItem(j + a), c && (c = JSON.parse(c)), !b && c && (d = c.t, c = c.p), c && d < +new Date && (b ? (localStorage.removeItem(a), localStorage.removeItem(a + "cachettl")) : localStorage.removeItem(j + a), c = null), c
        }

        var j = "_jalc_", k = function () {
        };
        c.ajaxPrefilter(function (b, c, f) {
            if (!d.localstorage || !b.localCache)return e;
            var k = b.cacheTTL || 5, l = b.url.replace(/jQuery.*/, "") + b.type + b.data, m = null != b.cacheKey, n = b.cacheKey || a(l);
            m || h(l), b.isCacheValid && !b.isCacheValid() && localStorage.removeItem(m ? n : j + n);
            var o = i(n, m);
            o ? (0 !== b.dataType.indexOf("json") && (o = JSON.stringify(o)), b.success(o), f.abort()) : (b.success && (b.realsuccess = b.success), b.success = function (a) {
                var c = a;
                0 === this.dataType.indexOf("json") && (c = JSON.stringify(a)), g(n, a, k, m, function (a) {
                    "function" == typeof b.cacheError && b.cacheError(a, l, c)
                }), b.realsuccess && b.realsuccess(a)
            })
        })
    }(this, this.jQuery, this.Modernizr)
}(), "undefined" != typeof jQuery && !function (a) {
    a.imgpreload = function (b, c) {
        c = a.extend({}, a.fn.imgpreload.defaults, c instanceof Function ? {all: c} : c), "string" == typeof b && (b = new Array(b));
        var d = new Array;
        a.each(b, function (e, f) {
            var g = new Image, h = f, i = g;
            "string" != typeof f && (h = a(f).attr("src"), i = f), a(g).bind("load error", function (e) {
                d.push(i), a.data(i, "loaded", "error" == e.type ? !1 : !0), c.each instanceof Function && c.each.call(i), d.length >= b.length && c.all instanceof Function && c.all.call(d), a(this).unbind("load error")
            }), g.src = h
        })
    }, a.fn.imgpreload = function (b) {
        return a.imgpreload(this, b), this
    }, a.fn.imgpreload.defaults = {each: null, all: null}
}(jQuery), jQuery.effects || function (a, b) {
    function c(b) {
        var c;
        return b && b.constructor == Array && 3 == b.length ? b : (c = /rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b)) ? [parseInt(c[1], 10), parseInt(c[2], 10), parseInt(c[3], 10)] : (c = /rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b)) ? [2.55 * parseFloat(c[1]), 2.55 * parseFloat(c[2]), 2.55 * parseFloat(c[3])] : (c = /#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b)) ? [parseInt(c[1], 16), parseInt(c[2], 16), parseInt(c[3], 16)] : (c = /#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b)) ? [parseInt(c[1] + c[1], 16), parseInt(c[2] + c[2], 16), parseInt(c[3] + c[3], 16)] : (c = /rgba\(0, 0, 0, 0\)/.exec(b)) ? j.transparent : j[a.trim(b).toLowerCase()]
    }

    function d(b, d) {
        var e;
        do {
            if (e = a.curCSS(b, d), "" != e && "transparent" != e || a.nodeName(b, "body"))break;
            d = "backgroundColor"
        } while (b = b.parentNode);
        return c(e)
    }

    function e() {
        var a, b, c = document.defaultView ? document.defaultView.getComputedStyle(this, null) : this.currentStyle, d = {};
        if (c && c.length && c[0] && c[c[0]])for (var e = c.length; e--;)a = c[e], "string" == typeof c[a] && (b = a.replace(/\-(\w)/g, function (a, b) {
            return b.toUpperCase()
        }), d[b] = c[a]); else for (a in c)"string" == typeof c[a] && (d[a] = c[a]);
        return d
    }

    function f(b) {
        var c, d;
        for (c in b)d = b[c], (null == d || a.isFunction(d) || c in l || /scrollbar/.test(c) || !/color/i.test(c) && isNaN(parseFloat(d))) && delete b[c];
        return b
    }

    function g(a, b) {
        var c, d = {_: 0};
        for (c in b)a[c] != b[c] && (d[c] = b[c]);
        return d
    }

    function h(b, c, d, e) {
        return"object" == typeof b && (e = c, d = null, c = b, b = c.effect), a.isFunction(c) && (e = c, d = null, c = {}), ("number" == typeof c || a.fx.speeds[c]) && (e = d, d = c, c = {}), a.isFunction(d) && (e = d, d = null), c = c || {}, d = d || c.duration, d = a.fx.off ? 0 : "number" == typeof d ? d : d in a.fx.speeds ? a.fx.speeds[d] : a.fx.speeds._default, e = e || c.complete, [b, c, d, e]
    }

    function i(b) {
        return!b || "number" == typeof b || a.fx.speeds[b] ? !0 : "string" != typeof b || a.effects[b] ? !1 : !0
    }

    a.effects = {}, a.each(["backgroundColor", "borderBottomColor", "borderLeftColor", "borderRightColor", "borderTopColor", "borderColor", "color", "outlineColor"], function (b, e) {
        a.fx.step[e] = function (a) {
            a.colorInit || (a.start = d(a.elem, e), a.end = c(a.end), a.colorInit = !0), a.elem.style[e] = "rgb(" + Math.max(Math.min(parseInt(a.pos * (a.end[0] - a.start[0]) + a.start[0], 10), 255), 0) + "," + Math.max(Math.min(parseInt(a.pos * (a.end[1] - a.start[1]) + a.start[1], 10), 255), 0) + "," + Math.max(Math.min(parseInt(a.pos * (a.end[2] - a.start[2]) + a.start[2], 10), 255), 0) + ")"
        }
    });
    var j = {aqua: [0, 255, 255], azure: [240, 255, 255], beige: [245, 245, 220], black: [0, 0, 0], blue: [0, 0, 255], brown: [165, 42, 42], cyan: [0, 255, 255], darkblue: [0, 0, 139], darkcyan: [0, 139, 139], darkgrey: [169, 169, 169], darkgreen: [0, 100, 0], darkkhaki: [189, 183, 107], darkmagenta: [139, 0, 139], darkolivegreen: [85, 107, 47], darkorange: [255, 140, 0], darkorchid: [153, 50, 204], darkred: [139, 0, 0], darksalmon: [233, 150, 122], darkviolet: [148, 0, 211], fuchsia: [255, 0, 255], gold: [255, 215, 0], green: [0, 128, 0], indigo: [75, 0, 130], khaki: [240, 230, 140], lightblue: [173, 216, 230], lightcyan: [224, 255, 255], lightgreen: [144, 238, 144], lightgrey: [211, 211, 211], lightpink: [255, 182, 193], lightyellow: [255, 255, 224], lime: [0, 255, 0], magenta: [255, 0, 255], maroon: [128, 0, 0], navy: [0, 0, 128], olive: [128, 128, 0], orange: [255, 165, 0], pink: [255, 192, 203], purple: [128, 0, 128], violet: [128, 0, 128], red: [255, 0, 0], silver: [192, 192, 192], white: [255, 255, 255], yellow: [255, 255, 0], transparent: [255, 255, 255]}, k = ["add", "remove", "toggle"], l = {border: 1, borderBottom: 1, borderColor: 1, borderLeft: 1, borderRight: 1, borderTop: 1, borderWidth: 1, margin: 1, padding: 1};
    a.effects.animateClass = function (b, c, d, h) {
        return a.isFunction(d) && (h = d, d = null), this.queue(function () {
            var i, j = a(this), l = j.attr("style") || " ", m = f(e.call(this)), n = j.attr("class") || "";
            a.each(k, function (a, c) {
                b[c] && j[c + "Class"](b[c])
            }), i = f(e.call(this)), j.attr("class", n), j.animate(g(m, i), {queue: !1, duration: c, easing: d, complete: function () {
                a.each(k, function (a, c) {
                    b[c] && j[c + "Class"](b[c])
                }), "object" == typeof j.attr("style") ? (j.attr("style").cssText = "", j.attr("style").cssText = l) : j.attr("style", l), h && h.apply(this, arguments), a.dequeue(this)
            }})
        })
    }, a.fn.extend({_addClass: a.fn.addClass, addClass: function (b, c, d, e) {
        return c ? a.effects.animateClass.apply(this, [
            {add: b},
            c,
            d,
            e
        ]) : this._addClass(b)
    }, _removeClass: a.fn.removeClass, removeClass: function (b, c, d, e) {
        return c ? a.effects.animateClass.apply(this, [
            {remove: b},
            c,
            d,
            e
        ]) : this._removeClass(b)
    }, _toggleClass: a.fn.toggleClass, toggleClass: function (c, d, e, f, g) {
        return"boolean" == typeof d || d === b ? e ? a.effects.animateClass.apply(this, [d ? {add: c} : {remove: c}, e, f, g]) : this._toggleClass(c, d) : a.effects.animateClass.apply(this, [
            {toggle: c},
            d,
            e,
            f
        ])
    }, switchClass: function (b, c, d, e, f) {
        return a.effects.animateClass.apply(this, [
            {add: c, remove: b},
            d,
            e,
            f
        ])
    }}), a.extend(a.effects, {version: "1.8.20", save: function (a, b) {
        for (var c = 0; c < b.length; c++)null !== b[c] && a.data("ec.storage." + b[c], a[0].style[b[c]])
    }, restore: function (a, b) {
        for (var c = 0; c < b.length; c++)null !== b[c] && a.css(b[c], a.data("ec.storage." + b[c]))
    }, setMode: function (a, b) {
        return"toggle" == b && (b = a.is(":hidden") ? "show" : "hide"), b
    }, getBaseline: function (a, b) {
        var c, d;
        switch (a[0]) {
            case"top":
                c = 0;
                break;
            case"middle":
                c = .5;
                break;
            case"bottom":
                c = 1;
                break;
            default:
                c = a[0] / b.height
        }
        switch (a[1]) {
            case"left":
                d = 0;
                break;
            case"center":
                d = .5;
                break;
            case"right":
                d = 1;
                break;
            default:
                d = a[1] / b.width
        }
        return{x: d, y: c}
    }, createWrapper: function (b) {
        if (b.parent().is(".ui-effects-wrapper"))return b.parent();
        var c = {width: b.outerWidth(!0), height: b.outerHeight(!0), "float": b.css("float")}, d = a("<div></div>").addClass("ui-effects-wrapper").css({fontSize: "100%", background: "transparent", border: "none", margin: 0, padding: 0}), e = document.activeElement;
        return b.wrap(d), (b[0] === e || a.contains(b[0], e)) && a(e).focus(), d = b.parent(), "static" == b.css("position") ? (d.css({position: "relative"}), b.css({position: "relative"})) : (a.extend(c, {position: b.css("position"), zIndex: b.css("z-index")}), a.each(["top", "left", "bottom", "right"], function (a, d) {
            c[d] = b.css(d), isNaN(parseInt(c[d], 10)) && (c[d] = "auto")
        }), b.css({position: "relative", top: 0, left: 0, right: "auto", bottom: "auto"})), d.css(c).show()
    }, removeWrapper: function (b) {
        var c, d = document.activeElement;
        return b.parent().is(".ui-effects-wrapper") ? (c = b.parent().replaceWith(b), (b[0] === d || a.contains(b[0], d)) && a(d).focus(), c) : b
    }, setTransition: function (b, c, d, e) {
        return e = e || {}, a.each(c, function (a, c) {
            var f = b.cssUnit(c);
            f[0] > 0 && (e[c] = f[0] * d + f[1])
        }), e
    }}), a.fn.extend({effect: function (b) {
        var c = h.apply(this, arguments), d = {options: c[1], duration: c[2], callback: c[3]}, e = d.options.mode, f = a.effects[b];
        return a.fx.off || !f ? e ? this[e](d.duration, d.callback) : this.each(function () {
            d.callback && d.callback.call(this)
        }) : f.call(this, d)
    }, _show: a.fn.show, show: function (a) {
        if (i(a))return this._show.apply(this, arguments);
        var b = h.apply(this, arguments);
        return b[1].mode = "show", this.effect.apply(this, b)
    }, _hide: a.fn.hide, hide: function (a) {
        if (i(a))return this._hide.apply(this, arguments);
        var b = h.apply(this, arguments);
        return b[1].mode = "hide", this.effect.apply(this, b)
    }, __toggle: a.fn.toggle, toggle: function (b) {
        if (i(b) || "boolean" == typeof b || a.isFunction(b))return this.__toggle.apply(this, arguments);
        var c = h.apply(this, arguments);
        return c[1].mode = "toggle", this.effect.apply(this, c)
    }, cssUnit: function (b) {
        var c = this.css(b), d = [];
        return a.each(["em", "px", "%", "pt"], function (a, b) {
            c.indexOf(b) > 0 && (d = [parseFloat(c), b])
        }), d
    }}), a.easing.jswing = a.easing.swing, a.extend(a.easing, {def: "easeOutQuad", swing: function (b, c, d, e, f) {
        return a.easing[a.easing.def](b, c, d, e, f)
    }, easeInQuad: function (a, b, c, d, e) {
        return d * (b /= e) * b + c
    }, easeOutQuad: function (a, b, c, d, e) {
        return-d * (b /= e) * (b - 2) + c
    }, easeInOutQuad: function (a, b, c, d, e) {
        return(b /= e / 2) < 1 ? d / 2 * b * b + c : -d / 2 * (--b * (b - 2) - 1) + c
    }, easeInCubic: function (a, b, c, d, e) {
        return d * (b /= e) * b * b + c
    }, easeOutCubic: function (a, b, c, d, e) {
        return d * ((b = b / e - 1) * b * b + 1) + c
    }, easeInOutCubic: function (a, b, c, d, e) {
        return(b /= e / 2) < 1 ? d / 2 * b * b * b + c : d / 2 * ((b -= 2) * b * b + 2) + c
    }, easeInQuart: function (a, b, c, d, e) {
        return d * (b /= e) * b * b * b + c
    }, easeOutQuart: function (a, b, c, d, e) {
        return-d * ((b = b / e - 1) * b * b * b - 1) + c
    }, easeInOutQuart: function (a, b, c, d, e) {
        return(b /= e / 2) < 1 ? d / 2 * b * b * b * b + c : -d / 2 * ((b -= 2) * b * b * b - 2) + c
    }, easeInQuint: function (a, b, c, d, e) {
        return d * (b /= e) * b * b * b * b + c
    }, easeOutQuint: function (a, b, c, d, e) {
        return d * ((b = b / e - 1) * b * b * b * b + 1) + c
    }, easeInOutQuint: function (a, b, c, d, e) {
        return(b /= e / 2) < 1 ? d / 2 * b * b * b * b * b + c : d / 2 * ((b -= 2) * b * b * b * b + 2) + c
    }, easeInSine: function (a, b, c, d, e) {
        return-d * Math.cos(b / e * (Math.PI / 2)) + d + c
    }, easeOutSine: function (a, b, c, d, e) {
        return d * Math.sin(b / e * (Math.PI / 2)) + c
    }, easeInOutSine: function (a, b, c, d, e) {
        return-d / 2 * (Math.cos(Math.PI * b / e) - 1) + c
    }, easeInExpo: function (a, b, c, d, e) {
        return 0 == b ? c : d * Math.pow(2, 10 * (b / e - 1)) + c
    }, easeOutExpo: function (a, b, c, d, e) {
        return b == e ? c + d : d * (-Math.pow(2, -10 * b / e) + 1) + c
    }, easeInOutExpo: function (a, b, c, d, e) {
        return 0 == b ? c : b == e ? c + d : (b /= e / 2) < 1 ? d / 2 * Math.pow(2, 10 * (b - 1)) + c : d / 2 * (-Math.pow(2, -10 * --b) + 2) + c
    }, easeInCirc: function (a, b, c, d, e) {
        return-d * (Math.sqrt(1 - (b /= e) * b) - 1) + c
    }, easeOutCirc: function (a, b, c, d, e) {
        return d * Math.sqrt(1 - (b = b / e - 1) * b) + c
    }, easeInOutCirc: function (a, b, c, d, e) {
        return(b /= e / 2) < 1 ? -d / 2 * (Math.sqrt(1 - b * b) - 1) + c : d / 2 * (Math.sqrt(1 - (b -= 2) * b) + 1) + c
    }, easeInElastic: function (a, b, c, d, e) {
        var f = 1.70158, g = 0, h = d;
        if (0 == b)return c;
        if (1 == (b /= e))return c + d;
        if (g || (g = .3 * e), h < Math.abs(d)) {
            h = d;
            var f = g / 4
        } else var f = g / (2 * Math.PI) * Math.asin(d / h);
        return-(h * Math.pow(2, 10 * (b -= 1)) * Math.sin(2 * (b * e - f) * Math.PI / g)) + c
    }, easeOutElastic: function (a, b, c, d, e) {
        var f = 1.70158, g = 0, h = d;
        if (0 == b)return c;
        if (1 == (b /= e))return c + d;
        if (g || (g = .3 * e), h < Math.abs(d)) {
            h = d;
            var f = g / 4
        } else var f = g / (2 * Math.PI) * Math.asin(d / h);
        return h * Math.pow(2, -10 * b) * Math.sin(2 * (b * e - f) * Math.PI / g) + d + c
    }, easeInOutElastic: function (a, b, c, d, e) {
        var f = 1.70158, g = 0, h = d;
        if (0 == b)return c;
        if (2 == (b /= e / 2))return c + d;
        if (g || (g = .3 * e * 1.5), h < Math.abs(d)) {
            h = d;
            var f = g / 4
        } else var f = g / (2 * Math.PI) * Math.asin(d / h);
        return 1 > b ? -.5 * h * Math.pow(2, 10 * (b -= 1)) * Math.sin(2 * (b * e - f) * Math.PI / g) + c : h * Math.pow(2, -10 * (b -= 1)) * Math.sin(2 * (b * e - f) * Math.PI / g) * .5 + d + c
    }, easeInBack: function (a, c, d, e, f, g) {
        return g == b && (g = 1.70158), e * (c /= f) * c * ((g + 1) * c - g) + d
    }, easeOutBack: function (a, c, d, e, f, g) {
        return g == b && (g = 1.70158), e * ((c = c / f - 1) * c * ((g + 1) * c + g) + 1) + d
    }, easeInOutBack: function (a, c, d, e, f, g) {
        return g == b && (g = 1.70158), (c /= f / 2) < 1 ? e / 2 * c * c * (((g *= 1.525) + 1) * c - g) + d : e / 2 * ((c -= 2) * c * (((g *= 1.525) + 1) * c + g) + 2) + d
    }, easeInBounce: function (b, c, d, e, f) {
        return e - a.easing.easeOutBounce(b, f - c, 0, e, f) + d
    }, easeOutBounce: function (a, b, c, d, e) {
        return(b /= e) < 1 / 2.75 ? 7.5625 * d * b * b + c : 2 / 2.75 > b ? d * (7.5625 * (b -= 1.5 / 2.75) * b + .75) + c : 2.5 / 2.75 > b ? d * (7.5625 * (b -= 2.25 / 2.75) * b + .9375) + c : d * (7.5625 * (b -= 2.625 / 2.75) * b + .984375) + c
    }, easeInOutBounce: function (b, c, d, e, f) {
        return f / 2 > c ? .5 * a.easing.easeInBounce(b, 2 * c, 0, e, f) + d : .5 * a.easing.easeOutBounce(b, 2 * c - f, 0, e, f) + .5 * e + d
    }})
}(jQuery), function (a, b) {
    function c(b, c) {
        var e, f, g, h = b.nodeName.toLowerCase();
        return"area" === h ? (e = b.parentNode, f = e.name, b.href && f && "map" === e.nodeName.toLowerCase() ? (g = a("img[usemap=#" + f + "]")[0], !!g && d(g)) : !1) : (/input|select|textarea|button|object/.test(h) ? !b.disabled : "a" === h ? b.href || c : c) && d(b)
    }

    function d(b) {
        return a.expr.filters.visible(b) && !a(b).parents().addBack().filter(function () {
            return"hidden" === a.css(this, "visibility")
        }).length
    }

    var e = 0, f = /^ui-id-\d+$/;
    a.ui = a.ui || {}, a.ui.version || (a.extend(a.ui, {version: "1.10.0", keyCode: {BACKSPACE: 8, COMMA: 188, DELETE: 46, DOWN: 40, END: 35, ENTER: 13, ESCAPE: 27, HOME: 36, LEFT: 37, NUMPAD_ADD: 107, NUMPAD_DECIMAL: 110, NUMPAD_DIVIDE: 111, NUMPAD_ENTER: 108, NUMPAD_MULTIPLY: 106, NUMPAD_SUBTRACT: 109, PAGE_DOWN: 34, PAGE_UP: 33, PERIOD: 190, RIGHT: 39, SPACE: 32, TAB: 9, UP: 38}}), a.fn.extend({_focus: a.fn.focus, focus: function (b, c) {
        return"number" == typeof b ? this.each(function () {
            var d = this;
            setTimeout(function () {
                a(d).focus(), c && c.call(d)
            }, b)
        }) : this._focus.apply(this, arguments)
    }, scrollParent: function () {
        var b;
        return b = a.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function () {
            return/(relative|absolute|fixed)/.test(a.css(this, "position")) && /(auto|scroll)/.test(a.css(this, "overflow") + a.css(this, "overflow-y") + a.css(this, "overflow-x"))
        }).eq(0) : this.parents().filter(function () {
            return/(auto|scroll)/.test(a.css(this, "overflow") + a.css(this, "overflow-y") + a.css(this, "overflow-x"))
        }).eq(0), /fixed/.test(this.css("position")) || !b.length ? a(document) : b
    }, zIndex: function (c) {
        if (c !== b)return this.css("zIndex", c);
        if (this.length)for (var d, e, f = a(this[0]); f.length && f[0] !== document;) {
            if (d = f.css("position"), ("absolute" === d || "relative" === d || "fixed" === d) && (e = parseInt(f.css("zIndex"), 10), !isNaN(e) && 0 !== e))return e;
            f = f.parent()
        }
        return 0
    }, uniqueId: function () {
        return this.each(function () {
            this.id || (this.id = "ui-id-" + ++e)
        })
    }, removeUniqueId: function () {
        return this.each(function () {
            f.test(this.id) && a(this).removeAttr("id")
        })
    }}), a.extend(a.expr[":"], {data: a.expr.createPseudo ? a.expr.createPseudo(function (b) {
        return function (c) {
            return!!a.data(c, b)
        }
    }) : function (b, c, d) {
        return!!a.data(b, d[3])
    }, focusable: function (b) {
        return c(b, !isNaN(a.attr(b, "tabindex")))
    }, tabbable: function (b) {
        var d = a.attr(b, "tabindex"), e = isNaN(d);
        return(e || d >= 0) && c(b, !e)
    }}), a("<a>").outerWidth(1).jquery || a.each(["Width", "Height"], function (c, d) {
        function e(b, c, d, e) {
            return a.each(f, function () {
                c -= parseFloat(a.css(b, "padding" + this)) || 0, d && (c -= parseFloat(a.css(b, "border" + this + "Width")) || 0), e && (c -= parseFloat(a.css(b, "margin" + this)) || 0)
            }), c
        }

        var f = "Width" === d ? ["Left", "Right"] : ["Top", "Bottom"], g = d.toLowerCase(), h = {innerWidth: a.fn.innerWidth, innerHeight: a.fn.innerHeight, outerWidth: a.fn.outerWidth, outerHeight: a.fn.outerHeight};
        a.fn["inner" + d] = function (c) {
            return c === b ? h["inner" + d].call(this) : this.each(function () {
                a(this).css(g, e(this, c) + "px")
            })
        }, a.fn["outer" + d] = function (b, c) {
            return"number" != typeof b ? h["outer" + d].call(this, b) : this.each(function () {
                a(this).css(g, e(this, b, !0, c) + "px")
            })
        }
    }), a.fn.addBack || (a.fn.addBack = function (a) {
        return this.add(null == a ? this.prevObject : this.prevObject.filter(a))
    }), a("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (a.fn.removeData = function (b) {
        return function (c) {
            return arguments.length ? b.call(this, a.camelCase(c)) : b.call(this)
        }
    }(a.fn.removeData)), a.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), a.support.selectstart = "onselectstart"in document.createElement("div"), a.fn.extend({disableSelection: function () {
        return this.bind((a.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function (a) {
            a.preventDefault()
        })
    }, enableSelection: function () {
        return this.unbind(".ui-disableSelection")
    }}), a.extend(a.ui, {plugin: {add: function (b, c, d) {
        var e, f = a.ui[b].prototype;
        for (e in d)f.plugins[e] = f.plugins[e] || [], f.plugins[e].push([c, d[e]])
    }, call: function (a, b, c) {
        var d, e = a.plugins[b];
        if (e && a.element[0].parentNode && 11 !== a.element[0].parentNode.nodeType)for (d = 0; d < e.length; d++)a.options[e[d][0]] && e[d][1].apply(a.element, c)
    }}, hasScroll: function (b, c) {
        if ("hidden" === a(b).css("overflow"))return!1;
        var d = c && "left" === c ? "scrollLeft" : "scrollTop", e = !1;
        return b[d] > 0 ? !0 : (b[d] = 1, e = b[d] > 0, b[d] = 0, e)
    }}))
}(jQuery), function (a, b) {
    var c = 0, d = Array.prototype.slice, e = a.cleanData;
    a.cleanData = function (b) {
        for (var c, d = 0; null != (c = b[d]); d++)try {
            a(c).triggerHandler("remove")
        } catch (f) {
        }
        e(b)
    }, a.widget = function (b, c, d) {
        var e, f, g, h, i = {}, j = b.split(".")[0];
        b = b.split(".")[1], e = j + "-" + b, d || (d = c, c = a.Widget), a.expr[":"][e.toLowerCase()] = function (b) {
            return!!a.data(b, e)
        }, a[j] = a[j] || {}, f = a[j][b], g = a[j][b] = function (a, b) {
            return this._createWidget ? void(arguments.length && this._createWidget(a, b)) : new g(a, b)
        }, a.extend(g, f, {version: d.version, _proto: a.extend({}, d), _childConstructors: []}), h = new c, h.options = a.widget.extend({}, h.options), a.each(d, function (b, d) {
            return a.isFunction(d) ? void(i[b] = function () {
                var a = function () {
                    return c.prototype[b].apply(this, arguments)
                }, e = function (a) {
                    return c.prototype[b].apply(this, a)
                };
                return function () {
                    var b, c = this._super, f = this._superApply;
                    return this._super = a, this._superApply = e, b = d.apply(this, arguments), this._super = c, this._superApply = f, b
                }
            }()) : void(i[b] = d)
        }), g.prototype = a.widget.extend(h, {widgetEventPrefix: f ? h.widgetEventPrefix : b}, i, {constructor: g, namespace: j, widgetName: b, widgetFullName: e}), f ? (a.each(f._childConstructors, function (b, c) {
            var d = c.prototype;
            a.widget(d.namespace + "." + d.widgetName, g, c._proto)
        }), delete f._childConstructors) : c._childConstructors.push(g), a.widget.bridge(b, g)
    }, a.widget.extend = function (c) {
        for (var e, f, g = d.call(arguments, 1), h = 0, i = g.length; i > h; h++)for (e in g[h])f = g[h][e], g[h].hasOwnProperty(e) && f !== b && (c[e] = a.isPlainObject(f) ? a.isPlainObject(c[e]) ? a.widget.extend({}, c[e], f) : a.widget.extend({}, f) : f);
        return c
    }, a.widget.bridge = function (c, e) {
        var f = e.prototype.widgetFullName || c;
        a.fn[c] = function (g) {
            var h = "string" == typeof g, i = d.call(arguments, 1), j = this;
            return g = !h && i.length ? a.widget.extend.apply(null, [g].concat(i)) : g, this.each(h ? function () {
                var d, e = a.data(this, f);
                return e ? a.isFunction(e[g]) && "_" !== g.charAt(0) ? (d = e[g].apply(e, i), d !== e && d !== b ? (j = d && d.jquery ? j.pushStack(d.get()) : d, !1) : void 0) : a.error("no such method '" + g + "' for " + c + " widget instance") : a.error("cannot call methods on " + c + " prior to initialization; attempted to call method '" + g + "'")
            } : function () {
                var b = a.data(this, f);
                b ? b.option(g || {})._init() : a.data(this, f, new e(g, this))
            }), j
        }
    }, a.Widget = function () {
    }, a.Widget._childConstructors = [], a.Widget.prototype = {widgetName: "widget", widgetEventPrefix: "", defaultElement: "<div>", options: {disabled: !1, create: null}, _createWidget: function (b, d) {
        d = a(d || this.defaultElement || this)[0], this.element = a(d), this.uuid = c++, this.eventNamespace = "." + this.widgetName + this.uuid, this.options = a.widget.extend({}, this.options, this._getCreateOptions(), b), this.bindings = a(), this.hoverable = a(), this.focusable = a(), d !== this && (a.data(d, this.widgetFullName, this), this._on(!0, this.element, {remove: function (a) {
            a.target === d && this.destroy()
        }}), this.document = a(d.style ? d.ownerDocument : d.document || d), this.window = a(this.document[0].defaultView || this.document[0].parentWindow)), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init()
    }, _getCreateOptions: a.noop, _getCreateEventData: a.noop, _create: a.noop, _init: a.noop, destroy: function () {
        this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")
    }, _destroy: a.noop, widget: function () {
        return this.element
    }, option: function (c, d) {
        var e, f, g, h = c;
        if (0 === arguments.length)return a.widget.extend({}, this.options);
        if ("string" == typeof c)if (h = {}, e = c.split("."), c = e.shift(), e.length) {
            for (f = h[c] = a.widget.extend({}, this.options[c]), g = 0; g < e.length - 1; g++)f[e[g]] = f[e[g]] || {}, f = f[e[g]];
            if (c = e.pop(), d === b)return f[c] === b ? null : f[c];
            f[c] = d
        } else {
            if (d === b)return this.options[c] === b ? null : this.options[c];
            h[c] = d
        }
        return this._setOptions(h), this
    }, _setOptions: function (a) {
        var b;
        for (b in a)this._setOption(b, a[b]);
        return this
    }, _setOption: function (a, b) {
        return this.options[a] = b, "disabled" === a && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!b).attr("aria-disabled", b), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")), this
    }, enable: function () {
        return this._setOption("disabled", !1)
    }, disable: function () {
        return this._setOption("disabled", !0)
    }, _on: function (b, c, d) {
        var e, f = this;
        "boolean" != typeof b && (d = c, c = b, b = !1), d ? (c = e = a(c), this.bindings = this.bindings.add(c)) : (d = c, c = this.element, e = this.widget()), a.each(d, function (d, g) {
            function h() {
                return b || f.options.disabled !== !0 && !a(this).hasClass("ui-state-disabled") ? ("string" == typeof g ? f[g] : g).apply(f, arguments) : void 0
            }

            "string" != typeof g && (h.guid = g.guid = g.guid || h.guid || a.guid++);
            var i = d.match(/^(\w+)\s*(.*)$/), j = i[1] + f.eventNamespace, k = i[2];
            k ? e.delegate(k, j, h) : c.bind(j, h)
        })
    }, _off: function (a, b) {
        b = (b || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, a.unbind(b).undelegate(b)
    }, _delay: function (a, b) {
        function c() {
            return("string" == typeof a ? d[a] : a).apply(d, arguments)
        }

        var d = this;
        return setTimeout(c, b || 0)
    }, _hoverable: function (b) {
        this.hoverable = this.hoverable.add(b), this._on(b, {mouseenter: function (b) {
            a(b.currentTarget).addClass("ui-state-hover")
        }, mouseleave: function (b) {
            a(b.currentTarget).removeClass("ui-state-hover")
        }})
    }, _focusable: function (b) {
        this.focusable = this.focusable.add(b), this._on(b, {focusin: function (b) {
            a(b.currentTarget).addClass("ui-state-focus")
        }, focusout: function (b) {
            a(b.currentTarget).removeClass("ui-state-focus")
        }})
    }, _trigger: function (b, c, d) {
        var e, f, g = this.options[b];
        if (d = d || {}, c = a.Event(c), c.type = (b === this.widgetEventPrefix ? b : this.widgetEventPrefix + b).toLowerCase(), c.target = this.element[0], f = c.originalEvent)for (e in f)e in c || (c[e] = f[e]);
        return this.element.trigger(c, d), !(a.isFunction(g) && g.apply(this.element[0], [c].concat(d)) === !1 || c.isDefaultPrevented())
    }}, a.each({show: "fadeIn", hide: "fadeOut"}, function (b, c) {
        a.Widget.prototype["_" + b] = function (d, e, f) {
            "string" == typeof e && (e = {effect: e});
            var g, h = e ? e === !0 || "number" == typeof e ? c : e.effect || c : b;
            e = e || {}, "number" == typeof e && (e = {duration: e}), g = !a.isEmptyObject(e), e.complete = f, e.delay && d.delay(e.delay), g && a.effects && a.effects.effect[h] ? d[b](e) : h !== b && d[h] ? d[h](e.duration, e.easing, f) : d.queue(function (c) {
                a(this)[b](), f && f.call(d[0]), c()
            })
        }
    })
}(jQuery), function (a) {
    var b = !1;
    a(document).mouseup(function () {
        b = !1
    }), a.widget("ui.mouse", {version: "1.10.0", options: {cancel: "input,textarea,button,select,option", distance: 1, delay: 0}, _mouseInit: function () {
        var b = this;
        this.element.bind("mousedown." + this.widgetName, function (a) {
            return b._mouseDown(a)
        }).bind("click." + this.widgetName, function (c) {
            return!0 === a.data(c.target, b.widgetName + ".preventClickEvent") ? (a.removeData(c.target, b.widgetName + ".preventClickEvent"), c.stopImmediatePropagation(), !1) : void 0
        }), this.started = !1
    }, _mouseDestroy: function () {
        this.element.unbind("." + this.widgetName), this._mouseMoveDelegate && a(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate)
    }, _mouseDown: function (c) {
        if (!b) {
            this._mouseStarted && this._mouseUp(c), this._mouseDownEvent = c;
            var d = this, e = 1 === c.which, f = "string" == typeof this.options.cancel && c.target.nodeName ? a(c.target).closest(this.options.cancel).length : !1;
            return e && !f && this._mouseCapture(c) ? (this.mouseDelayMet = !this.options.delay, this.mouseDelayMet || (this._mouseDelayTimer = setTimeout(function () {
                d.mouseDelayMet = !0
            }, this.options.delay)), this._mouseDistanceMet(c) && this._mouseDelayMet(c) && (this._mouseStarted = this._mouseStart(c) !== !1, !this._mouseStarted) ? (c.preventDefault(), !0) : (!0 === a.data(c.target, this.widgetName + ".preventClickEvent") && a.removeData(c.target, this.widgetName + ".preventClickEvent"), this._mouseMoveDelegate = function (a) {
                return d._mouseMove(a)
            }, this._mouseUpDelegate = function (a) {
                return d._mouseUp(a)
            }, a(document).bind("mousemove." + this.widgetName, this._mouseMoveDelegate).bind("mouseup." + this.widgetName, this._mouseUpDelegate), c.preventDefault(), b = !0, !0)) : !0
        }
    }, _mouseMove: function (b) {
        return a.ui.ie && (!document.documentMode || document.documentMode < 9) && !b.button ? this._mouseUp(b) : this._mouseStarted ? (this._mouseDrag(b), b.preventDefault()) : (this._mouseDistanceMet(b) && this._mouseDelayMet(b) && (this._mouseStarted = this._mouseStart(this._mouseDownEvent, b) !== !1, this._mouseStarted ? this._mouseDrag(b) : this._mouseUp(b)), !this._mouseStarted)
    }, _mouseUp: function (b) {
        return a(document).unbind("mousemove." + this.widgetName, this._mouseMoveDelegate).unbind("mouseup." + this.widgetName, this._mouseUpDelegate), this._mouseStarted && (this._mouseStarted = !1, b.target === this._mouseDownEvent.target && a.data(b.target, this.widgetName + ".preventClickEvent", !0), this._mouseStop(b)), !1
    }, _mouseDistanceMet: function (a) {
        return Math.max(Math.abs(this._mouseDownEvent.pageX - a.pageX), Math.abs(this._mouseDownEvent.pageY - a.pageY)) >= this.options.distance
    }, _mouseDelayMet: function () {
        return this.mouseDelayMet
    }, _mouseStart: function () {
    }, _mouseDrag: function () {
    }, _mouseStop: function () {
    }, _mouseCapture: function () {
        return!0
    }})
}(jQuery), function (a) {
    a.widget("ui.draggable", a.ui.mouse, {version: "1.10.0", widgetEventPrefix: "drag", options: {addClasses: !0, appendTo: "parent", axis: !1, connectToSortable: !1, containment: !1, cursor: "auto", cursorAt: !1, grid: !1, handle: !1, helper: "original", iframeFix: !1, opacity: !1, refreshPositions: !1, revert: !1, revertDuration: 500, scope: "default", scroll: !0, scrollSensitivity: 20, scrollSpeed: 20, snap: !1, snapMode: "both", snapTolerance: 20, stack: !1, zIndex: !1, drag: null, start: null, stop: null}, _create: function () {
        "original" !== this.options.helper || /^(?:r|a|f)/.test(this.element.css("position")) || (this.element[0].style.position = "relative"), this.options.addClasses && this.element.addClass("ui-draggable"), this.options.disabled && this.element.addClass("ui-draggable-disabled"), this._mouseInit()
    }, _destroy: function () {
        this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"), this._mouseDestroy()
    }, _mouseCapture: function (b) {
        var c = this.options;
        return this.helper || c.disabled || a(b.target).closest(".ui-resizable-handle").length > 0 ? !1 : (this.handle = this._getHandle(b), this.handle ? (a(c.iframeFix === !0 ? "iframe" : c.iframeFix).each(function () {
            a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width: this.offsetWidth + "px", height: this.offsetHeight + "px", position: "absolute", opacity: "0.001", zIndex: 1e3}).css(a(this).offset()).appendTo("body")
        }), !0) : !1)
    }, _mouseStart: function (b) {
        var c = this.options;
        return this.helper = this._createHelper(b), this.helper.addClass("ui-draggable-dragging"), this._cacheHelperProportions(), a.ui.ddmanager && (a.ui.ddmanager.current = this), this._cacheMargins(), this.cssPosition = this.helper.css("position"), this.scrollParent = this.helper.scrollParent(), this.offset = this.positionAbs = this.element.offset(), this.offset = {top: this.offset.top - this.margins.top, left: this.offset.left - this.margins.left}, a.extend(this.offset, {click: {left: b.pageX - this.offset.left, top: b.pageY - this.offset.top}, parent: this._getParentOffset(), relative: this._getRelativeOffset()}), this.originalPosition = this.position = this._generatePosition(b), this.originalPageX = b.pageX, this.originalPageY = b.pageY, c.cursorAt && this._adjustOffsetFromHelper(c.cursorAt), c.containment && this._setContainment(), this._trigger("start", b) === !1 ? (this._clear(), !1) : (this._cacheHelperProportions(), a.ui.ddmanager && !c.dropBehaviour && a.ui.ddmanager.prepareOffsets(this, b), this._mouseDrag(b, !0), a.ui.ddmanager && a.ui.ddmanager.dragStart(this, b), !0)
    }, _mouseDrag: function (b, c) {
        if (this.position = this._generatePosition(b), this.positionAbs = this._convertPositionTo("absolute"), !c) {
            var d = this._uiHash();
            if (this._trigger("drag", b, d) === !1)return this._mouseUp({}), !1;
            this.position = d.position
        }
        return this.options.axis && "y" === this.options.axis || (this.helper[0].style.left = this.position.left + "px"), this.options.axis && "x" === this.options.axis || (this.helper[0].style.top = this.position.top + "px"), a.ui.ddmanager && a.ui.ddmanager.drag(this, b), !1
    }, _mouseStop: function (b) {
        var c, d = this, e = !1, f = !1;
        for (a.ui.ddmanager && !this.options.dropBehaviour && (f = a.ui.ddmanager.drop(this, b)), this.dropped && (f = this.dropped, this.dropped = !1), c = this.element[0]; c && (c = c.parentNode);)c === document && (e = !0);
        return e || "original" !== this.options.helper ? ("invalid" === this.options.revert && !f || "valid" === this.options.revert && f || this.options.revert === !0 || a.isFunction(this.options.revert) && this.options.revert.call(this.element, f) ? a(this.helper).animate(this.originalPosition, parseInt(this.options.revertDuration, 10), function () {
            d._trigger("stop", b) !== !1 && d._clear()
        }) : this._trigger("stop", b) !== !1 && this._clear(), !1) : !1
    }, _mouseUp: function (b) {
        return a("div.ui-draggable-iframeFix").each(function () {
            this.parentNode.removeChild(this)
        }), a.ui.ddmanager && a.ui.ddmanager.dragStop(this, b), a.ui.mouse.prototype._mouseUp.call(this, b)
    }, cancel: function () {
        return this.helper.is(".ui-draggable-dragging") ? this._mouseUp({}) : this._clear(), this
    }, _getHandle: function (b) {
        var c = this.options.handle && a(this.options.handle, this.element).length ? !1 : !0;
        return a(this.options.handle, this.element).find("*").addBack().each(function () {
            this === b.target && (c = !0)
        }), c
    }, _createHelper: function (b) {
        var c = this.options, d = a.isFunction(c.helper) ? a(c.helper.apply(this.element[0], [b])) : "clone" === c.helper ? this.element.clone().removeAttr("id") : this.element;
        return d.parents("body").length || d.appendTo("parent" === c.appendTo ? this.element[0].parentNode : c.appendTo), d[0] === this.element[0] || /(fixed|absolute)/.test(d.css("position")) || d.css("position", "absolute"), d
    }, _adjustOffsetFromHelper: function (b) {
        "string" == typeof b && (b = b.split(" ")), a.isArray(b) && (b = {left: +b[0], top: +b[1] || 0}), "left"in b && (this.offset.click.left = b.left + this.margins.left), "right"in b && (this.offset.click.left = this.helperProportions.width - b.right + this.margins.left), "top"in b && (this.offset.click.top = b.top + this.margins.top), "bottom"in b && (this.offset.click.top = this.helperProportions.height - b.bottom + this.margins.top)
    }, _getParentOffset: function () {
        this.offsetParent = this.helper.offsetParent();
        var b = this.offsetParent.offset();
        return"absolute" === this.cssPosition && this.scrollParent[0] !== document && a.contains(this.scrollParent[0], this.offsetParent[0]) && (b.left += this.scrollParent.scrollLeft(), b.top += this.scrollParent.scrollTop()), (this.offsetParent[0] === document.body || this.offsetParent[0].tagName && "html" === this.offsetParent[0].tagName.toLowerCase() && a.ui.ie) && (b = {top: 0, left: 0}), {top: b.top + (parseInt(this.offsetParent.css("borderTopWidth"), 10) || 0), left: b.left + (parseInt(this.offsetParent.css("borderLeftWidth"), 10) || 0)}
    }, _getRelativeOffset: function () {
        if ("relative" === this.cssPosition) {
            var a = this.element.position();
            return{top: a.top - (parseInt(this.helper.css("top"), 10) || 0) + this.scrollParent.scrollTop(), left: a.left - (parseInt(this.helper.css("left"), 10) || 0) + this.scrollParent.scrollLeft()}
        }
        return{top: 0, left: 0}
    }, _cacheMargins: function () {
        this.margins = {left: parseInt(this.element.css("marginLeft"), 10) || 0, top: parseInt(this.element.css("marginTop"), 10) || 0, right: parseInt(this.element.css("marginRight"), 10) || 0, bottom: parseInt(this.element.css("marginBottom"), 10) || 0}
    }, _cacheHelperProportions: function () {
        this.helperProportions = {width: this.helper.outerWidth(), height: this.helper.outerHeight()}
    }, _setContainment: function () {
        var b, c, d, e = this.options;
        if ("parent" === e.containment && (e.containment = this.helper[0].parentNode), ("document" === e.containment || "window" === e.containment) && (this.containment = ["document" === e.containment ? 0 : a(window).scrollLeft() - this.offset.relative.left - this.offset.parent.left, "document" === e.containment ? 0 : a(window).scrollTop() - this.offset.relative.top - this.offset.parent.top, ("document" === e.containment ? 0 : a(window).scrollLeft()) + a("document" === e.containment ? document : window).width() - this.helperProportions.width - this.margins.left, ("document" === e.containment ? 0 : a(window).scrollTop()) + (a("document" === e.containment ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top]), /^(document|window|parent)$/.test(e.containment) || e.containment.constructor === Array)e.containment.constructor === Array && (this.containment = e.containment); else {
            if (c = a(e.containment), d = c[0], !d)return;
            b = "hidden" !== a(d).css("overflow"), this.containment = [(parseInt(a(d).css("borderLeftWidth"), 10) || 0) + (parseInt(a(d).css("paddingLeft"), 10) || 0), (parseInt(a(d).css("borderTopWidth"), 10) || 0) + (parseInt(a(d).css("paddingTop"), 10) || 0), (b ? Math.max(d.scrollWidth, d.offsetWidth) : d.offsetWidth) - (parseInt(a(d).css("borderLeftWidth"), 10) || 0) - (parseInt(a(d).css("paddingRight"), 10) || 0) - this.helperProportions.width - this.margins.left - this.margins.right, (b ? Math.max(d.scrollHeight, d.offsetHeight) : d.offsetHeight) - (parseInt(a(d).css("borderTopWidth"), 10) || 0) - (parseInt(a(d).css("paddingBottom"), 10) || 0) - this.helperProportions.height - this.margins.top - this.margins.bottom], this.relative_container = c
        }
    }, _convertPositionTo: function (b, c) {
        c || (c = this.position);
        var d = "absolute" === b ? 1 : -1, e = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && a.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, f = /(html|body)/i.test(e[0].tagName);
        return{top: c.top + this.offset.relative.top * d + this.offset.parent.top * d - ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : f ? 0 : e.scrollTop()) * d, left: c.left + this.offset.relative.left * d + this.offset.parent.left * d - ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : f ? 0 : e.scrollLeft()) * d}
    }, _generatePosition: function (b) {
        var c, d, e, f, g = this.options, h = "absolute" !== this.cssPosition || this.scrollParent[0] !== document && a.contains(this.scrollParent[0], this.offsetParent[0]) ? this.scrollParent : this.offsetParent, i = /(html|body)/i.test(h[0].tagName), j = b.pageX, k = b.pageY;
        return this.originalPosition && (this.containment && (this.relative_container ? (d = this.relative_container.offset(), c = [this.containment[0] + d.left, this.containment[1] + d.top, this.containment[2] + d.left, this.containment[3] + d.top]) : c = this.containment, b.pageX - this.offset.click.left < c[0] && (j = c[0] + this.offset.click.left), b.pageY - this.offset.click.top < c[1] && (k = c[1] + this.offset.click.top), b.pageX - this.offset.click.left > c[2] && (j = c[2] + this.offset.click.left), b.pageY - this.offset.click.top > c[3] && (k = c[3] + this.offset.click.top)), g.grid && (e = g.grid[1] ? this.originalPageY + Math.round((k - this.originalPageY) / g.grid[1]) * g.grid[1] : this.originalPageY, k = c ? e - this.offset.click.top >= c[1] || e - this.offset.click.top > c[3] ? e : e - this.offset.click.top >= c[1] ? e - g.grid[1] : e + g.grid[1] : e, f = g.grid[0] ? this.originalPageX + Math.round((j - this.originalPageX) / g.grid[0]) * g.grid[0] : this.originalPageX, j = c ? f - this.offset.click.left >= c[0] || f - this.offset.click.left > c[2] ? f : f - this.offset.click.left >= c[0] ? f - g.grid[0] : f + g.grid[0] : f)), {top: k - this.offset.click.top - this.offset.relative.top - this.offset.parent.top + ("fixed" === this.cssPosition ? -this.scrollParent.scrollTop() : i ? 0 : h.scrollTop()), left: j - this.offset.click.left - this.offset.relative.left - this.offset.parent.left + ("fixed" === this.cssPosition ? -this.scrollParent.scrollLeft() : i ? 0 : h.scrollLeft())}
    }, _clear: function () {
        this.helper.removeClass("ui-draggable-dragging"), this.helper[0] === this.element[0] || this.cancelHelperRemoval || this.helper.remove(), this.helper = null, this.cancelHelperRemoval = !1
    }, _trigger: function (b, c, d) {
        return d = d || this._uiHash(), a.ui.plugin.call(this, b, [c, d]), "drag" === b && (this.positionAbs = this._convertPositionTo("absolute")), a.Widget.prototype._trigger.call(this, b, c, d)
    }, plugins: {}, _uiHash: function () {
        return{helper: this.helper, position: this.position, originalPosition: this.originalPosition, offset: this.positionAbs}
    }}), a.ui.plugin.add("draggable", "connectToSortable", {start: function (b, c) {
        var d = a(this).data("ui-draggable"), e = d.options, f = a.extend({}, c, {item: d.element});
        d.sortables = [], a(e.connectToSortable).each(function () {
            var c = a.data(this, "ui-sortable");
            c && !c.options.disabled && (d.sortables.push({instance: c, shouldRevert: c.options.revert}), c.refreshPositions(), c._trigger("activate", b, f))
        })
    }, stop: function (b, c) {
        var d = a(this).data("ui-draggable"), e = a.extend({}, c, {item: d.element});
        a.each(d.sortables, function () {
            this.instance.isOver ? (this.instance.isOver = 0, d.cancelHelperRemoval = !0, this.instance.cancelHelperRemoval = !1, this.shouldRevert && (this.instance.options.revert = !0), this.instance._mouseStop(b), this.instance.options.helper = this.instance.options._helper, "original" === d.options.helper && this.instance.currentItem.css({top: "auto", left: "auto"})) : (this.instance.cancelHelperRemoval = !1, this.instance._trigger("deactivate", b, e))
        })
    }, drag: function (b, c) {
        var d = a(this).data("ui-draggable"), e = this;
        a.each(d.sortables, function () {
            var f = !1, g = this;
            this.instance.positionAbs = d.positionAbs, this.instance.helperProportions = d.helperProportions, this.instance.offset.click = d.offset.click, this.instance._intersectsWith(this.instance.containerCache) && (f = !0, a.each(d.sortables, function () {
                return this.instance.positionAbs = d.positionAbs, this.instance.helperProportions = d.helperProportions, this.instance.offset.click = d.offset.click, this !== g && this.instance._intersectsWith(this.instance.containerCache) && a.ui.contains(g.instance.element[0], this.instance.element[0]) && (f = !1), f
            })), f ? (this.instance.isOver || (this.instance.isOver = 1, this.instance.currentItem = a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item", !0), this.instance.options._helper = this.instance.options.helper, this.instance.options.helper = function () {
                return c.helper[0]
            }, b.target = this.instance.currentItem[0], this.instance._mouseCapture(b, !0), this.instance._mouseStart(b, !0, !0), this.instance.offset.click.top = d.offset.click.top, this.instance.offset.click.left = d.offset.click.left, this.instance.offset.parent.left -= d.offset.parent.left - this.instance.offset.parent.left, this.instance.offset.parent.top -= d.offset.parent.top - this.instance.offset.parent.top, d._trigger("toSortable", b), d.dropped = this.instance.element, d.currentItem = d.element, this.instance.fromOutside = d), this.instance.currentItem && this.instance._mouseDrag(b)) : this.instance.isOver && (this.instance.isOver = 0, this.instance.cancelHelperRemoval = !0, this.instance.options.revert = !1, this.instance._trigger("out", b, this.instance._uiHash(this.instance)), this.instance._mouseStop(b, !0), this.instance.options.helper = this.instance.options._helper, this.instance.currentItem.remove(), this.instance.placeholder && this.instance.placeholder.remove(), d._trigger("fromSortable", b), d.dropped = !1)
        })
    }}), a.ui.plugin.add("draggable", "cursor", {start: function () {
        var b = a("body"), c = a(this).data("ui-draggable").options;
        b.css("cursor") && (c._cursor = b.css("cursor")), b.css("cursor", c.cursor)
    }, stop: function () {
        var b = a(this).data("ui-draggable").options;
        b._cursor && a("body").css("cursor", b._cursor)
    }}), a.ui.plugin.add("draggable", "opacity", {start: function (b, c) {
        var d = a(c.helper), e = a(this).data("ui-draggable").options;
        d.css("opacity") && (e._opacity = d.css("opacity")), d.css("opacity", e.opacity)
    }, stop: function (b, c) {
        var d = a(this).data("ui-draggable").options;
        d._opacity && a(c.helper).css("opacity", d._opacity)
    }}), a.ui.plugin.add("draggable", "scroll", {start: function () {
        var b = a(this).data("ui-draggable");
        b.scrollParent[0] !== document && "HTML" !== b.scrollParent[0].tagName && (b.overflowOffset = b.scrollParent.offset())
    }, drag: function (b) {
        var c = a(this).data("ui-draggable"), d = c.options, e = !1;
        c.scrollParent[0] !== document && "HTML" !== c.scrollParent[0].tagName ? (d.axis && "x" === d.axis || (c.overflowOffset.top + c.scrollParent[0].offsetHeight - b.pageY < d.scrollSensitivity ? c.scrollParent[0].scrollTop = e = c.scrollParent[0].scrollTop + d.scrollSpeed : b.pageY - c.overflowOffset.top < d.scrollSensitivity && (c.scrollParent[0].scrollTop = e = c.scrollParent[0].scrollTop - d.scrollSpeed)), d.axis && "y" === d.axis || (c.overflowOffset.left + c.scrollParent[0].offsetWidth - b.pageX < d.scrollSensitivity ? c.scrollParent[0].scrollLeft = e = c.scrollParent[0].scrollLeft + d.scrollSpeed : b.pageX - c.overflowOffset.left < d.scrollSensitivity && (c.scrollParent[0].scrollLeft = e = c.scrollParent[0].scrollLeft - d.scrollSpeed))) : (d.axis && "x" === d.axis || (b.pageY - a(document).scrollTop() < d.scrollSensitivity ? e = a(document).scrollTop(a(document).scrollTop() - d.scrollSpeed) : a(window).height() - (b.pageY - a(document).scrollTop()) < d.scrollSensitivity && (e = a(document).scrollTop(a(document).scrollTop() + d.scrollSpeed))), d.axis && "y" === d.axis || (b.pageX - a(document).scrollLeft() < d.scrollSensitivity ? e = a(document).scrollLeft(a(document).scrollLeft() - d.scrollSpeed) : a(window).width() - (b.pageX - a(document).scrollLeft()) < d.scrollSensitivity && (e = a(document).scrollLeft(a(document).scrollLeft() + d.scrollSpeed)))), e !== !1 && a.ui.ddmanager && !d.dropBehaviour && a.ui.ddmanager.prepareOffsets(c, b)
    }}), a.ui.plugin.add("draggable", "snap", {start: function () {
        var b = a(this).data("ui-draggable"), c = b.options;
        b.snapElements = [], a(c.snap.constructor !== String ? c.snap.items || ":data(ui-draggable)" : c.snap).each(function () {
            var c = a(this), d = c.offset();
            this !== b.element[0] && b.snapElements.push({item: this, width: c.outerWidth(), height: c.outerHeight(), top: d.top, left: d.left})
        })
    }, drag: function (b, c) {
        var d, e, f, g, h, i, j, k, l, m, n = a(this).data("ui-draggable"), o = n.options, p = o.snapTolerance, q = c.offset.left, r = q + n.helperProportions.width, s = c.offset.top, t = s + n.helperProportions.height;
        for (l = n.snapElements.length - 1; l >= 0; l--)h = n.snapElements[l].left, i = h + n.snapElements[l].width, j = n.snapElements[l].top, k = j + n.snapElements[l].height, q > h - p && i + p > q && s > j - p && k + p > s || q > h - p && i + p > q && t > j - p && k + p > t || r > h - p && i + p > r && s > j - p && k + p > s || r > h - p && i + p > r && t > j - p && k + p > t ? ("inner" !== o.snapMode && (d = Math.abs(j - t) <= p, e = Math.abs(k - s) <= p, f = Math.abs(h - r) <= p, g = Math.abs(i - q) <= p, d && (c.position.top = n._convertPositionTo("relative", {top: j - n.helperProportions.height, left: 0}).top - n.margins.top), e && (c.position.top = n._convertPositionTo("relative", {top: k, left: 0}).top - n.margins.top), f && (c.position.left = n._convertPositionTo("relative", {top: 0, left: h - n.helperProportions.width}).left - n.margins.left), g && (c.position.left = n._convertPositionTo("relative", {top: 0, left: i}).left - n.margins.left)), m = d || e || f || g, "outer" !== o.snapMode && (d = Math.abs(j - s) <= p, e = Math.abs(k - t) <= p, f = Math.abs(h - q) <= p, g = Math.abs(i - r) <= p, d && (c.position.top = n._convertPositionTo("relative", {top: j, left: 0}).top - n.margins.top), e && (c.position.top = n._convertPositionTo("relative", {top: k - n.helperProportions.height, left: 0}).top - n.margins.top), f && (c.position.left = n._convertPositionTo("relative", {top: 0, left: h}).left - n.margins.left), g && (c.position.left = n._convertPositionTo("relative", {top: 0, left: i - n.helperProportions.width}).left - n.margins.left)), !n.snapElements[l].snapping && (d || e || f || g || m) && n.options.snap.snap && n.options.snap.snap.call(n.element, b, a.extend(n._uiHash(), {snapItem: n.snapElements[l].item})), n.snapElements[l].snapping = d || e || f || g || m) : (n.snapElements[l].snapping && n.options.snap.release && n.options.snap.release.call(n.element, b, a.extend(n._uiHash(), {snapItem: n.snapElements[l].item})), n.snapElements[l].snapping = !1)
    }}), a.ui.plugin.add("draggable", "stack", {start: function () {
        var b, c = a(this).data("ui-draggable").options, d = a.makeArray(a(c.stack)).sort(function (b, c) {
            return(parseInt(a(b).css("zIndex"), 10) || 0) - (parseInt(a(c).css("zIndex"), 10) || 0)
        });
        d.length && (b = parseInt(d[0].style.zIndex, 10) || 0, a(d).each(function (a) {
            this.style.zIndex = b + a
        }), this[0].style.zIndex = b + d.length)
    }}), a.ui.plugin.add("draggable", "zIndex", {start: function (b, c) {
        var d = a(c.helper), e = a(this).data("ui-draggable").options;
        d.css("zIndex") && (e._zIndex = d.css("zIndex")), d.css("zIndex", e.zIndex)
    }, stop: function (b, c) {
        var d = a(this).data("ui-draggable").options;
        d._zIndex && a(c.helper).css("zIndex", d._zIndex)
    }})
}(jQuery), function (a) {
    function b(a, b, c) {
        return a > b && b + c > a
    }

    a.widget("ui.droppable", {version: "1.10.0", widgetEventPrefix: "drop", options: {accept: "*", activeClass: !1, addClasses: !0, greedy: !1, hoverClass: !1, scope: "default", tolerance: "intersect", activate: null, deactivate: null, drop: null, out: null, over: null}, _create: function () {
        var b = this.options, c = b.accept;
        this.isover = !1, this.isout = !0, this.accept = a.isFunction(c) ? c : function (a) {
            return a.is(c)
        }, this.proportions = {width: this.element[0].offsetWidth, height: this.element[0].offsetHeight}, a.ui.ddmanager.droppables[b.scope] = a.ui.ddmanager.droppables[b.scope] || [], a.ui.ddmanager.droppables[b.scope].push(this), b.addClasses && this.element.addClass("ui-droppable")
    }, _destroy: function () {
        for (var b = 0, c = a.ui.ddmanager.droppables[this.options.scope]; b < c.length; b++)c[b] === this && c.splice(b, 1);
        this.element.removeClass("ui-droppable ui-droppable-disabled")
    }, _setOption: function (b, c) {
        "accept" === b && (this.accept = a.isFunction(c) ? c : function (a) {
            return a.is(c)
        }), a.Widget.prototype._setOption.apply(this, arguments)
    }, _activate: function (b) {
        var c = a.ui.ddmanager.current;
        this.options.activeClass && this.element.addClass(this.options.activeClass), c && this._trigger("activate", b, this.ui(c))
    }, _deactivate: function (b) {
        var c = a.ui.ddmanager.current;
        this.options.activeClass && this.element.removeClass(this.options.activeClass), c && this._trigger("deactivate", b, this.ui(c))
    }, _over: function (b) {
        var c = a.ui.ddmanager.current;
        c && (c.currentItem || c.element)[0] !== this.element[0] && this.accept.call(this.element[0], c.currentItem || c.element) && (this.options.hoverClass && this.element.addClass(this.options.hoverClass), this._trigger("over", b, this.ui(c)))
    }, _out: function (b) {
        var c = a.ui.ddmanager.current;
        c && (c.currentItem || c.element)[0] !== this.element[0] && this.accept.call(this.element[0], c.currentItem || c.element) && (this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("out", b, this.ui(c)))
    }, _drop: function (b, c) {
        var d = c || a.ui.ddmanager.current, e = !1;
        return d && (d.currentItem || d.element)[0] !== this.element[0] ? (this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function () {
            var b = a.data(this, "ui-droppable");
            return b.options.greedy && !b.options.disabled && b.options.scope === d.options.scope && b.accept.call(b.element[0], d.currentItem || d.element) && a.ui.intersect(d, a.extend(b, {offset: b.element.offset()}), b.options.tolerance) ? (e = !0, !1) : void 0
        }), e ? !1 : this.accept.call(this.element[0], d.currentItem || d.element) ? (this.options.activeClass && this.element.removeClass(this.options.activeClass), this.options.hoverClass && this.element.removeClass(this.options.hoverClass), this._trigger("drop", b, this.ui(d)), this.element) : !1) : !1
    }, ui: function (a) {
        return{draggable: a.currentItem || a.element, helper: a.helper, position: a.position, offset: a.positionAbs}
    }}), a.ui.intersect = function (a, c, d) {
        if (!c.offset)return!1;
        var e, f, g = (a.positionAbs || a.position.absolute).left, h = g + a.helperProportions.width, i = (a.positionAbs || a.position.absolute).top, j = i + a.helperProportions.height, k = c.offset.left, l = k + c.proportions.width, m = c.offset.top, n = m + c.proportions.height;
        switch (d) {
            case"fit":
                return g >= k && l >= h && i >= m && n >= j;
            case"intersect":
                return k < g + a.helperProportions.width / 2 && h - a.helperProportions.width / 2 < l && m < i + a.helperProportions.height / 2 && j - a.helperProportions.height / 2 < n;
            case"pointer":
                return e = (a.positionAbs || a.position.absolute).left + (a.clickOffset || a.offset.click).left, f = (a.positionAbs || a.position.absolute).top + (a.clickOffset || a.offset.click).top, b(f, m, c.proportions.height) && b(e, k, c.proportions.width);
            case"touch":
                return(i >= m && n >= i || j >= m && n >= j || m > i && j > n) && (g >= k && l >= g || h >= k && l >= h || k > g && h > l);
            default:
                return!1
        }
    }, a.ui.ddmanager = {current: null, droppables: {"default": []}, prepareOffsets: function (b, c) {
        var d, e, f = a.ui.ddmanager.droppables[b.options.scope] || [], g = c ? c.type : null, h = (b.currentItem || b.element).find(":data(ui-droppable)").addBack();
        a:for (d = 0; d < f.length; d++)if (!(f[d].options.disabled || b && !f[d].accept.call(f[d].element[0], b.currentItem || b.element))) {
            for (e = 0; e < h.length; e++)if (h[e] === f[d].element[0]) {
                f[d].proportions.height = 0;
                continue a
            }
            f[d].visible = "none" !== f[d].element.css("display"), f[d].visible && ("mousedown" === g && f[d]._activate.call(f[d], c), f[d].offset = f[d].element.offset(), f[d].proportions = {width: f[d].element[0].offsetWidth, height: f[d].element[0].offsetHeight})
        }
    }, drop: function (b, c) {
        var d = !1;
        return a.each(a.ui.ddmanager.droppables[b.options.scope] || [], function () {
            this.options && (!this.options.disabled && this.visible && a.ui.intersect(b, this, this.options.tolerance) && (d = this._drop.call(this, c) || d), !this.options.disabled && this.visible && this.accept.call(this.element[0], b.currentItem || b.element) && (this.isout = !0, this.isover = !1, this._deactivate.call(this, c)))
        }), d
    }, dragStart: function (b, c) {
        b.element.parentsUntil("body").bind("scroll.droppable", function () {
            b.options.refreshPositions || a.ui.ddmanager.prepareOffsets(b, c)
        })
    }, drag: function (b, c) {
        b.options.refreshPositions && a.ui.ddmanager.prepareOffsets(b, c), a.each(a.ui.ddmanager.droppables[b.options.scope] || [], function () {
            if (!this.options.disabled && !this.greedyChild && this.visible) {
                var d, e, f, g = a.ui.intersect(b, this, this.options.tolerance), h = !g && this.isover ? "isout" : g && !this.isover ? "isover" : null;
                h && (this.options.greedy && (e = this.options.scope, f = this.element.parents(":data(ui-droppable)").filter(function () {
                    return a.data(this, "ui-droppable").options.scope === e
                }), f.length && (d = a.data(f[0], "ui-droppable"), d.greedyChild = "isover" === h)), d && "isover" === h && (d.isover = !1, d.isout = !0, d._out.call(d, c)), this[h] = !0, this["isout" === h ? "isover" : "isout"] = !1, this["isover" === h ? "_over" : "_out"].call(this, c), d && "isout" === h && (d.isout = !1, d.isover = !0, d._over.call(d, c)))
            }
        })
    }, dragStop: function (b, c) {
        b.element.parentsUntil("body").unbind("scroll.droppable"), b.options.refreshPositions || a.ui.ddmanager.prepareOffsets(b, c)
    }}
}(jQuery), function (a) {
    function b(a) {
        return parseInt(a, 10) || 0
    }

    function c(a) {
        return!isNaN(parseInt(a, 10))
    }

    a.widget("ui.resizable", a.ui.mouse, {version: "1.10.0", widgetEventPrefix: "resize", options: {alsoResize: !1, animate: !1, animateDuration: "slow", animateEasing: "swing", aspectRatio: !1, autoHide: !1, containment: !1, ghost: !1, grid: !1, handles: "e,s,se", helper: !1, maxHeight: null, maxWidth: null, minHeight: 10, minWidth: 10, zIndex: 90, resize: null, start: null, stop: null}, _create: function () {
        var b, c, d, e, f, g = this, h = this.options;
        if (this.element.addClass("ui-resizable"), a.extend(this, {_aspectRatio: !!h.aspectRatio, aspectRatio: h.aspectRatio, originalElement: this.element, _proportionallyResizeElements: [], _helper: h.helper || h.ghost || h.animate ? h.helper || "ui-resizable-helper" : null}), this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i) && (this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position: this.element.css("position"), width: this.element.outerWidth(), height: this.element.outerHeight(), top: this.element.css("top"), left: this.element.css("left")})), this.element = this.element.parent().data("ui-resizable", this.element.data("ui-resizable")), this.elementIsWrapper = !0, this.element.css({marginLeft: this.originalElement.css("marginLeft"), marginTop: this.originalElement.css("marginTop"), marginRight: this.originalElement.css("marginRight"), marginBottom: this.originalElement.css("marginBottom")}), this.originalElement.css({marginLeft: 0, marginTop: 0, marginRight: 0, marginBottom: 0}), this.originalResizeStyle = this.originalElement.css("resize"), this.originalElement.css("resize", "none"), this._proportionallyResizeElements.push(this.originalElement.css({position: "static", zoom: 1, display: "block"})), this.originalElement.css({margin: this.originalElement.css("margin")}), this._proportionallyResize()), this.handles = h.handles || (a(".ui-resizable-handle", this.element).length ? {n: ".ui-resizable-n", e: ".ui-resizable-e", s: ".ui-resizable-s", w: ".ui-resizable-w", se: ".ui-resizable-se", sw: ".ui-resizable-sw", ne: ".ui-resizable-ne", nw: ".ui-resizable-nw"} : "e,s,se"), this.handles.constructor === String)for ("all" === this.handles && (this.handles = "n,e,s,w,se,sw,ne,nw"), b = this.handles.split(","), this.handles = {}, c = 0; c < b.length; c++)d = a.trim(b[c]), f = "ui-resizable-" + d, e = a("<div class='ui-resizable-handle " + f + "'></div>"), e.css({zIndex: h.zIndex}), "se" === d && e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"), this.handles[d] = ".ui-resizable-" + d, this.element.append(e);
        this._renderAxis = function (b) {
            var c, d, e, f;
            b = b || this.element;
            for (c in this.handles)this.handles[c].constructor === String && (this.handles[c] = a(this.handles[c], this.element).show()), this.elementIsWrapper && this.originalElement[0].nodeName.match(/textarea|input|select|button/i) && (d = a(this.handles[c], this.element), f = /sw|ne|nw|se|n|s/.test(c) ? d.outerHeight() : d.outerWidth(), e = ["padding", /ne|nw|n/.test(c) ? "Top" : /se|sw|s/.test(c) ? "Bottom" : /^e$/.test(c) ? "Right" : "Left"].join(""), b.css(e, f), this._proportionallyResize()), a(this.handles[c]).length
        }, this._renderAxis(this.element), this._handles = a(".ui-resizable-handle", this.element).disableSelection(), this._handles.mouseover(function () {
            g.resizing || (this.className && (e = this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)), g.axis = e && e[1] ? e[1] : "se")
        }), h.autoHide && (this._handles.hide(), a(this.element).addClass("ui-resizable-autohide").mouseenter(function () {
            h.disabled || (a(this).removeClass("ui-resizable-autohide"), g._handles.show())
        }).mouseleave(function () {
            h.disabled || g.resizing || (a(this).addClass("ui-resizable-autohide"), g._handles.hide())
        })), this._mouseInit()
    }, _destroy: function () {
        this._mouseDestroy();
        var b, c = function (b) {
            a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()
        };
        return this.elementIsWrapper && (c(this.element), b = this.element, this.originalElement.css({position: b.css("position"), width: b.outerWidth(), height: b.outerHeight(), top: b.css("top"), left: b.css("left")}).insertAfter(b), b.remove()), this.originalElement.css("resize", this.originalResizeStyle), c(this.originalElement), this
    }, _mouseCapture: function (b) {
        var c, d, e = !1;
        for (c in this.handles)d = a(this.handles[c])[0], (d === b.target || a.contains(d, b.target)) && (e = !0);
        return!this.options.disabled && e
    }, _mouseStart: function (c) {
        var d, e, f, g = this.options, h = this.element.position(), i = this.element;
        return this.resizing = !0, /absolute/.test(i.css("position")) ? i.css({position: "absolute", top: i.css("top"), left: i.css("left")}) : i.is(".ui-draggable") && i.css({position: "absolute", top: h.top, left: h.left}), this._renderProxy(), d = b(this.helper.css("left")), e = b(this.helper.css("top")), g.containment && (d += a(g.containment).scrollLeft() || 0, e += a(g.containment).scrollTop() || 0), this.offset = this.helper.offset(), this.position = {left: d, top: e}, this.size = this._helper ? {width: i.outerWidth(), height: i.outerHeight()} : {width: i.width(), height: i.height()}, this.originalSize = this._helper ? {width: i.outerWidth(), height: i.outerHeight()} : {width: i.width(), height: i.height()}, this.originalPosition = {left: d, top: e}, this.sizeDiff = {width: i.outerWidth() - i.width(), height: i.outerHeight() - i.height()}, this.originalMousePosition = {left: c.pageX, top: c.pageY}, this.aspectRatio = "number" == typeof g.aspectRatio ? g.aspectRatio : this.originalSize.width / this.originalSize.height || 1, f = a(".ui-resizable-" + this.axis).css("cursor"), a("body").css("cursor", "auto" === f ? this.axis + "-resize" : f), i.addClass("ui-resizable-resizing"), this._propagate("start", c), !0
    }, _mouseDrag: function (b) {
        var c, d = this.helper, e = {}, f = this.originalMousePosition, g = this.axis, h = this.position.top, i = this.position.left, j = this.size.width, k = this.size.height, l = b.pageX - f.left || 0, m = b.pageY - f.top || 0, n = this._change[g];
        return n ? (c = n.apply(this, [b, l, m]), this._updateVirtualBoundaries(b.shiftKey), (this._aspectRatio || b.shiftKey) && (c = this._updateRatio(c, b)), c = this._respectSize(c, b), this._updateCache(c), this._propagate("resize", b), this.position.top !== h && (e.top = this.position.top + "px"), this.position.left !== i && (e.left = this.position.left + "px"), this.size.width !== j && (e.width = this.size.width + "px"), this.size.height !== k && (e.height = this.size.height + "px"), d.css(e), !this._helper && this._proportionallyResizeElements.length && this._proportionallyResize(), a.isEmptyObject(e) || this._trigger("resize", b, this.ui()), !1) : !1
    }, _mouseStop: function (b) {
        this.resizing = !1;
        var c, d, e, f, g, h, i, j = this.options, k = this;
        return this._helper && (c = this._proportionallyResizeElements, d = c.length && /textarea/i.test(c[0].nodeName), e = d && a.ui.hasScroll(c[0], "left") ? 0 : k.sizeDiff.height, f = d ? 0 : k.sizeDiff.width, g = {width: k.helper.width() - f, height: k.helper.height() - e}, h = parseInt(k.element.css("left"), 10) + (k.position.left - k.originalPosition.left) || null, i = parseInt(k.element.css("top"), 10) + (k.position.top - k.originalPosition.top) || null, j.animate || this.element.css(a.extend(g, {top: i, left: h})), k.helper.height(k.size.height), k.helper.width(k.size.width), this._helper && !j.animate && this._proportionallyResize()), a("body").css("cursor", "auto"), this.element.removeClass("ui-resizable-resizing"), this._propagate("stop", b), this._helper && this.helper.remove(), !1
    }, _updateVirtualBoundaries: function (a) {
        var b, d, e, f, g, h = this.options;
        g = {minWidth: c(h.minWidth) ? h.minWidth : 0, maxWidth: c(h.maxWidth) ? h.maxWidth : 1 / 0, minHeight: c(h.minHeight) ? h.minHeight : 0, maxHeight: c(h.maxHeight) ? h.maxHeight : 1 / 0}, (this._aspectRatio || a) && (b = g.minHeight * this.aspectRatio, e = g.minWidth / this.aspectRatio, d = g.maxHeight * this.aspectRatio, f = g.maxWidth / this.aspectRatio, b > g.minWidth && (g.minWidth = b), e > g.minHeight && (g.minHeight = e), d < g.maxWidth && (g.maxWidth = d), f < g.maxHeight && (g.maxHeight = f)), this._vBoundaries = g
    }, _updateCache: function (a) {
        this.offset = this.helper.offset(), c(a.left) && (this.position.left = a.left), c(a.top) && (this.position.top = a.top), c(a.height) && (this.size.height = a.height), c(a.width) && (this.size.width = a.width)
    }, _updateRatio: function (a) {
        var b = this.position, d = this.size, e = this.axis;
        return c(a.height) ? a.width = a.height * this.aspectRatio : c(a.width) && (a.height = a.width / this.aspectRatio), "sw" === e && (a.left = b.left + (d.width - a.width), a.top = null), "nw" === e && (a.top = b.top + (d.height - a.height), a.left = b.left + (d.width - a.width)), a
    }, _respectSize: function (a) {
        var b = this._vBoundaries, d = this.axis, e = c(a.width) && b.maxWidth && b.maxWidth < a.width, f = c(a.height) && b.maxHeight && b.maxHeight < a.height, g = c(a.width) && b.minWidth && b.minWidth > a.width, h = c(a.height) && b.minHeight && b.minHeight > a.height, i = this.originalPosition.left + this.originalSize.width, j = this.position.top + this.size.height, k = /sw|nw|w/.test(d), l = /nw|ne|n/.test(d);
        return g && (a.width = b.minWidth), h && (a.height = b.minHeight), e && (a.width = b.maxWidth), f && (a.height = b.maxHeight), g && k && (a.left = i - b.minWidth), e && k && (a.left = i - b.maxWidth), h && l && (a.top = j - b.minHeight), f && l && (a.top = j - b.maxHeight), a.width || a.height || a.left || !a.top ? a.width || a.height || a.top || !a.left || (a.left = null) : a.top = null, a
    }, _proportionallyResize: function () {
        if (this._proportionallyResizeElements.length) {
            var a, b, c, d, e, f = this.helper || this.element;
            for (a = 0; a < this._proportionallyResizeElements.length; a++) {
                if (e = this._proportionallyResizeElements[a], !this.borderDif)for (this.borderDif = [], c = [e.css("borderTopWidth"), e.css("borderRightWidth"), e.css("borderBottomWidth"), e.css("borderLeftWidth")], d = [e.css("paddingTop"), e.css("paddingRight"), e.css("paddingBottom"), e.css("paddingLeft")], b = 0; b < c.length; b++)this.borderDif[b] = (parseInt(c[b], 10) || 0) + (parseInt(d[b], 10) || 0);
                e.css({height: f.height() - this.borderDif[0] - this.borderDif[2] || 0, width: f.width() - this.borderDif[1] - this.borderDif[3] || 0})
            }
        }
    }, _renderProxy: function () {
        var b = this.element, c = this.options;
        this.elementOffset = b.offset(), this._helper ? (this.helper = this.helper || a("<div style='overflow:hidden;'></div>"), this.helper.addClass(this._helper).css({width: this.element.outerWidth() - 1, height: this.element.outerHeight() - 1, position: "absolute", left: this.elementOffset.left + "px", top: this.elementOffset.top + "px", zIndex: ++c.zIndex}), this.helper.appendTo("body").disableSelection()) : this.helper = this.element
    }, _change: {e: function (a, b) {
        return{width: this.originalSize.width + b}
    }, w: function (a, b) {
        var c = this.originalSize, d = this.originalPosition;
        return{left: d.left + b, width: c.width - b}
    }, n: function (a, b, c) {
        var d = this.originalSize, e = this.originalPosition;
        return{top: e.top + c, height: d.height - c}
    }, s: function (a, b, c) {
        return{height: this.originalSize.height + c}
    }, se: function (b, c, d) {
        return a.extend(this._change.s.apply(this, arguments), this._change.e.apply(this, [b, c, d]))
    }, sw: function (b, c, d) {
        return a.extend(this._change.s.apply(this, arguments), this._change.w.apply(this, [b, c, d]))
    }, ne: function (b, c, d) {
        return a.extend(this._change.n.apply(this, arguments), this._change.e.apply(this, [b, c, d]))
    }, nw: function (b, c, d) {
        return a.extend(this._change.n.apply(this, arguments), this._change.w.apply(this, [b, c, d]))
    }}, _propagate: function (b, c) {
        a.ui.plugin.call(this, b, [c, this.ui()]), "resize" !== b && this._trigger(b, c, this.ui())
    }, plugins: {}, ui: function () {
        return{originalElement: this.originalElement, element: this.element, helper: this.helper, position: this.position, size: this.size, originalSize: this.originalSize, originalPosition: this.originalPosition}
    }}), a.ui.plugin.add("resizable", "animate", {stop: function (b) {
        var c = a(this).data("ui-resizable"), d = c.options, e = c._proportionallyResizeElements, f = e.length && /textarea/i.test(e[0].nodeName), g = f && a.ui.hasScroll(e[0], "left") ? 0 : c.sizeDiff.height, h = f ? 0 : c.sizeDiff.width, i = {width: c.size.width - h, height: c.size.height - g}, j = parseInt(c.element.css("left"), 10) + (c.position.left - c.originalPosition.left) || null, k = parseInt(c.element.css("top"), 10) + (c.position.top - c.originalPosition.top) || null;
        c.element.animate(a.extend(i, k && j ? {top: k, left: j} : {}), {duration: d.animateDuration, easing: d.animateEasing, step: function () {
            var d = {width: parseInt(c.element.css("width"), 10), height: parseInt(c.element.css("height"), 10), top: parseInt(c.element.css("top"), 10), left: parseInt(c.element.css("left"), 10)};
            e && e.length && a(e[0]).css({width: d.width, height: d.height}), c._updateCache(d), c._propagate("resize", b)
        }})
    }}), a.ui.plugin.add("resizable", "containment", {start: function () {
        var c, d, e, f, g, h, i, j = a(this).data("ui-resizable"), k = j.options, l = j.element, m = k.containment, n = m instanceof a ? m.get(0) : /parent/.test(m) ? l.parent().get(0) : m;
        n && (j.containerElement = a(n), /document/.test(m) || m === document ? (j.containerOffset = {left: 0, top: 0}, j.containerPosition = {left: 0, top: 0}, j.parentData = {element: a(document), left: 0, top: 0, width: a(document).width(), height: a(document).height() || document.body.parentNode.scrollHeight}) : (c = a(n), d = [], a(["Top", "Right", "Left", "Bottom"]).each(function (a, e) {
            d[a] = b(c.css("padding" + e))
        }), j.containerOffset = c.offset(), j.containerPosition = c.position(), j.containerSize = {height: c.innerHeight() - d[3], width: c.innerWidth() - d[1]}, e = j.containerOffset, f = j.containerSize.height, g = j.containerSize.width, h = a.ui.hasScroll(n, "left") ? n.scrollWidth : g, i = a.ui.hasScroll(n) ? n.scrollHeight : f, j.parentData = {element: n, left: e.left, top: e.top, width: h, height: i}))
    }, resize: function (b) {
        var c, d, e, f, g = a(this).data("ui-resizable"), h = g.options, i = g.containerOffset, j = g.position, k = g._aspectRatio || b.shiftKey, l = {top: 0, left: 0}, m = g.containerElement;
        m[0] !== document && /static/.test(m.css("position")) && (l = i), j.left < (g._helper ? i.left : 0) && (g.size.width = g.size.width + (g._helper ? g.position.left - i.left : g.position.left - l.left), k && (g.size.height = g.size.width / g.aspectRatio), g.position.left = h.helper ? i.left : 0), j.top < (g._helper ? i.top : 0) && (g.size.height = g.size.height + (g._helper ? g.position.top - i.top : g.position.top), k && (g.size.width = g.size.height * g.aspectRatio), g.position.top = g._helper ? i.top : 0), g.offset.left = g.parentData.left + g.position.left, g.offset.top = g.parentData.top + g.position.top, c = Math.abs((g._helper ? g.offset.left - l.left : g.offset.left - l.left) + g.sizeDiff.width), d = Math.abs((g._helper ? g.offset.top - l.top : g.offset.top - i.top) + g.sizeDiff.height), e = g.containerElement.get(0) === g.element.parent().get(0), f = /relative|absolute/.test(g.containerElement.css("position")), e && f && (c -= g.parentData.left), c + g.size.width >= g.parentData.width && (g.size.width = g.parentData.width - c, k && (g.size.height = g.size.width / g.aspectRatio)), d + g.size.height >= g.parentData.height && (g.size.height = g.parentData.height - d, k && (g.size.width = g.size.height * g.aspectRatio))
    }, stop: function () {
        var b = a(this).data("ui-resizable"), c = b.options, d = b.containerOffset, e = b.containerPosition, f = b.containerElement, g = a(b.helper), h = g.offset(), i = g.outerWidth() - b.sizeDiff.width, j = g.outerHeight() - b.sizeDiff.height;
        b._helper && !c.animate && /relative/.test(f.css("position")) && a(this).css({left: h.left - e.left - d.left, width: i, height: j}), b._helper && !c.animate && /static/.test(f.css("position")) && a(this).css({left: h.left - e.left - d.left, width: i, height: j})
    }}), a.ui.plugin.add("resizable", "alsoResize", {start: function () {
        var b = a(this).data("ui-resizable"), c = b.options, d = function (b) {
            a(b).each(function () {
                var b = a(this);
                b.data("ui-resizable-alsoresize", {width: parseInt(b.width(), 10), height: parseInt(b.height(), 10), left: parseInt(b.css("left"), 10), top: parseInt(b.css("top"), 10)})
            })
        };
        "object" != typeof c.alsoResize || c.alsoResize.parentNode ? d(c.alsoResize) : c.alsoResize.length ? (c.alsoResize = c.alsoResize[0], d(c.alsoResize)) : a.each(c.alsoResize, function (a) {
            d(a)
        })
    }, resize: function (b, c) {
        var d = a(this).data("ui-resizable"), e = d.options, f = d.originalSize, g = d.originalPosition, h = {height: d.size.height - f.height || 0, width: d.size.width - f.width || 0, top: d.position.top - g.top || 0, left: d.position.left - g.left || 0}, i = function (b, d) {
            a(b).each(function () {
                var b = a(this), e = a(this).data("ui-resizable-alsoresize"), f = {}, g = d && d.length ? d : b.parents(c.originalElement[0]).length ? ["width", "height"] : ["width", "height", "top", "left"];
                a.each(g, function (a, b) {
                    var c = (e[b] || 0) + (h[b] || 0);
                    c && c >= 0 && (f[b] = c || null)
                }), b.css(f)
            })
        };
        "object" != typeof e.alsoResize || e.alsoResize.nodeType ? i(e.alsoResize) : a.each(e.alsoResize, function (a, b) {
            i(a, b)
        })
    }, stop: function () {
        a(this).removeData("resizable-alsoresize")
    }}), a.ui.plugin.add("resizable", "ghost", {start: function () {
        var b = a(this).data("ui-resizable"), c = b.options, d = b.size;
        b.ghost = b.originalElement.clone(), b.ghost.css({opacity: .25, display: "block", position: "relative", height: d.height, width: d.width, margin: 0, left: 0, top: 0}).addClass("ui-resizable-ghost").addClass("string" == typeof c.ghost ? c.ghost : ""), b.ghost.appendTo(b.helper)
    }, resize: function () {
        var b = a(this).data("ui-resizable");
        b.ghost && b.ghost.css({position: "relative", height: b.size.height, width: b.size.width})
    }, stop: function () {
        var b = a(this).data("ui-resizable");
        b.ghost && b.helper && b.helper.get(0).removeChild(b.ghost.get(0))
    }}), a.ui.plugin.add("resizable", "grid", {resize: function () {
        var b = a(this).data("ui-resizable"), c = b.options, d = b.size, e = b.originalSize, f = b.originalPosition, g = b.axis, h = "number" == typeof c.grid ? [c.grid, c.grid] : c.grid, i = h[0] || 1, j = h[1] || 1, k = Math.round((d.width - e.width) / i) * i, l = Math.round((d.height - e.height) / j) * j, m = e.width + k, n = e.height + l, o = c.maxWidth && c.maxWidth < m, p = c.maxHeight && c.maxHeight < n, q = c.minWidth && c.minWidth > m, r = c.minHeight && c.minHeight > n;
        c.grid = h, q && (m += i), r && (n += j), o && (m -= i), p && (n -= j), /^(se|s|e)$/.test(g) ? (b.size.width = m, b.size.height = n) : /^(ne)$/.test(g) ? (b.size.width = m, b.size.height = n, b.position.top = f.top - l) : /^(sw)$/.test(g) ? (b.size.width = m, b.size.height = n, b.position.left = f.left - k) : (b.size.width = m, b.size.height = n, b.position.top = f.top - l, b.position.left = f.left - k)
    }})
}(jQuery), function () {
    for (var a = 0, b = ["ms", "moz", "webkit", "o"], c = 0; c < b.length && !window.requestAnimationFrame; ++c)window.requestAnimationFrame = window[b[c] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[b[c] + "CancelAnimationFrame"] || window[b[c] + "CancelRequestAnimationFrame"];
    window.requestAnimationFrame || (window.requestAnimationFrame = function (b) {
        var c = (new Date).getTime(), d = Math.max(0, 16 - (c - a)), e = window.setTimeout(function () {
            b(c + d)
        }, d);
        return a = c + d, e
    }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function (a) {
        clearTimeout(a)
    })
}(), function (a, b, c) {
    function d(a) {
        return a.match(/\D+$/)
    }

    function e(a, b, c, d) {
        if ("d" != c && m(a)) {
            var e = s.exec(b), f = "auto" === a.css(c) ? 0 : a.css(c), g = "string" == typeof f ? l(f) : f, h = ("string" == typeof b ? l(b) : b, d === !0 ? 0 : g), i = a.is(":hidden"), j = a.translation();
            if ("left" == c && (h = parseInt(g, 10) + j.x), "right" == c && (h = parseInt(g, 10) + j.x), "top" == c && (h = parseInt(g, 10) + j.y), "bottom" == c && (h = parseInt(g, 10) + j.y), e || "show" != b ? e || "hide" != b || (h = 0) : (h = 1, i && a.css({display: k(a.context.tagName), opacity: 0})), e) {
                var n = parseFloat(e[2]);
                return e[1] && (n = ("-=" === e[1] ? -1 : 1) * n + parseInt(h, 10)), "%" == e[3] && (n += "%"), n
            }
            return h
        }
    }

    function f(a, b, c) {
        return c === !0 || G === !0 && c !== !1 && F ? "translate3d(" + a + "px, " + b + "px, 0)" : "translate(" + a + "px," + b + "px)"
    }

    function g(b, c, d, e, f, g, i, k) {
        var m = b.data(w), n = m && !j(m) ? m : a.extend(!0, {}, u), o = f, q = a.inArray(c, p) > -1;
        if (q) {
            var r = n.meta, s = l(b.css(c)) || 0, t = c + "_o";
            o = f - s, r[c] = o, r[t] = "auto" == b.css(c) ? 0 + o : s + o || 0, n.meta = r, i && 0 === o && (o = 0 - r[t], r[c] = o, r[t] = 0)
        }
        return b.data(w, h(b, n, c, d, e, o, g, i, k))
    }

    function h(a, b, c, d, e, g, h, i, j) {
        var k = !1, l = h === !0 && i === !0;
        b = b || {}, b.original || (b.original = {}, k = !0), b.properties = b.properties || {}, b.secondary = b.secondary || {};
        for (var m = b.meta, n = b.original, o = b.properties, p = b.secondary, r = q.length - 1; r >= 0; r--) {
            var s = q[r] + "transition-property", t = q[r] + "transition-duration", u = q[r] + "transition-timing-function";
            c = l ? q[r] + "transform" : c, k && (n[s] = a.css(s) || "", n[t] = a.css(t) || "", n[u] = a.css(u) || ""), p[c] = l ? f(m.left, m.top, j) : g, o[s] = (o[s] ? o[s] + "," : "") + c, o[t] = (o[t] ? o[t] + "," : "") + d + "ms", o[u] = (o[u] ? o[u] + "," : "") + e
        }
        return b
    }

    function i(a) {
        for (var b in a)if (!("width" != b && "height" != b || "show" != a[b] && "hide" != a[b] && "toggle" != a[b]))return!0;
        return!1
    }

    function j(a) {
        for (var b in a)return!1;
        return!0
    }

    function k(a) {
        a = a.toUpperCase();
        var b = {LI: "list-item", TR: "table-row", TD: "table-cell", TH: "table-cell", CAPTION: "table-caption", COL: "table-column", COLGROUP: "table-column-group", TFOOT: "table-footer-group", THEAD: "table-header-group", TBODY: "table-row-group"};
        return"string" == typeof b[a] ? b[a] : "block"
    }

    function l(a) {
        return parseFloat(a.replace(d(a), ""))
    }

    function m(a) {
        var b = !0;
        return a.each(function (a, c) {
            return b = b && c.ownerDocument
        }), b
    }

    function n(b, c, d) {
        if (!m(d))return!1;
        var e = a.inArray(b, o) > -1;
        return"width" != b && "height" != b && "opacity" != b || parseFloat(c) !== parseFloat(d.css(b)) || (e = !1), e
    }

    var o = ["top", "right", "bottom", "left", "opacity", "height", "width"], p = ["top", "right", "bottom", "left"], q = ["-webkit-", "-moz-", "-o-", ""], r = ["avoidTransforms", "useTranslate3d", "leaveTransforms"], s = /^([+-]=)?([\d+-.]+)(.*)$/, t = /([A-Z])/g, u = {secondary: {}, meta: {top: 0, right: 0, bottom: 0, left: 0}}, v = "px", w = "jQe", x = "cubic-bezier(", y = ")", z = null, A = !1, B = document.body || document.documentElement, C = B.style, D = "webkitTransitionEnd oTransitionEnd transitionend", E = void 0 !== C.WebkitTransition || void 0 !== C.MozTransition || void 0 !== C.OTransition || void 0 !== C.transition, F = "WebKitCSSMatrix"in window && "m11"in new WebKitCSSMatrix, G = F;
    a.expr && a.expr.filters && (z = a.expr.filters.animated, a.expr.filters.animated = function (b) {
        return a(b).data("events") && a(b).data("events")[D] ? !0 : z.call(this, b)
    }), a.extend({toggle3DByDefault: function () {
        return G = !G
    }, toggleDisabledByDefault: function () {
        return A = !A
    }, setDisabledByDefault: function (a) {
        return A = a
    }}), a.fn.translation = function () {
        if (!this[0])return null;
        var a = this[0], b = window.getComputedStyle(a, null), c = {x: 0, y: 0};
        if (b)for (var d = q.length - 1; d >= 0; d--) {
            var e = b.getPropertyValue(q[d] + "transform");
            if (e && /matrix/i.test(e)) {
                var f = e.replace(/^matrix\(/i, "").split(/, |\)$/g);
                c = {x: parseInt(f[4], 10), y: parseInt(f[5], 10)};
                break
            }
        }
        return c
    }, a.fn.animate = function (c, d, f, h) {
        c = c || {};
        var k = !("undefined" != typeof c.bottom || "undefined" != typeof c.right), l = a.speed(d, f, h), m = 0, o = function () {
            m--, 0 === m && "function" == typeof l.complete && l.complete.apply(this, arguments)
        }, s = "undefined" != typeof c.avoidCSSTransitions ? c.avoidCSSTransitions : A;
        return s === !0 || !E || j(c) || i(c) || l.duration <= 0 || l.step ? b.apply(this, arguments) : this[l.queue === !0 ? "queue" : "each"](function () {
            var d = a(this), f = a.extend({}, l), h = function (b) {
                var e = d.data(w) || {original: {}}, f = {};
                if (2 == b.eventPhase) {
                    if (c.leaveTransforms !== !0) {
                        for (var g = q.length - 1; g >= 0; g--)f[q[g] + "transform"] = "";
                        if (k && "undefined" != typeof e.meta)for (var h, i = 0; h = p[i]; ++i)f[h] = e.meta[h + "_o"] + v, a(this).css(h, f[h])
                    }
                    d.unbind(D).css(e.original).css(f).data(w, null), "hide" === c.opacity && d.css({display: "none", opacity: ""}), o.call(this)
                }
            }, i = {bounce: x + "0.0, 0.35, .5, 1.3" + y, linear: "linear", swing: "ease-in-out", easeInQuad: x + "0.550, 0.085, 0.680, 0.530" + y, easeInCubic: x + "0.550, 0.055, 0.675, 0.190" + y, easeInQuart: x + "0.895, 0.030, 0.685, 0.220" + y, easeInQuint: x + "0.755, 0.050, 0.855, 0.060" + y, easeInSine: x + "0.470, 0.000, 0.745, 0.715" + y, easeInExpo: x + "0.950, 0.050, 0.795, 0.035" + y, easeInCirc: x + "0.600, 0.040, 0.980, 0.335" + y, easeInBack: x + "0.600, -0.280, 0.735, 0.045" + y, easeOutQuad: x + "0.250, 0.460, 0.450, 0.940" + y, easeOutCubic: x + "0.215, 0.610, 0.355, 1.000" + y, easeOutQuart: x + "0.165, 0.840, 0.440, 1.000" + y, easeOutQuint: x + "0.230, 1.000, 0.320, 1.000" + y, easeOutSine: x + "0.390, 0.575, 0.565, 1.000" + y, easeOutExpo: x + "0.190, 1.000, 0.220, 1.000" + y, easeOutCirc: x + "0.075, 0.820, 0.165, 1.000" + y, easeOutBack: x + "0.175, 0.885, 0.320, 1.275" + y, easeInOutQuad: x + "0.455, 0.030, 0.515, 0.955" + y, easeInOutCubic: x + "0.645, 0.045, 0.355, 1.000" + y, easeInOutQuart: x + "0.770, 0.000, 0.175, 1.000" + y, easeInOutQuint: x + "0.860, 0.000, 0.070, 1.000" + y, easeInOutSine: x + "0.445, 0.050, 0.550, 0.950" + y, easeInOutExpo: x + "1.000, 0.000, 0.000, 1.000" + y, easeInOutCirc: x + "0.785, 0.135, 0.150, 0.860" + y, easeInOutBack: x + "0.680, -0.550, 0.265, 1.550" + y}, s = {}, t = i[f.easing || "swing"] ? i[f.easing || "swing"] : f.easing || "swing";
            for (var u in c)if (-1 === a.inArray(u, r)) {
                var z = a.inArray(u, p) > -1, A = e(d, c[u], u, z && c.avoidTransforms !== !0);
                n(u, A, d) ? g(d, u, f.duration, t, A, z && c.avoidTransforms !== !0, k, c.useTranslate3d) : s[u] = c[u]
            }
            d.unbind(D);
            var B = d.data(w);
            if (!B || j(B) || j(B.secondary))f.queue = !1; else {
                m++, d.css(B.properties);
                var C = B.secondary;
                setTimeout(function () {
                    d.bind(D, h).css(C)
                })
            }
            return j(s) || (m++, b.apply(d, [s, {duration: f.duration, easing: a.easing[f.easing] ? f.easing : a.easing.swing ? "swing" : "linear", complete: o, queue: f.queue}])), !0
        })
    }, a.fn.animate.defaults = {}, a.fn.stop = function (b, d, e) {
        return E ? (b && this.queue([]), this.each(function () {
            var f = a(this), g = f.data(w);
            if (g && !j(g)) {
                var h, i = {};
                if (d) {
                    if (i = g.secondary, !e && void 0 !== typeof g.meta.left_o || void 0 !== typeof g.meta.top_o)for (i.left = void 0 !== typeof g.meta.left_o ? g.meta.left_o : "auto", i.top = void 0 !== typeof g.meta.top_o ? g.meta.top_o : "auto", h = q.length - 1; h >= 0; h--)i[q[h] + "transform"] = ""
                } else if (!j(g.secondary)) {
                    var k = window.getComputedStyle(f[0], null);
                    if (k)for (var l in g.secondary)if (g.secondary.hasOwnProperty(l) && (l = l.replace(t, "-$1").toLowerCase(), i[l] = k.getPropertyValue(l), !e && /matrix/i.test(i[l]))) {
                        var m = i[l].replace(/^matrix\(/i, "").split(/, |\)$/g);
                        for (i.left = parseFloat(m[4]) + parseFloat(f.css("left")) + v || "auto", i.top = parseFloat(m[5]) + parseFloat(f.css("top")) + v || "auto", h = q.length - 1; h >= 0; h--)i[q[h] + "transform"] = ""
                    }
                }
                f.unbind(D), f.css(g.original).css(i).data(w, null)
            } else c.apply(f, [b, d])
        }), this) : c.apply(this, [b, d])
    }
}(jQuery, jQuery.fn.animate, jQuery.fn.stop), function () {
    function a() {
        var a = !1;
        if ("localStorage"in window)try {
            window.localStorage.setItem("_tmptest", "tmpval"), a = !0, window.localStorage.removeItem("_tmptest")
        } catch (c) {
        }
        if (a)try {
            window.localStorage && (w = window.localStorage, z = "localStorage", C = w.jStorage_update)
        } catch (f) {
        } else if ("globalStorage"in window)try {
            window.globalStorage && (w = window.globalStorage[window.location.hostname], z = "globalStorage", C = w.jStorage_update)
        } catch (g) {
        } else {
            if (x = document.createElement("link"), !x.addBehavior)return void(x = null);
            x.style.behavior = "url(#default#userData)", document.getElementsByTagName("head")[0].appendChild(x);
            try {
                x.load("jStorage")
            } catch (h) {
                x.setAttribute("jStorage", "{}"), x.save("jStorage"), x.load("jStorage")
            }
            var j = "{}";
            try {
                j = x.getAttribute("jStorage")
            } catch (k) {
            }
            try {
                C = x.getAttribute("jStorage_update")
            } catch (n) {
            }
            w.jStorage = j, z = "userDataBehavior"
        }
        i(), l(), b("local"), b("session"), d(), m(), "addEventListener"in window && window.addEventListener("pageshow", function (a) {
            a.persisted && e()
        }, !1)
    }

    function b(a, c) {
        function d() {
            if ("session" == a)try {
                j = t.parse(window.name || "{}")
            } catch (b) {
                j = {}
            }
        }

        function e() {
            "session" == a && (window.name = t.stringify(j))
        }

        {
            var f, g, h = !1, i = 0, j = {};
            Math.random()
        }
        if (c || "undefined" == typeof window[a + "Storage"]) {
            if ("local" == a && window.globalStorage)return void(localStorage = window.globalStorage[window.location.hostname]);
            if ("userDataBehavior" == z) {
                c && window[a + "Storage"] && window[a + "Storage"].parentNode && window[a + "Storage"].parentNode.removeChild(window[a + "Storage"]), g = document.createElement("button"), document.getElementsByTagName("head")[0].appendChild(g), "local" == a ? j = v : "session" == a && d();
                for (f in j)j.hasOwnProperty(f) && "__jstorage_meta" != f && "length" != f && "undefined" != typeof j[f] && (f in g || i++, g[f] = j[f]);
                g.length = i, g.key = function (a) {
                    var b, c = 0;
                    d();
                    for (b in j)if (j.hasOwnProperty(b) && "__jstorage_meta" != b && "length" != b && "undefined" != typeof j[b]) {
                        if (c == a)return b;
                        c++
                    }
                }, g.getItem = function (b) {
                    return d(), "session" == a ? j[b] : s.jStorage.get(b)
                }, g.setItem = function (a, b) {
                    "undefined" != typeof b && (g[a] = (b || "").toString())
                }, g.removeItem = function (b) {
                    return"local" == a ? s.jStorage.deleteKey(b) : (g[b] = void 0, h = !0, b in g && g.removeAttribute(b), void(h = !1))
                }, g.clear = function () {
                    return"session" == a ? (window.name = "", void b("session", !0)) : void s.jStorage.flush()
                }, "local" == a && (G = function (a, b) {
                    "length" != a && (h = !0, "undefined" == typeof b ? a in g && (i--, g.removeAttribute(a)) : (a in g || i++, g[a] = (b || "").toString()), g.length = i, h = !1)
                }), g.attachEvent("onpropertychange", function (b) {
                    if ("length" != b.propertyName && !h && "length" != b.propertyName) {
                        if ("local" == a)b.propertyName in j || "undefined" == typeof g[b.propertyName] || i++; else if ("session" == a)return d(), "undefined" == typeof g[b.propertyName] || b.propertyName in j ? "undefined" == typeof g[b.propertyName] && b.propertyName in j ? (delete j[b.propertyName], i--) : j[b.propertyName] = g[b.propertyName] : (j[b.propertyName] = g[b.propertyName], i++), e(), void(g.length = i);
                        s.jStorage.set(b.propertyName, g[b.propertyName]), g.length = i
                    }
                }), window[a + "Storage"] = g
            }
        }
    }

    function c() {
        var a = "{}";
        if ("userDataBehavior" == z) {
            x.load("jStorage");
            try {
                a = x.getAttribute("jStorage")
            } catch (b) {
            }
            try {
                C = x.getAttribute("jStorage_update")
            } catch (c) {
            }
            w.jStorage = a
        }
        i(), l(), m()
    }

    function d() {
        "localStorage" == z || "globalStorage" == z ? "addEventListener"in window ? window.addEventListener("storage", e, !1) : document.attachEvent("onstorage", e) : "userDataBehavior" == z && setInterval(e, 1e3)
    }

    function e() {
        var a;
        clearTimeout(B), B = setTimeout(function () {
            if ("localStorage" == z || "globalStorage" == z)a = w.jStorage_update; else if ("userDataBehavior" == z) {
                x.load("jStorage");
                try {
                    a = x.getAttribute("jStorage_update")
                } catch (b) {
                }
            }
            a && a != C && (C = a, f())
        }, 25)
    }

    function f() {
        var a, b = t.parse(t.stringify(v.__jstorage_meta.CRC32));
        c(), a = t.parse(t.stringify(v.__jstorage_meta.CRC32));
        var d, e = [], f = [];
        for (d in b)if (b.hasOwnProperty(d)) {
            if (!a[d]) {
                f.push(d);
                continue
            }
            b[d] != a[d] && "2." == String(b[d]).substr(0, 2) && e.push(d)
        }
        for (d in a)a.hasOwnProperty(d) && (b[d] || e.push(d));
        g(e, "updated"), g(f, "deleted")
    }

    function g(a, b) {
        if (a = [].concat(a || []), "flushed" == b) {
            a = [];
            for (var c in A)A.hasOwnProperty(c) && a.push(c);
            b = "deleted"
        }
        for (var d = 0, e = a.length; e > d; d++)if (A[a[d]])for (var f = 0, g = A[a[d]].length; g > f; f++)A[a[d]][f](a[d], b)
    }

    function h() {
        var a = (+new Date).toString();
        "localStorage" == z || "globalStorage" == z ? w.jStorage_update = a : "userDataBehavior" == z && (x.setAttribute("jStorage_update", a), x.save("jStorage")), e()
    }

    function i() {
        if (w.jStorage)try {
            v = t.parse(String(w.jStorage))
        } catch (a) {
            w.jStorage = "{}"
        } else w.jStorage = "{}";
        y = w.jStorage ? String(w.jStorage).length : 0, v.__jstorage_meta || (v.__jstorage_meta = {}), v.__jstorage_meta.CRC32 || (v.__jstorage_meta.CRC32 = {})
    }

    function j() {
        o();
        try {
            w.jStorage = t.stringify(v), x && (x.setAttribute("jStorage", w.jStorage), x.save("jStorage")), y = w.jStorage ? String(w.jStorage).length : 0
        } catch (a) {
        }
    }

    function k(a) {
        if (!a || "string" != typeof a && "number" != typeof a)throw new TypeError("Key name must be string or numeric");
        if ("__jstorage_meta" == a)throw new TypeError("Reserved key name");
        return!0
    }

    function l() {
        var a, b, c, d, e = 1 / 0, f = !1, i = [];
        if (clearTimeout(u), v.__jstorage_meta && "object" == typeof v.__jstorage_meta.TTL) {
            a = +new Date, c = v.__jstorage_meta.TTL, d = v.__jstorage_meta.CRC32;
            for (b in c)c.hasOwnProperty(b) && (c[b] <= a ? (delete c[b], delete d[b], delete v[b], f = !0, i.push(b)) : c[b] < e && (e = c[b]));
            1 / 0 != e && (u = setTimeout(l, e - a)), f && (j(), h(), g(i, "deleted"))
        }
    }

    function m() {
        if (v.__jstorage_meta.PubSub) {
            for (var a, b = E, c = len = v.__jstorage_meta.PubSub.length - 1; c >= 0; c--)a = v.__jstorage_meta.PubSub[c], a[0] > E && (b = a[0], n(a[1], a[2]));
            E = b
        }
    }

    function n(a, b) {
        if (D[a])for (var c = 0, d = D[a].length; d > c; c++)D[a][c](a, t.parse(t.stringify(b)))
    }

    function o() {
        if (v.__jstorage_meta.PubSub) {
            for (var a = +new Date - 2e3, b = 0, c = v.__jstorage_meta.PubSub.length; c > b; b++)if (v.__jstorage_meta.PubSub[b][0] <= a) {
                v.__jstorage_meta.PubSub.splice(b, v.__jstorage_meta.PubSub.length - b);
                break
            }
            v.__jstorage_meta.PubSub.length || delete v.__jstorage_meta.PubSub
        }
    }

    function p(a, b) {
        v.__jstorage_meta || (v.__jstorage_meta = {}), v.__jstorage_meta.PubSub || (v.__jstorage_meta.PubSub = []), v.__jstorage_meta.PubSub.unshift([+new Date, a, b]), j(), h()
    }

    function q(a, b) {
        for (var c, d = a.length, e = b ^ d, f = 0; d >= 4;)c = 255 & a.charCodeAt(f) | (255 & a.charCodeAt(++f)) << 8 | (255 & a.charCodeAt(++f)) << 16 | (255 & a.charCodeAt(++f)) << 24, c = 1540483477 * (65535 & c) + ((1540483477 * (c >>> 16) & 65535) << 16), c ^= c >>> 24, c = 1540483477 * (65535 & c) + ((1540483477 * (c >>> 16) & 65535) << 16), e = 1540483477 * (65535 & e) + ((1540483477 * (e >>> 16) & 65535) << 16) ^ c, d -= 4, ++f;
        switch (d) {
            case 3:
                e ^= (255 & a.charCodeAt(f + 2)) << 16;
            case 2:
                e ^= (255 & a.charCodeAt(f + 1)) << 8;
            case 1:
                e ^= 255 & a.charCodeAt(f), e = 1540483477 * (65535 & e) + ((1540483477 * (e >>> 16) & 65535) << 16)
        }
        return e ^= e >>> 13, e = 1540483477 * (65535 & e) + ((1540483477 * (e >>> 16) & 65535) << 16), e ^= e >>> 15, e >>> 0
    }

    var r = "0.3.2", s = window.jQuery || window.$ || (window.$ = {}), t = {parse: window.JSON && (window.JSON.parse || window.JSON.decode) || String.prototype.evalJSON && function (a) {
        return String(a).evalJSON()
    } || s.parseJSON || s.evalJSON, stringify: Object.toJSON || window.JSON && (window.JSON.stringify || window.JSON.encode) || s.toJSON};
    if (!t.parse || !t.stringify)throw new Error("No JSON support found, include //cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js to page");
    var u, v = {__jstorage_meta: {CRC32: {}}}, w = {jStorage: "{}"}, x = null, y = 0, z = !1, A = {}, B = !1, C = 0, D = {}, E = +new Date, F = {isXML: function (a) {
        var b = (a ? a.ownerDocument || a : 0).documentElement;
        return b ? "HTML" !== b.nodeName : !1
    }, encode: function (a) {
        if (!this.isXML(a))return!1;
        try {
            return(new XMLSerializer).serializeToString(a)
        } catch (b) {
            try {
                return a.xml
            } catch (c) {
            }
        }
        return!1
    }, decode: function (a) {
        var b, c = "DOMParser"in window && (new DOMParser).parseFromString || window.ActiveXObject && function (a) {
            var b = new ActiveXObject("Microsoft.XMLDOM");
            return b.async = "false", b.loadXML(a), b
        };
        return c ? (b = c.call("DOMParser"in window && new DOMParser || window, a, "text/xml"), this.isXML(b) ? b : !1) : !1
    }}, G = function () {
    };
    s.jStorage = {version: r, set: function (a, b, c) {
        if (k(a), c = c || {}, "undefined" == typeof b)return this.deleteKey(a), b;
        if (F.isXML(b))b = {_is_xml: !0, xml: F.encode(b)}; else {
            if ("function" == typeof b)return void 0;
            b && "object" == typeof b && (b = t.parse(t.stringify(b)))
        }
        return v[a] = b, v.__jstorage_meta.CRC32[a] = "2." + q(t.stringify(b)), this.setTTL(a, c.TTL || 0), G(a, b), g(a, "updated"), b
    }, get: function (a, b) {
        return k(a), a in v ? v[a] && "object" == typeof v[a] && v[a]._is_xml ? F.decode(v[a].xml) : v[a] : "undefined" == typeof b ? null : b
    }, deleteKey: function (a) {
        return k(a), a in v ? (delete v[a], "object" == typeof v.__jstorage_meta.TTL && a in v.__jstorage_meta.TTL && delete v.__jstorage_meta.TTL[a], delete v.__jstorage_meta.CRC32[a], G(a, void 0), j(), h(), g(a, "deleted"), !0) : !1
    }, setTTL: function (a, b) {
        var c = +new Date;
        return k(a), b = Number(b) || 0, a in v ? (v.__jstorage_meta.TTL || (v.__jstorage_meta.TTL = {}), b > 0 ? v.__jstorage_meta.TTL[a] = c + b : delete v.__jstorage_meta.TTL[a], j(), l(), h(), !0) : !1
    }, getTTL: function (a) {
        var b, c = +new Date;
        return k(a), a in v && v.__jstorage_meta.TTL && v.__jstorage_meta.TTL[a] ? (b = v.__jstorage_meta.TTL[a] - c, b || 0) : 0
    }, flush: function () {
        return v = {__jstorage_meta: {CRC32: {}}}, b("local", !0), j(), h(), g(null, "flushed"), !0
    }, storageObj: function () {
        function a() {
        }

        return a.prototype = v, new a
    }, index: function () {
        var a, b = [];
        for (a in v)v.hasOwnProperty(a) && "__jstorage_meta" != a && b.push(a);
        return b
    }, storageSize: function () {
        return y
    }, currentBackend: function () {
        return z
    }, storageAvailable: function () {
        return!!z
    }, listenKeyChange: function (a, b) {
        k(a), A[a] || (A[a] = []), A[a].push(b)
    }, stopListening: function (a, b) {
        if (k(a), A[a]) {
            if (!b)return void delete A[a];
            for (var c = A[a].length - 1; c >= 0; c--)A[a][c] == b && A[a].splice(c, 1)
        }
    }, subscribe: function (a, b) {
        if (a = (a || "").toString(), !a)throw new TypeError("Channel not defined");
        D[a] || (D[a] = []), D[a].push(b)
    }, publish: function (a, b) {
        if (a = (a || "").toString(), !a)throw new TypeError("Channel not defined");
        p(a, b)
    }, reInit: function () {
        c()
    }}, a()
}();
var XD = function () {
    "use strict";
    var a, b, c, d = 1, e = this;
    return{postMessage: function (a, b, c) {
        b && (c = c || parent, e.postMessage ? c.postMessage(a, b.replace(/([^:]+:\/\/[^\/]+).*/, "$1")) : b && (c.location = b.replace(/#.*$/, "") + "#" + +new Date + d++ + "&" + a))
    }, receiveMessage: function (d, f) {
        e && e.postMessage ? (d && (c = function (a) {
            return"file:" === e.location.protocol && d(a), "string" == typeof f && a.origin !== f || "[object Function]" === Object.prototype.toString.call(f) && f(a.origin) === !1 ? !1 : void d(a)
        }), e.addEventListener ? e[d ? "addEventListener" : "removeEventListener"]("message", c, !1) : e[d ? "attachEvent" : "detachEvent"]("onmessage", c)) : (a && clearInterval(a), a = null, d && (a = setInterval(function () {
            var a = document.location.hash, c = /^#?\d+&/;
            a !== b && c.test(a) && (b = a, d({data: a.replace(c, "")}))
        }, 100)))
    }}
}();
!function (a) {
    function b(a, b) {
        if (!(a.originalEvent.touches.length > 1)) {
            a.preventDefault();
            var c = a.originalEvent.changedTouches[0], d = document.createEvent("MouseEvents");
            d.initMouseEvent(b, !0, !0, window, 1, c.screenX, c.screenY, c.clientX, c.clientY, !1, !1, !1, !1, 0, null), a.target.dispatchEvent(d)
        }
    }

    if (a.support.touch = "ontouchend"in document, a.support.touch) {
        var c, d = a.ui.mouse.prototype, e = d._mouseInit;
        d._touchStart = function (a) {
            var d = this;
            !c && d._mouseCapture(a.originalEvent.changedTouches[0]) && (c = !0, d._touchMoved = !1, b(a, "mouseover"), b(a, "mousemove"), b(a, "mousedown"))
        }, d._touchMove = function (a) {
            c && (this._touchMoved = !0, b(a, "mousemove"))
        }, d._touchEnd = function (a) {
            c && (b(a, "mouseup"), b(a, "mouseout"), this._touchMoved || b(a, "click"), c = !1)
        }, d._mouseInit = function () {
            var b = this;
            b.element.bind("touchstart", a.proxy(b, "_touchStart")).bind("touchmove", a.proxy(b, "_touchMove")).bind("touchend", a.proxy(b, "_touchEnd")), e.call(b)
        }
    }
}(jQuery), function (a) {
    "function" == typeof define && define.amd && define.amd.jQuery ? define(["jquery"], a) : a(jQuery)
}(function (a) {
    "use strict";
    function b(b) {
        return!b || void 0 !== b.allowPageScroll || void 0 === b.swipe && void 0 === b.swipeStatus || (b.allowPageScroll = j), void 0 !== b.click && void 0 === b.tap && (b.tap = b.click), b || (b = {}), b = a.extend({}, a.fn.swipe.defaults, b), this.each(function () {
            var d = a(this), e = d.data(z);
            e || (e = new c(this, b), d.data(z, e))
        })
    }

    function c(b, c) {
        function A(b) {
            if (!(hb() || a(b.target).closest(c.excludedElements, Qb).length > 0)) {
                var d, e = b.originalEvent ? b.originalEvent : b, f = y ? e.touches[0] : e;
                return Rb = u, y ? Sb = e.touches.length : b.preventDefault(), Hb = 0, Ib = null, Ob = null, Jb = 0, Kb = 0, Lb = 0, Mb = 1, Nb = 0, Tb = mb(), Pb = pb(), fb(), !y || Sb === c.fingers || c.fingers === s || P() ? (jb(0, f), Ub = yb(), 2 == Sb && (jb(1, e.touches[1]), Kb = Lb = sb(Tb[0].start, Tb[1].start)), (c.swipeStatus || c.pinchStatus) && (d = H(e, Rb))) : d = !1, d === !1 ? (Rb = x, H(e, Rb), d) : (ib(!0), null)
            }
        }

        function B(a) {
            var b = a.originalEvent ? a.originalEvent : a;
            if (Rb !== w && Rb !== x && !gb()) {
                var d, e = y ? b.touches[0] : b, f = kb(e);
                if (Vb = yb(), y && (Sb = b.touches.length), Rb = v, 2 == Sb && (0 == Kb ? (jb(1, b.touches[1]), Kb = Lb = sb(Tb[0].start, Tb[1].start)) : (kb(b.touches[1]), Lb = sb(Tb[0].end, Tb[1].end), Ob = ub(Tb[0].end, Tb[1].end)), Mb = tb(Kb, Lb), Nb = Math.abs(Kb - Lb)), Sb === c.fingers || c.fingers === s || !y || P()) {
                    if (Ib = xb(f.start, f.end), N(a, Ib), Hb = vb(f.start, f.end), Jb = rb(), nb(Ib, Hb), (c.swipeStatus || c.pinchStatus) && (d = H(b, Rb)), !c.triggerOnTouchEnd || c.triggerOnTouchLeave) {
                        var g = !0;
                        if (c.triggerOnTouchLeave) {
                            var h = zb(this);
                            g = Ab(f.end, h)
                        }
                        !c.triggerOnTouchEnd && g ? Rb = G(v) : c.triggerOnTouchLeave && !g && (Rb = G(w)), (Rb == x || Rb == w) && H(b, Rb)
                    }
                } else Rb = x, H(b, Rb);
                d === !1 && (Rb = x, H(b, Rb))
            }
        }

        function C(a) {
            var b = a.originalEvent;
            return y && b.touches.length > 0 ? (eb(), !0) : (gb() && (Sb = Xb), a.preventDefault(), Vb = yb(), Jb = rb(), K() ? (Rb = x, H(b, Rb)) : c.triggerOnTouchEnd || 0 == c.triggerOnTouchEnd && Rb === v ? (Rb = w, H(b, Rb)) : !c.triggerOnTouchEnd && W() ? (Rb = w, I(b, Rb, n)) : Rb === v && (Rb = x, H(b, Rb)), ib(!1), null)
        }

        function D() {
            Sb = 0, Vb = 0, Ub = 0, Kb = 0, Lb = 0, Mb = 1, fb(), ib(!1)
        }

        function E(a) {
            var b = a.originalEvent;
            c.triggerOnTouchLeave && (Rb = G(w), H(b, Rb))
        }

        function F() {
            Qb.unbind(Cb, A), Qb.unbind(Gb, D), Qb.unbind(Db, B), Qb.unbind(Eb, C), Fb && Qb.unbind(Fb, E), ib(!1)
        }

        function G(a) {
            var b = a, d = M(), e = J(), f = K();
            return!d || f ? b = x : !e || a != v || c.triggerOnTouchEnd && !c.triggerOnTouchLeave ? !e && a == w && c.triggerOnTouchLeave && (b = x) : b = w, b
        }

        function H(a, b) {
            var c = void 0;
            return T() || S() ? c = I(a, b, l) : (Q() || P()) && c !== !1 && (c = I(a, b, m)), cb() && c !== !1 ? c = I(a, b, o) : db() && c !== !1 ? c = I(a, b, p) : bb() && c !== !1 && (c = I(a, b, n)), b === x && D(a), b === w && (y ? 0 == a.touches.length && D(a) : D(a)), c
        }

        function I(b, j, k) {
            var q = void 0;
            if (k == l) {
                if (Qb.trigger("swipeStatus", [j, Ib || null, Hb || 0, Jb || 0, Sb]), c.swipeStatus && (q = c.swipeStatus.call(Qb, b, j, Ib || null, Hb || 0, Jb || 0, Sb), q === !1))return!1;
                if (j == w && R()) {
                    if (Qb.trigger("swipe", [Ib, Hb, Jb, Sb]), c.swipe && (q = c.swipe.call(Qb, b, Ib, Hb, Jb, Sb), q === !1))return!1;
                    switch (Ib) {
                        case d:
                            Qb.trigger("swipeLeft", [Ib, Hb, Jb, Sb]), c.swipeLeft && (q = c.swipeLeft.call(Qb, b, Ib, Hb, Jb, Sb));
                            break;
                        case e:
                            Qb.trigger("swipeRight", [Ib, Hb, Jb, Sb]), c.swipeRight && (q = c.swipeRight.call(Qb, b, Ib, Hb, Jb, Sb));
                            break;
                        case f:
                            Qb.trigger("swipeUp", [Ib, Hb, Jb, Sb]), c.swipeUp && (q = c.swipeUp.call(Qb, b, Ib, Hb, Jb, Sb));
                            break;
                        case g:
                            Qb.trigger("swipeDown", [Ib, Hb, Jb, Sb]), c.swipeDown && (q = c.swipeDown.call(Qb, b, Ib, Hb, Jb, Sb))
                    }
                }
            }
            if (k == m) {
                if (Qb.trigger("pinchStatus", [j, Ob || null, Nb || 0, Jb || 0, Sb, Mb]), c.pinchStatus && (q = c.pinchStatus.call(Qb, b, j, Ob || null, Nb || 0, Jb || 0, Sb, Mb), q === !1))return!1;
                if (j == w && O())switch (Ob) {
                    case h:
                        Qb.trigger("pinchIn", [Ob || null, Nb || 0, Jb || 0, Sb, Mb]), c.pinchIn && (q = c.pinchIn.call(Qb, b, Ob || null, Nb || 0, Jb || 0, Sb, Mb));
                        break;
                    case i:
                        Qb.trigger("pinchOut", [Ob || null, Nb || 0, Jb || 0, Sb, Mb]), c.pinchOut && (q = c.pinchOut.call(Qb, b, Ob || null, Nb || 0, Jb || 0, Sb, Mb))
                }
            }
            return k == n ? (j === x || j === w) && (clearTimeout(Zb), X() && !$() ? (Yb = yb(), Zb = setTimeout(a.proxy(function () {
                Yb = null, Qb.trigger("tap", [b.target]), c.tap && (q = c.tap.call(Qb, b, b.target))
            }, this), c.doubleTapThreshold)) : (Yb = null, Qb.trigger("tap", [b.target]), c.tap && (q = c.tap.call(Qb, b, b.target)))) : k == o ? (j === x || j === w) && (clearTimeout(Zb), Yb = null, Qb.trigger("doubletap", [b.target]), c.doubleTap && (q = c.doubleTap.call(Qb, b, b.target))) : k == p && (j === x || j === w) && (clearTimeout(Zb), Yb = null, Qb.trigger("longtap", [b.target]), c.longTap && (q = c.longTap.call(Qb, b, b.target))), q
        }

        function J() {
            var a = !0;
            return null !== c.threshold && (a = Hb >= c.threshold), a
        }

        function K() {
            var a = !1;
            return null !== c.cancelThreshold && null !== Ib && (a = ob(Ib) - Hb >= c.cancelThreshold), a
        }

        function L() {
            return null !== c.pinchThreshold ? Nb >= c.pinchThreshold : !0
        }

        function M() {
            var a;
            return a = c.maxTimeThreshold && Jb >= c.maxTimeThreshold ? !1 : !0
        }

        function N(a, b) {
            if (c.allowPageScroll === j || P())a.preventDefault(); else {
                var h = c.allowPageScroll === k;
                switch (b) {
                    case d:
                        (c.swipeLeft && h || !h && c.allowPageScroll != q) && a.preventDefault();
                        break;
                    case e:
                        (c.swipeRight && h || !h && c.allowPageScroll != q) && a.preventDefault();
                        break;
                    case f:
                        (c.swipeUp && h || !h && c.allowPageScroll != r) && a.preventDefault();
                        break;
                    case g:
                        (c.swipeDown && h || !h && c.allowPageScroll != r) && a.preventDefault()
                }
            }
        }

        function O() {
            var a = U(), b = V(), c = L();
            return a && b && c
        }

        function P() {
            return!!(c.pinchStatus || c.pinchIn || c.pinchOut)
        }

        function Q() {
            return!(!O() || !P())
        }

        function R() {
            var a = M(), b = J(), c = U(), d = V(), e = K(), f = !e && d && c && b && a;
            return f
        }

        function S() {
            return!!(c.swipe || c.swipeStatus || c.swipeLeft || c.swipeRight || c.swipeUp || c.swipeDown)
        }

        function T() {
            return!(!R() || !S())
        }

        function U() {
            return Sb === c.fingers || c.fingers === s || !y
        }

        function V() {
            return 0 !== Tb[0].end.x
        }

        function W() {
            return!!c.tap
        }

        function X() {
            return!!c.doubleTap
        }

        function Y() {
            return!!c.longTap
        }

        function Z() {
            if (null == Yb)return!1;
            var a = yb();
            return X() && a - Yb <= c.doubleTapThreshold
        }

        function $() {
            return Z()
        }

        function _() {
            return!(1 !== Sb && y || !isNaN(Hb) && 0 !== Hb)
        }

        function ab() {
            return Jb > c.longTapThreshold && t > Hb
        }

        function bb() {
            return!(!_() || !W())
        }

        function cb() {
            return!(!Z() || !X())
        }

        function db() {
            return!(!ab() || !Y())
        }

        function eb() {
            Wb = yb(), Xb = event.touches.length + 1
        }

        function fb() {
            Wb = 0, Xb = 0
        }

        function gb() {
            var a = !1;
            if (Wb) {
                var b = yb() - Wb;
                b <= c.fingerReleaseThreshold && (a = !0)
            }
            return a
        }

        function hb() {
            return!(Qb.data(z + "_intouch") !== !0)
        }

        function ib(a) {
            a === !0 ? (Qb.bind(Db, B), Qb.bind(Eb, C), Fb && Qb.bind(Fb, E)) : (Qb.unbind(Db, B, !1), Qb.unbind(Eb, C, !1), Fb && Qb.unbind(Fb, E, !1)), Qb.data(z + "_intouch", a === !0)
        }

        function jb(a, b) {
            var c = void 0 !== b.identifier ? b.identifier : 0;
            return Tb[a].identifier = c, Tb[a].start.x = Tb[a].end.x = b.pageX || b.clientX, Tb[a].start.y = Tb[a].end.y = b.pageY || b.clientY, Tb[a]
        }

        function kb(a) {
            var b = void 0 !== a.identifier ? a.identifier : 0, c = lb(b);
            return c.end.x = a.pageX || a.clientX, c.end.y = a.pageY || a.clientY, c
        }

        function lb(a) {
            for (var b = 0; b < Tb.length; b++)if (Tb[b].identifier == a)return Tb[b]
        }

        function mb() {
            for (var a = [], b = 0; 5 >= b; b++)a.push({start: {x: 0, y: 0}, end: {x: 0, y: 0}, identifier: 0});
            return a
        }

        function nb(a, b) {
            b = Math.max(b, ob(a)), Pb[a].distance = b
        }

        function ob(a) {
            return Pb[a] ? Pb[a].distance : void 0
        }

        function pb() {
            var a = {};
            return a[d] = qb(d), a[e] = qb(e), a[f] = qb(f), a[g] = qb(g), a
        }

        function qb(a) {
            return{direction: a, distance: 0}
        }

        function rb() {
            return Vb - Ub
        }

        function sb(a, b) {
            var c = Math.abs(a.x - b.x), d = Math.abs(a.y - b.y);
            return Math.round(Math.sqrt(c * c + d * d))
        }

        function tb(a, b) {
            var c = b / a * 1;
            return c.toFixed(2)
        }

        function ub() {
            return 1 > Mb ? i : h
        }

        function vb(a, b) {
            return Math.round(Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2)))
        }

        function wb(a, b) {
            var c = a.x - b.x, d = b.y - a.y, e = Math.atan2(d, c), f = Math.round(180 * e / Math.PI);
            return 0 > f && (f = 360 - Math.abs(f)), f
        }

        function xb(a, b) {
            var c = wb(a, b);
            return 45 >= c && c >= 0 ? d : 360 >= c && c >= 315 ? d : c >= 135 && 225 >= c ? e : c > 45 && 135 > c ? g : f
        }

        function yb() {
            var a = new Date;
            return a.getTime()
        }

        function zb(b) {
            b = a(b);
            var c = b.offset(), d = {left: c.left, right: c.left + b.outerWidth(), top: c.top, bottom: c.top + b.outerHeight()};
            return d
        }

        function Ab(a, b) {
            return a.x > b.left && a.x < b.right && a.y > b.top && a.y < b.bottom
        }

        var Bb = y || !c.fallbackToMouseEvents, Cb = Bb ? "touchstart" : "mousedown", Db = Bb ? "touchmove" : "mousemove", Eb = Bb ? "touchend" : "mouseup", Fb = Bb ? null : "mouseleave", Gb = "touchcancel", Hb = 0, Ib = null, Jb = 0, Kb = 0, Lb = 0, Mb = 1, Nb = 0, Ob = 0, Pb = null, Qb = a(b), Rb = "start", Sb = 0, Tb = null, Ub = 0, Vb = 0, Wb = 0, Xb = 0, Yb = 0, Zb = null;
        try {
            Qb.bind(Cb, A), Qb.bind(Gb, D)
        } catch ($b) {
            a.error("events not supported " + Cb + "," + Gb + " on jQuery.swipe")
        }
        this.enable = function () {
            return Qb.bind(Cb, A), Qb.bind(Gb, D), Qb
        }, this.disable = function () {
            return F(), Qb
        }, this.destroy = function () {
            return F(), Qb.data(z, null), Qb
        }, this.option = function (b, d) {
            if (void 0 !== c[b]) {
                if (void 0 === d)return c[b];
                c[b] = d
            } else a.error("Option " + b + " does not exist on jQuery.swipe.options");
            return null
        }
    }

    var d = "left", e = "right", f = "up", g = "down", h = "in", i = "out", j = "none", k = "auto", l = "swipe", m = "pinch", n = "tap", o = "doubletap", p = "longtap", q = "horizontal", r = "vertical", s = "all", t = 10, u = "start", v = "move", w = "end", x = "cancel", y = "ontouchstart"in window, z = "TouchSwipe", A = {fingers: 1, threshold: 75, cancelThreshold: null, pinchThreshold: 20, maxTimeThreshold: null, fingerReleaseThreshold: 250, longTapThreshold: 500, doubleTapThreshold: 200, swipe: null, swipeLeft: null, swipeRight: null, swipeUp: null, swipeDown: null, swipeStatus: null, pinchIn: null, pinchOut: null, pinchStatus: null, click: null, tap: null, doubleTap: null, longTap: null, triggerOnTouchEnd: !0, triggerOnTouchLeave: !1, allowPageScroll: "auto", fallbackToMouseEvents: !0, excludedElements: "label, button, input, select, textarea, a, .noSwipe"};
    a.fn.swipe = function (c) {
        var d = a(this), e = d.data(z);
        if (e && "string" == typeof c) {
            if (e[c])return e[c].apply(this, Array.prototype.slice.call(arguments, 1));
            a.error("Method " + c + " does not exist on jQuery.swipe")
        } else if (!(e || "object" != typeof c && c))return b.apply(this, arguments);
        return d
    }, a.fn.swipe.defaults = A, a.fn.swipe.phases = {PHASE_START: u, PHASE_MOVE: v, PHASE_END: w, PHASE_CANCEL: x}, a.fn.swipe.directions = {LEFT: d, RIGHT: e, UP: f, DOWN: g, IN: h, OUT: i}, a.fn.swipe.pageScroll = {NONE: j, HORIZONTAL: q, VERTICAL: r, AUTO: k}, a.fn.swipe.fingers = {ONE: 1, TWO: 2, THREE: 3, ALL: s}
}), function (a) {
    "use strict";
    var b, c, d, e = 0, f = {control: a('<div class="colorPicker-picker">&nbsp;</div>'), palette: a('<div id="colorPicker_palette" class="colorPicker-palette" />'), swatch: a('<div class="colorPicker-swatch">&nbsp;</div>'), hexLabel: a('<label for="colorPicker_hex">Hex</label>'), hexField: a('<input type="text" id="colorPicker_hex" />')}, g = "transparent";
    a.fn.colorPicker = function (b) {
        return this.each(function () {
            var c, d = a(this), h = a.extend({}, a.fn.colorPicker.defaults, b), i = a.fn.colorPicker.toHex(d.val().length > 0 ? d.val() : h.pickerDefault), j = f.control.clone(), k = f.palette.clone().attr("id", "colorPicker_palette-" + e), l = f.hexLabel.clone(), m = f.hexField.clone(), n = k[0].id;
            a.each(h.colors, function (b) {
                c = f.swatch.clone(), h.colors[b] === g ? (c.addClass(g).text("X"), a.fn.colorPicker.bindPalette(m, c, g)) : (c.css("background-color", "#" + this), a.fn.colorPicker.bindPalette(m, c)), c.appendTo(k)
            }), l.attr("for", "colorPicker_hex-" + e), m.attr({id: "colorPicker_hex-" + e, value: i}), m.bind("keydown", function (b) {
                if (13 === b.keyCode) {
                    var c = a.fn.colorPicker.toHex(a(this).val());
                    a.fn.colorPicker.changeColor(c ? c : d.val())
                }
                27 === b.keyCode && a.fn.colorPicker.hidePalette()
            }), m.bind("keyup", function (b) {
                var c = a.fn.colorPicker.toHex(a(b.target).val());
                a.fn.colorPicker.previewColor(c ? c : d.val())
            }), a('<div class="colorPicker_hexWrap" />').append(l).appendTo(k), k.find(".colorPicker_hexWrap").append(m), a("body").append(k), k.hide(), j.css("background-color", i), j.bind("click", function () {
                a(this).toggleClass("active"), a.fn.colorPicker.togglePalette(a("#" + n), a(this))
            }), b && b.onColorChange ? j.data("onColorChange", b.onColorChange) : j.data("onColorChange", function () {
            }), d.after(j), d.bind("change", function () {
                d.next(".colorPicker-picker").css("background-color", a.fn.colorPicker.toHex(a(this).val()))
            }), d.val(i).hide(), e++
        })
    }, a.extend(!0, a.fn.colorPicker, {toHex: function (a) {
        if (a.match(/[0-9A-F]{6}|[0-9A-F]{3}$/i))return"#" === a.charAt(0) ? a : "#" + a;
        if (!a.match(/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/))return!1;
        var b = [parseInt(RegExp.$1, 10), parseInt(RegExp.$2, 10), parseInt(RegExp.$3, 10)], c = function (a) {
            if (a.length < 2)for (var b = 0, c = 2 - a.length; c > b; b++)a = "0" + a;
            return a
        };
        if (3 === b.length) {
            var d = c(b[0].toString(16)), e = c(b[1].toString(16)), f = c(b[2].toString(16));
            return"#" + d + e + f
        }
    }, checkMouse: function (d) {
        var e = c, f = a(d.target).parents("#" + e.attr("id")).length;
        d.target === a(e)[0] || d.target === b[0] || f > 0 || a.fn.colorPicker.hidePalette()
    }, hidePalette: function () {
        a(document).unbind("mousedown", a.fn.colorPicker.checkMouse), a(".colorPicker-picker").removeClass("active"), a(".colorPicker-palette").hide()
    }, showPalette: function (c) {
        var d = b.prev("input").val(), e = b.offset(), f = c.height(), g = c.width(), h = e.top + b.outerHeight() + 4, i = e.left - 4;
        h + f > a(window).height() && (h = e.top - f - 10), i + g > a(window).width() && (i = e.left + b.outerWidth() - g), c.css({top: h, left: i}), a("#color_value").val(d), c.show(), a(document).bind("mousedown", a.fn.colorPicker.checkMouse), a(c).find(".colorPicker-picker").addClass("active")
    }, togglePalette: function (d, e) {
        e && (b = e), c = d, c.is(":visible") ? a.fn.colorPicker.hidePalette() : a.fn.colorPicker.showPalette(d)
    }, changeColor: function (c) {
        b.css("background-color", c), b.prev("input").val(c).change(), a.fn.colorPicker.hidePalette(), b.data("onColorChange").call(b, a(b).prev("input").attr("id"), c)
    }, previewColor: function (a) {
        b.css("background-color", a)
    }, bindPalette: function (c, e, f) {
        f = f ? f : a.fn.colorPicker.toHex(e.css("background-color")), e.bind({click: function () {
            d = f, a.fn.colorPicker.changeColor(f)
        }, mouseover: function () {
            d = c.val(), a(this).css("border-color", "#598FEF"), c.val(f), a.fn.colorPicker.previewColor(f)
        }, mouseout: function () {
            a(this).css("border-color", "#000"), c.val(b.css("background-color")), c.val(d), a.fn.colorPicker.previewColor(d)
        }})
    }}), a.fn.colorPicker.defaults = {pickerDefault: "FFFFFF", colors: ["000000", "993300", "333300", "000080", "333399", "333333", "800000", "FF6600", "808000", "008000", "008080", "0000FF", "666699", "808080", "FF0000", "FF9900", "99CC00", "339966", "33CCCC", "3366FF", "800080", "999999", "FF00FF", "FFCC00", "FFFF00", "00FF00", "00FFFF", "00CCFF", "993366", "C0C0C0", "FF99CC", "FFCC99", "FFFF99", "CCFFFF", "99CCFF", "FFFFFF"], addColors: []}
}(jQuery), !function (a) {
    "use strict";
    var b = function (a, b) {
        this.init("tooltip", a, b)
    };
    b.prototype = {constructor: b, init: function (b, c, d) {
        var e, f;
        this.type = b, this.$element = a(c), this.options = this.getOptions(d), this.enabled = !0, "manual" != this.options.trigger && (e = "hover" == this.options.trigger ? "mouseenter" : "focus", f = "hover" == this.options.trigger ? "mouseleave" : "blur", this.$element.on(e, this.options.selector, a.proxy(this.enter, this)), this.$element.on(f, this.options.selector, a.proxy(this.leave, this))), this.options.selector ? this._options = a.extend({}, this.options, {trigger: "manual", selector: ""}) : this.fixTitle()
    }, getOptions: function (b) {
        return b = a.extend({}, a.fn[this.type].defaults, b, this.$element.data()), b.delay && "number" == typeof b.delay && (b.delay = {show: b.delay, hide: b.delay}), b
    }, enter: function (b) {
        var c = a(b.currentTarget)[this.type](this._options).data(this.type);
        return c.options.delay && c.options.delay.show ? (clearTimeout(this.timeout), c.hoverState = "in", void(this.timeout = setTimeout(function () {
            "in" == c.hoverState && c.show()
        }, c.options.delay.show))) : c.show()
    }, leave: function (b) {
        var c = a(b.currentTarget)[this.type](this._options).data(this.type);
        return c.options.delay && c.options.delay.hide ? (clearTimeout(this.timeout), c.hoverState = "out", void(this.timeout = setTimeout(function () {
            "out" == c.hoverState && c.hide()
        }, c.options.delay.hide))) : c.hide()
    }, show: function () {
        var a, b, c, d, e, f, g;
        if (this.hasContent() && this.enabled) {
            switch (a = this.tip(), this.setContent(), this.options.animation && a.addClass("fade"), f = "function" == typeof this.options.placement ? this.options.placement.call(this, a[0], this.$element[0]) : this.options.placement, b = /in/.test(f), a.remove().css({top: 0, left: 0, display: "block"}).appendTo(b ? this.$element : document.body), c = this.getPosition(b), d = a[0].offsetWidth, e = a[0].offsetHeight, b ? f.split(" ")[1] : f) {
                case"bottom":
                    g = {top: c.top + c.height, left: c.left + c.width / 2 - d / 2};
                    break;
                case"top":
                    g = {top: c.top - e, left: c.left + c.width / 2 - d / 2};
                    break;
                case"left":
                    g = {top: c.top + c.height / 2 - e / 2, left: c.left - d};
                    break;
                case"right":
                    g = {top: c.top + c.height / 2 - e / 2, left: c.left + c.width}
            }
            a.css(g).addClass(f).addClass("in")
        }
    }, isHTML: function (a) {
        return"string" != typeof a || "<" === a.charAt(0) && ">" === a.charAt(a.length - 1) && a.length >= 3 || /^(?:[^<]*<[\w\W]+>[^>]*$)/.exec(a)
    }, setContent: function () {
        var a = this.tip(), b = this.getTitle();
        a.find(".tooltip-inner")[this.isHTML(b) ? "html" : "text"](b), a.removeClass("fade in top bottom left right")
    }, hide: function () {
        function b() {
            var b = setTimeout(function () {
                c.off(a.support.transition.end).remove()
            }, 500);
            c.one(a.support.transition.end, function () {
                clearTimeout(b), c.remove()
            })
        }

        var c = this.tip();
        c.removeClass("in"), a.support.transition && this.$tip.hasClass("fade") ? b() : c.remove()
    }, fixTitle: function () {
        var a = this.$element;
        (a.attr("title") || "string" != typeof a.attr("data-original-title")) && a.attr("data-original-title", a.attr("title") || "").removeAttr("title")
    }, hasContent: function () {
        return this.getTitle()
    }, getPosition: function (b) {
        return a.extend({}, b ? {top: 0, left: 0} : this.$element.offset(), {width: this.$element[0].offsetWidth, height: this.$element[0].offsetHeight})
    }, getTitle: function () {
        var a, b = this.$element, c = this.options;
        return a = b.attr("data-original-title") || ("function" == typeof c.title ? c.title.call(b[0]) : c.title)
    }, tip: function () {
        return this.$tip = this.$tip || a(this.options.template)
    }, validate: function () {
        this.$element[0].parentNode || (this.hide(), this.$element = null, this.options = null)
    }, enable: function () {
        this.enabled = !0
    }, disable: function () {
        this.enabled = !1
    }, toggleEnabled: function () {
        this.enabled = !this.enabled
    }, toggle: function () {
        this[this.tip().hasClass("in") ? "hide" : "show"]()
    }}, a.fn.tooltip = function (c) {
        return this.each(function () {
            var d = a(this), e = d.data("tooltip"), f = "object" == typeof c && c;
            e || d.data("tooltip", e = new b(this, f)), "string" == typeof c && e[c]()
        })
    }, a.fn.tooltip.Constructor = b, a.fn.tooltip.defaults = {animation: !0, placement: "top", selector: !1, template: '<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>', trigger: "hover", title: "", delay: 0}
}(window.jQuery), !function (a) {
    "use strict";
    var b = function (a, b) {
        this.init("atPopover", a, b)
    };
    b.prototype = a.extend({}, a.fn.tooltip.Constructor.prototype, {constructor: b, setContent: function () {
        var a = this.tip(), b = this.getTitle(), c = this.getContent();
        a.find(".at-popover-title")[this.isHTML(b) ? "html" : "text"](b), a.find(".at-popover-content > *")[this.isHTML(c) ? "html" : "text"](c), a.removeClass("fade top bottom left right in")
    }, hasContent: function () {
        return this.getTitle() || this.getContent()
    }, getContent: function () {
        var a, b = this.$element, c = this.options;
        return a = b.attr("data-content") || ("function" == typeof c.content ? c.content.call(b[0]) : c.content)
    }, tip: function () {
        return this.$tip || (this.$tip = a(this.options.template)), this.$tip
    }}), a.fn.atPopover = function (c) {
        return this.each(function () {
            var d = a(this), e = d.data("at-popover"), f = "object" == typeof c && c;
            e || d.data("at-popover", e = new b(this, f)), "string" == typeof c && e[c]()
        })
    }, a.fn.atPopover.Constructor = b, a.fn.atPopover.defaults = a.extend({}, a.fn.tooltip.defaults, {placement: "right", content: "", template: '<div class="at-popover"><div class="arrow"></div><div class="at-popover-inner"><h3 class="at-popover-title"></h3><div class="at-popover-content"><p></p></div></div></div>'})
}(window.jQuery), function (a) {
    var b, c, d, e, f = "ui-button ui-widget ui-state-default ui-corner-all", g = "ui-state-hover ui-state-active ", h = "ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only", i = function () {
        var b = a(this).find(":ui-button");
        setTimeout(function () {
            b.button("refresh")
        }, 1)
    }, j = function (b) {
        var c = b.name, d = b.form, e = a([]);
        return c && (c = c.replace(/'/g, "\\'"), e = d ? a(d).find("[name='" + c + "']") : a("[name='" + c + "']", b.ownerDocument).filter(function () {
            return!this.form
        })), e
    };
    a.widget("ui.button", {version: "@VERSION", defaultElement: "<button>", options: {disabled: null, text: !0, label: null, icons: {primary: null, secondary: null}}, _create: function () {
        this.element.closest("form").unbind("reset" + this.eventNamespace).bind("reset" + this.eventNamespace, i), "boolean" != typeof this.options.disabled ? this.options.disabled = !!this.element.prop("disabled") : this.element.prop("disabled", this.options.disabled), this._determineButtonType(), this.hasTitle = !!this.buttonElement.attr("title");
        var g = this, h = this.options, k = "checkbox" === this.type || "radio" === this.type, l = k ? "" : "ui-state-active", m = "ui-state-focus";
        null === h.label && (h.label = "input" === this.type ? this.buttonElement.val() : this.buttonElement.html()), this._hoverable(this.buttonElement), this.buttonElement.addClass(f).attr("role", "button").bind("mouseenter" + this.eventNamespace, function () {
            h.disabled || this === b && a(this).addClass("ui-state-active")
        }).bind("mouseleave" + this.eventNamespace, function () {
            h.disabled || a(this).removeClass(l)
        }).bind("click" + this.eventNamespace, function (a) {
            h.disabled && (a.preventDefault(), a.stopImmediatePropagation())
        }), this.element.bind("focus" + this.eventNamespace, function () {
            g.buttonElement.addClass(m)
        }).bind("blur" + this.eventNamespace, function () {
            g.buttonElement.removeClass(m)
        }), k && (this.element.bind("change" + this.eventNamespace, function () {
            e || g.refresh()
        }), this.buttonElement.bind("mousedown" + this.eventNamespace, function (a) {
            h.disabled || (e = !1, c = a.pageX, d = a.pageY)
        }).bind("mouseup" + this.eventNamespace, function (a) {
            h.disabled || (c !== a.pageX || d !== a.pageY) && (e = !0)
        })), "checkbox" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function () {
            return h.disabled || e ? !1 : void 0
        }) : "radio" === this.type ? this.buttonElement.bind("click" + this.eventNamespace, function () {
            if (h.disabled || e)return!1;
            a(this).addClass("ui-state-active"), g.buttonElement.attr("aria-pressed", "true");
            var b = g.element[0];
            j(b).not(b).map(function () {
                return a(this).button("widget")[0]
            }).removeClass("ui-state-active").attr("aria-pressed", "false")
        }) : (this.buttonElement.bind("mousedown" + this.eventNamespace, function () {
            return h.disabled ? !1 : (a(this).addClass("ui-state-active"), b = this, void g.document.one("mouseup", function () {
                b = null
            }))
        }).bind("mouseup" + this.eventNamespace, function () {
            return h.disabled ? !1 : void a(this).removeClass("ui-state-active")
        }).bind("keydown" + this.eventNamespace, function (b) {
            return h.disabled ? !1 : void((b.keyCode === a.ui.keyCode.SPACE || b.keyCode === a.ui.keyCode.ENTER) && a(this).addClass("ui-state-active"))
        }).bind("keyup" + this.eventNamespace + " blur" + this.eventNamespace, function () {
            a(this).removeClass("ui-state-active")
        }), this.buttonElement.is("a") && this.buttonElement.keyup(function (b) {
            b.keyCode === a.ui.keyCode.SPACE && a(this).click()
        })), this._setOption("disabled", h.disabled), this._resetButton()
    }, _determineButtonType: function () {
        var a, b, c;
        this.type = this.element.is("[type=checkbox]") ? "checkbox" : this.element.is("[type=radio]") ? "radio" : this.element.is("input") ? "input" : "button", "checkbox" === this.type || "radio" === this.type ? (a = this.element.parents().last(), b = "label[for='" + this.element.attr("id") + "']", this.buttonElement = a.find(b), this.buttonElement.length || (a = a.length ? a.siblings() : this.element.siblings(), this.buttonElement = a.filter(b), this.buttonElement.length || (this.buttonElement = a.find(b))), this.element.addClass("ui-helper-hidden-accessible"), c = this.element.is(":checked"), c && this.buttonElement.addClass("ui-state-active"), this.buttonElement.prop("aria-pressed", c)) : this.buttonElement = this.element
    }, widget: function () {
        return this.buttonElement
    }, _destroy: function () {
        this.element.removeClass("ui-helper-hidden-accessible"), this.buttonElement.removeClass(f + " " + g + " " + h).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()), this.hasTitle || this.buttonElement.removeAttr("title")
    }, _setOption: function (a, b) {
        return this._super(a, b), "disabled" === a ? (this.widget().toggleClass("ui-state-disabled", !!b), void this.element.prop("disabled", !!b)) : void this._resetButton()
    }, refresh: function () {
        var b = this.element.is("input, button") ? this.element.is(":disabled") : this.element.hasClass("ui-button-disabled");
        b !== this.options.disabled && this._setOption("disabled", b), "radio" === this.type ? j(this.element[0]).each(function () {
            a(this).is(":checked") ? a(this).button("widget").addClass("ui-state-active").attr("aria-pressed", "true") : a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed", "false")
        }) : "checkbox" === this.type && (this.element.is(":checked") ? this.buttonElement.addClass("ui-state-active").attr("aria-pressed", "true") : this.buttonElement.removeClass("ui-state-active").attr("aria-pressed", "false"))
    }, _resetButton: function () {
        if ("input" === this.type)return void(this.options.label && this.element.val(this.options.label));
        var b = this.buttonElement.removeClass(h), c = a("<span></span>", this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(), d = this.options.icons, e = d.primary && d.secondary, f = [];
        d.primary || d.secondary ? (this.options.text && f.push("ui-button-text-icon" + (e ? "s" : d.primary ? "-primary" : "-secondary")), d.primary && b.prepend("<span class='ui-button-icon-primary ui-icon " + d.primary + "'></span>"), d.secondary && b.append("<span class='ui-button-icon-secondary ui-icon " + d.secondary + "'></span>"), this.options.text || (f.push(e ? "ui-button-icons-only" : "ui-button-icon-only"), this.hasTitle || b.attr("title", a.trim(c)))) : f.push("ui-button-text-only"), b.addClass(f.join(" "))
    }}), a.widget("ui.buttonset", {version: "@VERSION", options: {items: "button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"}, _create: function () {
        this.element.addClass("ui-buttonset")
    }, _init: function () {
        this.refresh()
    }, _setOption: function (a, b) {
        "disabled" === a && this.buttons.button("option", a, b), this._super(a, b)
    }, refresh: function () {
        var b = "rtl" === this.element.css("direction");
        this.buttons = this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function () {
            return a(this).button("widget")[0]
        }).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b ? "ui-corner-right" : "ui-corner-left").end().filter(":last").addClass(b ? "ui-corner-left" : "ui-corner-right").end().end()
    }, _destroy: function () {
        this.element.removeClass("ui-buttonset"), this.buttons.map(function () {
            return a(this).button("widget")[0]
        }).removeClass("ui-corner-left ui-corner-right").end().button("destroy")
    }})
}(jQuery), function (a) {
    var b = {buttons: !0, height: !0, maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0, width: !0}, c = {maxHeight: !0, maxWidth: !0, minHeight: !0, minWidth: !0};
    a.widget("ui.dialog", {version: "@VERSION", options: {appendTo: "body", autoOpen: !0, buttons: [], closeOnEscape: !0, closeText: "close", dialogClass: "", draggable: !0, hide: null, height: "auto", maxHeight: null, maxWidth: null, minHeight: 150, minWidth: 150, modal: !1, position: {my: "center", at: "center", of: window, collision: "fit", using: function (b) {
        var c = a(this).css(b).offset().top;
        0 > c && a(this).css("top", b.top - c)
    }}, resizable: !0, show: null, title: null, width: 300, beforeClose: null, close: null, drag: null, dragStart: null, dragStop: null, focus: null, open: null, resize: null, resizeStart: null, resizeStop: null}, _create: function () {
        this.originalCss = {display: this.element[0].style.display, width: this.element[0].style.width, minHeight: this.element[0].style.minHeight, maxHeight: this.element[0].style.maxHeight, height: this.element[0].style.height}, this.originalPosition = {parent: this.element.parent(), index: this.element.parent().children().index(this.element)}, this.originalTitle = this.element.attr("title"), this.options.title = this.options.title || this.originalTitle, this._createWrapper(), this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog), this._createTitlebar(), this._createButtonPane(), this.options.draggable && a.fn.draggable && this._makeDraggable(), this.options.resizable && a.fn.resizable && this._makeResizable(), this._isOpen = !1
    }, _init: function () {
        this.options.autoOpen && this.open()
    }, _appendTo: function () {
        var b = this.options.appendTo;
        return b && (b.jquery || b.nodeType) ? a(b) : this.document.find(b || "body").eq(0)
    }, _destroy: function () {
        var a, b = this.originalPosition;
        this._destroyOverlay(), this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(), this.uiDialog.stop(!0, !0).remove(), this.originalTitle && this.element.attr("title", this.originalTitle), a = b.parent.children().eq(b.index), a.length && a[0] !== this.element[0] ? a.before(this.element) : b.parent.append(this.element)
    }, widget: function () {
        return this.uiDialog
    }, disable: a.noop, enable: a.noop, close: function (b) {
        var c = this;
        this._isOpen && this._trigger("beforeClose", b) !== !1 && (this._isOpen = !1, this._destroyOverlay(), this.opener.filter(":focusable").focus().length || a(this.document[0].activeElement).blur(), this._hide(this.uiDialog, this.options.hide, function () {
            c._trigger("close", b)
        }))
    }, isOpen: function () {
        return this._isOpen
    }, moveToTop: function () {
        this._moveToTop()
    }, _moveToTop: function (a, b) {
        var c = !!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;
        return c && !b && this._trigger("focus", a), c
    }, open: function () {
        var b = this;
        return this._isOpen ? void(this._moveToTop() && this._focusTabbable()) : (this._isOpen = !0, this.opener = a(this.document[0].activeElement), this._size(), this._position(), this._createOverlay(), this._moveToTop(null, !0), this._show(this.uiDialog, this.options.show, function () {
            b._focusTabbable(), b._trigger("focus")
        }), void this._trigger("open"))
    }, _focusTabbable: function () {
        var a = this.element.find("[autofocus]");
        a.length || (a = this.element.find(":tabbable")), a.length || (a = this.uiDialogButtonPane.find(":tabbable")), a.length || (a = this.uiDialogTitlebarClose.filter(":tabbable")), a.length || (a = this.uiDialog), a.eq(0).focus()
    }, _keepFocus: function (b) {
        function c() {
            var b = this.document[0].activeElement, c = this.uiDialog[0] === b || a.contains(this.uiDialog[0], b);
            c || this._focusTabbable()
        }

        b.preventDefault(), c.call(this), this._delay(c)
    }, _createWrapper: function () {
        this.uiDialog = a("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " + this.options.dialogClass).hide().attr({tabIndex: -1, role: "dialog"}).appendTo(this._appendTo()), this._on(this.uiDialog, {keydown: function (b) {
            if (this.options.closeOnEscape && !b.isDefaultPrevented() && b.keyCode && b.keyCode === a.ui.keyCode.ESCAPE)return b.preventDefault(), void this.close(b);
            if (b.keyCode === a.ui.keyCode.TAB) {
                var c = this.uiDialog.find(":tabbable"), d = c.filter(":first"), e = c.filter(":last");
                b.target !== e[0] && b.target !== this.uiDialog[0] || b.shiftKey ? b.target !== d[0] && b.target !== this.uiDialog[0] || !b.shiftKey || (e.focus(1), b.preventDefault()) : (d.focus(1), b.preventDefault())
            }
        }, mousedown: function (a) {
            this._moveToTop(a) && this._focusTabbable()
        }}), this.element.find("[aria-describedby]").length || this.uiDialog.attr({"aria-describedby": this.element.uniqueId().attr("id")})
    }, _createTitlebar: function () {
        var b;
        this.uiDialogTitlebar = a("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog), this._on(this.uiDialogTitlebar, {mousedown: function (b) {
            a(b.target).closest(".ui-dialog-titlebar-close") || this.uiDialog.focus()
        }}), this.uiDialogTitlebarClose = a("<button></button>").button({label: this.options.closeText, icons: {primary: "ui-icon-closethick"}, text: !1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar), this._on(this.uiDialogTitlebarClose, {click: function (a) {
            a.preventDefault(), this.close(a)
        }}), b = a("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar), this._title(b), this.uiDialog.attr({"aria-labelledby": b.attr("id")})
    }, _title: function (a) {
        this.options.title || a.html("&#160;"), a.text(this.options.title)
    }, _createButtonPane: function () {
        this.uiDialogButtonPane = a("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"), this.uiButtonSet = a("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane), this._createButtons()
    }, _createButtons: function () {
        var b = this, c = this.options.buttons;
        return this.uiDialogButtonPane.remove(), this.uiButtonSet.empty(), a.isEmptyObject(c) || a.isArray(c) && !c.length ? void this.uiDialog.removeClass("ui-dialog-buttons") : (a.each(c, function (c, d) {
            var e, f;
            d = a.isFunction(d) ? {click: d, text: c} : d, d = a.extend({type: "button"}, d), e = d.click, d.click = function () {
                e.apply(b.element[0], arguments)
            }, f = {icons: d.icons, text: d.showText}, delete d.icons, delete d.showText, a("<button></button>", d).button(f).appendTo(b.uiButtonSet)
        }), this.uiDialog.addClass("ui-dialog-buttons"), void this.uiDialogButtonPane.appendTo(this.uiDialog))
    }, _makeDraggable: function () {
        function b(a) {
            return{position: a.position, offset: a.offset}
        }

        var c = this, d = this.options;
        this.uiDialog.draggable({cancel: ".ui-dialog-content, .ui-dialog-titlebar-close", handle: ".ui-dialog-titlebar", containment: "document", start: function (d, e) {
            a(this).addClass("ui-dialog-dragging"), c._blockFrames(), c._trigger("dragStart", d, b(e))
        }, drag: function (a, d) {
            c._trigger("drag", a, b(d))
        }, stop: function (e, f) {
            d.position = [f.position.left - c.document.scrollLeft(), f.position.top - c.document.scrollTop()], a(this).removeClass("ui-dialog-dragging"), c._unblockFrames(), c._trigger("dragStop", e, b(f))
        }})
    }, _makeResizable: function () {
        function b(a) {
            return{originalPosition: a.originalPosition, originalSize: a.originalSize, position: a.position, size: a.size}
        }

        var c = this, d = this.options, e = d.resizable, f = this.uiDialog.css("position"), g = "string" == typeof e ? e : "n,e,s,w,se,sw,ne,nw";
        this.uiDialog.resizable({cancel: ".ui-dialog-content", containment: "document", alsoResize: this.element, maxWidth: d.maxWidth, maxHeight: d.maxHeight, minWidth: d.minWidth, minHeight: this._minHeight(), handles: g, start: function (d, e) {
            a(this).addClass("ui-dialog-resizing"), c._blockFrames(), c._trigger("resizeStart", d, b(e))
        }, resize: function (a, d) {
            c._trigger("resize", a, b(d))
        }, stop: function (e, f) {
            d.height = a(this).height(), d.width = a(this).width(), a(this).removeClass("ui-dialog-resizing"), c._unblockFrames(), c._trigger("resizeStop", e, b(f))
        }}).css("position", f)
    }, _minHeight: function () {
        var a = this.options;
        return"auto" === a.height ? a.minHeight : Math.min(a.minHeight, a.height)
    }, _position: function () {
        var a = this.uiDialog.is(":visible");
        a || this.uiDialog.show(), this.uiDialog.position(this.options.position), a || this.uiDialog.hide()
    }, _setOptions: function (d) {
        var e = this, f = !1, g = {};
        a.each(d, function (a, d) {
            e._setOption(a, d), a in b && (f = !0), a in c && (g[a] = d)
        }), f && (this._size(), this._position()), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", g)
    }, _setOption: function (a, b) {
        var c, d, e = this.uiDialog;
        "dialogClass" === a && e.removeClass(this.options.dialogClass).addClass(b), "disabled" !== a && (this._super(a, b), "appendTo" === a && this.uiDialog.appendTo(this._appendTo()), "buttons" === a && this._createButtons(), "closeText" === a && this.uiDialogTitlebarClose.button({label: "" + b}), "draggable" === a && (c = e.is(":data(ui-draggable)"), c && !b && e.draggable("destroy"), !c && b && this._makeDraggable()), "position" === a && this._position(), "resizable" === a && (d = e.is(":data(ui-resizable)"), d && !b && e.resizable("destroy"), d && "string" == typeof b && e.resizable("option", "handles", b), d || b === !1 || this._makeResizable()), "title" === a && this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))
    }, _size: function () {
        var a, b, c, d = this.options;
        this.element.show().css({width: "auto", minHeight: 0, maxHeight: "none", height: 0}), d.minWidth > d.width && (d.width = d.minWidth), a = this.uiDialog.css({height: "auto", width: d.width}).outerHeight(), b = Math.max(0, d.minHeight - a), c = "number" == typeof d.maxHeight ? Math.max(0, d.maxHeight - a) : "none", "auto" === d.height ? this.element.css({minHeight: b, maxHeight: c, height: "auto"}) : this.element.height(Math.max(0, d.height - a)), this.uiDialog.is(":data(ui-resizable)") && this.uiDialog.resizable("option", "minHeight", this._minHeight())
    }, _blockFrames: function () {
        this.iframeBlocks = this.document.find("iframe").map(function () {
            var b = a(this);
            return a("<div>").css({position: "absolute", width: b.outerWidth(), height: b.outerHeight()}).appendTo(b.parent()).offset(b.offset())[0]
        })
    }, _unblockFrames: function () {
        this.iframeBlocks && (this.iframeBlocks.remove(), delete this.iframeBlocks)
    }, _allowInteraction: function (b) {
        return a(b.target).closest(".ui-dialog").length ? !0 : !!a(b.target).closest(".ui-datepicker").length
    }, _createOverlay: function () {
        if (this.options.modal) {
            var b = this, c = this.widgetFullName;
            a.ui.dialog.overlayInstances || this._delay(function () {
                a.ui.dialog.overlayInstances && this.document.bind("focusin.dialog", function (d) {
                    b._allowInteraction(d) || (d.preventDefault(), a(".ui-dialog:visible:last .ui-dialog-content").data(c)._focusTabbable())
                })
            }), this.overlay = a("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()), this._on(this.overlay, {mousedown: "_keepFocus"}), a.ui.dialog.overlayInstances++
        }
    }, _destroyOverlay: function () {
        this.options.modal && this.overlay && (a.ui.dialog.overlayInstances--, a.ui.dialog.overlayInstances || this.document.unbind("focusin.dialog"), this.overlay.remove(), this.overlay = null)
    }}), a.ui.dialog.overlayInstances = 0
}(jQuery), function (a) {
    if (!a.support.cors && a.ajaxTransport && window.XDomainRequest) {
        var b = /^https?:\/\//i, c = /^get|post$/i, d = new RegExp("^" + location.protocol, "i"), e = /text\/html/i, f = /\/json/i, g = /\/xml/i;
        a.ajaxTransport("* text html xml json", function (h, i) {
            if (h.crossDomain && h.async && c.test(h.type) && b.test(h.url) && d.test(h.url)) {
                var j = null, k = (i.dataType || "").toLowerCase();
                return{send: function (b, c) {
                    j = new XDomainRequest, /^\d+$/.test(i.timeout) && (j.timeout = i.timeout), j.ontimeout = function () {
                        c(500, "timeout")
                    }, j.onload = function () {
                        var b = "Content-Length: " + j.responseText.length + "\r\nContent-Type: " + j.contentType, d = {code: 200, message: "success"}, h = {text: j.responseText};
                        try {
                            if ("html" === k || e.test(j.contentType))h.html = j.responseText; else if ("json" === k || "text" !== k && f.test(j.contentType))try {
                                h.json = a.parseJSON(j.responseText)
                            } catch (i) {
                                d.code = 500, d.message = "parseerror"
                            } else if ("xml" === k || "text" !== k && g.test(j.contentType)) {
                                var l = new ActiveXObject("Microsoft.XMLDOM");
                                l.async = !1;
                                try {
                                    l.loadXML(j.responseText)
                                } catch (i) {
                                    l = void 0
                                }
                                if (!l || !l.documentElement || l.getElementsByTagName("parsererror").length)throw d.code = 500, d.message = "parseerror", "Invalid XML: " + j.responseText;
                                h.xml = l
                            }
                        } catch (m) {
                            throw m
                        } finally {
                            c(d.code, d.message, h, b)
                        }
                    }, j.onprogress = function () {
                    }, j.onerror = function () {
                        c(500, "error", {text: j.responseText})
                    };
                    var d = "";
                    i.data && (d = "string" === a.type(i.data) ? i.data : a.param(i.data)), j.open(h.type, h.url), j.send(d)
                }, abort: function () {
                    j && j.abort()
                }}
            }
        })
    }
}(jQuery), FastClick.prototype.deviceIsAndroid = navigator.userAgent.indexOf("Android") > 0, FastClick.prototype.deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent), FastClick.prototype.deviceIsIOS4 = FastClick.prototype.deviceIsIOS && /OS 4_\d(_\d)?/.test(navigator.userAgent), FastClick.prototype.deviceIsIOSWithBadTarget = FastClick.prototype.deviceIsIOS && /OS ([6-9]|\d{2})_\d/.test(navigator.userAgent), FastClick.prototype.needsClick = function (a) {
    "use strict";
    switch (a.nodeName.toLowerCase()) {
        case"button":
        case"select":
        case"textarea":
            if (a.disabled)return!0;
            break;
        case"input":
            if (this.deviceIsIOS && "file" === a.type || a.disabled)return!0;
            break;
        case"label":
        case"video":
            return!0
    }
    return/\bneedsclick\b/.test(a.className)
}, FastClick.prototype.needsFocus = function (a) {
    "use strict";
    switch (a.nodeName.toLowerCase()) {
        case"textarea":
            return!0;
        case"select":
            return!this.deviceIsAndroid;
        case"input":
            switch (a.type) {
                case"button":
                case"checkbox":
                case"file":
                case"image":
                case"radio":
                case"submit":
                    return!1
            }
            return!a.disabled && !a.readOnly;
        default:
            return/\bneedsfocus\b/.test(a.className)
    }
}, FastClick.prototype.sendClick = function (a, b) {
    "use strict";
    var c, d;
    document.activeElement && document.activeElement !== a && document.activeElement.blur(), d = b.changedTouches[0], c = document.createEvent("MouseEvents"), c.initMouseEvent(this.determineEventType(a), !0, !0, window, 1, d.screenX, d.screenY, d.clientX, d.clientY, !1, !1, !1, !1, 0, null), c.forwardedTouchEvent = !0, a.dispatchEvent(c)
}, FastClick.prototype.determineEventType = function (a) {
    "use strict";
    return this.deviceIsAndroid && "select" === a.tagName.toLowerCase() ? "mousedown" : "click"
}, FastClick.prototype.focus = function (a) {
    "use strict";
    var b;
    this.deviceIsIOS && a.setSelectionRange && 0 !== a.type.indexOf("date") && "time" !== a.type ? (b = a.value.length, a.setSelectionRange(b, b)) : a.focus()
}, FastClick.prototype.updateScrollParent = function (a) {
    "use strict";
    var b, c;
    if (b = a.fastClickScrollParent, !b || !b.contains(a)) {
        c = a;
        do {
            if (c.scrollHeight > c.offsetHeight) {
                b = c, a.fastClickScrollParent = c;
                break
            }
            c = c.parentElement
        } while (c)
    }
    b && (b.fastClickLastScrollTop = b.scrollTop)
}, FastClick.prototype.getTargetElementFromEventTarget = function (a) {
    "use strict";
    return a.nodeType === Node.TEXT_NODE ? a.parentNode : a
}, FastClick.prototype.onTouchStart = function (a) {
    "use strict";
    var b, c, d;
    if (a.targetTouches.length > 1)return!0;
    if (b = this.getTargetElementFromEventTarget(a.target), c = a.targetTouches[0], this.deviceIsIOS) {
        if (d = window.getSelection(), d.rangeCount && !d.isCollapsed)return!0;
        if (!this.deviceIsIOS4) {
            if (c.identifier === this.lastTouchIdentifier)return a.preventDefault(), !1;
            this.lastTouchIdentifier = c.identifier, this.updateScrollParent(b)
        }
    }
    return this.trackingClick = !0, this.trackingClickStart = a.timeStamp, this.targetElement = b, this.touchStartX = c.pageX, this.touchStartY = c.pageY, a.timeStamp - this.lastClickTime < 200 && a.preventDefault(), !0
}, FastClick.prototype.touchHasMoved = function (a) {
    "use strict";
    var b = a.changedTouches[0], c = this.touchBoundary;
    return Math.abs(b.pageX - this.touchStartX) > c || Math.abs(b.pageY - this.touchStartY) > c ? !0 : !1
}, FastClick.prototype.onTouchMove = function (a) {
    "use strict";
    return this.trackingClick ? ((this.targetElement !== this.getTargetElementFromEventTarget(a.target) || this.touchHasMoved(a)) && (this.trackingClick = !1, this.targetElement = null), !0) : !0
}, FastClick.prototype.findControl = function (a) {
    "use strict";
    return void 0 !== a.control ? a.control : a.htmlFor ? document.getElementById(a.htmlFor) : a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")
}, FastClick.prototype.onTouchEnd = function (a) {
    "use strict";
    var b, c, d, e, f, g = this.targetElement;
    if (!this.trackingClick)return!0;
    if (a.timeStamp - this.lastClickTime < 200)return this.cancelNextClick = !0, !0;
    if (this.cancelNextClick = !1, this.lastClickTime = a.timeStamp, c = this.trackingClickStart, this.trackingClick = !1, this.trackingClickStart = 0, this.deviceIsIOSWithBadTarget && (f = a.changedTouches[0], g = document.elementFromPoint(f.pageX - window.pageXOffset, f.pageY - window.pageYOffset) || g, g.fastClickScrollParent = this.targetElement.fastClickScrollParent), d = g.tagName.toLowerCase(), "label" === d) {
        if (b = this.findControl(g)) {
            if (this.focus(g), this.deviceIsAndroid)return!1;
            g = b
        }
    } else if (this.needsFocus(g))return a.timeStamp - c > 100 || this.deviceIsIOS && window.top !== window && "input" === d ? (this.targetElement = null, !1) : (this.focus(g), this.deviceIsIOS4 && "select" === d || (this.targetElement = null, a.preventDefault()), !1);
    return this.deviceIsIOS && !this.deviceIsIOS4 && (e = g.fastClickScrollParent, e && e.fastClickLastScrollTop !== e.scrollTop) ? !0 : (this.needsClick(g) || (a.preventDefault(), this.sendClick(g, a)), !1)
}, FastClick.prototype.onTouchCancel = function () {
    "use strict";
    this.trackingClick = !1, this.targetElement = null
}, FastClick.prototype.onMouse = function (a) {
    "use strict";
    return this.targetElement ? a.forwardedTouchEvent ? !0 : a.cancelable && (!this.needsClick(this.targetElement) || this.cancelNextClick) ? (a.stopImmediatePropagation ? a.stopImmediatePropagation() : a.propagationStopped = !0, a.stopPropagation(), a.preventDefault(), !1) : !0 : !0
}, FastClick.prototype.onClick = function (a) {
    "use strict";
    var b;
    return this.trackingClick ? (this.targetElement = null, this.trackingClick = !1, !0) : "submit" === a.target.type && 0 === a.detail ? !0 : (b = this.onMouse(a), b || (this.targetElement = null), b)
}, FastClick.prototype.destroy = function () {
    "use strict";
    var a = this.layer;
    this.deviceIsAndroid && (a.removeEventListener("mouseover", this.onMouse, !0), a.removeEventListener("mousedown", this.onMouse, !0), a.removeEventListener("mouseup", this.onMouse, !0)), a.removeEventListener("click", this.onClick, !0), a.removeEventListener("touchstart", this.onTouchStart, !1), a.removeEventListener("touchmove", this.onTouchMove, !1), a.removeEventListener("touchend", this.onTouchEnd, !1), a.removeEventListener("touchcancel", this.onTouchCancel, !1)
}, FastClick.notNeeded = function (a) {
    "use strict";
    var b, c;
    if ("undefined" == typeof window.ontouchstart)return!0;
    if (c = +(/Chrome\/([0-9]+)/.exec(navigator.userAgent) || [, 0])[1]) {
        if (!FastClick.prototype.deviceIsAndroid)return!0;
        if (b = document.querySelector("meta[name=viewport]")) {
            if (-1 !== b.content.indexOf("user-scalable=no"))return!0;
            if (c > 31 && window.innerWidth <= window.screen.width)return!0
        }
    }
    return"none" === a.style.msTouchAction ? !0 : !1
}, FastClick.attach = function (a) {
    "use strict";
    return new FastClick(a)
}, "undefined" != typeof define && define.amd ? define(function () {
    "use strict";
    return FastClick
}) : "undefined" != typeof module && module.exports ? (module.exports = FastClick.attach, module.exports.FastClick = FastClick) : window.FastClick = FastClick, function (a) {
    "function" == typeof module ? module.exports = a(this.jQuery || require("jquery")) : this.NProgress = a(this.jQuery)
}(function (a) {
    function b(a, b, c) {
        return b > a ? b : a > c ? c : a
    }

    function c(a) {
        return 100 * (-1 + a)
    }

    function d(a, b, d) {
        var e;
        return e = "translate3d" === f.positionUsing ? {transform: "translate3d(" + c(a) + "%,0,0)"} : "translate" === f.positionUsing ? {transform: "translate(" + c(a) + "%,0)"} : {"margin-left": c(a) + "%"}, e.transition = "all " + b + "ms " + d, e
    }

    var e = {};
    e.version = "0.1.2";
    var f = e.settings = {minimum: .08, easing: "ease", positionUsing: "", speed: 200, trickle: !0, trickleRate: .02, trickleSpeed: 800, showSpinner: !0, template: '<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>', containerElement: void 0};
    return e.configure = function (b) {
        return a.extend(f, b), this
    }, e.status = null, e.set = function (a) {
        var c = e.isStarted();
        a = b(a, f.minimum, 1), e.status = 1 === a ? null : a;
        var g = e.render(!c), h = g.find('[role="bar"]'), i = f.speed, j = f.easing;
        return g[0].offsetWidth, g.queue(function (b) {
            "" === f.positionUsing && (f.positionUsing = e.getPositioningCSS()), h.css(d(a, i, j)), 1 === a ? (g.css({transition: "none", opacity: 1}), g[0].offsetWidth, setTimeout(function () {
                g.css({transition: "all " + i + "ms linear", opacity: 0}), setTimeout(function () {
                    e.remove(), b()
                }, i)
            }, i)) : setTimeout(b, i)
        }), this
    }, e.isStarted = function () {
        return"number" == typeof e.status
    }, e.start = function () {
        e.status || e.set(0);
        var a = function () {
            setTimeout(function () {
                e.status && (e.trickle(), a())
            }, f.trickleSpeed)
        };
        return f.trickle && a(), this
    }, e.done = function (a) {
        return a || e.status ? e.inc(.3 + .5 * Math.random()).set(1) : this
    }, e.inc = function (a) {
        var c = e.status;
        return c ? ("number" != typeof a && (a = (1 - c) * b(Math.random() * c, .1, .95)), c = b(c + a, 0, .994), e.set(c)) : e.start()
    }, e.trickle = function () {
        return e.inc(Math.random() * f.trickleRate)
    }, e.render = function (b) {
        if (e.isRendered())return a("#nprogress");
        a("html").addClass("nprogress-busy");
        var d = a("<div id='nprogress'>").html(f.template), g = b ? "-100" : c(e.status || 0);
        return d.find('[role="bar"]').css({transition: "all 0 linear", transform: "translate3d(" + g + "%,0,0)"}), f.showSpinner || d.find('[role="spinner"]').remove(), d.appendTo(f.containerElement || document.body), d
    }, e.remove = function () {
        a("html").removeClass("nprogress-busy"), a("#nprogress").remove()
    }, e.isRendered = function () {
        return a("#nprogress").length > 0
    }, e.getPositioningCSS = function () {
        var a = document.body.style, b = "WebkitTransform"in a ? "Webkit" : "MozTransform"in a ? "Moz" : "msTransform"in a ? "ms" : "OTransform"in a ? "O" : "";
        return b + "Perspective"in a ? "translate3d" : b + "Transform"in a ? "translate" : "margin"
    }, e
});
var ScrollFix = function (a) {
    var b, c;
    a = a || document.querySelector(a), a && a.addEventListener("touchstart", function (d) {
        b = d.touches[0].pageY, c = a.scrollTop, 0 >= c && (a.scrollTop = 1), c + a.offsetHeight >= a.scrollHeight && (a.scrollTop = a.scrollHeight - a.offsetHeight - 1)
    }, !1)
}, ActiveText = function (a) {
    "use strict";
    function b() {
        h.ready = !0, $(h).trigger(ActiveText.Events.REFRESH)
    }

    function c() {
        if (h.extensions = [], a && a.extensions && $.isArray(a.extensions))for (var b = 0, c = a.extensions.length; c > b; b++)"object" == typeof a.extensions[b] && h.extensions.push(a.extensions[b]);
        ActiveText.Analytics && h.extensions.push(new ActiveText.Analytics)
    }

    function d() {
        h.behaviours = new ActiveText.Behaviours(h), h.navigation = new ActiveText.Navigation.Controller(h), h.model = new ActiveText.Navigation.Model(h), h.utils = new ActiveText.Utils(h), h.data = new ActiveText.Data(h), h.settings = new ActiveText.Settings(h), h.loader = new ActiveText.Loader(h), h.view = new ActiveText.View(h, a), h.theme = new ActiveText.Theme(h, a), h.constants = ActiveText.Constants, h.version = ActiveText.version, c()
    }

    function e() {
        if (h.extensions && $.isArray(h.extensions))for (var b = 0, c = h.extensions.length; c > b; b++)if ("function" == typeof h.extensions[b].init) {
            var d;
            a && a.options && (d = a.options[b]), h.extensions[b].init(h, d)
        }
    }

    function f() {
        if (h.model.init(), h.settings.init(), h.data.init(), h.loader.init(), h.view.init(), e(), void 0 !== FastClick && a && a.containerElement) {
            var b = a.containerElement.get(0);
            void 0 !== b && FastClick.attach(b)
        }
        (new ActiveText.Style).init()
    }

    function g() {
        $(h).off(ActiveText.Events.RESOURCES_LOADED, b), $(h).off(ActiveText.Events.RESOURCES_ERROR, b), $(a.containerElement).off("remove", g), h.ready = !1, h = void 0
    }

    var h = {init: b, ready: !1, options: a, behaviours: void 0, navigation: void 0, model: void 0, utils: void 0, data: void 0, loader: void 0, view: void 0, theme: void 0, constants: void 0, version: void 0, extensions: void 0};
    return d(), f(), $(h).on(ActiveText.Events.RESOURCES_LOADED, b), $(h).on(ActiveText.Events.RESOURCES_ERROR, b), a && a.containerElement && $(a.containerElement).on("remove", g), $(h).trigger(ActiveText.Commands.INIT_WHITEBOARD), h
};
ActiveText.namespace = function (a, b) {
    "use strict";
    a || (a = "");
    var c = a.split(".");
    b || (b = window), $.browser.msie && parseInt($.browser.version, 10) < 9 && (window.hasOwnProperty = function (a) {
        return this[a] ? !0 : !1
    });
    for (var d = b, e = 0; e < c.length; e++)d.hasOwnProperty(c[e]) || (d[c[e]] = {}), d = d[c[e]];
    return d
}, ActiveText.Constants = {BLANK_PAGE_CONTENT: "<html><head></head><body>&nbsp;</body></html>", USE_LOCAL_CACHE: !0 && !$.browser.msie && !/phantom/i.test(navigator.userAgent) && "file:" !== window.location.protocol}, ActiveText.version = function () {
    "use strict";
    return{string: "v1.85.8:0", major: "1", minor: "85", hotfix: "8", build: "0"}
}(), ActiveText.Settings = function (a) {
    "use strict";
    function b() {
        c(a && a.options ? void 0 === a.options.firstPageIsLeft ? a.options.numberingOffset % 2 === 0 : a.options.firstPageIsLeft === !0 : !1);
        var b;
        a && a.options && (b = parseInt(a.options.numberingOffset, 10)), d(b)
    }

    function c(b) {
        e = Boolean(b), $(a).trigger(ActiveText.Settings.Events.UPDATED, {key: "firstPageIsLeft", value: e})
    }

    function d(b) {
        f = parseInt(b, 10), f = isNaN(f) ? 1 : f, $(a).trigger(ActiveText.Settings.Events.UPDATED, {key: "numberingOffset", value: f})
    }

    var e = !1, f = 1;
    return{init: b, getFirstPageIsLeft: function () {
        return e
    }, setFirstPageIsLeft: c, getNumberingOffset: function () {
        return f
    }, setNumberingOffset: d}
}, ActiveText.Settings.Events = {LOADED: "activetext.settings.loaded", LOAD_ERROR: "activetext.settings.loaderror", UPDATED: "activetext.settings.updated"}, ActiveText.Style = function () {
    "use strict";
    function a() {
        var a = $.browser.msie && parseInt($.browser.version, 10) < 10, b = a ? "none" : "block", c = Modernizr.rgba ? "background:rgba(255,255,0,0.4);fill:rgba(255,255,0,0.4);" : "border:1px solid yellow;", d = Modernizr.rgba ? "background:rgba(237,0,140,0.4);fill:rgba(237,0,140,0.6);border:3px solid rgb(237,0,140) !important;stroke-width:4px;stroke:rgb(237,0,140);" : "border:3px solid rgb(237,0,140);", e = Modernizr.rgba ? "background:rgba(237,0,140,0.1);fill:rgba(237,0,140,0.2);border:3px solid rgb(237,0,140) !important;stroke-width:4px;stroke:rgb(237,0,140);" : "border:3px solid rgb(237,0,140);";
        d = Modernizr.touch ? "" : d;
        var f = ".view-loader-overlay{display:" + b + ";top:0;left:0;width:100%;height:100%;background:white;z-index:1000;position:absolute;-webkit-transition:opacity 0.5s linear;-moz-transition:opacity 0.5s linear;transition:opacity 0.5s linear;pointer-events:none;}* {-webkit-box-sizing: border-box;-moz-box-sizing: border-box;box-sizing: border-box;}.character-selected {" + e + "}.ctp:hover {" + c + "}.charSelect polygon:hover,.charSelect img:hover {" + d + '}.activetext [aria-hidden="true"] { visibility: hidden; }';
        ActiveText.CSSUtils.embedCSS(f, "activetext-main")
    }

    return{init: a}
}, ActiveText.Data = function (a) {
    "use strict";
    function b() {
        $(a).on(ActiveText.Events.BOOK_STRUCTURE_LOADED, h), $(a).on(ActiveText.Events.NAVMAP_LOADED, i), $(a).on(ActiveText.Events.OPF_META_LOADED, j), a.options && a.options.containerElement && $(a.options.containerElement).on("remove", c)
    }

    function c() {
        $(a).off(ActiveText.Events.BOOK_STRUCTURE_LOADED, h), $(a).off(ActiveText.Events.NAVMAP_LOADED, i), $(a).off(ActiveText.Events.OPF_META_LOADED, j), $(a.options.containerElement).off("remove", c), m = void 0, n = void 0, o = void 0, o = void 0, q = void 0
    }

    function d(a) {
        return!(!a || !a.length)
    }

    function e(b, c) {
        var d = {};
        if (d.title = b.title, d.src = ActiveText.DataUtils.correctURLPath(a, b.html_location), d.id = b.id, d.number = b.number, c.push(d), void 0 !== b.children && $.isArray(b.children) && b.children.length > 0) {
            for (var f = [], g = 0, h = b.children.length; h > g; g++)e(b.children[g], f);
            c.push(f)
        }
    }

    function f(a) {
        var b = [];
        if (a && d(a))for (var c = 0; c < a.length; c++) {
            var f = a[c];
            e(f, b)
        }
        return b
    }

    function g() {
        var a;
        return(void 0 === m || 0 === m.length) && (m = f(p)), a = m
    }

    function h(b, c) {
        p = c, $(a).trigger(ActiveText.Events.RESOURCES_LOADED, p)
    }

    function i(a, b) {
        o = b
    }

    function j(a, b) {
        q = b
    }

    function k() {
        var a;
        return(void 0 === n || 0 === n.length) && (n = f(o)), a = n
    }

    function l() {
        var a;
        return(null !== q || void 0 !== q) && (a = q), a
    }

    var m, n, o, p, q;
    return{init: b, getFlatListOfNavigation: g, getNavigationStructure: k, getMetaData: l}
}, ActiveText.Events = {REFRESH: "refresh.activetext.events", BOOK_STRUCTURE_LOADED: "bookstructureloaded.activetext.events", CONTAINER_XML_LOADED: "containerxmlloaded.activetext.events", OPF_DATA_LOADED: "opfdataloaded.activetext.events", OPF_META_LOADED: "opfmetaloaded.activetext.events", NAVMAP_LOADED: "navmaploaded.activetext.events", RESOURCES_LOADED: "resourcesloaded.activetext.events", RESOURCES_ERROR: "resourceserror.activetext.events", RESIZE: "resize_at.activetext.events", CHANGE_SCALING_MODE: "changeScalingMode.activetext.events", ANIMATE_PAGE: "animatepageturn.activetext.events", ANIMATE_PAGE_START: "animatepagestart.activetext.events", ANIMATE_PAGE_END: "animatepageend.activetext.events", FRAME_CREATED: "framecreated.activetext.events", FRAME_CONTENT_LOADED: "framecontentloaded.activetext.events", FRAME_CONTENT_ERROR: "framecontenterror.activetext.events", LOADED_OVERLAY_DATA: "loadedoverlaydata.activetext.events", OVERLAY_DATA_FAIL: "overlaydatafail.activetext.events", VIEW_MODE_CHANGED: "viewmodechange.activetext.events", LOADED_NOTES_FOR_INDEX: "haveNotesDataForIndex", AUDIO_HIGHLIGHT_PAUSED: "audiohighlightpaused", UI_ELEMENT_CLICKED: "uielementclicked", UI_ELEMENT_LOADED: "uielementloaded"}, ActiveText.Commands = {GO_TO_PAGE: "goToPage.activetext.commands", LOAD_PAGES_AT_INDEX: "loadPagesAtIndex.activetext.commands", LOAD_PAGE_BY_INDEX: "loadPageByIndex.activetext.commands", LOAD_RESOURCE_FOR_CURRENT_INDEX: "loadResourcesForCurrentIndex.activetext.commands", SWITCH_TO_DPS_VIEW: "switchToDPSView.activetext.commands", SWITCH_TO_SPS_VIEW: "switchToSinglePageView.activetext.commands", SWITCH_TO_SPS_FTW_VIEW: "switchToSinglePageFitToWidthView.activetext.commands", SWITCH_TO_ZOOM_MODE: "switchToZoomMode.activetext.commands", LOAD_RESOURCES: "loadresources.activetext.commands", INIT_WHITEBOARD: "initwhiteboard.activetext.commands", DISPLAY_ERROR: "displayError.activetext.commands", ENABLE_PAGE_DRAGGING: "enablePageDragging.activetext.commands", DISABLE_PAGE_DRAGGING: "disablePageDragging.activetext.commands", SHOW_LOADER: "activetext.showloader", HIDE_LOADER: "activetext.hideloader"}, ActiveText.Loader = function (a) {
    "use strict";
    function b() {
        var b = new ActiveText.ContentPreloader(a);
        b.init(), u = [], v = [], $.support.cors = !0;
        var d = $(a);
        d.on(ActiveText.Commands.LOAD_PAGES_AT_INDEX, l), d.on(ActiveText.Commands.LOAD_RESOURCES, c), d.on(ActiveText.Commands.LOAD_PAGE_BY_INDEX, m)
    }

    function c() {
        var a = d();
        a && a.getSpineData()
    }

    function d() {
        return a && !t && (a.options && "function" == typeof window[a.options.dataProvider] ? t = new window[a.options.dataProvider](a) : a.options && "function" == typeof a.options.dataProvider ? t = new a.options.dataProvider(a) : ActiveText && ActiveText.DataProvider && "function" == typeof ActiveText.DataProvider ? t = new ActiveText.DataProvider(a) : $(a).trigger(ActiveText.Commands.DISPLAY_ERROR, "DataProvider is not defined.")), t
    }

    function e(a) {
        return void 0 !== w[a]
    }

    function f(a) {
        return 0 === $(a).children("div.iframe").length
    }

    function g(b, c, d) {
        var e = w[d];
        if (f(b)) {
            var g = ActiveText.ViewFactory.createPageContentsWithURL(a, d, c);
            b.find(".spinner").remove(), g.prependTo(b), $(a).trigger(ActiveText.Events.RESIZE)
        }
        $(a).trigger(ActiveText.Commands.LOAD_RESOURCE_FOR_CURRENT_INDEX, {data: e, baseURL: d}), $(a).trigger(ActiveText.Events.FRAME_CONTENT_LOADED, {index: c})
    }

    function h(b) {
        var c = b.match(/<meta name=['|']viewport['|'] content=['|'](.*)['|'][ ]?[\/]?>/i);
        if (c && c[1]) {
            for (var d = {}, e = c[1].split(","), f = 0; f < e.length; f++) {
                var g = e[f].replace(/^\s+|\s+$/g, ""), h = g.split("=");
                d[h[0]] = parseInt(h[1], 10)
            }
            d.aspectRatio = d.width / d.height, a.view.model.setPageDimensions(d)
        } else {
            var i = b.match(/<div id='stop-overflow' style='width:(.*?)px; height:(.*?)px; overflow: hidden;'>/i);
            if (i) {
                var j = i[1], k = i[2];
                a.view.model.setPageDimensions({width: j, height: k, aspectRatio: j / k})
            }
        }
    }

    function i(a) {
        if (a.replace) {
            var b = ActiveText.LoaderUtils.correctPointsToPixels(a);
            h(b)
        }
    }

    function j(b, c, d) {
        function e(a) {
            i(a), w[b] = a, g(c, d, b)
        }

        function f(e) {
            if (0 !== e.readyState && 0 !== e.status)$(a).trigger(ActiveText.Events.FRAME_CONTENT_ERROR, {index: d}); else switch (window.location.protocol) {
                case"http:":
                case"https:":
                    -1 === b.indexOf("cachebuster") ? setTimeout(function () {
                        k(b + "?cachebuster=" + Math.random(), c, d)
                    }, 100) : $(a).trigger(ActiveText.Events.FRAME_CONTENT_ERROR, {index: d});
                    break;
                case"file:":
                    g(c, d, b)
            }
        }

        switch (window.location.protocol) {
            case"http:":
            case"https:":
                $.browser.msie ? g(c, d, b) : $.ajax({type: "GET", url: b, contentType: "text/plain", crossDomain: !0, success: e, error: f});
                break;
            case"file:":
                g(c, d, b)
        }
    }

    function k(b, c, d) {
        if (e(b))g(c, d, b), $(a).trigger(ActiveText.Events.FRAME_CONTENT_LOADED, {index: d}); else if (ActiveText.LoaderUtils.sourceURLIsValid(b))j(b, c, d); else {
            if (c) {
                var f = $('<div class="iframe"></div>').css({position: "absolute", background: "white"});
                f.prependTo(c), c.find(".spinner").remove()
            }
            $(a).trigger(ActiveText.Events.FRAME_CONTENT_LOADED, {index: d})
        }
    }

    function l(b, c) {
        if (ActiveText.ViewUtils.isSinglePageView(a))$(a).trigger(ActiveText.Commands.LOAD_PAGE_BY_INDEX, {index: c}); else {
            var d = ActiveText.NavigationUtils.calculateLeftmostPageIndexFromIndex(a, c);
            $(a).trigger(ActiveText.Commands.LOAD_PAGE_BY_INDEX, {index: d}), $(a).trigger(ActiveText.Commands.LOAD_PAGE_BY_INDEX, {index: d + 1})
        }
    }

    function m(b, c) {
        var d = c.index, e = ActiveText.ViewUtils.getFrameForPageByIndex(a, d), f = a.utils.getSourcePathForIndex(d);
        k(f, e, d)
    }

    function n(b) {
        var c = ActiveText.NavigationUtils.isLeftPage(a, b), d = c ? b : b - 1, e = c ? b + 1 : b;
        return $.when(o(d), o(e))
    }

    function o(a) {
        for (var b, c = $.Deferred(), d = !0, e = 0, f = u.length; f > e; e++)b = u[e], b.index === a && (d = !1);
        return v[a] = c, d ? setTimeout(function () {
            c.resolve(a)
        }, 0) : v[a] && v[a].resolve(a), c
    }

    function p() {
        var b = a.model.getCurrentIndex();
        $(a).trigger(ActiveText.Commands.LOAD_PAGES_AT_INDEX, [b + 2])
    }

    function q() {
        var b = a.model.getCurrentIndex();
        $(a).trigger(ActiveText.Commands.LOAD_PAGES_AT_INDEX, [b - 2])
    }

    function r(a) {
        u.push(a)
    }

    function s(a) {
        for (var b = 0, c = u.length; c > b; b++)u[b].index === a.index && u.slice(b, 1);
        v[a.index] && v[a.index].resolve(a.index)
    }

    var t, u, v, w = {};
    return{init: b, getDataProvider: d, hasLoadedAllResourcesForDisplayedPages: n, hasLoadedAllResourcesForPage: o, loadNextDPS: p, loadPrevDPS: q, addItemToQueue: r, removeItemFromQueue: s}
}, ActiveText.ContentPreloader = function (a) {
    "use strict";
    function b() {
        function b() {
            $(a.options.containerElement).off("remove", b), d.off(ActiveText.Commands.LOAD_RESOURCE_FOR_CURRENT_INDEX, c)
        }

        var d = $(a);
        d.on(ActiveText.Commands.LOAD_RESOURCE_FOR_CURRENT_INDEX, c), a.options && a.options.containerElement && $(a.options.containerElement).on("remove", b)
    }

    function c(a, b) {
        if (b && document.images) {
            var c = b.data, d = b.baseURL;
            if (c) {
                var e = /<img.+?src=["|'](.+?)["|'].+?\/?>/gi.exec(c);
                if (e) {
                    var f = e[1], g = new Image, h = d.split("/");
                    h.pop();
                    var i = h.join("/");
                    g.src = i + "/" + f
                }
            }
        }
    }

    return{init: b}
}, ActiveText.Navigation = ActiveText.Navigation || {}, ActiveText.Navigation.Model = function (a) {
    "use strict";
    function b() {
        return h
    }

    function c(a) {
        return h = parseInt(a, 10)
    }

    function d() {
        var b = a && a.options && a.options.defaults ? a.options.defaults : i;
        for (var c in i)void 0 === b[c] && (b[c] = i[c])
    }

    function e() {
        $(a).one(ActiveText.Events.RESOURCES_LOADED, f)
    }

    function f() {
        var b, c = a.utils;
        b = a.options.initialPageId ? c.getPageNumberFromId(a.options.initialPageId) : a.options.initialPageNumber ? ActiveText.NavigationUtils.pageNumberToPageIndex(a, a.options.initialPageNumber) : ActiveText.NavigationUtils.getMinimumValidPageIndex(a), a.navigation.gotoPage(ActiveText.NavigationUtils.pageIndexToPageNumber(a, b), !0)
    }

    function g() {
        return a && a.utils ? ActiveText.NavigationUtils.pageIndexToPageNumber(a, h) : h
    }

    var h = 0, i = {};
    return d(), {init: e, getCurrentPageNumber: g, setCurrentIndex: c, getCurrentIndex: b}
}, ActiveText.Utils = function (a) {
    "use strict";
    function b() {
        return a && a.options && a.options.defaults && a.options.defaults.wmode ? "fullscreen" === a.options.defaults.wmode : !1
    }

    function c() {
        parent.window.$(".ui-dialog-titlebar-close").trigger("click")
    }

    function d(b) {
        for (var c, d = a.data.getFlatListOfNavigation(), e = 0; e < d.length; e++)if (parseInt(d[e].id, 10) === parseInt(b, 10)) {
            c = e;
            break
        }
        return c
    }

    function e() {
        return ActiveText.ViewUtils.getUnscaledDPSTargetDimensions(a).dpswidth
    }

    function f(b) {
        return Boolean(1 === Math.abs(b % 2)) === !a.settings.getFirstPageIsLeft() ? "leftPage" : "rightPage"
    }

    function g(b) {
        var c, d = a.data.getFlatListOfNavigation();
        try {
            c = d[b].src
        } catch (e) {
            c = "about:blank"
        }
        return c
    }

    return{isFullWindowScalingMode: b, getPageNumberFromId: d, getReaderDPSWidth: e, updatePageClassNameFor: f, getSourcePathForIndex: g, closeWidgetTrigger: c}
}, ActiveText.namespace("ActiveText.SkinUtils"), ActiveText.SkinUtils = function () {
    "use strict";
    function a(a) {
        var b = "/";
        if (a && a.options && "string" == typeof a.options.resourcesPath)b = a.options.resourcesPath; else switch (window.location.protocol) {
            case"http:":
            case"https:":
                b = "/static/";
                break;
            case"file:":
                b = ""
        }
        return b
    }

    function b() {
        var a = "/";
        switch (window.location.protocol) {
            case"http:":
            case"https:":
                a = window.location.protocol + "//activetext-storage.s3.amazonaws.com/lib/";
                break;
            case"file:":
                a = ""
        }
        return a
    }

    return{getPathToResources: a, getPathToGlobalResource: b}
}(), ActiveText.ResizeUtils = function (a) {
    "use strict";
    function b(b, c) {
        return function () {
            for (var d, e = b.model, f = (b.view, e.getCurrentIndex()), g = a.ViewUtils.getScaleValue(b), h = a.ViewUtils.getUnscaledDPSTargetDimensions(b), i = b.view.model.getMagnificationValue(), j = h.dpswidth / 2, k = h.height, l = 0, m = 2; m > l; l++)d = a.LayerUtils.getOverlayForIndexByKey(b, f + l, c), d && (d.width(j * g).height(k * g), a.ViewUtils.scaleHTMLElement(b, d, 1 / g * i))
        }
    }

    function c(b, c) {
        return function () {
            for (var d, e = (b.view, b.model), f = e.getCurrentIndex(), g = a.ViewUtils.getUnscaledDPSTargetDimensions(b), h = g.dpswidth / 2, i = g.height, j = 0, k = 2; k > j; j++)d = a.LayerUtils.getOverlayForIndexByKey(b, f + j, c), d && d.width(h).height(i)
        }
    }

    return{getProportionalResizeBehaviour: b, getNonProportionalResizeBehaviour: c}
}(ActiveText), ActiveText.BrowserUtils = function () {
    "use strict";
    function a() {
        return $.browser.msie && parseInt($.browser.version, 10) < 9
    }

    function b() {
        var a = !1;
        return $.browser.msie && (a = parseInt($.browser.version, 10)), a
    }

    function c() {
        return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)
    }

    function d() {
        var a = !1;
        if (/iP(hone|od|ad)/.test(navigator.platform)) {
            var b = navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);
            a = [parseInt(b[1], 10), parseInt(b[2], 10), parseInt(b[3] || 0, 10)]
        }
        return a
    }

    return{isOldVersionOfInternetExplorer: a(), isMobileDevice: c(), IEVersion: b(), iOSversion: d()}
}(), ActiveText.ExtensionUtils = function () {
    "use strict";
    function a(a, b) {
        var c, d;
        if (a && a.extensions && $.isArray(a.extensions))for (var e = 0, f = a.extensions.length; f > e; e++)d = a.extensions[e], d.key === b && (c = d);
        return c
    }

    function b(a) {
        var b = ActiveText.ExtensionUtils.getExtensionByKey(a, "audioplayback");
        return b || (b = new ActiveText.AudioPlayback, b.init(a), a.extensions || (a.extensions = []), a.extensions.push(b)), b
    }

    return{getExtensionByKey: a, getAudioPlayback: b}
}(), ActiveText.namespace("ActiveText.NavigationUtils"), ActiveText.NavigationUtils = function () {
    "use strict";
    function a(a) {
        return ActiveText.ViewUtils.isSinglePageView(a) ? 0 : a.settings.getFirstPageIsLeft() ? 0 : -1
    }

    function b(a) {
        var b = a.data.getFlatListOfNavigation();
        return b.length - 1
    }

    function c(a, b) {
        return a.settings.getNumberingOffset() + parseInt(b, 10)
    }

    function d(a, b) {
        return parseInt(b, 10) - a.settings.getNumberingOffset()
    }

    function e(c, d) {
        var e = a(c), f = b(c), g = e > d, h = d > f;
        return!(g || h)
    }

    function f(c, d) {
        var f = c.model.getCurrentIndex(), g = a(c), h = b(c), i = parseInt(d, 10);
        return isNaN(i) ? f : e(c, i) ? i : d > h ? b(c) : g > d ? a(c) : f
    }

    function g(a, b) {
        return b = f(a, b), i(a, b) ? b : b - 1
    }

    function h(a, b) {
        var c = d(a, b);
        return i(a, c) ? b + 1 : b - 1
    }

    function i(a, b) {
        return a.settings.getFirstPageIsLeft() ? b % 2 === 0 : 1 === Math.abs(b % 2)
    }

    return{isLeftPage: i, isValidPageIndex: e, getMinimumValidPageIndex: a, getMaximumValidPageIndex: b, pageIndexToPageNumber: c, pageNumberToPageIndex: d, calculateLeftmostPageIndexFromIndex: g, getNearestValidPageFromIndex: f, getSiblingPageNumberForPage: h}
}(), ActiveText.LoaderUtils = function () {
    "use strict";
    function a(a) {
        return a.replace(/([0-9]+)pt/g, function (a, b) {
            return Math.round(96 * parseInt(b, 10) / 72) + "px"
        })
    }

    function b(a) {
        return-1 === a.indexOf("about:blank")
    }

    return{correctPointsToPixels: a, sourceURLIsValid: b}
}(), ActiveText.namespace("ActiveText.FormattingUtils"), ActiveText.FormattingUtils = function (a) {
    "use strict";
    function b(b, e, f, g) {
        var h, i = a.NavigationUtils.pageIndexToPageNumber(b, a.NavigationUtils.getMinimumValidPageIndex(b)), j = a.NavigationUtils.pageIndexToPageNumber(b, a.NavigationUtils.getMaximumValidPageIndex(b)), k = b.settings.getFirstPageIsLeft(), l = a.ViewUtils.isSinglePageView(b), m = a.NavigationUtils.isLeftPage(b, a.NavigationUtils.pageNumberToPageIndex(b, g)), n = l || g === j && m || g === i && !k;
        return h = n ? c(b, e, g) : d(b, f, g)
    }

    function c(b, c, d) {
        var e;
        if (-1 !== c.indexOf("%%title%%")) {
            var f = b.data.getFlatListOfNavigation(), g = a.NavigationUtils.pageNumberToPageIndex(b, d), h = g >= 0 ? g : 0, i = f[h];
            e = i ? c.replace("%%title%%", i.title) : c.replace("%%title%%", "")
        } else {
            var j = b.settings.getFirstPageIsLeft(), k = a.ViewUtils.isSinglePageView(b), l = a.NavigationUtils.pageIndexToPageNumber(b, a.NavigationUtils.getMinimumValidPageIndex(b)), m = a.NavigationUtils.pageIndexToPageNumber(b, a.NavigationUtils.getMaximumValidPageIndex(b));
            d !== l || j || k || (d += 1), e = c.replace("%%1", d).replace("%%2", m)
        }
        return e
    }

    function d(b, c, d) {
        var e;
        if (-1 !== c.indexOf("%%title%%")) {
            var f = b.data.getFlatListOfNavigation(), g = a.NavigationUtils.pageNumberToPageIndex(b, d), h = g >= 0 ? g : 0, i = f[h], j = f[h + 1];
            e = i && j ? c.replace("%%title%%", i.title).replace("%%title2%%", j.title) : c.replace("%%title%%", "").replace("%%title2%%", "")
        } else {
            var k = a.NavigationUtils.pageIndexToPageNumber(b, a.NavigationUtils.getMaximumValidPageIndex(b));
            e = c.replace("%%1", d).replace("%%2", d + 1).replace("%%3", k)
        }
        return e
    }

    return{formatPageLabel: b, formatSinglePageLabel: c, formatMultiPageLabel: d}
}(ActiveText), ActiveText.ViewUtils = function () {
    "use strict";
    function a(a) {
        return Boolean(2 === a.view.model.getDisplayedPages())
    }

    function b(a) {
        return Boolean(1 === a.view.model.getDisplayedPages())
    }

    function c(a) {
        return"fth" === a.view.model.getScaleMode()
    }

    function d(a) {
        return"ftw" === a.view.model.getScaleMode()
    }

    function e(a) {
        return a.view.model.returnCardMode()
    }

    function f(a, b) {
        function c(a, b) {
            if ($.browser.msie) {
                var c = parseInt($.browser.version, 10);
                a.css(7 >= c ? {filter: "alpha(opacity=" + b + ")"} : {MsFilter: '"progid:DXImageTransform.Microsoft.Alpha(Opacity=' + b + ')"'})
            }
        }

        a.css({opacity: b}), c(a, b)
    }

    function g(a) {
        var c, d = a.view.model.getPageDimensions();
        c = d.height / (d.width * a.view.model.getDisplayedPages());
        var e, f, g = 1 >= c, h = z(a), i = h.width, j = h.height, k = c, l = i * k, m = j / k, n = l > j, o = l > j, p = !1;
        if ("ftw" === a.view.model.getScaleMode() ? (f = Math.floor(l), e = Math.floor(i), p = !0) : g ? n ? (f = Math.floor(j), e = Math.floor(m)) : (f = Math.floor(l), e = Math.floor(i), p = !0) : n ? (f = Math.floor(j), e = Math.floor(m)) : o ? (f = Math.floor(j), e = Math.floor(m)) : (f = Math.floor(l), e = Math.floor(i), p = !0), !p) {
            var q = a.view.model.getMagnificationValue(), r = 1 * q;
            e += r
        }
        var s = 0, t = a.view.getEdgeFactory();
        !a.behaviours.allowOverlappingButtons() && t && "number" == typeof t.minimumWidth && (s = 2 * t.minimumWidth), (p || s > i - e) && (e = i - s, f = (i - s) * k);
        var u = b(a) ? 1 : 0;
        return{width: e, height: f, dpswidth: e + e * u, dpsheight: f, availWidth: i, availHeight: j}
    }

    function h(a) {
        var b = a.view.model.getPageDimensions(), c = g(a), d = b.width / (c.width + 1), e = b.height / (c.height + 1), f = e > d ? e : d;
        return f
    }

    function i(a) {
        for (var b = [], c = a.model.getCurrentIndex(), d = 0, e = a.view.model.getDisplayedPages(); e > d; d++)b.push(c + d);
        return b
    }

    function j(a, b) {
        return void 0 !== a.view.getIFrames()[b]
    }

    function k(a, b) {
        return!j(a, b)
    }

    function l(a) {
        return a > -1
    }

    function m(a, b) {
        return b <= ActiveText.NavigationUtils.getMaximumValidPageIndex(a)
    }

    function n(a, b) {
        return l(b) && m(a, b)
    }

    function o(a, b) {
        return n(a, b) && k(a, b) && ActiveText.ViewFactory.createFrameForPage(a, b), a.view.getIFrames()[b]
    }

    function p(a, b) {
        if (void 0 === b) {
            var c = a.model.getCurrentIndex();
            b = ActiveText.NavigationUtils.pageIndexToPageNumber(a, c)
        }
        var d = ActiveText.NavigationUtils.pageNumberToPageIndex(a, b);
        return"rightPage" === a.utils.updatePageClassNameFor(d)
    }

    function q(a) {
        var b = a.model, c = b.getCurrentIndex(), d = o(a, c);
        return d ? d.parent() : void 0
    }

    function r(a, b) {
        var c = o(a, b);
        return c ? c.parent() : void 0
    }

    function s(a) {
        var b = a.model, c = b.getCurrentIndex() - 2;
        if (c >= ActiveText.NavigationUtils.getMinimumValidPageIndex(a)) {
            var d = o(a, c);
            return d ? d.parent() : void 0
        }
    }

    function t(a) {
        var b = a.model, c = b.getCurrentIndex() + 2, d = o(a, c);
        return d ? d.parent() : void 0
    }

    function u(a, b) {
        return"leftPage" === a.utils.updatePageClassNameFor(b)
    }

    function v(a, b, c) {
        var d = b, e = c;
        u(a, d) || (d -= 1), u(a, e) || (e -= 1);
        var f = Boolean(e === d);
        return f
    }

    function w(a, b) {
        var c, d = o(a, b);
        return d && (c = d.parent()), c
    }

    function x(a, b, c) {
        if (c = Math.ceil(1e3 * c) / 1e3, Modernizr.csstransforms)b.css({transform: "scale(" + c + ")", transformOriginX: 0, transformOriginY: 0, transformOrigin: "0 0"}); else {
            var d = "progid:DXImageTransform.Microsoft.Matrix(M11=" + c + ", M12=0.000000, M21=0.000000, M22=" + c + ", sizingMethod='auto expand')", e = {filter: d, "-ms-filter": '"' + d + '"'};
            b.css(e)
        }
    }

    function y(a) {
        var b;
        return b = void 0 !== a.options.containerCoordinates ? a.options.containerCoordinates : {top: 0, left: 0, bottom: 0, right: 0}
    }

    function z(a) {
        var b, c, d = y(a), e = d.top + d.bottom, f = d.left + d.right, g = a.utils.isFullWindowScalingMode();
        return g ? (b = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, c = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight) : (c = C(a), b = D(a)), c -= e, b -= f, {width: b, height: c}
    }

    function A() {
        E = void 0, G = void 0, F = void 0, H = void 0
    }

    function B(a) {
        for (var b = $(a.options.containerElement).find("div.dps-container").find(".leftPage, .rightPage"), c = ActiveText.NavigationUtils.getMinimumValidPageIndex(a), d = b.length - 1 - c, e = c; d > e; e++)o(a, e)
    }

    function C(a) {
        return F && a.utils.isFullWindowScalingMode() || (F = $(a.options.containerElement).height()), F
    }

    function D(a) {
        return H && a.utils.isFullWindowScalingMode() || (H = $(a.options.containerElement).width()), H
    }

    var E, F, G, H;
    return{getNextReader: t, getPrevReader: s, getCurrentReader: q, getReaderForPage: r, getFrameForPageByIndex: o, isTheRightHandPage: p, getDPSByFrameIndex: w, pagesArePartOfTheSameDPS: v, isLeftPage: u, scaleHTMLElement: x, updateAllClassNamesAndResizePages: B, invalidateSizeCaches: A, getContainerCoordinates: y, isDoublePageView: a, isSinglePageView: b, isFitToHeightView: c, isFitToWidthView: d, setOpacityValue: f, getUnscaledDPSTargetDimensions: g, getScaleValue: h, getVisiblePages: i, isCardMode: e}
}(), ActiveText.namespace("ActiveText.ColourUtils"), ActiveText.ColourUtils = function () {
    "use strict";
    function a(a, b) {
        var c, d;
        if ("string" != typeof a || !/#?[0-9A-Fa-f]{6}|[0-9A-Fa-f]{3}/.test(a))return!1;
        if (a = a.replace("#", ""), 6 === a.length)c = a.match(/(.{2})/g); else {
            if (3 !== a.length)return!1;
            c = a.match(/(.{1})/g)
        }
        for (var e = 3; e--;)d = c[e], 1 === d.length && (d += d), c[e] = parseInt(d, 16);
        return"undefined" == typeof b ? "rgb(" + c.join(", ") + ")" : "rgba(" + c.join(", ") + ", " + b + ")"
    }

    function b(a) {
        function b(a) {
            return("0" + parseInt(a, 10).toString(16)).slice(-2).toUpperCase()
        }

        var c = a.toString().match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);
        return c && $.isArray(c) && c.length > 3 ? "#" + b(c[1]) + b(c[2]) + b(c[3]) : !1
    }

    return{convertHexToRGB: a, convertRGBToHex: b}
}();
var convertHexToRGB = function () {
    "use strict";
    return function (a, b) {
        for (var c = a.replace("#", "").match(/(.{2})/g), d = 3; d--;)c[d] = parseInt(c[d], 16);
        return"undefined" == typeof b ? "rgb(" + c.join(", ") + ")" : "rgba(" + c.join(", ") + ", " + b + ")"
    }
}();
ActiveText.CSSUtils = function () {
    "use strict";
    function a(a, c) {
        if (void 0 !== b[c] && (b[c].parentNode.removeChild(b[c]), b[c] = void 0), void 0 === c || void 0 === b[c]) {
            var d = document.createElement("style");
            d.type = "text/css", d.styleSheet ? d.styleSheet.cssText = a : d.appendChild(document.createTextNode(a)), document.getElementsByTagName("head")[0].appendChild(d), void 0 !== c && (d.setAttribute("data-css-reference", c), b[c.toString()] = d)
        }
    }

    var b = {};
    return{embedCSS: a}
}(), ActiveText.namespace("ActiveText.DataUtils"), ActiveText.DataUtils = function () {
    "use strict";
    function a(a) {
        if (a) {
            var b = -1 !== a.indexOf(";");
            b && (a = a.split("&").join("|amp|").split(";").join("&"));
            var c = a.split("?");
            a = c.pop();
            for (var d, e = /([^&=]+)=?([^&]*)/g, f = {}; d = e.exec(a);) {
                var g = d[1], h = d[2];
                h = h.split("|amp|").join("&"), "[]" === g.substring(g.length - 2) ? (g = g.substring(0, g.length - 2), (f[g] || (f[g] = [])).push(h)) : f[g] = h
            }
            return f
        }
        return{}
    }

    function b(a, b) {
        var c = a.loader.getDataProvider().getPathToPages();
        return void 0 !== c ? c + b : b
    }

    function c(a, c) {
        var d = b(a, c);
        return d = d.split("//").join("/").split("http:/").join("http://").split("https:/").join("https://")
    }

    return{parseURI: a, correctURLPath: c}
}(), ActiveText.CloseDialog = function () {
    "use strict";
    $(".ui-dialog").find(".ui-dialog-titlebar-close").trigger("click")
}, ActiveText.Theme = function (a) {
    "use strict";
    function b(a) {
        return-1 !== a.indexOf("#")
    }

    function c(a, c) {
        var d = a, e = $("html").hasClass("rgba");
        return b(a) && e && (d = ActiveText.ColourUtils.convertHexToRGB(a, c)), d
    }

    function d(a) {
        var b = g("pageBackgroundColor", w);
        return c(b, a)
    }

    function e(a) {
        var b = g("backgroundColor", B);
        return c(b, a)
    }

    function f(a) {
        var b = g("color", y);
        return c(b, a)
    }

    function g(b, c) {
        var d = c;
        return a && a.options && a.options.scheme && a.options.scheme[b] && (d = a.options.scheme[b]), d
    }

    function h(a) {
        var b = g("disabledColor", x);
        return c(b, a)
    }

    function i(a) {
        var b = g("controlBackgroundColor", A);
        return c(b, a)
    }

    function j(a) {
        var b = g("popupBackgroundColor", z);
        return c(b, a)
    }

    function k(a) {
        var b = g("controlOutlineColor", A);
        return c(b, a)
    }

    function l(a) {
        var b = g("textColor", A);
        return c(b, a)
    }

    function m(a) {
        var b = g("controlColor", z);
        return c(b, a)
    }

    function n(a) {
        var b = g("altControlColor", z);
        return c(b, a)
    }

    function o(a) {
        var b = g("controlHoverColor", C);
        return c(b, a)
    }

    function p(a) {
        var b = g("altControlHoverColor", C);
        return c(b, a)
    }

    function q(a) {
        var b = g("widgetBackgroundColour", D);
        return c(b, a)
    }

    function r(a) {
        var b = g("widgetBorderColour", E);
        return c(b, a)
    }

    function s(a) {
        var b = g("widgetCloseBackgroundColour", F);
        return c(b, a)
    }

    function t(a) {
        var b = g("widgetCloseBorderColour", G);
        return c(b, a)
    }

    function u(a) {
        var b = g("widgetCloseHoverColour", H);
        return c(b, a)
    }

    function v(a) {
        var b = g("widgetTitleColour", I);
        return c(b, a)
    }

    var w = "#ffffff", x = "#e5e5e5", y = "#2699cf", z = "#ffffff", A = "#000000", B = "#eeeeee", C = "#2699cf", D = "#ffffff", E = "#363636", F = "#ffffff", G = "#000000", H = "#cf3616", I = "#000000";
    return{getBackgroundColor: e, getForegroundColor: f, getDisabledColor: h, getControlsBackgroundColor: i, getControlsForegroundColor: m, getControlsAltForegroundColor: n, getControlsForegroundHoverColor: o, getControlsAltForegroundHoverColor: p, getPageBackgroundColor: d, getControlsOutlineColor: k, getTextColor: l, getPopupBackgroundColor: j, getWidgetBackgroundColour: q, getWidgetBorderColour: r, getWidgetCloseBackgroundColour: s, getWidgetCloseBorderColour: t, getWidgetCloseHoverColour: u, getWidgetTitleColour: v}
}, ActiveText.Animators = ActiveText.Animators || {}, ActiveText.Animators.SlideAnimation = function (a) {
    "use strict";
    function b() {
        n = new ActiveText.Animators.SlideAnimation.Utils(a);
        var b = $(a);
        b.on(ActiveText.Commands.GO_TO_PAGE, l), b.one(ActiveText.Commands.INIT_WHITEBOARD, d), a.options && a.options.containerElement && $(a.options.containerElement).on("remove", c)
    }

    function c() {
        $(a.options.containerElement).off("remove", c), $(a).off(ActiveText.Commands.GO_TO_PAGE, l)
    }

    function d() {
        p = $("<div class='animate-container' style='position:relative'></div>"), o = a.view.getContainer(), p.appendTo(o)
    }

    function e(b) {
        var c = ActiveText.ViewUtils.getDPSByFrameIndex(a, b.fromPage), d = ActiveText.ViewUtils.getDPSByFrameIndex(a, b.toPage);
        c && c.stop(!0, !1), d && d.stop(!0, !1)
    }

    function f() {
        $(a).trigger(ActiveText.Commands.HIDE_LOADER)
    }

    function g(b) {
        $(a).trigger(ActiveText.Commands.LOAD_PAGES_AT_INDEX, [b.toPage]), $(a).off(ActiveText.Events.FRAME_CONTENT_LOADED, f).on(ActiveText.Events.FRAME_CONTENT_LOADED, f)
    }

    function h() {
        function b() {
            a.view.getAllReaders().not(f).hide().find(".leftPage, .rightPage").empty()
        }

        var c = ActiveText.ViewUtils.getCurrentReader(a), d = ActiveText.ViewUtils.getNextReader(a), e = ActiveText.ViewUtils.getPrevReader(a), f = $(d).add(c).add(e);
        f.css({display: "block"}), requestAnimationFrame(b)
    }

    function i(b) {
        var c = a.utils.getReaderDPSWidth(), d = n.calculateInitialAnimationPositions(c, b.fromPage, b.toPage), e = n.calculateFinalAnimationPositions(c, b.fromPage, b.toPage), f = ActiveText.ViewUtils.getReaderForPage(a, b.fromPage), g = ActiveText.ViewUtils.getCurrentReader(a), h = ActiveText.ViewUtils.getNextReader(a), i = ActiveText.ViewUtils.getPrevReader(a), j = a.model.getCurrentIndex();
        b.fromPage < j - 2 && (i = f), b.fromPage > j + 2 && (h = f);
        var k, l = ActiveText.ViewUtils.isSinglePageView(a), m = !ActiveText.NavigationUtils.isLeftPage(a, b.toPage);
        g && (k = e.current.left, l && m && (k = 0), g.css("left", k).show()), h && (k = e.next.left, l && m && (k = 0), h.css("left", k).show()), i && (k = e.previous.left, l && m && (k = 0), i.css("left", k).show());
        var q = $(g).add(h).add(i);
        q.css({display: "block"});
        var s = p.children();
        if (s.not(q).appendTo(o), q.not(s).appendTo(p), p.stop(!0, !1), 0 === b.duration)p.animate(e.current, {duration: 0}); else {
            var t = p.css("left");
            d.current.left += parseInt(t, 10), p.animate(d.current, {duration: 0})
        }
        r = !1
    }

    function j(b, c) {
        function d() {
            p && (p.stop(!0, !1), p.animate(i.current, {duration: 0}), r = !1, ActiveText.ViewUtils.isFitToWidthView(a) || g.css({overflow: "hidden"}))
        }

        var e = ActiveText.ViewUtils.getNextReader(a), f = ActiveText.ViewUtils.getPrevReader(a), g = a.view.getContainer().parent(), h = a.utils.getReaderDPSWidth(), i = n.calculateFinalAnimationPositions(h, b.fromPage, b.toPage);
        e && e.hide(), f && f.hide(), c ? d() : requestAnimationFrame(d)
    }

    function k(b) {
        function c() {
            r = !1, $(a).trigger(ActiveText.Events.ANIMATE_PAGE_END), j(b), $(a).trigger(ActiveText.Events.RESIZE)
        }

        var d = n.calculateFinalAnimationPositions(a.utils.getReaderDPSWidth(), b.fromPage, b.toPage), e = "number" == typeof b.duration ? b.duration : q;
        p.stop(!0, !0).animate(d.current, {duration: e, easing: "easeOutExpo", complete: c, queue: !1}), r = !0
    }

    function l(b, c) {
        function d() {
            e(c), g(c), h(c), i(c), n.shouldAnimateBetweenPages(c) ? requestAnimationFrame(f) : j(c)
        }

        function f() {
            $(a).trigger(ActiveText.Events.ANIMATE_PAGE_START), k(c)
        }

        a.view.getContainer().parent().css({overflow: "hidden"}), requestAnimationFrame(d), $(a).trigger(ActiveText.Commands.SHOW_LOADER)
    }

    function m() {
        if (!r) {
            var b = a.model.getCurrentIndex();
            j({toPage: b, fromPage: b, duration: 0}, !0)
        }
    }

    var n, o, p, q = 1e3, r = !1;
    return{register: b, fixPagePositions: m}
}, ActiveText.namespace("ActiveText.Animators.SlideAnimation.Utils"), ActiveText.Animators.SlideAnimation.Utils = function (a) {
    "use strict";
    function b(a, b, c) {
        var d = f();
        return"left" === a ? d.current.left = c ? 0 : b / 2 : "right" === a && (d.current.left = c ? -b / 2 : -b), d.previous.left = d.current.left - b, d.next.left = d.current.left + b, d
    }

    function c(a, b) {
        var c = {current: {left: 0}, next: {left: 0}, previous: {left: 0}};
        return"left" === a ? (c.current.left = b, c.next.left = 2 * b, c.previous.left = 0) : "right" === a && (c.current.left = -b, c.next.left = 0, c.previous.left = 2 * -b), c
    }

    function d(d, f, g) {
        var h, i = e(a, f, g), j = ActiveText.ViewUtils.isSinglePageView(a);
        if (j) {
            var k = ActiveText.ViewUtils.pagesArePartOfTheSameDPS(a, f, g);
            h = b(i, d, k, g)
        } else h = c(i, d);
        return h
    }

    function e(a, b, c) {
        return b === c ? "none" : c > b ? "left" : "right"
    }

    function f() {
        return{current: {left: 0}, next: {left: 0}, previous: {left: 0}}
    }

    function g(b, c, d) {
        function e() {
            i.current.left = 0
        }

        function g() {
            i.current.left = -b / 2
        }

        var h = ActiveText.NavigationUtils.isLeftPage(a, d), i = f();
        return h ? e() : g(), i.previous.left = i.current.left - 2 * b, i.next.left = i.current.left + 2 * b, i
    }

    function h(b, c, d) {
        var e = {current: {left: 0}, next: {left: b}, previous: {left: -b}}, f = ActiveText.ViewUtils.isSinglePageView(a);
        return f && (e = g(b, c, d)), e
    }

    function i(b) {
        var c = !0;
        a && a.options && void 0 !== a.options.allowAnimation && (c = a.options.allowAnimation);
        var d = $.browser.msie && $.browser.version < 10, e = Math.abs(b.fromPage - b.toPage) < 3, f = !1;
        try {
            f = ActiveText.ViewUtils.isSinglePageView(a)
        } catch (g) {
        }
        return!f && e && !d && c
    }

    return{calculateInitialAnimationPositions: d, calculateFinalAnimationPositions: h, shouldAnimateBetweenPages: i}
}, ActiveText.Behaviours = function (a) {
    "use strict";
    function b() {
        return!ActiveText.ViewUtils.isSinglePageView(a)
    }

    function c() {
        return"ftw" === a.view.model.getScaleMode() ? !1 : !(void 0 !== a.options.allowOverlap && "false" === a.options.allowOverlap.toString().toLowerCase())
    }

    function d() {
        var b = a && a.options && a.options.defaults ? a.options.defaults : {generatePageEdges: !0}, c = b.generatePageEdges !== !1;
        return c === !0
    }

    return{shouldAllowOverlappingContent: b, allowOverlappingButtons: c, shouldGeneratePageEdges: d}
}, ActiveText.Navigation = ActiveText.Navigation || {}, ActiveText.Navigation.Controller = function (a) {
    "use strict";
    function b(b, c, d) {
        var e;
        d && (e = 0), $(a).trigger(ActiveText.Commands.GO_TO_PAGE, {fromPage: b, toPage: c, duration: e})
    }

    function c(c, d) {
        var e = a.model.getCurrentIndex(), f = ActiveText.NavigationUtils.pageNumberToPageIndex(a, c), g = ActiveText.NavigationUtils.getNearestValidPageFromIndex(a, f), h = g;
        ActiveText.ViewUtils.isSinglePageView(a) || (h = ActiveText.NavigationUtils.calculateLeftmostPageIndexFromIndex(a, g));
        var i = a.model.setCurrentIndex(h);
        b(e, i, d)
    }

    function d() {
        return a.model.getCurrentIndex() - a.view.model.getDisplayedPages() >= ActiveText.NavigationUtils.getMinimumValidPageIndex(a)
    }

    function e() {
        var b = a.data.getFlatListOfNavigation();
        return a.model.getCurrentIndex() + a.view.model.getDisplayedPages() < b.length
    }

    function f() {
        var c = !1;
        if (e()) {
            var d = a.model.getCurrentIndex(), f = d + a.view.model.getDisplayedPages(), g = a.model.setCurrentIndex(f);
            b(d, g), c = !0
        }
        return c
    }

    function g() {
        var c = !1;
        if (d()) {
            var e = a.model.getCurrentIndex(), f = e - a.view.model.getDisplayedPages(), g = a.model.setCurrentIndex(f);
            b(e, g), c = !0
        }
        return c
    }

    return{canGoToPreviousPage: d, gotoPrevPage: g, canGoToNextPage: e, gotoNextPage: f, gotoPage: c}
}, ActiveText.ErrorMessages = function (a) {
    "use strict";
    function b(a, b) {
        $("#messages-placeholder").notify(b, {position: "bottom center", style: "base", autoHide: !0, clickToHide: !0, arrowShow: !1, showAnimation: "slideDown", gap: 8})
    }

    function c() {
        $(a).on(ActiveText.Commands.DISPLAY_ERROR, b)
    }

    function d() {
        e(), c(), $.notify.addStyle("base", {html: '<div role="alert" aria-live="assertive"><span data-notify-text/></div>', classes: {base: {color: "#ffffff", "white-space": "nowrap", "background-color": Modernizr.rgba ? "rgba(0,0,0,0.5)" : "#666", padding: "5px 8px 2px", "border-radius": "8px", border: "1px solid #000000"}}})
    }

    function e() {
        if (a && a.options && a.options.containerElement) {
            var b = a.options.containerElement, c = $('<div id="messages-placeholder"></div>').css({top: 0, left: 0, right: 0, height: 1, position: "absolute", zIndex: 1001});
            b.append(c)
        }
    }

    return{init: d}
}, ActiveText.View = function (a) {
    "use strict";
    function b() {
        u = new ActiveText.Animators.SlideAnimation(a), u.register()
    }

    function c() {
        function c() {
            $(a).trigger(ActiveText.Events.RESIZE)
        }

        function e() {
            $(a.options.containerElement).off("remove", e), $(window, window.top).off("resize", j), o = void 0, p = void 0
        }

        t = [];
        var g = $(a);
        g.one(ActiveText.Commands.INIT_WHITEBOARD, d), g.on(ActiveText.Commands.FRAME_CONTENT_ERROR, f);
        var h = new ActiveText.View.Controller(a);
        h.init(), b(), q = new ActiveText.View.Loader(a), r = new ActiveText.ZoomController(a), w = new ActiveText.Interaction.SwipeGesture(a);
        var i = new ActiveText.ErrorMessages(a);
        i.init();
        var j = _.debounce(c, 100);
        x.model = new ActiveText.View.Model(a), a.options && a.options.containerElement && ($(window, window.top).on("resize", j), $(a.options.containerElement).on("remove", e))
    }

    function d() {
        var b = i();
        if (b) {
            a.behaviours.shouldGeneratePageEdges() && (s = new ActiveText.MinimalPageEdgeFactory(a)), o = ActiveText.ViewFactory.initialiseWhiteboard(a, b), a.behaviours.shouldGeneratePageEdges() && g(), v = new ActiveText.View.Resize(a), v.init(o), v.register();
            var c = j();
            s && s.generateEdges(c), q.register(c), r.register(), a.options.containerElement.css({overflow: "hidden", transform: "translateZ(0)"}).addClass("activetext"), a.utils.isFullWindowScalingMode() ? (a.options.containerElement.css({position: "fixed", width: "100%", height: "100%"}), $("body").css("overflow", "hidden")) : a.options.containerElement.attr("role", "document"), o.on("remove", r.deregister), o.on("remove", q.deregister), o.on("remove", v.deregister), o.on("remove", u.deregister), g()
        }
        $(a).trigger(ActiveText.Commands.LOAD_RESOURCES)
    }

    function e() {
        return t
    }

    function f(b, c) {
        var d = c.index, e = ActiveText.ViewUtils.getFrameForPageByIndex(a, d);
        e && e.addClass("errorPage").css({background: a.theme.getBackgroundColor()})
    }

    function g() {
        var a = j();
        w.register(a), o.find(".leftEdge, .rightEdge").show()
    }

    function h() {
        var a = j();
        w.deregister(a), o.find(".leftEdge, .rightEdge").hide()
    }

    function i() {
        return a.options ? a.options.containerElement : void 0
    }

    function j() {
        return!p && i() && (p = i().find(".whiteboard")), p
    }

    function k() {
        var a = j();
        return a.find("div.dps-container")
    }

    function l() {
        var a = j();
        return a.find("div.dps-container > div > div").not(".iframe")
    }

    function m() {
        return u
    }

    function n() {
        return s
    }

    var o, p, q, r, s, t, u, v, w, x = {getAllReaders: k, init: c, getIFrames: e, getAnimator: m, getContainer: j, disableInteraction: h, enableInteraction: g, getOverlayElements: l, getEdgeFactory: n};
    return x
}, ActiveText.View.Model = function (a) {
    "use strict";
    function b() {
        var b = a && a.options && a.options.defaults ? a.options.defaults : v;
        for (var c in v)void 0 === b[c] && (b[c] = v[c]);
        var d = parseInt(b.pagesToDisplay, 10);
        (!isNaN(d) || 1 > d) && (s = d);
        var e = b.scaleMode;
        void 0 !== e && (r = e), void 0 === b.wmode && (b.wmode = v.wmode)
    }

    function c() {
        return void 0 !== q
    }

    function d() {
        return c() ? q : w
    }

    function e(a) {
        q = a
    }

    function f() {
        return p ? p : x
    }

    function g(b) {
        var c = void 0 === b || void 0 === p || b.width !== p.width || b.height !== p.height || b.aspectRatio !== p.aspectRatio;
        c && (p = b, $(a).trigger(ActiveText.Events.RESIZE))
    }

    function h() {
        return s
    }

    function i(a) {
        s = a
    }

    function j() {
        return t
    }

    function k(a) {
        t = a
    }

    function l() {
        return r
    }

    function m(b) {
        r !== b && (r = b, $(a).trigger(ActiveText.Events.CHANGE_SCALING_MODE, b))
    }

    function n(a) {
        u = a
    }

    function o() {
        return u
    }

    var p, q, r, s, t = 1, u = !1, v = {pagesToDisplay: 2, scaleMode: "fth", wmode: "window"}, w = {width: 621, height: 783}, x = {width: 600, height: 800, aspectRatio: .75};
    return b(), {getPageDimensions: f, setPageDimensions: g, setZoomAreaDimensions: e, getZoomAreaDimensions: d, getDisplayedPages: h, setDisplayedPages: i, setScaleMode: m, getScaleMode: l, getMagnificationValue: j, setMagnificationValue: k, setCardMode: n, returnCardMode: o}
}, ActiveText.View = ActiveText.View || {}, ActiveText.View.Resize = function (a) {
    "use strict";
    function b(b) {
        p = b, $(a.options.containerElement).on("remove", c)
    }

    function c() {
        $(a.options.containerElement).off("remove", c), $(window, window.top).off("orientationchange"), h(), p = void 0
    }

    function d() {
        g()
    }

    function e() {
        h()
    }

    function f() {
        o(), i()
    }

    function g() {
        $(a).on(ActiveText.Events.RESIZE, f), a.utils.isFullWindowScalingMode() && $(window, window.top).on("orientationchange", f), f()
    }

    function h() {
        $(a).off(ActiveText.Events.RESIZE, f), $(window, window.top).off("orientationchange", f)
    }

    function i() {
        "function" == typeof a.view.getAnimator().fixPagePositions && a.view.getAnimator().fixPagePositions(), a.utils.isFullWindowScalingMode() && setTimeout(function () {
            window.scrollTo(0, 1)
        }, 0)
    }

    function j(b, c, d, e) {
        var f, g, h = a.view.model.getMagnificationValue(), i = d.parent(), j = b.width * h, k = b.dpswidth * h, l = (b.dpsheight * h, b.height * h), m = a.view.getContainer(), n = e, o = Math.ceil(l * n), q = l, r = "zoom" !== a.view.model.getScaleMode(), s = 0 * h;
        r && p.width(j).height(l);
        var t = ActiveText.ViewUtils.isSinglePageView(a) && "ftw" === a.view.model.getScaleMode();
        m.height(l), p.width(j - 2 * s), t ? (m.width(j), p.height(b.availHeight), m.css({marginTop: 0}), p.css({overflowY: "hidden"})) : (m.width(k), m.css(a.behaviours.shouldAllowOverlappingContent() ? {overflowY: "visible", overflowX: "visible"} : {overflowY: "hidden", overflowX: "hidden"}), p.css({overflowY: "hidden", overflowX: "hidden"})), ActiveText.ViewUtils.isSinglePageView(a) ? (f = Math.ceil(j * n), g = j) : (f = Math.ceil(j * n) / 2, g = j / 2), c.height(l).width(k), i.width(g).height(q), c.children(":empty").width(j).height(l), r ? d.width(f).height(o) : d.width(g / (1 / e * h)).height(q / (1 / e * h));
        var u = a.utils.isFullWindowScalingMode();
        u && a.options.containerElement.css({minWidth: window.document.clientWidth, minHeight: window.document.clientHeight});
        var v = !1, w = ActiveText.ExtensionUtils.getExtensionByKey(a, "drawingtools");
        w && (v = w.active);
        var x = !r;
        (x && !v || t) && $(a).trigger(ActiveText.Commands.ENABLE_PAGE_DRAGGING)
    }

    function k(a) {
        a.css({padding: 0, left: "auto", marginTop: 0, marginBottom: 0})
    }

    function l(a, b, c) {
        var d = ActiveText.ViewUtils.getContainerCoordinates(a), e = (b.availHeight - b.height) / 2;
        c.css({top: e + d.top, marginRight: d.right, bottom: e + d.bottom, marginLeft: d.left})
    }

    function m(a) {
        a.css({margin: "0", marginLeft: "auto", marginRight: "auto"})
    }

    function n(b, c, d, e) {
        function f() {
            "zoom" !== a.view.model.getScaleMode() && p.height(b.height).width(b.width), c.height(b.height).width(b.width - 5)
        }

        function g() {
            l(a, b, p)
        }

        if (p) {
            var h = (b.availWidth - b.width) / 2;
            "ftw" === a.view.model.getScaleMode() ? (k(d), p.css({left: h, top: 0})) : (f(), "zoom" === a.view.model.getScaleMode() ? p.css({left: 0}) : (g(), m(e), p.css({left: h})));
            var i = ActiveText.ViewUtils.getScaleValue(a), n = e.find(".rightPage, .leftPage"), o = n.find("div.iframe"), q = a.view.model.getMagnificationValue();
            if (Modernizr.csstransforms)ActiveText.ViewUtils.scaleHTMLElement(a, o, 1 / i * q); else {
                var r = o.find("iframe");
                ActiveText.ViewUtils.scaleHTMLElement(a, r, 1 / i * q);
                var s = i;
                ActiveText.ViewUtils.isSinglePageView(a) && (s = 1 / i), o.find("div").css({width: 100 * s + "%", height: 100 * s + "%"})
            }
            j(b, e, o, i)
        }
    }

    function o() {
        function b() {
            n(c, d, $(a.options.containerElement), e)
        }

        var c = ActiveText.ViewUtils.getUnscaledDPSTargetDimensions(a), d = a.view.getContainer(), e = a.view.getAllReaders();
        requestAnimationFrame(b)
    }

    var p;
    return{init: b, register: d, deregister: e}
}, ActiveText.ViewFactory = function (a) {
    "use strict";
    function b(b, c) {
        var d, e = a.NavigationUtils.pageIndexToPageNumber(b, c), f = b.utils.updatePageClassNameFor(c);
        return d = $("<div></div>").css({"float": "left", height: "100%", position: "relative"}).addClass(f + " page" + c).attr("data-page", e)
    }

    function c(c, d) {
        var e = $("<div class='dps-container'></div>").css({margin: 0, height: "100%", width: "100%", position: "absolute", top: 0, display: "none", left: "100%"}), f = a.BrowserUtils.iOSversion[0];
        (!f || 7 > f) && e.css({transform: 7 > f ? "rotate(360deg)" : "translateZ(0)"});
        for (var g, h = c.view.getIFrames(), i = 0, j = i; 2 + i > j; j++)g = b(c, d + j), h[d + j] = g, g.appendTo(e), $(c).trigger(a.Events.FRAME_CREATED, [d + j]);
        var k = c.view.getContainer().find(".rightEdge");
        k.length > 0 ? e.insertBefore(k) : e.appendTo(c.view.getContainer())
    }

    function d(b, d) {
        var e = a.NavigationUtils.calculateLeftmostPageIndexFromIndex(b, d);
        c(b, e)
    }

    function e(a, b) {
        var c = a.theme.getPageBackgroundColor(), d = '<div class="whiteboard-container"><div class="whiteboard"></div></div>', e = $(d).css({position: "relative", backgroundColor: c, overflow: "hidden", display: "block"}).attr("role", "document");
        e.appendTo(b);
        var f = e.find(".whiteboard");
        return f.css({backgroundColor: c, position: "relative"}), e
    }

    function f(b, c, d) {
        var e = $('<div class="iframe"></div>').css({position: "absolute", background: "white"}), f = '<iframe src="' + c + '" id="iframe' + d + '" scrolling="no" class="content" title="Page Content" role="main" frameborder="0" height="100%" width="100%" aria-atomic="true" aria-live="polite" aria-describedby="iframe-content-' + d + '" seamless></iframe>', g = ($(f).css({position: "absolute", lineHeight: "normal", background: "white"}).appendTo(e), $('<a id="iframe-content-' + d + '" aria-hidden="true" href="' + c + '">Accessible Link to Page ' + a.NavigationUtils.pageIndexToPageNumber(b, d) + "</a>"));
        e.append(g);
        var h = $("<div style='position:absolute;top:0;bottom:0;left:0;right:0;background-color:rgba(0,0,0,0);'></div>");
        return $(e).append(h), e
    }

    return{createPageContentsWithURL: f, createFrameForPage: d, initialiseWhiteboard: e}
}(ActiveText), ActiveText.MinimalPageEdgeFactory = function (a) {
    "use strict";
    function b() {
        $(m).each(function (b, c) {
            var d = a.navigation.canGoToNextPage();
            d ? $(c).removeClass("disabled").attr("aria-disabled", !1) : $(c).addClass("disabled").attr("aria-disabled", !0)
        }), $(n).each(function (b, c) {
            var d = a.navigation.canGoToPreviousPage();
            d ? $(c).removeClass("disabled").attr("aria-disabled", !1) : $(c).addClass("disabled").attr("aria-disabled", !0)
        })
    }

    function c() {
        $(a).trigger(ActiveText.Events.UI_ELEMENT_CLICKED, {which: "rightedge"}), a.navigation.gotoNextPage(), b()
    }

    function d() {
        $(a).trigger(ActiveText.Events.UI_ELEMENT_CLICKED, {which: "leftedge"}), a.navigation.gotoPrevPage(), b()
    }

    function e() {
        ActiveText.UI && ActiveText.UI.FontInjection && !ActiveText.UI.FontInjection.hasBeenAdded() && ActiveText.UI.FontInjection.injectFontTag();
        var b = ActiveText.MinimalPageEdgeFactory.Style.getStyle(a);
        ActiveText.CSSUtils.embedCSS(b, a.options.containerElement.selector + "-minimal-page-edge")
    }

    function f() {
        var b = ActiveText.ViewUtils.getUnscaledDPSTargetDimensions(a), c = -(b.width - b.availWidth) / 2, d = $(i).add(j), e = $(i.find("i")).add(j.find("i")), f = 10;
        k > c ? (c = k, d.addClass("overlap")) : d.removeClass("overlap");
        var g = ActiveText.ViewUtils.getContainerCoordinates(a), h = ActiveText.ExtensionUtils.getExtensionByKey(a, "controls"), m = 0;
        h && (m = h.getBarHeight()), d.css({width: c, height: b.availHeight + g.top + (g.bottom - m)}), c > l && (f = (c - l) / 2, c = l), e.css({fontSize: c, lineHeight: Math.floor(.7 * c) + "px", marginTop: (b.availHeight - Math.floor(c) / 2) / 2, paddingLeft: f, paddingRight: f}), c === k && (i.width(c + 2 * f), j.width(c + 2 * f))
    }

    function g(g) {
        e(), g = g.parent().parent(), a.utils.isFullWindowScalingMode() || g.css({position: "relative"});
        var h = '<div class="minimal-edge leftEdge" role="button" tabindex="0" title="Previous Page" aria-label="Previous Page"><a role="presentation"><i class="icon-angle-left"></i></a></div>';
        i = $(h).css({left: 0, position: "absolute", top: 0, bottom: 0, zIndex: 1e3, textDecoration: "none"}), i.find("a").css({left: 0, right: 0, position: "absolute", top: 0, bottom: 0, textAlign: "center"}), i.find("i").css({display: "inline-block"}), n.push(i);
        var k = '<div class="minimal-edge rightEdge" role="button" tabindex="1" title="Next Page" aria-label="Next Page"><a role="presentation"><i class="icon-angle-right"></i></a></div>';
        j = $(k).css({right: 0, position: "absolute", top: 0, bottom: 0, zIndex: 1e3, textDecoration: "none"}), j.find("a").css({left: 0, right: 0, position: "absolute", top: 0, bottom: 0, textAlign: "center"}), j.find("i").css({display: "inline-block"}), m.push(j), a.navigation.canGoToNextPage() || j.addClass("disabled").attr("aria-disabled", !0), a.navigation.canGoToPreviousPage() || i.addClass("disabled").attr("aria-disabled", !0), f();
        var l = g.find(".whiteboard-container");
        i.insertAfter(l), j.insertAfter(l), j.click(c), i.click(d), $(a).one(ActiveText.Events.BOOK_STRUCTURE_LOADED, b), $(a).on(ActiveText.Commands.GO_TO_PAGE, b), $(a).on(ActiveText.Events.RESIZE, f)
    }

    function h() {
        i.remove(), j.remove(), m = [], n = [], $(a).off(ActiveText.Events.BOOK_STRUCTURE_LOADED, b), $(a).off(ActiveText.Commands.GO_TO_PAGE, b), $(a).off(ActiveText.Events.RESIZE, f)
    }

    var i, j, k = 44, l = 100, m = [], n = [];
    return{generateEdges: g, removeEdges: h, minimumWidth: 64}
}, ActiveText.namespace("ActiveText.MinimalPageEdgeFactory.Style"), ActiveText.MinimalPageEdgeFactory.Style = function () {
    "use strict";
    function a(a) {
        var b = a.theme.getControlsForegroundColor(), c = a.theme.getControlsAltForegroundColor(), d = a.theme.getPageBackgroundColor(.5), e = a.theme.getControlsForegroundHoverColor(), f = a.theme.getControlsAltForegroundHoverColor(), g = a.options.containerElement.selector + " ", h = !ActiveText.BrowserUtils.isMobileDevice;
        return g + ".minimal-edge," + g + ".minimal-edge a{text-decoration:none;color:" + c + ';-webkit-transition: all .3s;-moz-transition: all .3s;-ms-transition: all .3s;-o-transition: all .3s;transition: all .3s;-webkit-touch-callout: none;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;font-family: "Segoe UI", Tahoma, sans-serif;outline:none;}' + g + ".minimal-edge a," + g + ".minimal-edge a:link," + (h ? g + ".minimal-edge a:hover," : "") + g + ".minimal-edge a:active," + g + ".minimal-edge a:focus {background-color:transparent;text-decoration:none;}" + g + '.minimal-edge a i {font-style:normal;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);opacity:0.5;}' + g + ".minimal-edge.overlap," + g + ".minimal-edge.overlap a{color:" + b + ";}" + g + ".minimal-edge.disabled a," + (h ? ".minimal-edge.disabled a:hover," : "") + g + ".minimal-edge.disabled a:active," + g + ".minimal-edge.disabled a:focus{cursor:default;color:transparent}" + (h ? g + ".minimal-edge a:hover," : "") + g + ".minimal-edge a:active," + g + ".minimal-edge a:focus{color:" + e + ";background-color:" + d + ';cursor:pointer;-webkit-transition: all .3s;-moz-transition: all .3s;-ms-transition: all .3s;-o-transition: all .3s;transition: all .3s;-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";filter:alpha(opacity=50);}' + (h ? g + ".minimal-edge a:hover i," : "") + g + ".minimal-edge a:active i," + g + '.minimal-edge a:focus i{-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=100)";filter:alpha(opacity=100);opacity:1;}' + (h ? g + ".minimal-edge.overlap a:hover," : "") + g + ".minimal-edge.overlap a:active," + g + ".minimal-edge.overlap a:focus{color:" + f + ";}" + g + ".minimal-edge.disabled," + g + ".minimal-edge.disabled a:link," + (h ? g + ".minimal-edge.disabled a:hover," : "") + g + ".minimal-edge.disabled a:active," + g + ".minimal-edge.disabled a:focus{color:transparent;cursor:default;background-color:transparent;}"
    }

    return{getStyle: a}
}(), ActiveText.LayerUtils = function () {
    "use strict";
    function a(a, c, d) {
        var e = ActiveText.ViewUtils.getFrameForPageByIndex(a, c);
        return b(a, e, c, d)
    }

    function b(a, b, d, e) {
        var f;
        if (void 0 !== b) {
            var g = b.parent(), h = a.utils.updatePageClassNameFor(d), i = $(g.find("div." + h + " div." + e));
            f = 0 === i.length ? c(a, g, d, e) : i, f && f.css("top", 0)
        }
        return f
    }

    function c(a, b, c, d) {
        var e = function () {
            var a;
            return"drawing" === d ? a = n ? 30 : 0 : "annotations" === d ? a = n ? 20 : 40 : "standalone_hotspots" === d && (a = n ? 10 : 30), a
        }, f = $("<div/>").addClass(d + " page" + c).css({position: "absolute", "z-index": e, pointerEvents: "none"}), g = $(b.find("div." + a.utils.updatePageClassNameFor(c)));
        $(g).children("." + d).remove();
        var i = h(a, d);
        return i || f.hide(), f.appendTo(g), f
    }

    function d(a, b) {
        a.view.getOverlayElements().filter("." + b).hide()
    }

    function e(a, b) {
        a.view.getOverlayElements().filter("." + b).show()
    }

    function f(a, b, c) {
        b && "string" == typeof b && (g(a)[b] = Boolean(c)), Boolean(c) ? e(a, b) : d(a, b)
    }

    function g(a) {
        var b;
        return a && (void 0 === a.layerVisibility && (a.layerVisibility = {}), b = a.layerVisibility), b
    }

    function h(a, b) {
        var c = g(a);
        return Boolean(c && c[b] !== !1)
    }

    function i(a) {
        n = !0, m(), k(a, n)
    }

    function j(a) {
        n = !1, m(), k(a, n)
    }

    function k(a, b) {
        var c = a.view.model.getScaleMode();
        if ("ftw" === c)if (b) {
            var d = $(".whiteboard");
            try {
                a.view.getContainer().draggable("disable")
            } catch (e) {
                a.view.getContainer().data({uiDraggable: !1})
            }
            d.css("opacity", 1)
        } else try {
            a.view.getContainer().draggable("enable")
        } catch (e) {
            a.view.getContainer().data({uiDraggable: !0})
        }
    }

    function l() {
        return n
    }

    function m() {
        n === !0 ? ($(".drawing").css("z-index", "30"), $(".standalone_hotspots").css("z-index", "10"), $(".annotations").css("z-index", "20")) : n === !1 && ($(".drawing").css("z-index", "0"), $(".standalone_hotspots").css("z-index", "30"), $(".annotations").css("z-index", "40"))
    }

    var n = !1;
    return{bringLayerToFront: i, returnLayerToOriginalDepth: j, getOverlayForIndexByKey: a, setLayerVisibility: f, getLayerVisibility: h, disableDraggingWhenDrawing: k, returnDrawingToolsState: l}
}(), ActiveText.View = ActiveText.View || {}, ActiveText.View.Controller = function (a) {
    "use strict";
    function b() {
        var b = $(a);
        b.on(ActiveText.Commands.SWITCH_TO_DPS_VIEW, d), b.on(ActiveText.Commands.SWITCH_TO_SPS_VIEW, j), b.on(ActiveText.Commands.SWITCH_TO_SPS_FTW_VIEW, i), b.on(ActiveText.Commands.SWITCH_TO_ZOOM_MODE, e)
    }

    function c() {
        a.options.containerElement.find(".whiteboard-container,.whiteboard").animate({scrollTop: 0}, 0)
    }

    function d() {
        if (ActiveText.ViewUtils.isSinglePageView(a)) {
            var b = a.model.getCurrentPageNumber();
            a.view.model.setDisplayedPages(2), g(), a.navigation.gotoPage(b, !0), $(a).trigger(ActiveText.Events.VIEW_MODE_CHANGED), $(a).trigger(ActiveText.Events.RESIZE)
        }
    }

    function e() {
        a.options.containerElement.find(".whiteboard-container,.whiteboard").animate({top: 0, scrollTop: 0}, 0), a.view.model.setScaleMode("zoom"), $(a).trigger(ActiveText.Events.VIEW_MODE_CHANGED), $(a).trigger(ActiveText.Events.RESIZE)
    }

    function f() {
        a.view.model.setScaleMode("ftw")
    }

    function g() {
        "zoom" !== a.view.model.getScaleMode() && (c(), a.view.model.setScaleMode("fth"))
    }

    function h() {
        a.view.getContainer().parent().css({overflow: "hidden"});
        var b = Boolean(a.view.model.getDisplayedPages() > 1);
        if (b) {
            var c = a.model.getCurrentPageNumber();
            a.view.model.setDisplayedPages(1), a.navigation.gotoPage(c, !0)
        }
    }

    function i() {
        h(), f(), $(a).trigger(ActiveText.Events.VIEW_MODE_CHANGED), $(a).trigger(ActiveText.Events.RESIZE)
    }

    function j() {
        h(), g(), $(a).trigger(ActiveText.Events.VIEW_MODE_CHANGED), $(a).trigger(ActiveText.Events.RESIZE)
    }

    return{init: b}
}, ActiveText.View = ActiveText.View || {}, ActiveText.View.Loader = function (a) {
    "use strict";
    function b() {
        function b() {
            $(a.options.containerElement).off("remove", b), NProgress.configure({containerElement: void 0, showSpinner: !ActiveText.BrowserUtils.isOldVersionOfInternetExplorer}), $(document).off("ajaxStart", e).off("ajaxComplete", g)
        }

        (new ActiveText.View.Loader.Styles).init(a), NProgress.configure({containerElement: $("#messages-placeholder")}), $(document).ajaxStart(e).ajaxComplete(g), $(a).on(ActiveText.Commands.SHOW_LOADER, c), $(a).on(ActiveText.Commands.HIDE_LOADER, d), a.options && a.options.containerElement && $(a.options.containerElement).on("remove", b)
    }

    function c() {
        i = !0, e()
    }

    function d() {
        i = !1, g()
    }

    function e() {
        NProgress.start()
    }

    function f(b) {
        for (var c, d = 0, f = b.length; f > d; d++)c = b[d], $(a).on(c, e)
    }

    function g() {
        i ? NProgress.inc() : NProgress.done()
    }

    function h(b) {
        for (var c, d = 0, e = b.length; e > d; d++)c = b[d], $(a).on(c, g)
    }

    var i = !1;
    return{register: b, showOn: f, hideOn: h}
}, ActiveText.View.Loader.Styles = function () {
    "use strict";
    function a(a) {
        var b = a.theme.getBackgroundColor(), c = a.theme.getControlsForegroundHoverColor(), d = c;
        b === c && (d = a.theme.getControlsForegroundColor());
        var e = "#nprogress {pointer-events:none;-webkit-pointer-events:none;}#nprogress .bar {background:" + d + ";position:absolute;z-index:100;top:0;left:0;width:100%;height:4px;}/* Fancy blur effect */#nprogress .peg {display:block;position:absolute;right:0px;width:100px;height:100%;box-shadow:0 0 10px " + d + ", 0 0 5px " + d + ";opacity:1.0;-webkit-transform:rotate(3deg) translate(0px, -4px);-moz-transform:rotate(3deg) translate(0px, -4px);-ms-transform:rotate(3deg) translate(0px, -4px);-o-transform:rotate(3deg) translate(0px, -4px);transform:rotate(3deg) translate(0px, -4px);}/* Remove these to get rid of the spinner */#nprogress .spinner {display:block;position:absolute;z-index:100;top:15px;right:15px;}.leftPage .spinner {display:block;position:absolute;top:50%;left:25%;}.rightPage .spinner {display:block;position:absolute;top:50%;left:75%;}#nprogress .spinner-icon,.leftPage .spinner-icon,.rightPage .spinner-icon {width:14px;height:14px;border: solid 2px transparent;border-top-color: " + d + ";border-left-color:" + d + ";border-radius:10px;-webkit-animation:nprogress-spinner 400ms linear infinite;-moz-animation:nprogress-spinner 400ms linear infinite;-ms-animation:nprogress-spinner 400ms linear infinite;-o-animation:nprogress-spinner 400ms linear infinite;animation:nprogress-spinner 400ms linear infinite;}@-webkit-keyframes nprogress-spinner {0%   { -webkit-transform:rotate(0deg);   transform:rotate(0deg); }100% { -webkit-transform:rotate(360deg); transform:rotate(360deg); }}@-moz-keyframes nprogress-spinner {0%   { -moz-transform:rotate(0deg);   transform:rotate(0deg); }100% { -moz-transform:rotate(360deg); transform:rotate(360deg); }}@-o-keyframes nprogress-spinner {0%   { -o-transform:rotate(0deg);   transform:rotate(0deg); }100% { -o-transform:rotate(360deg); transform:rotate(360deg); }}@-ms-keyframes nprogress-spinner {0%   { -ms-transform:rotate(0deg);   transform:rotate(0deg); }100% { -ms-transform:rotate(360deg); transform:rotate(360deg); }}@keyframes nprogress-spinner {0%   { transform:rotate(0deg);   transform:rotate(0deg); }100% { transform:rotate(360deg); transform:rotate(360deg); }}";
        ActiveText.CSSUtils.embedCSS(e, "view-loader")
    }

    return{init: a}
}, ActiveText.ZoomController = function (a) {
    "use strict";
    function b() {
        var b = {}, c = ActiveText.ViewUtils.getVisiblePages(a);
        b.isSPS = ActiveText.ViewUtils.isSinglePageView(a), b.isRightMostPage = ActiveText.ViewUtils.isTheRightHandPage(a, c);
        {
            var f = ActiveText.ViewUtils.getUnscaledDPSTargetDimensions(a), g = a.view.model.getMagnificationValue(), h = (b.isSPS ? f.width : f.dpswidth) * g, i = (b.isSPS ? f.height : f.dpsheight) * g, j = a.view.model.getScaleMode();
            a.view.getContainer().find(".animate-container")
        }
        return"ftw" === j && (b.axis = "y"), a.options.fitToWidthPageDragging === !1 ? void d(!0) : (e(i, h, b), void ActiveText.LayerUtils.disableDraggingWhenDrawing(a, ActiveText.LayerUtils.returnDrawingToolsState()))
    }

    function c() {
        try {
            a.view.getContainer().draggable("destroy"), a.view.getContainer().parent().draggable("destroy")
        } catch (b) {
        }
    }

    function d() {
        var b = a.view.getContainer().parent();
        b.css({top: 0, height: "auto"})
    }

    function e(b, c, d) {
        var e = a.view.getContainer().parent(), f = e.find(".animate-container");
        $("#panContainer").length < 1 && e.parent().prepend('<div id="panContainer"></div>');
        var g = ActiveText.ViewUtils.getContainerCoordinates(a), h = e.parent().height() - (g.top + g.bottom), i = e.parent().width() - (g.left + g.right), j = g.left, k = b - h, l = c - i;
        0 > k && (k = 0), 0 > l && (j = -l / 2, l = 0, i = c), e.css("left", j), $("#panContainer").css({position: "absolute", height: 2 * k + h, width: 2 * l + i, marginTop: -k, marginLeft: -l, top: g.top, left: j}), d.isSPS && d.isRightMostPage ? setTimeout(function () {
            f.css("left", -c)
        }, 250) : f.css("left", 0);
        try {
            a.view.getContainer().draggable("destroy"), a.view.getContainer().parent().draggable("destroy")
        } catch (m) {
        }
        var n = {containment: "#panContainer"};
        ActiveText.BrowserUtils.isOldVersionOfInternetExplorer && (n.create = function () {
            var a, b, c = $("iframe ~ div");
            for (a = 0; a < c.length; a++)b = $(c[a]), ActiveText.ViewUtils.setOpacityValue(b, 0), b.css({backgroundColor: "#000"})
        });
        var o = $.extend({}, n, d);
        if ("ftw" === a.view.model.getScaleMode())try {
            a.view.getContainer().draggable(o)
        } catch (m) {
        } else try {
            a.view.getContainer().parent().draggable(o)
        } catch (m) {
        }
    }

    function f(b, c) {
        var e = a.view.getContainer(), f = a.view.getEdgeFactory(), i = ActiveText.ViewUtils.isDoublePageView(a);
        if (f && f.removeEdges && f.removeEdges(), "zoom" === c)$(a).trigger(i ? ActiveText.Commands.SWITCH_TO_DPS_VIEW : ActiveText.Commands.SWITCH_TO_SPS_VIEW), g(), e.css({cursor: "move"}), a.options.containerElement.css({overflow: "hidden"}), d(!1); else if ("ftw" === c)$("#panContainer").remove(), f && f.generateEdges && f.generateEdges(e), g(), a.options.containerElement.css({overflow: "hidden"}), $(a.view.getContainer()).css({cursor: "move"}); else {
            $("#panContainer").remove(), f && f.generateEdges && f.generateEdges(e), e.css({top: 0, left: 0, cursor: ""});
            try {
                ActiveText.BrowserUtils.isOldVersionOfInternetExplorer && $("iframe ~ div").css({background: "none"}), e.draggable("destroy"), e.parent().draggable("destroy")
            } catch (j) {
            }
            h()
        }
        $(a).trigger(ActiveText.Events.RESIZE)
    }

    function g() {
        a.view.disableInteraction()
    }

    function h() {
        a.view.enableInteraction()
    }

    function i() {
        $(a).on(ActiveText.Commands.ENABLE_PAGE_DRAGGING, b), $(a).on(ActiveText.Commands.DISABLE_PAGE_DRAGGING, c), $(a).on(ActiveText.Events.CHANGE_SCALING_MODE, f)
    }

    function j() {
        $(a).off(ActiveText.Commands.ENABLE_PAGE_DRAGGING, b), $(a).off(ActiveText.Commands.DISABLE_PAGE_DRAGGING, c), $(a).off(ActiveText.Events.CHANGE_SCALING_MODE, f)
    }

    return{register: i, deregister: j}
}, ActiveText.Notes = function () {
    "use strict";
    function a(a) {
        h = a, i = new ActiveText.NoteFactory(h), j = new ActiveText.NoteDataService(h), m.loadData = j.loadData, ActiveText.CSSUtils.embedCSS(ActiveText.Notes.Style);
        var c = ActiveText.ResizeUtils.getNonProportionalResizeBehaviour(h, l);
        $(j).on(ActiveText.Events.LOADED_NOTES_FOR_INDEX, b), $(h).on(ActiveText.Events.RESIZE, c), $(h.options.containerElement).on(ActiveText.Notes.Events.UPDATE, "." + l, d)
    }

    function b(a, b) {
        var c = b.data, d = b.index, f = ActiveText.LayerUtils.getOverlayForIndexByKey(h, d, l);
        f.empty();
        for (var g = 0, i = c.length; i > g; g++)"note" === c[g].type && 0 !== c[g].data.text.length && e(c[g].data, f)
    }

    function c() {
        function a(a, b) {
            c.push(i.getDataRepresentation(b))
        }

        for (var b, c, d = h.model.getCurrentIndex(), e = 0, f = h.view.model.getDisplayedPages(); f > e; e++)c = [], b = ActiveText.LayerUtils.getOverlayForIndexByKey(h, d + e, l), $(b).find(".note-container").each(a), j.setCacheForPage(d + e, c);
        return c
    }

    function d() {
        c()
    }

    function e(a, b) {
        var c = i.renderNoteFromData(a);
        b.append(c)
    }

    function f() {
        k = !1, ActiveText.LayerUtils.setLayerVisibility(h, l, !1)
    }

    function g() {
        k = !0, ActiveText.LayerUtils.setLayerVisibility(h, l, !0)
    }

    var h, i, j, k = !0, l = "annotations", m = {init: a, key: "notes", hideNotes: f, showNotes: g, loadData: void 0};
    return m
}, ActiveText.Notes.Events = {UPDATE: "update"}, ActiveText.NoteDataService = function (a) {
    "use strict";
    function b() {
        h = new ActiveText.NoteDataJStorageService(i), $(a).on(ActiveText.Events.FRAME_CONTENT_LOADED, f), $(a).on(ActiveText.Events.LOADED_OVERLAY_DATA, f)
    }

    function c(b, c) {
        "function" == typeof a.options.noteSetDataFunction ? a.options.noteSetDataFunction(a, b, c) : h.noteSetDataFunction(b, c)
    }

    function d(b) {
        "function" == typeof a.options.noteLoadDataFunction ? a.options.noteLoadDataFunction(a, b) : h.noteLoadDataFunction(b)
    }

    function e(a, b) {
        g(b) && $(i).trigger(ActiveText.Events.LOADED_NOTES_FOR_INDEX, {index: a, data: b})
    }

    function f(a, b) {
        var c = b.index;
        d(c)
    }

    function g(a) {
        return Boolean($.isArray(a) && a.length > 0)
    }

    var h, i = {setCacheForPage: c, loadData: e};
    return b(), i
}, ActiveText.NoteDataJStorageService = function (a) {
    "use strict";
    function b(b) {
        var d = c(b);
        a.loadData(b, d)
    }

    function c(a) {
        return $.jStorage.get(f + "-" + a + "-" + e, void 0)
    }

    function d(a, b) {
        return $.jStorage.set(f + "-" + a + "-" + e, b)
    }

    var e = 1, f = 1, g = {noteSetDataFunction: d, noteLoadDataFunction: b};
    return g
}, ActiveText.namespace("ActiveText.Notes.Style"), ActiveText.Notes.Style = 'div.annotations {position: relative;z-index: 1;overflow: visible;list-style: none;margin: 0;padding: 0;pointer-events: none}div.annotations div.note {position: relative;float: left;padding: 0;background: #ffcc00;background: -moz-linear-gradient(top,  #ffcc00 0%, #ffdf60 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffcc00), color-stop(100%,#ffdf60));background: -webkit-linear-gradient(top,  #ffcc00 0%,#ffdf60 100%);background: -o-linear-gradient(top,  #ffcc00 0%,#ffdf60 100%);background: -ms-linear-gradient(top,  #ffcc00 0%,#ffdf60 100%);background: linear-gradient(to bottom,  #ffcc00 0%,#ffdf60 100%);filter: progid:DXImageTransform.Microsoft.gradient( startColorstr="#ffcc00", endColorstr="#ffdf60",GradientType=0 );-webkit-box-shadow: 0 3px 4px rgba(0, 0, 0, 0.27), 0 0 40px rgba(0, 0, 0, 0.06) inset;-moz-box-shadow: 0 3px 4px rgba(0, 0, 0, 0.27), 0 0 40px rgba(0, 0, 0, 0.06) inset;box-shadow: 0 3px 4px rgba(0, 0, 0, 0.27), 0 0 40px rgba(0, 0, 0, 0.06) inset;}div.annotations div.note textarea {background: transparent;background: rgba(255,255,255,0.2);border: none;outline: none;resize: none;width:100%;height:100%;}div.annotations div.note div.close {position: absolute;top:0;right:0;padding:6px 8px 12px;line-height:8px;cursor:pointer;background:transparent}div.annotations div.note div.close a {color:black;text-decoration:none}div.annotations div.note div.close a:hover {color:red}div.annotations div.note div.content {word-wrap: break-word;position: absolute;top: 25px;bottom: 10px;left: 10px;right: 10px;overflow: hidden}div.annotations div.note:before,div.annotations div.note:after {content: "";z-index: -1;position: absolute;left: 10px;bottom: 10px;width: 70%;max-width: 300px;max-height: 100px;height: 55%;-webkit-box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);-moz-box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);-webkit-transform: skew(-15deg) rotate(-6deg);-moz-transform: skew(-15deg) rotate(-6deg);-ms-transform: skew(-15deg) rotate(-6deg);-o-transform: skew(-15deg) rotate(-6deg);transform: skew(-15deg) rotate(-6deg);}div.annotations div.note:after {left: auto;right: 10px;-webkit-transform: skew(15deg) rotate(6deg);-moz-transform: skew(15deg) rotate(6deg);-ms-transform: skew(15deg) rotate(6deg);-o-transform: skew(15deg) rotate(6deg);transform: skew(15deg) rotate(6deg);}.ui-resizable-e {cursor: e-resize;width: 7px;right: -5px;top: 0;height: 100%;}.ui-resizable-s {cursor: s-resize;height: 7px;width: 100%;bottom: -5px;left: 0;}.ui-resizable-se {cursor: se-resize;width: 12px;height: 12px;right: 1px;bottom: 1px;}.ui-resizable-handle {position: absolute;font-size: 0.1px;display: block;}.note-container {pointer-events:all}', ActiveText.NoteFactory = function (a) {
    "use strict";
    function b(b) {
        var c = $(b), d = c.find(".note"), e = d.width(), f = d.height(), g = c.get(0).style.top, h = c.get(0).style.left, i = ActiveText.ViewUtils.getUnscaledDPSTargetDimensions(a);
        return{type: "note", data: {point: [g, h], relativePoint: [parseInt(g, 10) / i.height, parseInt(h, 10) / i.width], id: c.data("id"), text: c.find(".content").text(), width: e, height: f}}
    }

    function c(b) {
        function c(a) {
            var b = $(a.target).parent().parent();
            return i(b), !1
        }

        function f(a) {
            var b = $(a.currentTarget);
            return i(b), !1
        }

        function g() {
            s.parent().trigger(ActiveText.Notes.Events.UPDATE)
        }

        function h(a) {
            s.parent().trigger(ActiveText.Notes.Events.UPDATE), a.stopImmediatePropagation()
        }

        function i(a) {
            a.data("edit", !1);
            var b = a.find(".content textarea").val();
            a.find(".content").html(b), a.find(".save-button").hide(), a.parent().trigger(ActiveText.Notes.Events.UPDATE)
        }

        function j(a) {
            a.data("edit", !0);
            var b = a.find(".content").text(), c = $('<textarea cols="12" rows="4"></textarea>');
            a.find(".content").html(c), a.find(".save-button").show(), c.blur(f), c.focus().val(b)
        }

        function k(a) {
            var b = $(a.currentTarget), c = b.data("edit") === !0;
            return c ? s.parent().trigger(ActiveText.Notes.Events.UPDATE) : j(b), !1
        }

        function l(a) {
            var b = $(a.target), c = b.parent().parent(), d = c.parent();
            c.remove(), d.trigger(ActiveText.Notes.Events.UPDATE)
        }

        function m(a) {
            p = !1, a.stopPropagation()
        }

        function n(a) {
            var b = $(a.target), d = "textarea, .content", e = 'a[role="button"], div.close', f = ".save-button", g = $(".iwbToolsPanel").is(":visible");
            p || g || (b.is(d) ? k(a) : b.is(e) ? l(a) : b.is(f) && c(a))
        }

        function o() {
            return $(".iwbToolsPanel").is(":visible") ? !1 : void(p = !0)
        }

        _.defaults(b, {width: d, height: e});
        var p, q = '<div class="note-container"><div class="note"><button class="save-button" style="display:none" role="button">Save</button><div class="hide"></div><div class="close"><a href="#" title="Delete Note" role="button" aria-label="Delete Note">x</a></div><div class="content"></div></div></div>';
        b.point = b.relativePoint || b.point;
        var r = ActiveText.ViewUtils.getUnscaledDPSTargetDimensions(a), s = $(q).data(b).css({top: r.height * b.point[0] + "px", left: r.width * b.point[1] + "px", width: b.width, height: b.height, position: "absolute"});
        return s.data("edit", !1).find(".content").text(b.text), s.on({mousedown: m, mouseup: n}).draggable({cursor: "move", stack: ".note-container", zIndex: 100, start: o, stop: g}).find(".note").css({width: "100%", height: "100%"}).resizable({minWidth: 50, minHeight: 50, stop: h}), s
    }

    var d = 100, e = 100;
    return $.fn.swipe.excludedElements += ",.note,.note-container", {renderNoteFromData: c, getDataRepresentation: b}
}, ActiveText.DrawingToolsController = function (a) {
    "use strict";
    function b(a) {
        var b = l[String(a)];
        return b || (d(a), b = l[String(a)]), b
    }

    function c(a, b) {
        l[String(a)] = b
    }

    function d(a) {
        c(a, {clickX: [], clickY: [], clickColor: [], clickTool: [], clickSize: [], clickDrag: []})
    }

    function e(a) {
        return b(a)
    }

    function f(a) {
        var b = e(a);
        return JSON.stringify(b)
    }

    function g(a, b) {
        var c = b.index, d = f(c);
        h(c, d)
    }

    function h(b, c) {
        "function" == typeof a.options.drawingToolsGetDataFunction ? a.options.drawingToolsGetDataFunction(a, b, c) : ActiveText.DrawingToolsJStorageExtension.drawingToolsGetDataFunction(a, b, c)
    }

    function i() {
        $(a).on(ActiveText.Events.RESIZE, k.resize), $(a).on(ActiveText.Commands.GO_TO_PAGE, k.loadDrawingsOnPageChange), $(k).on(ActiveText.DrawingTools.Events.DRAWING_DELETED, g), $(k).on(ActiveText.DrawingTools.Events.DRAWING_UPDATED, g);
        var b = ActiveText.ResizeUtils.getProportionalResizeBehaviour(a, "drawing");
        $(a).on(ActiveText.Events.RESIZE, b), $(a).on(ActiveText.Events.FRAME_CONTENT_LOADED, k.makeCanvasVisible), k.resize(), k.loadDrawingsOnPageChange(void 0, {toPage: a.model.getCurrentPageNumber()})
    }

    function j(b) {
        k = b, $(a).one(ActiveText.Events.BOOK_STRUCTURE_LOADED, i)
    }

    var k, l = {}, m = {init: j, initStateForIndex: d, getStateForPage: b, setStateForPage: c, exportCurrentDrawing: e};
    return m
}, ActiveText.DrawingTools = function () {
    "use strict";
    function a(a) {
        var b, c = ActiveText.LayerUtils.getOverlayForIndexByKey(y, a, "drawing");
        if (c) {
            var d = c.find("canvas").get(0);
            d && (b = d.getContext("2d"))
        }
        return b
    }

    function b(b) {
        var c = a(b);
        if (void 0 !== c) {
            var d = y.view.model.getPageDimensions();
            c.clearRect(0, 0, d.width, d.height)
        }
    }

    function c(a, c) {
        C.initStateForIndex(a), b(a), c !== !0 && $(E).trigger(ActiveText.DrawingTools.Events.DRAWING_DELETED, {index: a})
    }

    function d(c) {
        var d, e, f, g = a(c), h = C.getStateForPage(c);
        if (void 0 !== g && void 0 !== h) {
            b(c);
            var i = y.view.model.getPageDimensions();
            g.save(), g.fillStyle = ActiveText.ColourUtils.convertHexToRGB("#FFFFFF", 0), g.fillRect(0, 0, i.width, i.height), g.restore(), g.save(), g.beginPath();
            var j, k, l, m;
            for (e = 0, f = h.clickX.length; f > e; e++) {
                var n = h.clickColor[e], o = h.clickTool[e];
                if ("pointer" === o)return;
                l = h.clickX[e], m = h.clickY[e], void 0 !== j && void 0 !== k ? g.moveTo(j, k) : g.moveTo(l - 1, m - 1), g.lineTo(l, m), j = l, k = m, d = h.clickSize[e], "eraser" === o ? (g.globalCompositeOperation = "destination-out", g.strokeStyle = "white") : "pen" === o ? (g.globalCompositeOperation = "source-over", g.strokeStyle = n) : "highlighter" === o && (g.globalCompositeOperation = "source-over", g.strokeStyle = ActiveText.ColourUtils.convertHexToRGB(h.clickColor[e], .5)), g.lineCap = "round", g.lineJoin = "round", g.lineWidth = d;
                var p = void 0 !== h.clickTool[e + 1], q = o !== h.clickTool[e + 1], r = n !== h.clickColor[e + 1], s = h.clickDrag[e] !== h.clickDrag[e + 1], t = h.clickDrag[e] === !1 && h.clickDrag[e + 1] === !1, u = h.clickDrag[e] === !0, v = p && q || t || u && s || r;
                v && (j = void 0, k = void 0, g.stroke(), g.closePath(), g.beginPath())
            }
            g.stroke(), g.closePath(), g.restore(), g.globalAlpha = 1
        }
    }

    function e(a, b, c, d) {
        var e = 1 / y.view.model.getMagnificationValue(), f = C.getStateForPage(a), g = 1 / z.getScale(), h = b * g * e, i = c * g * e, j = A.curSize * g * e;
        f.clickX.push(h), f.clickY.push(i), f.clickTool.push(A.curTool), f.clickColor.push(A.curColor), f.clickSize.push(j), f.clickDrag.push(d)
    }

    function f(a) {
        $(E).trigger(ActiveText.DrawingTools.Events.DRAWING_UPDATED, {index: a})
    }

    function g(a) {
        E.active = !0, B.createUserEvents(), A.createUserEvents(), ActiveText.LayerUtils.bringLayerToFront(y, a, "drawing"), $(y).on(ActiveText.Events.CHANGE_SCALING_MODE, h)
    }

    function h(a, b) {
        ("zoom" === b || "ftw" === b) && $(y).trigger(ActiveText.Commands.DISABLE_PAGE_DRAGGING)
    }

    function i(a) {
        E.active = !1, B.destroyUserEvents(), A.destroyUserEvents(), D.css({userSelect: ""}).attr("unselectable", "");
        var b = ActiveText.LayerUtils.getOverlayForIndexByKey(y, a, "drawing");
        if (b) {
            var c = b.parent();
            c.css("cursor", ""), ActiveText.LayerUtils.returnLayerToOriginalDepth(y, a, "drawing")
        }
        ("zoom" === y.view.model.getScaleMode() || "ftw" === y.view.model.getScaleMode()) && $(y).trigger(ActiveText.Commands.ENABLE_PAGE_DRAGGING)
    }

    function j() {
        var a = y.view.model.getPageDimensions(), b = $(y.options.containerElement).find("canvas");
        $(b).attr({width: a.width, height: a.height});
        for (var c = ActiveText.ViewUtils.getVisiblePages(y), e = 0, f = c.length; f > e; e++)d(c[e])
    }

    function k(a, b) {
        C.setStateForPage(a, b)
    }

    function l(a, b) {
        c(a, !0), k(a, b), d(a)
    }

    function m(a, b) {
        $(y).trigger(ActiveText.DrawingTools.Events.DRAWING_TOOLS_LOAD_START, {index: a});
        var c = JSON.parse(b);
        l(a, c), $(y).trigger(ActiveText.DrawingTools.Events.DRAWING_TOOLS_LOAD_COMPLETE, {index: a})
    }

    function n(a, b) {
        var d = null;
        "undefined" == typeof b || "string" != typeof b ? d = ActiveText.DrawingToolsJStorageExtension.loadData(y, a) : "string" == typeof b && (d = b), null !== d ? m(a, d) : c(a, !0)
    }

    function o() {
        var a = ActiveText.ViewUtils.getVisiblePages(y), c = function (a, b) {
            n.call(this, b)
        };
        "function" == typeof y.options.drawingToolsLoadDataFunction && (c = y.options.drawingToolsLoadDataFunction);
        for (var d = 0, e = a.length; e > d; d++) {
            var f = ActiveText.LayerUtils.getOverlayForIndexByKey(y, a[d], "drawing");
            f.css({visibility: "hidden"}), q(a[d], f), b(a[d]), c(y, a[d])
        }
    }

    function p(a, b) {
        var c = ActiveText.LayerUtils.getOverlayForIndexByKey(y, b.index, "drawing");
        c && c.css({visibility: ""})
    }

    function q(a, b) {
        if (b && !$(b).find("canvas").length) {
            var c = ActiveText.DrawingTools.Factory.createCanvas();
            D.css({userSelect: "none"}).attr("unselectable", "on"), b.get(0).appendChild(c)
        }
    }

    function r() {
        D = y.view.getContainer(), z = new ActiveText.DrawingToolsModel(y, D)
    }

    function s(a) {
        x && (y = a, $(y).one(ActiveText.Events.BOOK_STRUCTURE_LOADED, r), C = new ActiveText.DrawingToolsController(y), C.init(E), B = new ActiveText.DrawingToolsSelectionController(y, E), A = new ActiveText.DrawingToolsInteractionController(y, E), y && y.options && y.options.containerElement && $(y.options.containerElement).on("remove", t))
    }

    function t() {
        $(y).off(ActiveText.Events.BOOK_STRUCTURE_LOADED, r), $(y.options.containerElement).off("remove", t), $(y).off(ActiveText.Events.CHANGE_SCALING_MODE, h)
    }

    function u() {
        return A.setCurrentTool.apply(E || window, arguments)
    }

    function v() {
        return A.setActiveColour.apply(E || window, arguments)
    }

    function w(a) {
        return C.exportCurrentDrawing(a)
    }

    function x() {
        return Modernizr.canvas
    }

    var y, z, A, B, C, D, E = {init: s, key: "drawingtools", setCurrentTool: u, clearDrawings: c, setActiveColour: v, enable: g, disable: i, exportCurrentDrawing: w, importDrawing: l, loadData: n, redraw: d, addClick: e, dispatchUpdate: f, supported: x, resize: j, loadDrawingsOnPageChange: o, makeCanvasVisible: p, active: !1};
    return E
}, ActiveText.DrawingTools.Factory = function () {
    "use strict";
    function a() {
        var a = document.createElement("canvas");
        return a.setAttribute("class", "canvas"), a.setAttribute("style", "position:absolute;left:0;top:0"), a
    }

    return{createCanvas: a}
}(), ActiveText.DrawingToolsSelectionController = function (a) {
    "use strict";
    function b() {
        document.selection && document.selection.clear()
    }

    function c() {
        b()
    }

    function d() {
        b()
    }

    function e() {
        b()
    }

    function f() {
        h();
        var b = a.view.getContainer();
        $(b).on({mousedown: c, mousemove: d, mouseup: e, selectstart: g, touchstart: c, touchmove: d, touchend: e})
    }

    function g() {
        return!1
    }

    function h() {
        var b = a.view.getContainer();
        $(b).off({mousedown: c, mousemove: d, mouseup: e, selectstart: g, touchstart: c, touchmove: d, touchend: e})
    }

    var i = {createUserEvents: f, destroyUserEvents: h};
    return i
}, ActiveText.DrawingToolsInteractionController = function (a, b) {
    "use strict";
    function c(b) {
        B.curTool = b;
        var c = !1, d = a.options.containerElement.find(".whiteboard-container");
        switch (b) {
            case"pointer":
                c = !0, d.css("cursor", "");
                break;
            case"eraser":
                c = !0, B.curSize = y, $.browser.msie ? d.css("cursor", "url(" + r + "), crosshair") : d.css("cursor", "url(" + p + ") 17 17, url(" + q + ") 17 17, crosshair");
                break;
            case"pen":
                c = !0, B.curSize = z, $.browser.msie ? d.css("cursor", "url(" + x + "), crosshair") : d.css("cursor", "url(" + v + ") 5 5, url(" + w + ") 5 5, crosshair");
                break;
            case"highlighter":
                c = !0, B.curSize = A, $.browser.msie ? d.css("cursor", "url(" + u + "), crosshair") : d.css("cursor", "url(" + s + ") 11 11, url(" + t + ") 11 11, crosshair");
                break;
            default:
                c = !1
        }
        return c && "pointer" !== b ? d.find(".whiteboard").css({cursor: ""}) : "pointer" === b && "zoom" === a.view.model.getScaleMode() && d.find(".whiteboard").css({cursor: "move"}), c
    }

    function d(a) {
        B.curColor = a
    }

    function e(a) {
        var b, c;
        return a.originalEvent && a.originalEvent.touches && a.originalEvent.touches[0] ? (b = a.originalEvent.touches[0].pageX, c = a.originalEvent.touches[0].pageY) : (b = a.pageX, c = a.pageY), {mouseX: b, mouseY: c}
    }

    function f(c) {
        var d = $(c.data).attr("data-page"), f = ActiveText.NavigationUtils.pageNumberToPageIndex(a, d), g = $(c.data).offset(), h = e(c), i = h.mouseX, j = h.mouseY;
        return B.paint = !0, b.addClick(f, i - g.left, j - g.top, !1), b.redraw(f), !1
    }

    function g(c) {
        if (B.paint) {
            var d = $(c.data).attr("data-page"), f = ActiveText.NavigationUtils.pageNumberToPageIndex(a, d), g = $(c.data).offset(), h = e(c), i = h.mouseX, j = h.mouseY;
            b.addClick(f, i - g.left, j - g.top, !0), b.redraw(f)
        }
        return!1
    }

    function h(c) {
        var d = $(c.data).attr("data-page"), f = ActiveText.NavigationUtils.pageNumberToPageIndex(a, d);
        if (B.paint = !1, B.paint) {
            var g = $(c.data).offset(), h = e(c), i = h.mouseX, j = h.mouseY;
            b.addClick(f, i - g.left, j - g.top, !1)
        }
        return b.redraw(f), b.dispatchUpdate(f), !1
    }

    function i() {
        return B.paint = !1, !1
    }

    function j(c) {
        if (B.paint) {
            var d = a.view.getContainer(), e = $(d).offset(), f = c.pageX > e.left && c.pageX < e.left + d.width() && c.pageY > e.top && c.pageY < e.top + d.height();
            if (f) {
                var g = $(c.data).attr("data-page"), h = ActiveText.NavigationUtils.pageNumberToPageIndex(a, g), j = $(c.data).offset();
                b.addClick(h, c.originalEvent.pageX - j.left, c.originalEvent.pageY - j.top, !0), b.redraw(h)
            } else i()
        }
        return!1
    }

    function k() {
        l();
        for (var b = a.view.getContainer(), d = ActiveText.ViewUtils.getVisiblePages(a), e = 0, k = d.length; k > e; e++) {
            var n = ActiveText.LayerUtils.getOverlayForIndexByKey(a, d[e], "drawing").parent();
            $(b).on({mousedown: f, mousemove: g, mouseup: h, mouseout: j, touchstart: f, touchmove: g, touchend: h, touchcancel: i}, n), c(B.curTool)
        }
        $(a).trigger(ActiveText.Commands.DISABLE_PAGE_DRAGGING), $(a).on(ActiveText.Commands.SWITCH_TO_ZOOM_MODE, m), $(a).on(ActiveText.Commands.SWITCH_TO_SPS_FTW_VIEW, m)
    }

    function l() {
        var b = a.view.getContainer();
        $(b).off({mousedown: f, mousemove: g, mouseup: h, mouseout: j, touchstart: f, touchmove: g, touchend: h, touchcancel: i});
        var c = a.options.containerElement.find(".whiteboard-container");
        c.css("cursor", ""), "zoom" === a.view.model.getScaleMode() && c.find(".whiteboard").css({cursor: "move"}), $(a).off(ActiveText.Commands.SWITCH_TO_ZOOM_MODE, m), $(a).off(ActiveText.Commands.SWITCH_TO_SPS_FTW_VIEW, m)
    }

    function m() {
        a.options.containerElement.find(".whiteboard-container .whiteboard").css({cursor: ""})
    }

    function n() {
        o = ActiveText.SkinUtils.getPathToGlobalResource() + "img/cursor/", p = o + "33x33-pointer.svg", r = o + "33x33-pointer.png", q = o + "33x33-pointer.cur", s = o + "23x23-pointer.svg", u = o + "23x23-pointer.png", t = o + "23x23-pointer.cur", v = o + "5x5-pointer.svg", x = o + "5x5-pointer.png", w = o + "5x5-pointer.cur";
        var a = [p, q, s, t, v, w];
        $.browser.msie && (a = [r, u, x]), $(document).ready(function () {
            $.imgpreload(a)
        })
    }

    var o, p, q, r, s, t, u, v, w, x, y = 30, z = 5, A = 20;
    n();
    var B = {setCurrentTool: c, setActiveColour: d, paint: !1, curColor: "#0000CD", curTool: "pointer", curSize: z, createUserEvents: k, destroyUserEvents: l};
    return B
}, ActiveText.DrawingToolsModel = function (a) {
    "use strict";
    function b() {
        return 1 / ActiveText.ViewUtils.getScaleValue(a)
    }

    function c() {
        return{width: d, height: e}
    }

    var d = 996, e = 698;
    return{getScale: b, getUnscaledResourceDimensions: c}
}, ActiveText.DrawingToolsJStorageExtension = function () {
    "use strict";
    function a(a, b, d) {
        var e = c(a, b);
        $.jStorage.set(e, d)
    }

    function b(a, b) {
        var d = c(a, b);
        return $.jStorage.get(d, null)
    }

    function c(a, b) {
        var c, d;
        return c = a.data.getMetaData(), c = c && null !== c.identifier || c && "" !== c.identifier ? c.identifier : "defaultBookId", d = b + "_" + c
    }

    return{drawingToolsGetDataFunction: a, loadData: b}
}(), ActiveText.DrawingTools.Events = {DRAWING_TOOLS_LOAD_START: "drawingtools.load.start", DRAWING_TOOLS_LOAD_COMPLETE: "drawingtools.load.complete", DRAWING_TOOLS_LOAD_ERROR: "drawingtools.load.error", DRAWING_DELETED: "drawing.deleted", DRAWING_UPDATED: "drawing.updated"}, ActiveText.SoundEffects = function () {
    "use strict";
    function a(a) {
        i = a, k = [], l = [], j = ActiveText.ExtensionUtils.getAudioPlayback(a), $(i).on(ActiveText.Commands.GO_TO_PAGE, b), $(i).on(ActiveText.Events.LOADED_OVERLAY_DATA, h)
    }

    function b() {
        for (var a = ActiveText.ViewUtils.getVisiblePages(i), b = [], d = 0, e = a.length; e > d; d++)b.push(c(a[d]));
        $.when.apply($, b).then(g)
    }

    function c(a) {
        void 0 === l[a] && (l[a] = $.Deferred());
        var b = m().hasOverlayDataForIndex(a);
        return b || l[a].resolve(), l[a]
    }

    function d(a) {
        for (var b = $.Deferred(), d = [], e = 0, f = a.length; f > e; e++)d.push(c(a[e]));
        return $.when.apply($, d).then(function () {
            b.resolve(a)
        }), b
    }

    function e(a) {
        for (var b, c = 0, d = a.length; d > c; c++)void 0 !== k[a[c]] && k[a[c]] !== !0 && (b = k[a[c]]);
        return b
    }

    function f(a) {
        return Boolean(e(a))
    }

    function g() {
        function a() {
            setTimeout(function () {
                var a = e(b), c = ActiveText.DataUtils.correctURLPath(i, a);
                j.stop(), j.setSrc(c), setTimeout(function () {
                    j.play()
                }, 0)
            }, 0)
        }

        var b = ActiveText.ViewUtils.getVisiblePages(i);
        f(b) && $.when(j.getMediaPlayer()).then(a)
    }

    function h(a, b) {
        k[b.index] = !0;
        for (var c, d = 0, e = b.data.length; e > d; d++)c = b.data[d], "sound-effect" === c.type && void 0 !== c.audio && void 0 !== c.audio.src && (k[b.index] = c.audio.src);
        void 0 === l[b.index] && (l[b.index] = $.Deferred()), l[b.index].resolve(), $(n).trigger(ActiveText.SoundEffects.Events.UPDATE, {index: b.index})
    }

    var i, j, k, l, m = _.memoize(function () {
        return ActiveText.ExtensionUtils.getExtensionByKey(i, "overlaydataloader")
    }, _.identifier), n = {init: a, hasSoundEffectsForPage: f, hasLoadedOverlayDataForPages: d, key: "soundeffects"};
    return n
}, ActiveText.SoundEffects.Events = {UPDATE: "update"}, ActiveText.CharacterSelection = function () {
    "use strict";
    function a(a, b) {
        c(), a && "svg" !== a[0].nodeName && (a[0].setAttribute("class", "character-selected"), e = b)
    }

    function b() {
        return e
    }

    function c() {
        $(".character-selected").each(function () {
            d($(this))
        })
    }

    function d(a) {
        a && "svg" !== a[0].nodeName && (a[0].setAttribute("class", ""), e = "")
    }

    var e = "";
    return{setCharacter: a, getCharacter: b, deselectCharacter: d}
}(), ActiveText.ReadToMe = function (a) {
    "use strict";
    function b(b) {
        r = b;
        var f = ActiveText.ExtensionUtils.getAudioPlayback(r);
        s = new ActiveText.ReadToMe.State(r);
        var h = Boolean(a && a.autoplay);
        s.setAutoPlay(h), c(), $(f).on("onplay onresume onpause onfinish", d), $(f).on("onerror", k), $(f).on("ontimeupdate", e), $(r).on(ActiveText.Commands.GO_TO_PAGE, g), $(r).on(ActiveText.Hotspots.Events.CLICKED, p)
    }

    function c() {
        ActiveText.ReadToMe.Utils.autoInjectSMILLoader(r);
        var a = ActiveText.ExtensionUtils.getExtensionByKey(r, "smildatamodel");
        a || (a = new ActiveText.SMILDataModel, a.init(r), r.extensions.push(a))
    }

    function d(a) {
        $(u).trigger(a.type)
    }

    function e() {
        var a = ActiveText.ExtensionUtils.getAudioPlayback(r), b = Math.ceil(a.getPosition()), c = Math.ceil(a.getDuration()), d = c - 50, e = c - b;
        b && c && 0 !== c && b >= d && (a.setPosition(0), a.duration = 0, a.stop(), $(a).trigger("onfinish"), setTimeout(m, e))
    }

    function f(a) {
        s.activePage = a, s.queuePos = 0, s.activeCharacter = "", s.activeFile = "";
        var b = ActiveText.ExtensionUtils.getAudioPlayback(r);
        b.stop(), t = !0
    }

    function g(a, b) {
        function c() {
            s.getAutoPlay(a.type + "." + a.namespace) && !i && setTimeout(function () {
                j()
            }, 0)
        }

        var d = b.toPage !== b.fromPage;
        d && f(b.toPage);
        var e = s.getAutoPlay(), g = ActiveText.ExtensionUtils.getAudioPlayback(r);
        e || setTimeout(function () {
            $(g).trigger("onpause")
        }, 200);
        var h = ActiveText.ExtensionUtils.getExtensionByKey(r, "soundeffects"), i = !1;
        if (h) {
            var k = ActiveText.ViewUtils.getVisiblePages(r);
            $.when(h.hasLoadedOverlayDataForPages(k)).then(function () {
                h.hasSoundEffectsForPage(k) && (i = !0), c()
            })
        } else {
            var l = ActiveText.ViewUtils.getVisiblePages(r);
            $.when(ActiveText.ReadToMe.Utils.hasLoadedSMILFilesForVisiblePages(r, l)).then(c)
        }
    }

    function h() {
        function a() {
            var a = ActiveText.ExtensionUtils.getAudioPlayback(r), b = ActiveText.NavigationUtils.isLeftPage(r, s.activePage);
            s.activePage++, s.queuePos = 0;
            var c = ActiveText.ExtensionUtils.getExtensionByKey(r, "jdplays"), d = ActiveText.ExtensionUtils.getExtensionByKey(r, "rapidplays"), e = c || d;
            s.inPerformanceMode = e ? e.isInPerformanceMode(r) : !1, s.setAutoPlay(!0), b ? j() : (s.inPerformanceMode && (a.setSrc(""), s.activeFile = ""), $(u).trigger(ActiveText.ReadToMe.Events.UPDATE), a.stop())
        }

        var b = ActiveText.ViewUtils.getVisiblePages(r);
        $.when(ActiveText.ReadToMe.Utils.hasLoadedSMILFilesForVisiblePages(r, b)).then(a)
    }

    function i(a) {
        var b = ActiveText.ExtensionUtils.getAudioPlayback(r), c = ActiveText.ExtensionUtils.getExtensionByKey(r, "smildatamodel"), d = _.contains(a, s.activePage);
        if (d) {
            var e = c.getSmilDataForPage(s.activePage), f = Boolean(e && e[s.queuePos]);
            f ? $.when(b.getMediaPlayer()).then(function () {
                var a = ActiveText.DataUtils.correctURLPath(r, e[s.queuePos].audioSource);
                b.setSrc(a), s.activeCharacter = e[s.queuePos].character, s.activeFile = e[s.queuePos].audioSource, $(u).trigger(ActiveText.ReadToMe.Events.UPDATE), t = !1, n()
            }) : ((1 !== a.length || void 0 === e) && b.setSrc(""), s.activeFile = "", $(u).trigger(ActiveText.ReadToMe.Events.UPDATE), $(r).trigger(ActiveText.Commands.HIDE_LOADER), s.activeCharacter = "", b.stop(), h())
        }
    }

    function j() {
        var a = ActiveText.ViewUtils.getVisiblePages(r);
        $.when(ActiveText.ReadToMe.Utils.hasLoadedSMILFilesForVisiblePages(r, a)).then(i)
    }

    function k(a, b) {
        $(r).trigger(ActiveText.Commands.DISPLAY_ERROR, "An Error occurred loading audio file " + b.url), u.skip()
    }

    function l(a) {
        var b = ActiveText.ExtensionUtils.getExtensionByKey(r, "smildatamodel");
        s.queuePos++;
        var c = b.getSmilDataForPage(s.activePage);
        c && c[s.queuePos] ? (s.activeCharacter = c[s.queuePos].character, s.activeFile = c[s.queuePos].audioSource) : (s.activeCharacter = "", s.activeFile = "");
        var d = "";
        a && (d = a.url);
        var e = !1;
        if (d && c)for (var f = 0, g = c.length; g > f; f++)-1 !== d.indexOf(c[f].audioSource) && (e = !0);
        e || (s.queuePos = 0), j()
    }

    function m() {
        var a = ActiveText.ExtensionUtils.getAudioPlayback(r), b = ActiveText.ViewUtils.getVisiblePages(r);
        $.when(a.getMediaPlayer(), ActiveText.ReadToMe.Utils.hasLoadedSMILFilesForVisiblePages(r, b)).then(l)
    }

    function n() {
        var a = ActiveText.ExtensionUtils.getAudioPlayback(r), b = ActiveText.ExtensionUtils.getExtensionByKey(r, "jdplays"), c = ActiveText.ExtensionUtils.getExtensionByKey(r, "rapidplays"), d = b || c, e = ActiveText.ViewUtils.getVisiblePages(r), g = ActiveText.BrowserUtils.iOSversion[0] >= 6 ? 200 : 1;
        s.inPerformanceMode = d ? d.isInPerformanceMode(r) : !1, s.setAutoPlay(!0), $.when(a.getMediaPlayer()).then(function (b) {
            var c = !_.contains(e, s.activePage) || 1 === e.length && s.activePage !== e[0], d = s.activePage > e[e.length - 1], h = ActiveText.ExtensionUtils.getExtensionByKey(r, "smildatamodel"), i = h.getSmilDataForPage(s.activePage), k = !d || !s.inPerformanceMode, l = d && s.inPerformanceMode && void 0 !== i, m = $(window.frameElement).is(":hidden");
            b || (t = !0), t ? j() : c && (k || l) ? (f(e[0]), j()) : "" !== s.activeFile || s.inPerformanceMode || j(), m || setTimeout(function () {
                a.play()
            }, g)
        })
    }

    function o() {
        s.setAutoPlay(!1);
        var a = ActiveText.ExtensionUtils.getAudioPlayback(r);
        return a.pause()
    }

    function p() {
        var a = ActiveText.ExtensionUtils.getAudioPlayback(r);
        a.stop(), f(s.activePage)
    }

    function q() {
        return s
    }

    var r, s, t = !0, u = {init: b, options: a, play: n, pause: o, getState: q, skip: m, stop: p, key: "readtome"};
    return u
}, ActiveText.ReadToMe.Events = {UPDATE: "update.readtome"}, ActiveText.ReadToMe.Utils = function (a) {
    "use strict";
    function b(b) {
        var c = a.ExtensionUtils.getExtensionByKey(b, "smildataloader");
        c || "function" != typeof a.SMILDataLoader || (c = new a.SMILDataLoader, c.init(b), b.extensions.push(c))
    }

    function c(b, c) {
        function d() {
            for (var h = !0, i = 0, j = c.length; j > i; i++) {
                var k = c[i];
                f.hasSMILForPage(k) && void 0 === g.getSmilDataForPage(k) && (h = !1)
            }
            h ? e.resolve(c) : $(b).off(a.SMILDataLoader.Events.SMIL_DATA_LOADED, d).on(a.SMILDataLoader.Events.SMIL_DATA_LOADED, d)
        }

        var e = $.Deferred(), f = a.ExtensionUtils.getExtensionByKey(b, "smildataloader"), g = a.ExtensionUtils.getExtensionByKey(b, "smildatamodel");
        return d(), e
    }

    return{autoInjectSMILLoader: b, hasLoadedSMILFilesForVisiblePages: c}
}(ActiveText), ActiveText.ReadToMe.State = function (a) {
    "use strict";
    function b(b) {
        var c;
        return c = a && a.options && a.options.audioPlaybackController ? a.options.audioPlaybackController(void 0, b) : f.shouldAutoPlay
    }

    function c(b, c) {
        a && a.options && a.options.audioPlaybackController ? a.options.audioPlaybackController(b, c) : f.shouldAutoPlay = Boolean(b)
    }

    function d() {
        var b = ActiveText.ExtensionUtils.getAudioPlayback(a), c = ActiveText.ExtensionUtils.getExtensionByKey(a, "smildatamodel"), d = !1;
        return $.when(b.getMediaPlayer()).then(function (a) {
            var e = "";
            a && (e = a.url);
            var g = !1;
            if (e) {
                var h = c.getSmilDataForPage(f.activePage);
                if (h)for (var i = 0, j = h.length; j > i; i++)-1 !== e.indexOf(h[i].audioSource) && (g = !0)
            }
            g && (d = b.playing())
        }), d
    }

    function e() {
        return f.activeCharacter
    }

    var f = {setAutoPlay: c, getAutoPlay: b, playing: d, getActiveCharacter: e, queuePos: 0, activePage: 0, shouldAutoPlay: !1, activeCharacter: "", activeFile: ""};
    return f
}, ActiveText.RecordAndPlay = function () {
    "use strict";
    function a() {
        var a = $(".button.record, .button.play"), b = $("<div />", {"class": "playbackDiv"});
        a.wrapAll(b), k() || $(".playbackDiv").hide()
    }

    function b() {
        var a = ActiveText.SkinUtils.getPathToResources(m), b = a + "swf/ActiveTextRecordAndRateWidget.swf", c = {swfUrl: b, id: "flashRecorder", width: 467, height: 174, version: "9.0.0", expressInstall: !1, flashvars: {}, params: {movie: b, wmode: "transparent", quality: "high", allowscriptaccess: "always"}}, d = $("<div />", {"class": "recordingWidget"}).hide();
        $("<div />", {id: "flashRecorder"}).appendTo(d), $("body").append(d), swfobject.embedSWF(c.swfUrl, c.id, c.width, c.height, c.version, c.expressInstall, c.flashvars, c.params), o.wrapper = d
    }

    function c() {
        o.readToMeAudio && o.readToMeAudio.pause()
    }

    function d() {
        return c(), o.wrapper.show(), !0
    }

    function e() {
        c(), o.hasConfirmed && !o.isPlaying && (n = o.isRecording ? "stop" : "record", o.element = $("#flashRecorder")[0], o.element.recPressed(), o.isRecording = !o.isRecording, o.hasRecorded = !0, $(m).trigger(n)), o.hasPlayed = o.isPaused = !1, o.hasConfirmed = d()
    }

    function f() {
        c(), o.hasRecorded && !o.isRecording && (o.element.playPausePressed(), o.isPlaying || o.isPaused || (n = "play"), o.isPlaying && (n = "pause"), o.isPaused && (n = "resume"), o.isPlaying = !o.isPlaying, o.isPaused = !o.isPaused, o.hasPlayed = !0, $(m).trigger(n))
    }

    function g() {
        return o.isRecording
    }

    function h() {
        return o.isPlaying
    }

    function i() {
        return o.hasRecorded
    }

    function j(a, b) {
        b || setTimeout(function () {
            $(m).trigger("finish"), o.isPlaying = !1
        }, 1e3)
    }

    function k() {
        return swfobject.hasFlashPlayerVersion("9.0.18")
    }

    function l(c) {
        m = c, b(), o.readToMeAudio = ActiveText.ExtensionUtils.getAudioPlayback(m), $(m).on(ActiveText.Events.UI_ELEMENT_LOADED, function (b) {
            "controls-bar" === b.element && a()
        })
    }

    var m, n, o = {hasConfirmed: !1, isPlaying: !1, isRecording: !1, hasPlayed: !1, hasRecorded: !1};
    window.updateStates = j;
    var p = {init: l, swfIsRecording: g, swfIsPlaying: h, toggleRecord: e, togglePlay: f, hasRecorded: i, hasFlash: k, key: "recordandplay"};
    return p
}, ActiveText.TextHighlightHelper = function () {
    "use strict";
    function a() {
        return"-epub-overlay-active"
    }

    return{getSelectionClassName: a}
}(), ActiveText.TextHighlightSettings = function (a) {
    "use strict";
    function b() {
        return e
    }

    function c() {
        $(a).on(ActiveText.Settings.Events.LOADED, d)
    }

    function d(a, b) {
        void 0 !== b.defaultHighlightColor && null !== b.defaultHighlightColor && (e = b.defaultHighlightColor)
    }

    var e = "yellow";
    c();
    var f = {getDefaultHighlightColor: b};
    return f
}, ActiveText.TextHighlightAudioSync = function (a) {
    "use strict";
    function b(a) {
        function b() {
            $(m).off(ActiveText.ReadToMe.Events.UPDATE, h), $(l).off(p, h), $(k).off(ActiveText.Commands.GO_TO_PAGE, c), $(k.options.containerElement).off("remove", b), n = void 0, m = void 0, l = void 0, k = void 0
        }

        k = a, d(), $(m).on(ActiveText.ReadToMe.Events.UPDATE, h), $(l).on(p, h), $(k).on(ActiveText.Commands.GO_TO_PAGE, c), k.options && k.options.containerElement && $(k.options.containerElement).on("remove", b)
    }

    function c() {
        var a = ActiveText.ViewUtils.getVisiblePages(k);
        _(a).forEach(function (a) {
            i(a)
        }), h()
    }

    function d() {
        m = ActiveText.ExtensionUtils.getExtensionByKey(k, "readtome"), m || (m = new ActiveText.ReadToMe(a), m.init(k), k.extensions.push(m)), n = ActiveText.ExtensionUtils.getExtensionByKey(k, "smildatamodel"), l = ActiveText.ExtensionUtils.getAudioPlayback(k);
        var b = new ActiveText.TextHighlightSettings(k);
        ActiveText.TextHighlightPageInjection(k, b)
    }

    function e(a, b) {
        var c, d = b.contents().find(a).attr("class");
        if (d) {
            var e = d.split(" "), f = ActiveText.TextHighlightHelper.getSelectionClassName(), g = e.indexOf(f);
            -1 !== g && e.splice(g, 1);
            for (var h = 0, i = e.length; i > h; h++)e[h] = "." + e[h];
            e.push(a), c = e.join(",")
        } else c = a;
        return b.contents().find(c)
    }

    function f(b, c) {
        function d(a) {
            function b() {
                if (a) {
                    var b = ActiveText.ViewUtils.getFrameForPageByIndex(k, c), d = b.find("iframe"), f = e(a.highlightId, d);
                    u = a.highlightColour, t ? t.add(f) : t = f
                }
                h > 0 && i(c, t), t ? (i(c, t), j(t, u)) : i(c, t)
            }

            function d() {
                var a = ActiveText.ViewUtils.getFrameForPageByIndex(k, c), e = a.find("iframe"), f = e.contents().find("body").children().length > 0;
                o && clearTimeout(o), o = f ? setTimeout(b, 100) : e.length ? setTimeout(d, 100) : setTimeout(d, 100)
            }

            d()
        }

        function f() {
            m.pause()
        }

        var h = 0;
        b && (h = b.position / 1e3);
        var l = m.getState().activeFile, p = ActiveText.CharacterSelection.getCharacter(), q = Boolean(a && a.selectionModeHighlightByDefault), r = n.getSmilDataForPage(c);
        if (r) {
            for (var s, t, u, v = 0, w = r.length; w > v; v++) {
                var x = r[v];
                if (-1 !== l.indexOf(x.audioSource)) {
                    var y = x.character;
                    if (p === y) {
                        var z = ActiveText.BrowserUtils.IEVersion && ActiveText.BrowserUtils.IEVersion < 10 ? 400 : 0;
                        setTimeout(f, z), q = !0
                    }
                    if (q) {
                        var A = 0;
                        x.clipBegin && !isNaN(x.clipBegin) && (A = x.clipBegin);
                        var B = b.duration / 1e3;
                        x.clipEnd && !isNaN(x.clipEnd) && (A = x.clipEnd), h >= A && B >= h && (s = x)
                    }
                }
            }
            g(c), d(s)
        } else g()
    }

    function g(a) {
        var b = ActiveText.ViewUtils.getVisiblePages(k), c = _.without(b, a);
        _(c).forEach(function (a) {
            i(a)
        }), o && clearTimeout(o)
    }

    function h() {
        $.when(l.getMediaPlayer()).then(function (a) {
            var b = m.getState(), c = b.activePage;
            f(a, c)
        })
    }

    function i(a, b) {
        var c = ActiveText.TextHighlightHelper.getSelectionClassName(), d = $("#iframe" + a), e = d.contents().find("." + c);
        b && (e = e.not(b)), $(e).removeClass(c).css("background-color", "").children().css("background-color", "")
    }

    function j(a, b) {
        var c = ActiveText.TextHighlightHelper.getSelectionClassName();
        $(a).addClass(c).css("background-color", b).children().css("background-color", b)
    }

    var k, l, m, n, o, p = "ontimeupdate", q = {init: b, key: "texthighlightaudiosync"};
    return q
}, ActiveText.TextHighlightPageInjection = function (a, b) {
    "use strict";
    function c() {
        $(a).on(ActiveText.Events.FRAME_CONTENT_LOADED, e)
    }

    function d(a, b) {
        function c() {
            $("#iframe" + a).contents().find("head").append(f)
        }

        function d() {
            $("#iframe" + a).contents().find("body").children().length ? c() : setTimeout(function () {
                d()
            }, 100)
        }

        var e = ActiveText.TextHighlightHelper.getSelectionClassName(), f = '<style type="text/css">.' + e + ",." + e + " *{background-color:" + b + ";display:inline-block;}</style>";
        d()
    }

    function e(a, c) {
        var e = c.index, f = b.getDefaultHighlightColor();
        d(e, f)
    }

    c()
}, ActiveText.SMILDataModel = function () {
    "use strict";
    function a(a) {
        d = a, $(d).on(ActiveText.SMILDataLoader.Events.SMIL_DATA_LOADED, b)
    }

    function b(a, b) {
        var c = b.index, d = b.data;
        e[c] = ActiveText.SMILFormatHelper.parseSMIL(d)
    }

    function c(a) {
        return e[a]
    }

    var d, e = [];
    return{init: a, getSmilDataForPage: c, key: "smildatamodel"}
}, ActiveText.SMILDataLoader = function () {
    "use strict";
    function a(a) {
        i = a, $(i).on(ActiveText.Events.OPF_DATA_LOADED, b), $(i).on(ActiveText.Commands.LOAD_PAGE_BY_INDEX, h)
    }

    function b(a, b) {
        j = [];
        for (var c = $(b), d = c.find('spine itemref[linear!="no"]'), e = 0, f = d.length; f > e; e++) {
            var g = $(d[e]).attr("idref"), h = c.find('manifest item[id="' + g + '"]').attr("media-overlay"), i = c.find('manifest item[id="' + h + '"]').attr("href");
            i || (i = c.find('manifest item[id="' + g + '"]').attr("media-overlay")), j[e] = i
        }
    }

    function c(a) {
        return Boolean(void 0 !== d(a))
    }

    function d(a) {
        return j[a]
    }

    function e(a) {
        return k[a]
    }

    function f(a) {
        function b(b) {
            k[a] = b, f.resolve(a, b)
        }

        function c() {
            f.resolve(a), $(i).trigger(ActiveText.SMILDataLoader.Events.SMIL_DATA_ERROR, {index: a})
        }

        var f = $.Deferred(), g = d(a), h = e(a);
        return h ? setTimeout(function () {
            f.resolve(a, h)
        }, 0) : g ? $.ajax({url: ActiveText.DataUtils.correctURLPath(i, g), dataType: "text xml", success: b, error: c}) : setTimeout(function () {
            f.resolve(a)
        }, 0), f
    }

    function g(a, b) {
        b ? $(i).trigger(ActiveText.SMILDataLoader.Events.SMIL_DATA_LOADED, {index: a, data: b}) : $(i).trigger(ActiveText.SMILDataLoader.Events.SMIL_DATA_ERROR, {index: a})
    }

    function h(a, b) {
        var c = 0;
        ActiveText.NavigationUtils.isValidPageIndex(i, b.index) && (c = b.index), $.when(f(c)).then(g)
    }

    var i, j = [], k = {};
    return{init: a, hasSMILForPage: c, key: "smildataloader"}
}, ActiveText.SMILDataLoader.Events = {SMIL_DATA_LOADED: "activetext.smil.loaded", SMIL_DATA_ERROR: "activetext.smil.error"}, ActiveText.SMILFormatHelper = function (a) {
    "use strict";
    function b(a) {
        var b = 0, c = 0, d = 0;
        if (a) {
            if (-1 !== a.indexOf("min"))c = parseFloat(a.substr(0, a.indexOf("min"))); else if (-1 !== a.indexOf("ms")) {
                var e = parseFloat(a.substr(0, a.indexOf("ms")));
                d = e / 1e3
            } else if (-1 !== a.indexOf("s"))d = parseFloat(a.substr(0, a.indexOf("s"))); else if (-1 !== a.indexOf("h"))b = parseFloat(a.substr(0, a.indexOf("h"))); else {
                var f = a.split(":");
                d = parseFloat(f.pop()), f.length > 0 && (c = parseFloat(f.pop()), f.length > 0 && (b = parseFloat(f.pop())))
            }
            return 3600 * b + 60 * c + d
        }
    }

    function c(a) {
        var b, c = a.get(0).getAttribute("epub:type");
        if (c && c.indexOf(!0))for (var d = c.split(" "), e = 0, f = d.length; f > e; e++) {
            var g = d[e], h = /^highlight-color_/;
            if (h.test(g)) {
                var i = g.split("_");
                i.shift(), b = i.join("_")
            }
        }
        return b
    }

    function d(a) {
        var b, c = a.get(0).getAttribute("epub:type");
        if (c && c.indexOf(!0))for (var d = c.split(" "), e = 0, f = d.length; f > e; e++) {
            var g = d[e], h = /^character_/;
            if (h.test(g)) {
                var i = g.split("_");
                i.shift(), b = i.join("_")
            }
        }
        return b
    }

    function e(b) {
        var e, f, g, h, i = [];
        return $(b).find("body > seq > par > audio, body > par > audio").each(function () {
            f = $(this), g = f.prev().attr("src"), h = g.split("#"), e = {}, e.audioSource = f.attr("src"), e.clipBegin = a.SMILFormatHelper.parseTimeCode(f.attr("clipBegin")), e.clipEnd = a.SMILFormatHelper.parseTimeCode(f.attr("clipEnd")), e.highlightId = "#" + h.pop(), e.character = d(f.parent()), e.highlightColour = c(f.parent()), i.push(e)
        }), i
    }

    return{SMIL_AUDIO_TAG_TEMPLATE: {audioSource: "none", clipBegin: "00:00", clipEnd: "00:00", highLightClass: "highlight000"}, parseTimeCode: b, parseSMIL: e}
}(ActiveText), ActiveText.ClickToPrompt = function () {
    "use strict";
    function a(a) {
        a && a.options && a.options.containerElement && (d = a, $(d.options.containerElement).on("remove", b))
    }

    function b() {
        $(d.options.containerElement).off("remove", b), d = void 0, e.audioPlaybackController = void 0
    }

    function c(a, b) {
        e.audioPlaybackController || (e.audioPlaybackController = new ActiveText.AudioPlayback, e.audioPlaybackController.init(d));
        var c, f, g = ".mp3", h = ActiveText.DataUtils.parseURI(b.data.uri), i = h.source, j = !0, k = h.type, l = ActiveText.ExtensionUtils.getAudioPlayback(d), m = e.audioPlaybackController, n = $(a.target).parents(".target-area");
        Modernizr.rgba ? (c = {background: "rgba(250,250,0,0.2)"}, f = {background: ""}) : (c = {border: "1px solid yellow"}, f = {border: "none"});
        var o = ActiveText.ExtensionUtils.getExtensionByKey("readtome");
        $.when(m.getMediaPlayer()).then(function () {
            m.playing() || l && l.playing() || o && "" !== o.getState().activeFile ? "audio" === k && m.stop() : (m.setSrc(d.options.pathToAssets + "OPS/media/" + i + g), m.play(), n.css(c), $(m).on("onfinish", function () {
                n.css(f)
            }), h.hasOwnProperty("report") && "false" === h.report && (j = !1), $(d).trigger(ActiveText.ClickToPrompt.Events.ACTIVATED, {word: i, track: j}))
        })
    }

    var d, e = {init: a, audioPlaybackController: void 0, hotspotClickFunction: c, key: "clicktoprompt"};
    return e
}, ActiveText.ClickToPrompt.Events = {ACTIVATED: "activated.clicktoprompt"}, ActiveText.ReadingComplete = function () {
    "use strict";
    function a(a) {
        a && a.options && a.options.containerElement && (d = a, $(d.options.containerElement).on("remove", b), $(d).on(ActiveText.Commands.GO_TO_PAGE, c))
    }

    function b() {
        $(d.options.containerElement).off("remove", b), $(d).off(ActiveText.Commands.GO_TO_PAGE, c), d = void 0
    }

    function c() {
        for (var a = ActiveText.NavigationUtils.getMaximumValidPageIndex(d), b = ActiveText.ViewUtils.getVisiblePages(d), c = !1, e = 0, f = b.length; f > e; e++)b[e] === a && (c = !0);
        c && $(d).trigger(ActiveText.ReadingComplete.Events.READING_COMPLETE)
    }

    var d;
    return{init: a, key: "readingcomplete"}
}, ActiveText.ReadingComplete.Events = {READING_COMPLETE: "readingcomplete.activetext"}, ActiveText.AudioPlayback = function () {
    "use strict";
    function a(a) {
        p = a, p && SoundManager && (s = new SoundManager, s.setup({url: ActiveText.SkinUtils.getPathToResources(p) + "soundmanager2/", preferFlash: !1, debugMode: !1, debugFlash: !1, useHighPerformance: !0, onready: e, ontimeout: f}), s.defaultOptions.multiShot = !1, s.beginDelayedInit(), window.soundManager = s)
    }

    function b() {
        q && (2 === q.readyState && void 0 !== q.url && "beep.mp3" !== q.url && $(v).trigger("onerror", {url: q.url}), q.readyState > 1 && $(p).trigger(ActiveText.Commands.HIDE_LOADER), "" !== q.url && 2 !== q.readyState && 3 !== q.readyState && setTimeout(b, 50))
    }

    function c() {
        function a() {
            k(), g("beep.mp3"), h(), p.options.containerElement.off("touchstart", a)
        }

        p.options.containerElement.on("touchstart", a)
    }

    function d() {
        $(p).trigger(ActiveText.Commands.HIDE_LOADER)
    }

    function e() {
        u = !0, ActiveText.BrowserUtils.isMobileDevice && c(), r && k()
    }

    function f() {
        $(p).trigger(ActiveText.Commands.DISPLAY_ERROR, "Timeout Error: Unable to start Flash Audio Playback.")
    }

    function g(a) {
        if (q && q.url !== a)try {
            q.destruct()
        } catch (c) {
        }
        (!q || q && q.url !== a) && (q = s.createSound({id: a, url: a, autoPlay: !1, autoLoad: !0, flashPollingInterval: 5, html5PollingInterval: 5, useHighPerformance: !0, onload: function () {
            $(v).trigger("onload"), $(p).trigger(ActiveText.Commands.SHOW_LOADER)
        }, onpause: function () {
            $(v).trigger("onpause")
        }, onplay: function () {
            $(v).trigger("onplay")
        }, onresume: function () {
            $(v).trigger("onresume")
        }, onfinish: function () {
            t > 0 && $(v).trigger("onfinish")
        }, whileplaying: function () {
            t = q.position, $(v).trigger("ontimeupdate", q)
        }}), t = 0, setTimeout(b, 50))
    }

    function h() {
        if (q) {
            var a = {url: q.url};
            q.play(a), d()
        }
    }

    function i() {
        q && (q.pause(), q.position = 0, q.stop(), d())
    }

    function j() {
        q && (q.pause(), d())
    }

    function k() {
        var a;
        return u ? (r ? (a = r, r = void 0) : a = $.Deferred(), a.resolve(q)) : (r || (r = $.Deferred()), a = r), a
    }

    function l() {
        var a = !1;
        return q && (a = !(q.paused || 0 === q.position)), a
    }

    function m() {
        var a = !1;
        return q && (a = q.durationEstimate), a
    }

    function n() {
        var a = !1;
        return q && (a = q.position), a
    }

    function o(a) {
        q && a && q.setPosition(a)
    }

    var p, q, r, s, t, u = !1, v = {init: a, play: h, setSrc: g, pause: j, stop: i, getMediaPlayer: k, playing: l, getDuration: m, getPosition: n, setPosition: o, key: "audioplayback"};
    return v
}, ActiveText.ViewOrientationDetection = function () {
    "use strict";
    function a(a) {
        function b() {
            $(a).trigger(ActiveText.Commands.SWITCH_TO_DPS_VIEW)
        }

        function c() {
            $(a).trigger(ActiveText.Commands.SWITCH_TO_SPS_VIEW)
        }

        function d(a) {
            switch (a = a || {}, a.orientationDegrees) {
                case f:
                    c();
                    break;
                case g:
                    c();
                    break;
                case h:
                    b();
                    break;
                case i:
                    b();
                    break;
                default:
                    var d = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, e = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
                    d > e ? b() : c()
            }
            window.scrollTo(0, 1);
            for (var j, k = document.getElementsByTagName("iframe"), l = 0, m = k.length; m > l; l++)j = k[l].contentWindow || k[l].contentDocument, window.iframe = j, j.postMessage(a, "*")
        }

        function e(a) {
            var b = a.data;
            if ("undefined" == typeof b) {
                var c = $(window), e = c.innerWidth(), f = c.innerHeight(), g = e > f ? "landscape" : "portrait", h = "landscape" === g ? 90 : 0;
                b = {orientation: g, orientationDegrees: h, innerWidth: e, innerHeight: f}
            }
            setTimeout(function () {
                d(b)
            }, 500)
        }

        var f = 0, g = 180, h = 90, i = -90;
        if (ActiveText.ViewUtils.isCardMode(a) === !1) {
            var j = "onorientationchange"in window ? "orientationchange" : "resize";
            j += " message", $(window).on(j, function (a) {
                var b = a.originalEvent || a;
                setTimeout(function () {
                    e(b)
                }, 500)
            }), d()
        }
    }

    return{init: a}
}, ActiveText.Interaction = ActiveText.Interaction || {}, ActiveText.Interaction.SwipeGesture = function (a) {
    "use strict";
    function b() {
        if (k) {
            l = k.width();
            var a = void 0 !== k, b = "function" == typeof $.fn.swipe;
            a && b && $(k).swipe("option", "threshold", l / 4)
        }
    }

    function c() {
        m = !0
    }

    function d() {
        a.navigation.canGoToNextPage() && a.navigation.gotoNextPage()
    }

    function e() {
        a.navigation.canGoToPreviousPage() && a.navigation.gotoPrevPage()
    }

    function f() {
        function f() {
            $(a).off(ActiveText.Events.RESIZE, b), $(a).off(ActiveText.Commands.GO_TO_PAGE, c), $(a.options.containerElement).off("remove", f), j(), k = void 0
        }

        var g = void 0 !== k, h = "function" == typeof $.fn.swipe;
        if (g && h) {
            var i = {swipeLeft: d, swipeRight: e, threshold: 200, maxTimeThreshold: 300, allowPageScroll: "auto", triggerOnTouchLeave: !0};
            k.swipe(i), k.swipe("enable")
        }
        $(a).on(ActiveText.Events.RESIZE, b), $(a).on(ActiveText.Commands.GO_TO_PAGE, c), a.options && a.options.containerElement && $(a.options.containerElement).on("remove", f)
    }

    function g() {
        var a = void 0 !== k, b = "function" == typeof $.fn.swipe;
        a && b && k.swipe("disable")
    }

    function h(b) {
        a.utils.isFullWindowScalingMode() && (b = $(document.body)), $(b).on("touchmove", function (a) {
            $(a.target).parents(".scrollable").length || a.preventDefault()
        })
    }

    function i(a) {
        k = a, h(k), _.once(f)()
    }

    function j() {
        g()
    }

    var k, l, m;
    return{register: i, deregister: j}
}, ActiveText.UI = ActiveText.UI || {}, ActiveText.UI.BasicControls = function () {
    "use strict";
    function a(a) {
        r = a, x = new ActiveText.UI.BasicControls.ControlsBarVisibilityHelper(s), $(r).one(ActiveText.Commands.INIT_WHITEBOARD, o), $(r).on(ActiveText.Events.RESIZE, e)
    }

    function b() {
        return s && "number" == typeof s.barHeight ? s.barHeight : u
    }

    function c(a) {
        return s && "object" == typeof s[a] ? s[a] : void 0
    }

    function d() {
        return parseInt(r.view.getContainer().parent().css("marginBottom"), 10)
    }

    function e() {
        if (void 0 !== w) {
            var a = d(), c = b();
            c > a && (a = c), w.css({paddingTop: a - c})
        }
    }

    function f() {
        ActiveText.UI && ActiveText.UI.FontInjection && !ActiveText.UI.FontInjection.hasBeenAdded() && ActiveText.UI.FontInjection.injectFontTag();
        var a = r.options.containerElement.selector + " ", c = ActiveText.UI.BasicControls.Style.getStyle(a, r.theme, b());
        ActiveText.CSSUtils.embedCSS(c, r.options.containerElement.selector + "-activetext-controls-bar")
    }

    function g() {
        var a = r.view.getContainer().parent().parent();
        r.utils.isFullWindowScalingMode() || a.css({position: "relative"}), w = $("<div/>").css({position: r.utils.isFullWindowScalingMode() ? "fixed" : "absolute", bottom: 0, left: 0, right: 0, zIndex: t}), w.click(x.revealControls), a.append(w)
    }

    function h(a, b) {
        var d = ActiveText.UI.BasicControls.AvailableControls[a];
        if (d && (!d.supported || "function" != typeof d.supported || d.supported()) && d.create && "function" == typeof d.create) {
            var e = {styles: c("buttonStyles"), hoverStyles: c("buttonHoverStyles"), toggleStyles: c("toggleButtonStyles"), toggleHoverStyles: c("toggleButtonHoverStyles")};
            s && s.options && (e.options = s.options[a]);
            var f = d.create(r, e);
            return b.append(f), b.append(" "), f
        }
    }

    function i() {
        if ("scale" === s.scaleMode) {
            var a = r.options.containerElement, b = a.outerWidth(), c = s.minWidth;
            v.css(c > b ? {transform: "scale(" + b / c + ")", "-moz-transform-origin": "0% 100%", "-ms-transform-origin": "0% 100%"} : {transform: ""})
        }
    }

    function j() {
        s.minWidth && void 0 !== s.scaleMode && ($(r).on(ActiveText.Events.RESIZE, i), i())
    }

    function k(a, b, c) {
        if (a) {
            for (var d, e = a.split(","), f = 0, g = 0, i = e.length; i > g; g++)d = h(e[g], b), d && (d.find("*").andSelf().filter('[role="button"],input').attr("tabindex", g + c), f++, 0 === g && d.addClass("first"));
            return d && d.addClass("last"), {count: f, container: b}
        }
        return{count: c}
    }

    function l() {
        s || (s = {}), s.primary || s.secondary || s.leftButtons || s.rightButtons || (s.primary = "previous,next")
    }

    function m() {
        s && "boolean" == typeof s.overlay && s.overlay === !1 && ("object" != typeof r.options.containerCoordinates && (r.options.containerCoordinates = {top: 0, left: 0, bottom: 0, right: 0}), r.options.containerCoordinates.bottom += b())
    }

    function n() {
        var a = {textAlign: "center", height: b(), userSelect: "none", font: "16px/" + (b() - 2) + "px Helvetica, Helvetica Neue, Arial", fontSize: 32, backgroundSize: "100% " + b() + "px"}, d = parseInt($.browser.version, 10);
        (!$.browser.msie || $.browser.msie && d > 8) && $.extend(a, {backgroundColor: r.theme.getControlsBackgroundColor(.5)}), v = $("<div class='controls-bar'></div>").css(a), v.click(function () {
            return!1
        });
        var e = c("barStyles");
        e && v.css(e), $(document).ready(function () {
            l();
            var a = $('<div style="position:absolute;left:0"></div>');
            s.leftButtonOptions && a.css(s.leftButtonOptions);
            var b = $('<div style="position:absolute;width:100%;"></div>');
            s.primaryButtonOptions && b.css(s.primaryButtonOptions);
            var c = $('<div style="position:absolute;right:0;"></div>');
            s.secondaryButtonOptions && c.css(s.secondaryButtonOptions);
            var d = $('<div style="position:absolute;right:0"></div>');
            s.rightButtonOptions && d.css(s.rightButtonOptions);
            var e = 2, f = k(s.leftButtons, a, e);
            e += f.count;
            var g = k(s.primary, b, e);
            e += g.count;
            var h = k(s.secondary, c, e);
            e += h.count;
            var i = k(s.rightButtons, d, e);
            if (v.append(g.container), v.append(h.container), v.append(f.container), v.append(i.container), !s.barStyles && !Modernizr.rgba) {
                var n = $('<div style="top:0;left:0;bottom:0;right:0;position:absolute" role="presentation"></div>').css({background: r.theme.getControlsBackgroundColor(.5)});
                n.css({filter: "alpha(opacity=50)"}), v.prepend(n)
            }
            j(), m(), $(r).trigger({type: ActiveText.Events.UI_ELEMENT_LOADED, element: "controls-bar"})
        }), w.append(v), x.register(r, v, b())
    }

    function o() {
        f(), g(), n()
    }

    function p() {
        x.revealControls()
    }

    function q() {
        x.hideControls()
    }

    var r, s, t = 1010, u = 50;
    2 === arguments.length ? (r = arguments[0], s = arguments[1]) : 1 === arguments.length && (s = arguments[0]);
    var v, w, x;
    return r && a(r), {init: a, hideControls: q, revealControls: p, getBarHeight: b, key: "controls", options: s}
}, ActiveText.UI = ActiveText.UI || {}, ActiveText.UI.BasicControls = ActiveText.UI.BasicControls || {}, ActiveText.UI.BasicControls.ControlsBarVisibilityHelper = function (a) {
    "use strict";
    function b(a, b, c) {
        i = a, k = b, j = c, e(), d()
    }

    function c(a) {
        return parseInt(a.view.getContainer().parent().css("marginBottom"), 10)
    }

    function d() {
        function b() {
            c && c.swipe && "function" == typeof c.swipe && (c.swipe({swipeUp: g, swipeDown: h}), c.parent().swipe({click: f}))
        }

        var c = i.view.getContainer().parent();
        a.overlay === !0 && b(), a.minWidth && void 0 !== a.scaleMode && k.css({transformOriginX: "left", transformOriginY: "bottom", minWidth: a.minWidth})
    }

    function e() {
        a && (!a.openByDefault && a.overlay || void 0 === a.overlay && !a.openByDefault) && h()
    }

    function f() {
        "on" === k.attr("data-toggle") ? h() : g()
    }

    function g() {
        var b = c(i);
        return j > b && (b = j), a.overlay === !0 && k.attr("data-toggle", "on").animate({marginTop: b - j, marginBottom: -(b - j)}, {duration: l, easing: "easeOutExpo"}), !1
    }

    function h() {
        var b = c(i);
        return j > b && (b = j), a.overlay === !0 && k.attr("data-toggle", "off").animate({marginTop: b, marginBottom: -b}, {duration: l, easing: "easeOutExpo", queue: !1}), !1
    }

    var i, j, k, l = 300;
    return{register: b, hideControls: h, revealControls: g}
}, ActiveText.namespace("ActiveText.UI.BasicControls.Style"), ActiveText.UI.BasicControls.Style = function () {
    "use strict";
    function a(a, b) {
        var c = b.getControlsForegroundColor(), d = b.getControlsForegroundHoverColor(), e = a + "a.activetext-default," + a + "a.activetext-default:link," + a + "a.activetext-default:visited," + a + "a.activetext-default svg polygon," + a + "a.activetext-default:link svg polygon," + a + "a.activetext-default:visited svg polygon {text-decoration:none;color:" + c + ";fill:" + c + ";cursor:pointer;-webkit-touch-callout: none;-webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;background: " + d + ";-webkit-border-radius: 21px;-khtml-border-radius: 21px;-moz-border-radius: 21px;-ms-border-radius: 21px;-o-border-radius: 21px;border-radius: 21px;margin: 4px 0;width: 42px;height: 42px;line-height: 1.3em !important;display:inline-block}" + a + "a.activetext-default:hover," + a + "a.activetext-default:focus," + a + "a.activetext-default:active," + a + "a.activetext-default:hover svg polygon," + a + "a.activetext-default:focus svg polygon," + a + "a.activetext-default:active svg polygon {text-decoration:none;color:" + d + ";fill:" + d + ";background:" + c + "}.pull-right {float:right;}" + a + "a.activetext-default.active," + a + "a.activetext-default.active:link," + a + "a.activetext-default.active:visited {background: red;}" + a + "a.activetext-default.active:hover," + a + "a.activetext-default.active:focus," + a + "a.activetext-default.active:active {color:red;background:" + c + "}}" + a + "a.activetext-default i {position:absolute}" + a + ".controls-bar img {vertical-align:middle;}.playbackDiv {width: 85px;height: 42px;position: absolute;left: -100px;margin-top: 4px;text-align: center;background: url(/static/img/rapid/ButtonsBackground.svg) no-repeat center center/contain;}.button.record, .button.play {z-index: 1010;margin-top: -1px;}.button.record img {margin-left: 7px;}.button.play img {margin-left: 2px;}.recordingWidget {bottom: 0;height: 174px;left: 0;margin: auto;position: absolute;top: 0;right: 0;width: 467px;z-index: 999;}.tooltip {position: absolute;z-index: 1030;display: block;font-size: 13px;line-height: 1.4;opacity: 0;filter: alpha(opacity=0);visibility: visible;padding-bottom:1em;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.tooltip.in {opacity: 0.8;filter: alpha(opacity=80);}.tooltip.top {padding: 5px 0;margin-top: -3px;}.tooltip-inner {max-width: 200px;padding: 8px;color: #ffffff;text-align: center;text-decoration: none;background-color: #000000;-webkit-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;max-height: 1.4em;text-overflow: ellipsis;white-space: nowrap;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.tooltip-arrow {position: absolute;width: 0;height: 0;border-color: transparent;border-style: solid;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.tooltip.top .tooltip-arrow {bottom: 0;left: 50%;margin-left: -5px;border-top-color: #000000;border-width: 5px 5px 0;}.fade {opacity: 0;-webkit-transition: opacity 0.15s linear;-moz-transition: opacity 0.15s linear;transition: opacity 0.15s linear;}.fade.in {opacity: 1;}";
        return e
    }

    return{getStyle: a}
}(), ActiveText.namespace("ActiveText.UI.DrawingToolsPanel"), ActiveText.UI.DrawingToolsPanel = function () {
    "use strict";
    function a() {
        var a = v;
        if (p) {
            var b = p.find(".colorPicker-picker").css("background-color"), c = ActiveText.ColourUtils.convertRGBToHex(b);
            b && c && (a = c)
        }
        return a
    }

    function b() {
        if (r) {
            for (var a = ActiveText.ViewUtils.getVisiblePages(t), b = 0, c = u.length; c > b; b++)r.disable(u[b]), r.enable(a[b]);
            u = a
        }
    }

    function c() {
        var b = t.options.containerElement, c = b.width() - 268, d = b.height();
        b.find(".controls-bar") && (d -= b.find(".controls-bar").height());
        var e = q.panelTemplate, f = $(e).css({position: "absolute", top: d - 54, left: c / 2, zIndex: 2e3, opacity: 0}).appendTo(b);
        f.find(".gripper").css({position: "absolute", left: 4, top: 4, bottom: 4, width: 20, cursor: "move"}), f.draggable({containment: b, drag: function () {
            $(this).find("#colourpicker-tool").colorPicker.hidePalette()
        }}), f.find("#colourpicker-tool").colorPicker({pickerDefault: a(), colors: w, onColorChange: function (a, b) {
            r.setActiveColour(b)
        }}), f.animate({top: d - 64, opacity: 1}, 300), $(t).off(ActiveText.Events.RESIZE, n).on(ActiveText.Events.RESIZE, n)
    }

    function d() {
        if ($(t).on(ActiveText.Commands.GO_TO_PAGE, b), void 0 !== t.view.disableInteraction && t.view.disableInteraction(), g() ? f().fadeIn() : c(), r = ActiveText.ExtensionUtils.getExtensionByKey(t, "drawingtools")) {
            var d = a();
            r.setActiveColour(d);
            for (var e = ActiveText.ViewUtils.getVisiblePages(t), h = 0, i = e.length; i > h; h++)r.enable(e[h]);
            u = e, l(), t.options.containerElement.find("button.pen-tool").click()
        }
    }

    function e() {
        if ($(t).off(ActiveText.Commands.GO_TO_PAGE, b), void 0 !== t.view.enableInteraction && t.view.enableInteraction(), f().fadeOut(), r) {
            var a, c, d = ActiveText.ViewUtils.getVisiblePages(t);
            for (a = 0, c = d.length; c > a; a++)r.disable(d[a]);
            for (a = 0, c = u.length; c > a; a++)r.disable(u[a])
        }
    }

    function f() {
        return p && 0 !== p.length || (p = t.options.containerElement.find(".iwbToolsPanel")), p
    }

    function g() {
        return t.options.containerElement.find(".iwbToolsPanel").length > 0
    }

    function h() {
        var a = f();
        a.find("button.pen-tool").addClass("active"), a.find("button.highlighter-tool").removeClass("active"), a.find("button.eraser-tool").removeClass("active"), a.find("button.clear-tool").removeClass("active"), r.setCurrentTool("pen")
    }

    function i() {
        var a = f();
        a.find("button.pen-tool").removeClass("active"), a.find("button.highlighter-tool").addClass("active"), a.find("button.eraser-tool").removeClass("active"), a.find("button.clear-tool").removeClass("active"), r.setCurrentTool("highlighter")
    }

    function j() {
        var a = f();
        a.find("button.pen-tool").removeClass("active"), a.find("button.highlighter-tool").removeClass("active"), a.find("button.eraser-tool").addClass("active"), a.find("button.clear-tool").removeClass("active"), r.setCurrentTool("eraser")
    }

    function k() {
        var a = f();
        a.find("button.pen-tool").removeClass("active"), a.find("button.highlighter-tool").removeClass("active"), a.find("button.eraser-tool").removeClass("active"), a.find("button.clear-tool").addClass("active");
        for (var b = ActiveText.ViewUtils.getVisiblePages(t), c = 0, d = b.length; d > c; c++)r.clearDrawings(b[c])
    }

    function l() {
        var a = f();
        a.find("button.pen-tool").on("click", h), a.find("button.highlighter-tool").on("click", i), a.find("button.eraser-tool").on("click", j), a.find("button.clear-tool").on("click", k)
    }

    function m(a) {
        var b = ActiveText.ViewUtils.getUnscaledDPSTargetDimensions(t), c = parseInt(a.css("left"), 10), d = parseInt(a.css("top"), 10), e = a.outerWidth(), f = a.outerHeight(), g = b.availHeight, h = b.availWidth;
        0 > c && a.css("left", 0), c + e > h && a.css("left", h - e), 0 > d && a.css("top", 0), d + f > g && a.css("top", g - f)
    }

    function n() {
        var a = f();
        m(a)
    }

    function o(a) {
        s = a, q = new ActiveText.UI.DrawingToolsPanelFactory, s && (s.activeTextInstance && (t = s.activeTextInstance), ActiveText.CSSUtils.embedCSS(ActiveText.UI.DrawingToolsPanel.Style))
    }

    var p, q, r, s, t, u, v = "#0000CD", w = ["000000", "FFFFFF", "0000CD", "FF0000", "008000", "FF4500", "FF69B4", "ADFF2F", "FFFF00", "00BFFF"];
    return{init: o, showToolPanel: d, hideToolPanel: e}
}, ActiveText.UI.DrawingToolsPanelFactory = function () {
    "use strict";
    var a = '<div class="iwbToolsPanel">';
    return a += '<div class="gripper"></div>', a += '<button class="btn pen-tool"><i class="pen-tool"></i>Pen Tool</button>', a += '<button class="btn highlighter-tool"><i class="highlighter-tool"></i>Highlighter</button>', a += '<button class="btn eraser-tool"><i class="eraser-tool"></i>Eraser</button>', a += '<button class="btn clear-tool"><i class="clear-tool"></i>Clear all</button>', a += '<div id="colourpicker-tool"></div>', a += "</div>", {panelTemplate: a}
}, ActiveText.UI.DrawingToolsPanel.Style = function (a) {
    "use strict";
    var b = a.SkinUtils.getPathToGlobalResource(), c = "#434343", d = "#707070", e = 44;
    return"div.iwbToolsPanel{position:absolute;padding:4px 4px 4px 36px;background:white url('" + b + "img/gripper.png') 5px 5px no-repeat;border:1px solid #a0a0a0;width:226px;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;-webkit-box-shadow:0 1px 5px rgba(0, 0, 0, 0.5);-moz-box-shadow:0 1px 5px rgba(0, 0, 0, 0.5);box-shadow:0 1px 5px rgba(0, 0, 0, 0.5);-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;}div.iwbToolsPanel button.btn{display:inline-block;text-align:center;vertical-align:middle;border:1px solid #ccc;cursor:pointer;width:" + e + "px;height:" + e + "px;padding:0;margin:0 0 0 1px;background-color:" + d + ";background-image:-moz-linear-gradient(top, " + d + ", " + d + ");background-image:-ms-linear-gradient(top, " + d + ", " + d + ");background-image:-webkit-gradient(linear, 0 0, 0 100%, from(" + d + "), to(" + d + "));background-image:-webkit-linear-gradient(top, " + d + ", " + d + ");background-image:-o-linear-gradient(top, " + d + ", " + d + ");background-image:linear-gradient(top, " + d + ", " + d + ");background-repeat:repeat-x;border-color:" + d + " " + d + " #4a4a4a;border-color:rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;overflow:hidden;color:white;text-shadow:0px 1px 0px rgba(0, 0, 0, 0.4);font-size:13px;line-height:18px;}div.iwbToolsPanel button.btn:hover, div.iwbToolsPanel button.btn:active, div.iwbToolsPanel button.btn.active, div.iwbToolsPanel button.btn.disabled, div.iwbToolsPanel button.btn[disabled]{background-color:" + d + ";}div.iwbToolsPanel button.btn:active, div.iwbToolsPanel button.btn.active{background-color:#575757 \\9;}div.iwbToolsPanel button.btn:hover, div.iwbToolsPanel button.btn.hover{background-color:" + c + ";background-image:-moz-linear-gradient(top, " + c + ", " + c + ");background-image:-ms-linear-gradient(top, " + c + ", " + c + ");background-image:-webkit-gradient(linear, 0 0, 0 100%, from(" + c + "), to(" + c + "));background-image:-webkit-linear-gradient(top, " + c + ", " + c + ");background-image:-o-linear-gradient(top, " + c + ", " + c + ");background-image:linear-gradient(top, " + c + ", " + c + ");background-repeat:repeat-x;border-color:" + c + " " + c + " #1d1d1d;border-color:rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);background-position:0 0;}div.iwbToolsPanel button.btn:hover:hover, div.iwbToolsPanel button.btn:hover:active, div.iwbToolsPanel button.btn:hover.active, div.iwbToolsPanel button.btn:hover.disabled, div.iwbToolsPanel button.btn:hover[disabled], div.iwbToolsPanel button.btn.hover:hover, div.iwbToolsPanel button.btn.hover:active, div.iwbToolsPanel button.btn.hover.active, div.iwbToolsPanel button.btn.hover.disabled, div.iwbToolsPanel button.btn.hover[disabled]{background-color:" + c + ";}div.iwbToolsPanel button.btn:hover:active, div.iwbToolsPanel button.btn:hover.active, div.iwbToolsPanel button.btn.hover:active, div.iwbToolsPanel button.btn.hover.active{background-color:#2a2a2a \\9;}div.iwbToolsPanel button.btn:active, div.iwbToolsPanel button.btn.active{background-color:" + c + ";background-image:-moz-linear-gradient(top, " + c + ", " + c + ");background-image:-ms-linear-gradient(top, " + c + ", " + c + ");background-image:-webkit-gradient(linear, 0 0, 0 100%, from(" + c + "), to(" + c + "));background-image:-webkit-linear-gradient(top, " + c + ", " + c + ");background-image:-o-linear-gradient(top, " + c + ", " + c + ");background-image:linear-gradient(top, " + c + ", " + c + ");background-repeat:repeat-x;border-color:" + c + " " + c + " #1d1d1d;border-color:rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);filter:progid:DXImageTransform.Microsoft.gradient(enabled = false); }div.iwbToolsPanel button.btn:active:hover, div.iwbToolsPanel button.btn:active:active, div.iwbToolsPanel button.btn:active.active, div.iwbToolsPanel button.btn:active.disabled, div.iwbToolsPanel button.btn:active[disabled], div.iwbToolsPanel button.btn.active:hover, div.iwbToolsPanel button.btn.active:active, div.iwbToolsPanel button.btn.active.active, div.iwbToolsPanel button.btn.active.disabled, div.iwbToolsPanel button.btn.active[disabled]{background-color:" + c + ";}div.iwbToolsPanel button.btn:active:active, div.iwbToolsPanel button.btn:active.active, div.iwbToolsPanel button.btn.active:active, div.iwbToolsPanel button.btn.active.active{background-color:#2a2a2a \\9;}div.iwbToolsPanel button.btn i{display:block; }div.iwbToolsPanel button.btn i.pen-tool{width:" + e + "px;height:" + e + "px;background:transparent url('" + b + "img/pen-tool.png') center center no-repeat; }div.iwbToolsPanel button.btn i.highlighter-tool{width:" + e + "px;height:" + e + "px;background:transparent url('" + b + "img/highlighter-tool.png') center center no-repeat;}div.iwbToolsPanel button.btn i.eraser-tool{width:" + e + "px;height:" + e + "px;background:transparent url('" + b + "img/eraser-tool.png') center center no-repeat;}div.colorPicker-picker{height:" + e + "px;width:" + e + "px;padding:0;margin:0 0 0 2px;background:url(" + b + "img/colour-picker/arrow.gif) no-repeat bottom right;cursor:pointer;display:inline-block;-webkit-box-shadow:inset 0 1px 5px rgba(0, 0, 0, 0.3);-moz-box-shadow:inset 0 1px 5px rgba(0, 0, 0, 0.3);box-shadow:inset 0 1px 5px rgba(0, 0, 0, 0.3);vertical-align:top;}div.colorPicker-picker.active{background-image:url(" + b + "img/colour-picker/arrow-active.gif);}div.colorPicker-palette{width:240px;position:absolute;background:white;border:1px solid #a0a0a0;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 5px rgba(0, 0, 0, 0.5);-moz-box-shadow:0 1px 5px rgba(0, 0, 0, 0.5);box-shadow:0 1px 5px rgba(0, 0, 0, 0.5);padding:2px;z-index:9999;}div.colorPicker_hexWrap{width:100%;float:left;display:none;}div.colorPicker-swatch{height:" + e + "px;width:" + e + "px;margin:2px;float:left;cursor:pointer;-webkit-box-shadow:inset 0 1px 5px rgba(0, 0, 0, 0.3);-moz-box-shadow:inset 0 1px 5px rgba(0, 0, 0, 0.3);box-shadow:inset 0 1px 5px rgba(0, 0, 0, 0.3);-webkit-transition:all .2s ease-in-out;}div.colorPicker-swatch:hover{-webkit-transform:scale(1.1);-webkit-box-shadow:0 1px 3px rgba(0, 0, 0, 0.3);-moz-box-shadow:0 1px 3px rgba(0, 0, 0, 0.3);box-shadow:0 1px 3px rgba(0, 0, 0, 0.3);}.canvas-container{position:absolute;z-index:1010;top:0;left:0;bottom:0;right:0;background:transparent;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#01000000,endColorstr=#01000000);background:rgba(0,0,0,0);zoom:1}"
}(ActiveText), ActiveText.Analytics = function () {
    "use strict";
    function a(a) {
        if (a && a.options && a.options.containerElement) {
            k = a, $(k.options.containerElement).on("remove", b), l = (new Date).getTime();
            var c = $(k);
            c.on(ActiveText.Events.BOOK_STRUCTURE_LOADED, e), c.on(ActiveText.Events.NAVMAP_LOADED, d), c.on(ActiveText.Commands.GO_TO_PAGE, h), c.on(ActiveText.Hotspots.Events.CLICKED, i), c.on(ActiveText.Events.FRAME_CONTENT_LOADED, f), c.on(ActiveText.Events.FRAME_CONTENT_ERROR, f), c.on(ActiveText.Events.UI_ELEMENT_CLICKED, g), window.onbeforeunload = j
        }
    }

    function b() {
        $(k.options.containerElement).off("remove", b);
        var a = $(k);
        a.off(ActiveText.Events.BOOK_STRUCTURE_LOADED, e), a.off(ActiveText.Events.NAVMAP_LOADED, d), a.off(ActiveText.Commands.GO_TO_PAGE, h), a.off(ActiveText.Hotspots.Events.CLICKED, i), a.off(ActiveText.Events.FRAME_CONTENT_LOADED, f), a.off(ActiveText.Events.FRAME_CONTENT_ERROR, f), a.off(ActiveText.Events.UI_ELEMENT_CLICKED, g), window.onbeforeunload = void 0
    }

    function c(a, b) {
        var c = $.extend(b, {timestamp: (new Date).getTime(), browser: window.navigator.userAgent, whichbook: k.options.pathToAssets, host: window.location.href});
        $(k).trigger(a, c)
    }

    function d() {
        n = !0
    }

    function e() {
        if (n) {
            var a = (new Date).getTime() - l + "ms", b = [];
            for (var d in Modernizr)"boolean" == typeof Modernizr[d] && b.push(d);
            var e = b.toString(), f = "";
            if (k && k.options && k.options.extensions) {
                for (var g = [], h = 0, i = k.options.extensions.length; i > h; h++)g.push(k.options.extensions[h].key || "");
                f = g.toString()
            }
            var j = {timetoload: a, capabilities: e, extensions: f, screendimensions: window.screen.availWidth + "x" + window.screen.availHeight};
            c(ActiveText.Analytics.Events.BOOK_OPENED, j)
        }
    }

    function f(a, b) {
        var d = k.data.getFlatListOfNavigation(), e = ActiveText.ViewUtils.getVisiblePages(k);
        if (_.contains(e, b.index) && d[b.index]) {
            var f = parseInt(m[b.index], 10), g = (new Date).getTime() - f, h = {pagetitle: d[b.index].title, pageindex: b.index, pagenumber: ActiveText.NavigationUtils.pageIndexToPageNumber(k, b.index), pageurl: k.utils.getSourcePathForIndex(b.index), viewmode: k.view.model.getScaleMode(), timetoload: g + "ms"};
            c(ActiveText.Analytics.Events.PAGE_VIEW, h)
        }
    }

    function g(a, b) {
        var d = {elementname: b.which, interactiontype: "click"};
        c(ActiveText.Analytics.Events.UI_ACTIVATED, d)
    }

    function h() {
        for (var a = (new Date).getTime(), b = ActiveText.ViewUtils.getVisiblePages(k), c = 0, d = b.length; d > c; c++)m[b[c]] = a
    }

    function i(a, b) {
        var d = "";
        b && b.data && (d = b.data.uri);
        var e = {uridata: d, type: b.type};
        c(ActiveText.Analytics.Events.OVERLAY_ACTIVATED, e)
    }

    function j() {
        var a = {};
        c(ActiveText.Analytics.Events.BOOK_CLOSED, a)
    }

    var k, l, m = {}, n = !1;
    return{init: a, key: "analytics"}
}, ActiveText.Analytics.Events = {BOOK_OPENED: "bookopened.analytics.activetext", PAGE_VIEW: "pageview.analytics.activetext", PAGE_EXIT: "pageexit.analytics.activetext", BOOK_CLOSED: "bookclosed.analytics.activetext", UI_ACTIVATED: "uielementactivated.analytics.activetext", OVERLAY_ACTIVATED: "overlayactivated.analytics.activetext", WIDGET_CLOSED: "widgetclosed.analytics.activetext"}, ActiveText.TinCanAdaptor = function (a) {
    "use strict";
    function b(b) {
        function j() {
            $(b.options.containerElement).off("remove", j), $(b).off(ActiveText.Analytics.Events.BOOK_OPENED, c), $(b).off(ActiveText.Analytics.Events.BOOK_CLOSED, d), $(b).off(ActiveText.Analytics.Events.PAGE_VIEW, e), $(b).off(ActiveText.Analytics.Events.PAGE_EXIT, f), $(b).off(ActiveText.Analytics.Events.OVERLAY_ACTIVATED, g), $(b).off(ActiveText.Analytics.Events.WIDGET_CLOSED, h), i = void 0
        }

        return a ? void(b && b.options && b.options.containerElement && ($(b.options.containerElement).on("remove", j), $(b).on(ActiveText.Analytics.Events.BOOK_OPENED, c), $(b).on(ActiveText.Analytics.Events.BOOK_CLOSED, d), $(b).on(ActiveText.Analytics.Events.PAGE_VIEW, e), $(b).on(ActiveText.Analytics.Events.PAGE_EXIT, f), $(b).on(ActiveText.Analytics.Events.OVERLAY_ACTIVATED, g), $(b).on(ActiveText.Analytics.Events.WIDGET_CLOSED, h), i = b)) : void debug.warn("Unable to start TinCanAdaptor because existing TinCan API Adaptor was not supplied.")
    }

    function c(b, c) {
        var d = i.data.getMetaData(), e = {};
        if (c) {
            var f, g;
            d && (f = d.title, g = d.identifier), e = {verb: {id: "http://activitystrea.ms/schema/1.0/access", display: {"en-US": "accessed"}}, object: {id: c.whichbook, definition: {name: f, type: "book", extensions: {"http://id.tincanapi.com/extension/isbn": g, "http://id.tincanapi.com/extension/browser-info": c.browser}}}, context: {platform: c.host, extensions: {"http://id.tincanapi.com/extension/browser-info": c.browser}}}
        }
        a.sendStatement(e)
    }

    function d(b, c) {
        var d = i.data.getMetaData(), e = {};
        if (c) {
            var f, g;
            d && (f = d.title, g = d.identifier), e = {verb: {id: "http://adlnet.gov/expapi/verbs/exited", display: {"en-US": "exited"}}, object: {id: c.whichbook, definition: {name: f, type: "book", extensions: {"http://id.tincanapi.com/extension/isbn": g, "http://id.tincanapi.com/extension/browser-info": c.browser}}}, context: {platform: c.host, extensions: {"http://id.tincanapi.com/extension/browser-info": c.browser}}}
        }
        a.sendStatement(e)
    }

    function e(b, c) {
        var d = i.data.getMetaData(), e = {};
        if (c) {
            var f, g;
            d && (f = d.title, g = d.identifier), e = {verb: {id: "http://activitystrea.ms/schema/1.0/read", display: {"en-US": "read"}}, object: {id: c.pageurl, definition: {name: c.pagetitle, type: "page", extensions: {"http://id.tincanapi.com/extension/browser-info": c.browser}}}, context: {contextActivities: {parent: {id: c.whichbook, definition: {name: f, type: "book", extensions: {"http://id.tincanapi.com/extension/isbn": g, "http://id.tincanapi.com/extension/browser-info": c.browser}}}}, platform: c.host, extensions: {"http://id.tincanapi.com/extension/browser-info": c.browser}}}
        }
        a.sendStatement(e)
    }

    function f(b, c) {
        var d = i.data.getMetaData(), e = {};
        if (c) {
            var f, g;
            d && (f = d.title, g = d.identifier), e = {verb: {id: "http://adlnet.gov/expapi/verbs/exited", display: {"en-US": "exited"}}, object: {id: c.pageurl, definition: {name: c.pagetitle, type: "page", extensions: {"http://id.tincanapi.com/extension/browser-info": c.browser}}}, context: {contextActivities: {parent: {id: c.whichbook, definition: {name: f, type: "book", extensions: {"http://id.tincanapi.com/extension/isbn": g, "http://id.tincanapi.com/extension/browser-info": c.browser}}}}, platform: c.host, extensions: {"http://id.tincanapi.com/extension/browser-info": c.browser}}}
        }
        a.sendStatement(e)
    }

    function g(b, c) {
        var d = i.data.getMetaData(), e = {};
        if (c) {
            var f, g;
            d && (f = d.title, g = d.identifier), e = {verb: {id: "http://adlnet.gov/expapi/verbs/launched", display: {"en-US": "launched"}}, object: {id: c.uridata, definition: {name: c.title, type: "application"}}, context: {contextActivities: {parent: {id: c.whichbook, definition: {name: f, type: "book", extensions: {"http://id.tincanapi.com/extension/isbn": g, "http://id.tincanapi.com/extension/browser-info": c.browser}}}}, platform: c.host, extensions: {"http://id.tincanapi.com/extension/browser-info": c.browser}}}
        }
        a.sendStatement(e)
    }

    function h(b, c) {
        var d = i.data.getMetaData(), e = {};
        if (c) {
            var f, g;
            d && (f = d.title, g = d.identifier), e = {verb: {id: "http://adlnet.gov/expapi/verbs/exited", display: {"en-US": "exited"}}, object: {id: c.uridata, definition: {name: c.title, type: "application"}}, context: {contextActivities: {parent: {id: c.whichbook, definition: {name: f, type: "book", extensions: {"http://id.tincanapi.com/extension/isbn": g, "http://id.tincanapi.com/extension/browser-info": c.browser}}}}, platform: c.host, extensions: {"http://id.tincanapi.com/extension/browser-info": c.browser}}}
        }
        a.sendStatement(e)
    }

    var i;
    return{init: b, key: "tincan"}
}, ActiveText.Controls = ActiveText.Controls || {}, ActiveText.Controls.TooltipHelper = function () {
    "use strict";
    function a() {
        var a = $(".activetext");
        $(".tooltip").each(function () {
            if ($(this).length && a.length) {
                var b, c = a.offset().left + a.width() - ($(this).offset().left + $(this).width());
                0 > c && (c -= 10, b = ActiveText.BrowserUtils.isOldVersionOfInternetExplorer ? "0 " + -c + "px 0 0" : "0 " + -c + "px 0 " + c + "px"), c = $(this).offset().left - a.offset().left, 0 > c && (c -= 10, b = ActiveText.BrowserUtils.isOldVersionOfInternetExplorer ? "0 0 0 " + -c + "px" : "0 " + c + "px 0 " + -c + "px"), $(this).find(".tooltip-inner").css("margin", b)
            }
        })
    }

    function b() {
        var a = $(".tooltip");
        a.find(".tooltip-inner").css("margin", "")
    }

    return{fixTooltipPosition: a, resetTooltipPositionFixes: b}
}(), ActiveText.Controls = ActiveText.Controls || {}, ActiveText.Controls.ButtonHelper = function () {
    "use strict";
    function a(a) {
        var b = $(a.currentTarget), c = b.data("hoverStyles"), d = b.data("hoverImageSrc"), e = b.data("toggleButtonHoverImageSrc");
        b.data("disabled") || (b.data("selected") === !0 ? $(this).find("img").attr("src", e) : $(this).find("img").attr("src", d)), c && $(this).css(c), $(b).attr("has-tooltip") && ($(b).tooltip("hide").tooltip("show"), ActiveText.Controls.TooltipHelper.fixTooltipPosition())
    }

    function b(a) {
        var b = $(a.currentTarget), c = b.data("styles"), d = b.data("imageSrc"), e = b.data("toggleButtonImageSrc");
        b.removeClass("selected"), "blur" !== a.type && b.blur(), b.data("disabled") || (b.data("selected") === !0 ? b.find("img").attr("src", e) : b.find("img").attr("src", d)), c && b.css(c), $(b).attr("has-tooltip") && (ActiveText.Controls.TooltipHelper.resetTooltipPositionFixes(), $(b).tooltip("hide"))
    }

    function c(a) {
        var b = $(a.currentTarget), c = b.data("downImageSrc"), d = b.data("toggleButtonDownImageSrc");
        b.addClass("selected"), b.data("disabled") || (d && b.data("selected") === !0 ? b.find("img").attr("src", d) : b.find("img").attr("src", c))
    }

    function d(a) {
        a.blur().data("disabled", !0), a.attr({"aria-disabled": !0})
    }

    function e(a) {
        a.data("disabled", !1), a.attr({"aria-disabled": !1})
    }

    function f(a) {
        var b = a.data("disabledImageSrc");
        a.find("img").attr("src", b)
    }

    function g(a) {
        if (a.data("selected") === !0) {
            var b = a.data("toggleButtonImageSrc");
            a.find("img").attr("src", b)
        } else {
            var c = a.data("imageSrc");
            a.find("img").attr("src", c)
        }
    }

    function h() {
        var a = $(this);
        a.css({cursor: "pointer"}), d(a), a.stop(!0, !0).fadeTo(500, .5)
    }

    function i() {
        var a = $(this);
        a.css({cursor: "pointer"}), e(a), $(this).stop(!0, !0).fadeTo(500, 1)
    }

    function j() {
        var a = $(this);
        a.css({cursor: "not-allowed"}), f(a), d(a)
    }

    function k() {
        var a = $(this);
        a.css({cursor: "pointer"}), g(a), e(a)
    }

    function l() {
        var a = $(this);
        a.css({visibility: "hidden"}), d(a)
    }

    function m() {
        var a = $(this);
        a.css({visibility: "visible"}), e(a)
    }

    function n() {
        $(this).attr("has-tooltip") && ($(this).tooltip("show"), ActiveText.Controls.TooltipHelper.fixTooltipPosition()), a.apply(this, arguments)
    }

    function o() {
        $(this).attr("has-tooltip") && (ActiveText.Controls.TooltipHelper.resetTooltipPositionFixes(), $(this).tooltip("hide")), b.apply(this, arguments)
    }

    function p(a) {
        var b = a.keyCode ? a.keyCode : a.which;
        b === ActiveText.Keymap.ENTER && $(this).click()
    }

    function q(a, b) {
        var c = a;
        if (a && b) {
            var d = a.indexOf(b);
            -1 !== a.indexOf(b) && (c = a.slice(0, d) + "<u>" + b + "</u>" + a.slice(d + 1))
        }
        return c
    }

    return{mouseOver: a, mouseOut: b, mouseDown: c, fadeEnable: i, fadeDisable: h, basicDisable: j, basicEnable: k, hideDisable: l, showEnable: m, focusAction: n, blurAction: o, accessibleClick: p, getAccessKeyHTMLFor: q}
}(), ActiveText.UI = ActiveText.UI || {}, ActiveText.UI.BasicControls = ActiveText.UI.BasicControls || {}, ActiveText.UI.BasicControls.SimpleButtonFactory = function () {
    "use strict";
    function a(a) {
        var b, c = Boolean(void 0 !== a.imageSrc);
        if (c) {
            var d = a.imageSrc;
            b = a.width && a.height ? "<img src='" + d + "' width='" + a.width + "' height='" + a.height + "' />" : "<img src='" + d + "' />"
        } else if (a.svgData)b = a.svgData; else {
            var e = a.icon || a.icon_off;
            b = e ? "<i class='button " + e + "'></i>" : "<span>" + a.title + "</span>"
        }
        return b
    }

    function b(b, c) {
        function d() {
            j.off({mouseover: ActiveText.Controls.ButtonHelper.mouseOver, focus: ActiveText.Controls.ButtonHelper.focusAction, blur: ActiveText.Controls.ButtonHelper.blurAction, mouseout: ActiveText.Controls.ButtonHelper.mouseOut, mousedown: ActiveText.Controls.ButtonHelper.mouseDown, touchstart: ActiveText.Controls.ButtonHelper.mouseDown, touchend: ActiveText.Controls.ButtonHelper.mouseOut, touchcancel: ActiveText.Controls.ButtonHelper.mouseOut, remove: d, keyup: ActiveText.Controls.ButtonHelper.accessibleClick}), $(window).off({keydown: e, keyup: f})
        }

        function e(a) {
            a.keyCode === i.keyCode && $(j).mousedown()
        }

        function f(a) {
            a.keyCode === i.keyCode && $(j).mouseout()
        }

        function g(a, b) {
            switch (a.enableBehaviour) {
                case"show":
                    b.disable = ActiveText.Controls.ButtonHelper.basicDisable, b.enable = ActiveText.Controls.ButtonHelper.basicEnable;
                    break;
                case"hide":
                    b.disable = ActiveText.Controls.ButtonHelper.hideDisable, b.enable = ActiveText.Controls.ButtonHelper.showEnable;
                    break;
                default:
                    b.disable = ActiveText.Controls.ButtonHelper.fadeDisable, b.enable = ActiveText.Controls.ButtonHelper.fadeEnable
            }
        }

        function h(a) {
            void 0 !== a.keyCode && $(window).keydown(e).keyup(f)
        }

        var i = $.extend({}, c, b);
        c && (i = $.extend(i, c.options));
        var j, k = $.extend({}, i, i.styles, i.style), l = $.extend({}, i, i.hoverStyles, i.hoverStyle), m = a(k), n = i.imageSrc, o = i.downImageSrc, p = i.hoverImageSrc, q = i.disabledImageSrc, r = i.toggleButtonImageSrc, s = i.toggleButtonDownImageSrc, t = i.toggleButtonHoverImageSrc, u = "activetext-default";
        i && i.styles && i.styles.barClass && (u = i.styles.barClass), j = $(n ? "<a class='button'></a>" : "<a class='" + u + " button'></a>");
        var v = $(m).attr("role", "presentation");
        j.html(v), j.attr("data-original-title", b.title), b.className && j.addClass(b.className), j.css({borderRadius: k && k.height ? k.height / 2 : "22px", cursor: "pointer", WebkitTouchCallout: "none", WebkitTapHighlightColor: "rgba(0,0,0,0)", outline: "none", display: "inline-block"}), i.styles && j.css(i.styles), k.closeFunction = void 0, j.data("styles", k), l.closeFunction = void 0, j.data("hover-styles", l);
        var w = $.extend({}, i.toggleStyles, i.toggleStyle);
        w.closeFunction = void 0, j.data("toggle-styles", w);
        var x = $.extend({}, i.toggleHoverStyles, i.toggleHoverStyle);
        return x.closeFunction = void 0, j.data("toggle-hover-styles", x), j.data("imageSrc", n), j.data("downImageSrc", o), j.data("hoverImageSrc", p), j.data("toggleButtonImageSrc", r), j.data("toggleButtonDownImageSrc", s), j.data("toggleButtonHoverImageSrc", t), j.data("disabledImageSrc", q), j.on({mouseover: ActiveText.Controls.ButtonHelper.mouseOver, focus: ActiveText.Controls.ButtonHelper.focusAction, blur: ActiveText.Controls.ButtonHelper.blurAction, mouseout: ActiveText.Controls.ButtonHelper.mouseOut, mousedown: ActiveText.Controls.ButtonHelper.mouseDown, touchstart: ActiveText.Controls.ButtonHelper.mouseDown, touchend: ActiveText.Controls.ButtonHelper.mouseOut, touchcancel: ActiveText.Controls.ButtonHelper.mouseOut, remove: d, keyup: ActiveText.Controls.ButtonHelper.accessibleClick}), j.attr({role: "button", title: b.title, "data-original-title": ActiveText.Controls.ButtonHelper.getAccessKeyHTMLFor(b.title, b.accesskey), "aria-label": b.title, accesskey: b.accesskey}), (void 0 === k.tooltips || k.tooltips) && (j.attr("has-tooltip", !0), j.tooltip({html: !0, template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'})), j.trigger("mouseout"), g(i, j), h(i), j
    }

    return{createSimpleButton: b}
}(), ActiveText.UI = ActiveText.UI || {}, ActiveText.UI.BasicControls = ActiveText.UI.BasicControls || {}, ActiveText.UI.BasicControls.ToggleButtonFactory = function () {
    "use strict";
    function a(a, b) {
        var c, d = Boolean(void 0 !== a.imageSrc);
        if (d) {
            var e = a.imageSrc;
            b && (e = a.toggleButtonImageSrc), c = a.width && a.height ? '<img src="' + e + '" width="' + a.width + '" height="' + a.height + '" />' : '<img src="' + e + '" />'
        } else if (a.svgData)c = a.svgData; else {
            var f = a.icon || a.icon_off;
            b && (f = a.icon_on || a.icon_off || a.icon), f || (f = "icon-undefined"), c = '<i class="button ' + f + '"></i>'
        }
        return c
    }

    function b(b, c) {
        var d = ActiveText.UI.BasicControls.SimpleButtonFactory.createSimpleButton(b, c);
        return d.toggle_button = function (e) {
            var f = $.extend({}, b, c);
            c && c.options && (f = $.extend(f, c.options));
            var g = $.extend({}, f, f.styles, f.style), h = a(g, e), i = $(h).attr("role", "presentation");
            d.html(i).data("selected", e);
            var j, k;
            e ? (j = b.title_off || b.title, d.attr({"aria-label": j}), k = ActiveText.Controls.ButtonHelper.getAccessKeyHTMLFor(j, b.accesskey), d.attr("data-original-title", k).attr("title", j), d.addClass("active")) : (j = b.title_on || b.title, d.attr({"aria-label": j}), k = ActiveText.Controls.ButtonHelper.getAccessKeyHTMLFor(j, b.accesskey), d.attr("data-original-title", k).attr("title", j), d.removeClass("active")), d.attr("aria-pressed", e), d.attr("has-tooltip") && d.tooltip("hide")
        }, d.toggle_state = function () {
            return d.data("selected")
        }, d.toggle_button(!1), d.trigger("mouseout"), d
    }

    return{createToggleButton: b}
}(), ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"), function (a) {
    "use strict";
    function b(b, e) {
        var f = a.UI.BasicControls.ToggleButtonFactory, g = f.createToggleButton(d, e);
        g.click(function () {
            $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: c})
        });
        var h, i = new a.UI.StructurePopup;
        e && e.options && e.options.popupnavwidth && (h = e.options.popupnavwidth), i.init(b, $(g), void 0, h);
        var j = $('<div class="contents-container control"></div>').css({display: "inline-block", position: "relative", width: g.outerWidth()});
        return j.append(g), j
    }

    var c = "contents", d = {title: "Contents", className: c, icon: "icon-list-ul", accesskey: "C"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText), ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"), function (a) {
    "use strict";
    function b() {
        return Modernizr.canvas
    }

    function c(b, c) {
        function f() {
            var a = $(h).data("isopen");
            a === !0 ? ($(h).data("isopen", !1), h.toggle_button(!1), i.hideToolPanel()) : ($(h).data("isopen", !0), h.toggle_button(!0), i.showToolPanel())
        }

        var g = a.UI.BasicControls.ToggleButtonFactory, h = g.createToggleButton(e, c);
        h.click(function () {
            $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: d})
        });
        var i = new a.UI.DrawingToolsPanel;
        return i.init({activeTextInstance: b}), h.on("click tap", f), $(h).data("isopen", !1), h.toggle_button(!1), h
    }

    var d = "drawing", e = {title: "Drawing Tools", icon: "icon-pencil", className: d, accesskey: "D"};
    a.UI.BasicControls.AvailableControls[d] = {create: c, supported: b}
}(ActiveText), ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"), function (a) {
    "use strict";
    function b(b, e) {
        function f() {
            $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: c}), window.open("", "_self", ""), window.close()
        }

        var g = a.UI.BasicControls.SimpleButtonFactory, h = g.createSimpleButton(d, e), i = e && e.options && e.options.closeFunction && "function" == typeof e.options.closeFunction;
        return h.on(i ? {click: e.options.closeFunction} : {click: f}), h
    }

    var c = "exit", d = {title: "Close eBook", icon: "icon-remove", className: c, accesskey: "B"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText), ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"), function (a) {
    "use strict";
    function b(b, e) {
        function f() {
            $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: c});
            var d = a.ExtensionUtils.getExtensionByKey(b, "controls");
            return d.hideControls(), !1
        }

        var g = a.UI.BasicControls.SimpleButtonFactory, h = g.createSimpleButton(d, e);
        return h.on({click: f}), h
    }

    var c = "minimise", d = {title: "Hide Controls", icon: "icon-angle-down", className: c, accesskey: "M"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText), ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"), function (a) {
    "use strict";
    function b(b, e) {
        function f() {
            $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: c});
            var d = b.navigation.canGoToNextPage();
            return d && b.navigation.gotoNextPage(), !1
        }

        function g() {
            var a = b.navigation.canGoToNextPage();
            a ? h.enable() : h.disable()
        }

        var h = a.UI.BasicControls.SimpleButtonFactory.createSimpleButton(d, e);
        return h.on({click: f}), $(b).on(a.Commands.GO_TO_PAGE, g), h
    }

    var c = "next", d = {title: "Next Page", icon: "icon-caret-right", className: c, keyCode: 39, accesskey: "N"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText),ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"),function (a) {
    "use strict";
    function b(b, e) {
        function f() {
            if ($(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: c}), h) {
                var d = k.renderNoteFromData({point: [66, 32], relativePoint: [.1, .1], text: "this is my note"}), e = b.model.getCurrentIndex(), f = a.LayerUtils.getOverlayForIndexByKey(b, e, "annotations");
                f.append(d)
            }
            return!1
        }

        function g() {
            j.off({click: f, remove: g}), h = void 0, i = void 0
        }

        var h = a.ExtensionUtils.getExtensionByKey(b, "notes"), i = a.UI.BasicControls.SimpleButtonFactory, j = i.createSimpleButton(d, e), k = new a.NoteFactory(b);
        return j.on({click: f, remove: g}), j
    }

    var c = "note", d = {title: "Annotations", icon: "icon-file", className: c, accesskey: "A"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText),ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"),function (a) {
    "use strict";
    function b(b, e) {
        function f() {
            $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: c}), j.togglePlay()
        }

        function g(a) {
            l.toggle_button("play" === a.type || "resume" === a.type ? !0 : !1)
        }

        function h() {
            l.enable()
        }

        function i(a) {
            a.on("click", f), $(b).on("play pause resume finish", g), $(b).on("stop", h)
        }

        var j = a.ExtensionUtils.getExtensionByKey(b, "recordandplay"), k = a.UI.BasicControls.ToggleButtonFactory, l = k.createToggleButton(d, e);
        return j && i(l), j && j.hasRecorded() && j.hasFlash() || l.disable(), l
    }

    var c = "play", d = {title: "Play", icon: "icon-play", className: c, accesskey: "L"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText),ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"),function (a) {
    "use strict";
    function b(b, e) {
        function f() {
            $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: c});
            var d = b.navigation.canGoToPreviousPage();
            return d && b.navigation.gotoPrevPage(), !1
        }

        function g() {
            var a = b.navigation.canGoToPreviousPage();
            a ? h.enable() : h.disable()
        }

        var h = a.UI.BasicControls.SimpleButtonFactory.createSimpleButton(d, e);
        return h.on({click: f}), $(b).on(a.Commands.GO_TO_PAGE, g), h
    }

    var c = "previous", d = {title: "Previous Page", icon: "icon-caret-left", className: c, keyCode: 37, accesskey: "P"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText),ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"),function (a) {
    "use strict";
    function b(a) {
        for (var b = a.replace(/\s+/g, "").split(/\D+/), c = [], d = 0, e = 0; e < b.length; e++)isNaN(parseInt(b[e], 10)) || (c[d] = b[e], d++);
        return c[0]
    }

    function c(c, d) {
        function h(a) {
            a.which === e && (j(), p.blur()), m.apply(p)
        }

        function i(a) {
            for (var b = c.data.getFlatListOfNavigation(), d = a.toLowerCase().replace(/\s+/g, "").replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()]/g, ""), e = 0; e < b.length; e++)if (b[e].title) {
                var f = b[e].title.toLowerCase().replace(/\s+/g, "").replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()]/g, "");
                if (f === d)return e
            }
            return!1
        }

        function j() {
            var d = p.val(), e = i(d);
            e = e ? a.NavigationUtils.pageIndexToPageNumber(c, i(d)) : b(d), c.navigation.gotoPage(e)
        }

        function k() {
            var b = c.model.getCurrentPageNumber(), d = a.FormattingUtils.formatPageLabel(c, n, o, b);
            p.val(d), q.find(".max-page-number").text(a.NavigationUtils.pageIndexToPageNumber(c, a.NavigationUtils.getMaximumValidPageIndex(c))), p.attr({"aria-valuemax": a.NavigationUtils.pageIndexToPageNumber(c, a.NavigationUtils.getMaximumValidPageIndex(c)), "aria-valuemin": a.NavigationUtils.pageIndexToPageNumber(c, a.NavigationUtils.getMinimumValidPageIndex(c)), "aria-valuenow": c.model.getCurrentPageNumber(), "aria-valuetext": d}), m.apply(p)
        }

        function l() {
            p.val("")
        }

        function m() {
            var a = $(this).val().length;
            1 > a ? a = 1 : a > 19 && (a = 20), $(this).attr("size", a)
        }

        var n;
        n = d.options && d.options.textFormatSinglePage ? d.options.textFormatSinglePage : f;
        var o;
        o = d.options && d.options.textFormatMultiPage ? d.options.textFormatMultiPage : g;
        var p = $('<input type="text" aria-live="polite" aria-label="Page Number" accesskey="N" />');
        Modernizr.touch && p.focus(l), p.blur(k), p.click(l), p.keyup(h);
        var q = $('<div class="quicknav control" style="display:inline-block;position:relative;width:auto"> of <span class="max-page-number">0</span></div>').prepend(p);
        return q.css({verticalAlign: "top", padding: "0 1em"}), d.options && d.options.style && d.options.style.background && (q.css("background", d.options.style.background), q.css("background-position", "center")), d.options && d.options.style && q.css(d.options.style), m.apply(p), $(c).on(a.Commands.GO_TO_PAGE, k), $(c).on(a.Events.RESIZE, k), $(c).on(a.Events.BOOK_STRUCTURE_LOADED, k), q
    }

    var d = "pagenumber", e = 13, f = "%%1", g = "%%1  %%2";
    a.UI.BasicControls.AvailableControls[d] = {create: c, test: {getQuickNavPageNumber: b}}
}(ActiveText),ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"),function (a) {
    "use strict";
    function b(a) {
        for (var b = a.replace(/\s+/g, "").split(/\D+/), c = [], d = 0, e = 0; e < b.length; e++)isNaN(parseInt(b[e], 10)) || (c[d] = b[e], d++);
        return c[0]
    }

    function c(c, d) {
        function h(a) {
            a.which === e && (j(), p.blur()), m.apply(p)
        }

        function i(a) {
            for (var b = c.data.getFlatListOfNavigation(), d = a.toLowerCase().replace(/\s+/g, "").replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()]/g, ""), e = 0; e < b.length; e++) {
                var f = b[e].title.toLowerCase().replace(/\s+/g, "").replace(/[\.,-\/#!$%\^&\*;:{}=\-_`~()]/g, "");
                if (f === d)return e
            }
            return!1
        }

        function j() {
            var d = p.val(), e = i(d);
            e = e ? a.NavigationUtils.pageIndexToPageNumber(c, i(d)) : b(d), c.navigation.gotoPage(e)
        }

        function k() {
            var b = c.model.getCurrentPageNumber(), d = a.FormattingUtils.formatPageLabel(c, n, o, b);
            p.val(d), p.attr({"aria-valuemax": a.NavigationUtils.pageIndexToPageNumber(c, a.NavigationUtils.getMaximumValidPageIndex(c)), "aria-valuemin": a.NavigationUtils.pageIndexToPageNumber(c, a.NavigationUtils.getMinimumValidPageIndex(c)), "aria-valuenow": c.model.getCurrentPageNumber(), "aria-valuetext": d}), m.apply(p)
        }

        function l() {
            p.val("")
        }

        function m() {
            var a = $(this).val().length;
            10 > a ? a = 10 : a > 19 && (a = 20), $(this).attr("size", a)
        }

        var n;
        n = d.options && d.options.textFormatSinglePage ? d.options.textFormatSinglePage : f;
        var o;
        o = d.options && d.options.textFormatMultiPage ? d.options.textFormatMultiPage : g;
        var p = $('<input type="text" aria-live="polite" aria-label="Quick Navigation" accesskey="N" />').css({width: 140, borderRadius: "25px", fontSize: 16, padding: "6px 12px", verticalAlign: "middle", border: "4px solid", outline: "none", fontWeight: "bold", textAlign: "center", textOverflow: "ellipsis"});
        d.options && d.options.style && p.css(d.options.style), Modernizr.touch && p.focus(l), p.blur(k), p.click(l), p.keyup(h);
        var q = $('<div class="quicknav" style="display:inline-block;position:relative;width:auto"></div>').append(p);
        return d.options && d.options.style && d.options.style.background && (q.css("background", d.options.style.background), q.css("background-position", "center")), m.apply(p), $(c).on(a.Commands.GO_TO_PAGE, k), $(c).on(a.Events.RESIZE, k), $(c).on(a.Events.BOOK_STRUCTURE_LOADED, k), q
    }

    var d = "quicknav", e = 13, f = "Page %%1 of %%2", g = "Pages %%1%%2 of %%3";
    a.UI.BasicControls.AvailableControls[d] = {create: c, test: {getQuickNavPageNumber: b}}
}(ActiveText),ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"),function (a) {
    "use strict";
    function b(b, c) {
        var d, e = a.UI.BasicControls.AvailableControls.quicknav, f = e.create(b, c), g = f.get().firstChild, h = new a.UI.StructurePopup;
        return c && c.options && c.options.popupnavwidth && (d = c.options.popupnavwidth), h.init(b, $(g), void 0, d), f
    }

    var c = "quicknav-popup";
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText),ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"),function (a) {
    "use strict";
    function b(b, e) {
        function f() {
            $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: c}), l.getState().playing() ? l.pause() && n.toggle_button(!1) : l.play() && n.toggle_button(!0)
        }

        function g(a) {
            n.toggle_button("onplay" === a.type || "onresume" === a.type ? !0 : !1)
        }

        function h(c) {
            for (var d, e = !1, f = a.ExtensionUtils.getExtensionByKey(b, "smildataloader"), g = 0, h = b.view.model.getDisplayedPages(); h > g; g++)d = c + g, f && f.hasSMILForPage(d) && (e = !0);
            return e
        }

        function i(c, d) {
            var e, f = 2 === b.view.model.getDisplayedPages(), g = a.NavigationUtils.calculateLeftmostPageIndexFromIndex(b, d.toPage), i = g;
            f === !1 && g !== d.toPage && (i = d.toPage), n.toggle_button(!1), e = h(i), e ? n.enable() : n.disable()
        }

        function j(c) {
            c.on({click: f}), $(l).on({onplay: g, onresume: g, onpause: g, onfinish: g}), $(b).on(a.Commands.GO_TO_PAGE, i)
        }

        function k() {
            l = new a.ReadToMe, l.init(b), b.extensions.push(l)
        }

        var l = a.ExtensionUtils.getExtensionByKey(b, "readtome");
        l || "function" != typeof a.ReadToMe || k();
        var m = a.UI.BasicControls.ToggleButtonFactory, n = m.createToggleButton(d, e);
        return l ? j(n) : n.disable(), n
    }

    var c = "readtome", d = {title: "Read to Me", icon: "icon-volume-up", className: c, accesskey: "R"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText),ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"),function (a) {
    "use strict";
    function b(b, f) {
        function g() {
            $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: c});
            var d = !1;
            return o.toggle_state() === !0 && (o.toggle_button(!1), p.skip(), p.play(), d = !0), d
        }

        function h() {
            $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: c}), p.getState().playing() ? p.pause() && n.toggle_button(!1) : p.play() && n.toggle_button(!0)
        }

        function i(a) {
            "onplay" === a.type || "onresume" === a.type ? (n.toggle_button(!0), o.toggle_button(!1)) : (n.toggle_button(!1), o.toggle_button(!0)), "onpause" === a.type && o.toggle_button(!0), "onfinish" === a.type && o.toggle_button(!1)
        }

        function j(c) {
            for (var d, e = !1, f = a.ExtensionUtils.getExtensionByKey(b, "smildataloader"), g = 0, h = b.view.model.getDisplayedPages(); h > g; g++)d = c + g, f && f.hasSMILForPage(d) && (e = !0);
            return e
        }

        function k(c, d) {
            var e, f = a.NavigationUtils.calculateLeftmostPageIndexFromIndex(b, d.toPage), g = 2 === b.view.model.getDisplayedPages(), h = a.ExtensionUtils.getExtensionByKey(b, "jdplays"), i = a.ExtensionUtils.getExtensionByKey(b, "rapidplays"), k = h || i, l = k.isInPerformanceMode(b), m = f;
            g === !1 && f !== d.toPage && (m = d.toPage), e = j(m), l === !0 ? (n.hide(), o.show(), o.toggle_button(!1)) : l === !1 && (n.show(), o.hide(), n.toggle_button(!1), e ? n.enable() : n.disable())
        }

        function l(c, d) {
            c.on({click: h}), d.on({click: g}), $(p).on({onplay: i, onresume: i, onpause: i, onfinish: i}), $(b).on(a.Commands.GO_TO_PAGE, k), $(b).on(a.Commands.RESIZE, k)
        }

        function m() {
            p = new a.ReadToMe, p.init(b), b.extensions.push(p)
        }

        var n, o, p = a.ExtensionUtils.getExtensionByKey(b, "readtome");
        p || "function" != typeof a.ReadToMe || m();
        var q = a.UI.BasicControls.ToggleButtonFactory;
        n = q.createToggleButton(d, f.options.readtome), o = q.createToggleButton(e, f.options.done), o.css("display", "none");
        var r = $('<span class="playAPart"></span>');
        return $(r).append(n), $(r).append(o), p ? l(n, o) : n.disable(), r
    }

    var c = "readtomeExtended", d = {title: "Read to Me", className: "readToMeButton", accesskey: "R"}, e = {title: "Done", className: "doneButton", accesskey: "R"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText),ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"),function (a) {
    "use strict";
    function b(b, e) {
        function f() {
            $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: c}), i.toggleRecord()
        }

        function g(a) {
            k.toggle_button("stop" === a.type ? !1 : !0)
        }

        function h(a) {
            a.on("click", f), $(b).on("record stop", g)
        }

        var i = a.ExtensionUtils.getExtensionByKey(b, "recordandplay"), j = a.UI.BasicControls.ToggleButtonFactory, k = j.createToggleButton(d, e);
        return i && i.hasFlash() ? h(k) : k.disable(), k
    }

    var c = "record", d = {title: "Record", icon: "icon-record", className: c, accesskey: "O"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText),ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"),function (a) {
    "use strict";
    function b(b, c) {
        var e, f = a.UI.BasicControls.SimpleButtonFactory, g = f.createSimpleButton(d, c), h = new a.UI.StructurePopup;
        return c && c.options && c.options.popupnavwidth && (e = c.options.popupnavwidth), h.init(b, $(g), void 0, e), g
    }

    var c = "structure", d = {title: "eBook Structure", icon: "icon-reorder", className: c, accesskey: "C"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText),ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"),function (a) {
    "use strict";
    function b(b, e) {
        function f() {
            $(b).trigger(a.Commands.SWITCH_TO_DPS_VIEW)
        }

        function g() {
            $(b).trigger(a.Commands.SWITCH_TO_SPS_VIEW)
        }

        function h() {
            $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: c}), a.ViewUtils.isSinglePageView(b) ? (j.toggle_button(!0), f()) : (j.toggle_button(!1), g())
        }

        var i = a.UI.BasicControls.ToggleButtonFactory, j = i.createToggleButton(d, e);
        return j.toggle_button(!0), j.on({click: h}), j
    }

    var c = "settings", d = {title_on: "Double Page View", title_off: "Single Page View", icon_on: "icon-columns", icon_off: "icon-file", className: c, accesskey: "S"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText),ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"),function (a) {
    "use strict";
    function b(b, e) {
        function f() {
            $(b).trigger(a.Commands.SWITCH_TO_DPS_VIEW)
        }

        function g() {
            $(b).trigger(a.Commands.SWITCH_TO_SPS_VIEW)
        }

        function h() {
            $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: c}), a.ViewUtils.isSinglePageView(b) ? (k.toggle_button(!0), f()) : (k.toggle_button(!1), g())
        }

        function i() {
            var c = a.ViewUtils.isCardMode(b);
            c === !1 ? k.enable() : k.remove()
        }

        var j = a.UI.BasicControls.ToggleButtonFactory, k = j.createToggleButton(d, e);
        return k.toggle_button(!0), k.on({click: h}), $(b).on(a.Commands.GO_TO_PAGE, i), k
    }

    var c = "viewtoggle", d = {title_on: "Double Page View", title_off: "Single Page View", icon_on: "icon-file", icon_off: "icon-columns", className: c, accesskey: "V"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText),ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"),function (a) {
    "use strict";
    function b(b, c) {
        function f() {
            b.view.getContainer().css({top: 0, left: 0});
            try {
                b.view.getContainer().parent().draggable("destroy"), b.view.getContainer().draggable("destroy")
            } catch (a) {
            }
            b.view.model.setMagnificationValue(1), b.view.model.setScaleMode("fth"), k.toggle_button(!0)
        }

        function g() {
            b.view.model.setMagnificationValue(2), $(b).trigger(a.Commands.SWITCH_TO_ZOOM_MODE), k.toggle_button(!1)
        }

        function h() {
            $(b).off(a.Commands.SWITCH_TO_DPS_VIEW, h).on(a.Commands.SWITCH_TO_SPS_VIEW, i), k.toggle_state() || g()
        }

        function i() {
            $(b).off(a.Commands.SWITCH_TO_SPS_VIEW, i).on(a.Commands.SWITCH_TO_DPS_VIEW, h), b.view.model.setMagnificationValue(1), k.toggle_state() || "ftw" === b.view.model.getScaleMode() || $(b).trigger(a.Commands.SWITCH_TO_SPS_FTW_VIEW)
        }

        function j() {
            $(b).off(a.Commands.SWITCH_TO_DPS_VIEW, h), $(b).off(a.Commands.SWITCH_TO_SPS_VIEW, i), $(b).trigger(a.Events.UI_ELEMENT_CLICKED, {which: d}), "zoom" === b.view.model.getScaleMode() ? f() : g()
        }

        var k = a.UI.BasicControls.ToggleButtonFactory.createToggleButton(e, c);
        return k.on({click: j}), f(), k
    }

    function c() {
        return!0
    }

    var d = "zoom", e = {title_off: "Zoom In", title_on: "Zoom Out", icon_off: "icon-zoom-out", icon_on: "icon-zoom-in", className: d, accesskey: "Z"};
    a.UI.BasicControls.AvailableControls[d] = {create: b, supported: c}
}(ActiveText),ActiveText.UI = ActiveText.UI || {},ActiveText.UI.StructurePopupDisplayHelper = function () {
    "use strict";
    function a(a, b, d) {
        q = a, s = b, r = d, c()
    }

    function b() {
        return d(), !1
    }

    function c() {
        s.click(b)
    }

    function d() {
        var a = s.parent();
        a && $.fn.atPopover && (u ? e() : l())
    }

    function e() {
        var a = s.parent(), b = a.find(".at-popover").length > 0;
        b ? f() : g()
    }

    function f() {
        var a = s.parent();
        setTimeout(i, 0), a.atPopover("hide"), s.removeClass("open"), s.toggle_button && s.toggle_button(!1), u = !1
    }

    function g() {
        var a = s.parent();
        setTimeout(h, 0), a.atPopover("show"), s.toggle_button && s.toggle_button(!0), s.attr("aria-activedescendant", "activetext-contents")
    }

    function h() {
        $(document).on("click", j)
    }

    function i() {
        $(document).off("click", j)
    }

    function j(a) {
        var b = s.parent();
        k(a) && (b.atPopover("hide"), s.removeClass("open"), s.toggle_button && s.toggle_button(!1), u = !1, i())
    }

    function k(a) {
        var b = s.parent(), c = $(a.target);
        return!(0 === c.parents(b).length && 0 === c.parents(".at-popover").length)
    }

    function l() {
        r(), u = !0, e()
    }

    function m(a) {
        for (var b = a; b >= 0; b--)if (n(b).length > 0) {
            n(b).addClass(t);
            break
        }
    }

    function n(a) {
        var b = s.parent().find(".at-popover-content");
        return b.find('a[data-page="' + a + '"]')
    }

    function o(a, b, c) {
        var d = s.parent().find(".at-popover-content");
        if (d) {
            var e = ActiveText.NavigationUtils.pageIndexToPageNumber(q, b), f = n(e).length > 0;
            if (ActiveText.ViewUtils.isSinglePageView(q))0 === n(e).length && m(e); else if (!f) {
                var g = ActiveText.NavigationUtils.getSiblingPageNumberForPage(q, e), h = n(g).length > 0;
                h ? n(g).addClass(t).focus() : m(e)
            }
            f && n(e).addClass(t).focus();
            var i = d.find("a").index($("." + t)), j = d.find(".list-container"), k = i * a - j.height() / 2 + a;
            void 0 === c && (c = 300), requestAnimationFrame(function () {
                j.animate({scrollTop: k}, {duration: c, queue: !1})
            })
        }
    }

    function p() {
        var a = s.parent().find(".at-popover-content");
        a && a.find("a." + t).removeClass(t)
    }

    var q, r, s, t = "active", u = !1;
    return{init: a, highlightLinksForIndex: o, removeHighlightFromAllLinks: p, showPopup: g, hidePopup: f}
},ActiveText.namespace("ActiveText.UI.StructurePopup"),ActiveText.UI.StructurePopup = function () {
    "use strict";
    function a(a, c, d, f) {
        k = a, m = c, n = ActiveText.UI.StructurePopupFactory, o = new ActiveText.UI.StructurePopupDisplayHelper, o.init(k, m, e), b(d, f), i()
    }

    function b(a, b) {
        var c;
        c = "string" == typeof a ? a + " " : k.options.containerElement.selector + " ";
        var d = ActiveText.UI.StructurePopup.Style.getStyle(c, k.theme, b);
        ActiveText.CSSUtils.embedCSS(d, c + "structure-popup")
    }

    function c(a) {
        var b = "";
        if (a && $.isArray(a) && a.length > 0) {
            b += '<ul role="navigationlist">';
            for (var d = 0, e = a.length; e > d; d++)b += c(a[d]);
            b += "</ul>"
        } else b += a && void 0 !== a.number && void 0 !== a.title ? '<li><a href="#" data-page="' + (a.number - 0) + '" role="navigation">' + a.title + "</a></li>" : "";
        return b
    }

    function d(a) {
        var b = c(a), d = $("<div></div>").html(b);
        return d.find("li:first").addClass("first"), d.find("li:last").addClass("last"), '<div class="structured-navigation-popup"><div id="activetext-contents" class="list-container scrollable">' + d.html() + "</div></div>"
    }

    function e() {
        m.addClass("open"), m.toggle_button && m.toggle_button(!0);
        var a = k.data.getNavigationStructure(), b = m.parent(), c = n.createPopup(b, d(a));
        c.css({visibility: "hidden"}), setTimeout(function () {
            function a() {
                k.options.containerElement.off("remove", a), $(window).off({keydown: f})
            }

            c.css({visibility: "visible"}), l = b.find(".at-popover-content"), l.attr("tabindex", m.attr("tabindex")), l.on({click: h}), o.highlightLinksForIndex(p, k.model.getCurrentIndex(), 0);
            new ScrollFix(l.find(".scrollable").get(0));
            k.options.containerElement.on("remove", a), $(window).on({keydown: f})
        }, 0)
    }

    function f(a) {
        var b = a.which;
        return b === ActiveText.Keymap.UP ? ($(".at-popover-content a:focus").parent().prev().find("a").focus(), g(), !1) : b === ActiveText.Keymap.DOWN ? ($(".at-popover-content a:focus").parent().next().find("a").focus(), g(), !1) : void(b === ActiveText.Keymap.ESCAPE ? o.hidePopup() : b === ActiveText.Keymap.TAB && g())
    }

    function g() {
        var a = l.find("a").index($("a:focus")), b = l.find(".list-container"), c = a * p - b.height() / 2 + p;
        requestAnimationFrame(function () {
            b.animate({scrollTop: c}, {duration: 300, queue: !1})
        })
    }

    function h(a) {
        var b = $(a.target).attr("data-page");
        return k.navigation.gotoPage(b), $(a.target).blur(), !1
    }

    function i() {
        $(k).on(ActiveText.Commands.GO_TO_PAGE, j)
    }

    function j(a, b) {
        o.removeHighlightFromAllLinks(), o.highlightLinksForIndex(p, b.toPage)
    }

    var k, l, m, n, o, p = 32;
    return{init: a, createPopup: i}
},ActiveText.namespace("ActiveText.UI.StructurePopup.Style"),ActiveText.UI.StructurePopup.Style = function () {
    "use strict";
    function a(a, b, c) {
        var d = 20;
        a || (a = ""), b || (b = new ActiveText.Theme), c || (c = 480);
        var e = b.getControlsOutlineColor(), f = b.getPopupBackgroundColor(), g = b.getControlsForegroundColor(), h = b.getControlsForegroundHoverColor(), i = b.getControlsForegroundHoverColor(.66), j = b.getControlsForegroundHoverColor(.33), k = b.getControlsOutlineColor(.5), l = /(Mac|iPad|iPhone|iPod)/g.test(navigator.userAgent), m = !ActiveText.BrowserUtils.isMobileDevice, n = "";
        return l || (n = a + ".at-popover ::-webkit-scrollbar {width: 8px;height: 10px;}" + a + ".at-popover ::-webkit-scrollbar-button:start:decrement { display: block; width: 5px; height: 5px; background-color: transparent;}" + a + ".at-popover ::-webkit-scrollbar-button:end:increment {display: block; width: 5px; height: 5px; background-color: transparent;}" + a + ".at-popover ::-webkit-scrollbar-track:enabled {background-color: transparent;}" + a + ".at-popover ::-webkit-scrollbar-track-piece {background-color: transparent; border: none; margin: 0;}" + a + ".at-popover ::-webkit-scrollbar-thumb:vertical {height: 30px;background-color:" + k + ";-webkit-border-radius: 5px;-webkit-box-shadow: 0 1px 1px rgba(255,255,255,0.2)}" + a + ".at-popover ::-webkit-scrollbar-thumb:horizontal {width: 30px;background-color:" + k + ";-webkit-border-radius: 5px;}"), a + ".at-popover {position: absolute;top: 0;left: 0;z-index: 1040;display: none;padding: 5px;}" + a + ".at-popover.top {margin-top: -5px; }" + a + ".at-popover.top .arrow {bottom: 0;left: 50%;margin-left: -5px;border-left: 5px solid transparent;border-right: 5px solid transparent;border-top: 5px solid " + e + "; }" + a + ".at-popover .arrow {position: absolute;width: 0;height: 0; }" + a + ".at-popover-inner {padding: 3px;overflow: hidden;background: " + e + ";background: " + b.getControlsOutlineColor(.8) + ";-webkit-border-radius: 6px;-moz-border-radius: 6px;border-radius: 6px;-webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);-moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3); }" + a + ".at-popover-content {padding: 0;background-color: " + f + ";-webkit-border-radius: 3px;-moz-border-radius: 3px;border-radius: 3px;-webkit-background-clip: padding-box;-moz-background-clip: padding-box;background-clip: padding-box;width:" + c + "px;}" + a + ".at-popover-content p," + a + ".at-popover-content ul," + a + ".at-popover-content ol {margin-bottom: 0; }.structured-navigation-popup ul {font-size:16px;line-height:2em;margin:0;padding:0}" + a + ".list-container {overflow: scroll;-webkit-overflow-scrolling: touch;overflow-x:hidden;overflow-y:auto;height:250px;padding:3px 0 4px;margin:0 4px;}" + a + ".structured-navigation-popup ul li {margin:0;text-align:left;list-style: none;line-height: 32px;}" + a + ".structured-navigation-popup ul ul li a {padding-left:30px !important;width:" + (c - 3 * d) + "px !important;}" + a + ".structured-navigation-popup ul ul ul li a {padding-left:50px !important;width:" + (c - 4 * d) + "px !important;}" + a + ".structured-navigation-popup ul ul ul ul li a {padding-left:70px !important;width:" + (c - 5 * d) + "px !important;}" + a + ".structured-navigation-popup ul ul ul ul ul li a {padding-left:90px !important;width:" + (c - 6 * d) + "px !important;}" + a + ".structured-navigation-popup ul li a," + a + ".structured-navigation-popup ul li a:link," + a + ".structured-navigation-popup ul li a:visited{text-decoration:none;white-space: nowrap;text-overflow: ellipsis;display:inline-block;padding:0 10px;width:" + (c - 2 * d) + "px;-webkit-border-radius: 3px;-moz-border-radius: 3px;border-radius: 3px;color:" + b.getTextColor() + ";-webkit-transition: background .3s;-moz-transition: background .3s;-ms-transition: background .3s;-o-transition: background .3s;transition: background .3s;-webkit-touch-callout: none;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}" + (m ? a + ".structured-navigation-popup ul li a:hover," : "") + a + ".structured-navigation-popup ul li a:active," + a + ".structured-navigation-popup ul li a:focus{background:" + j + ";-webkit-tap-highlight-color:" + j + ";outline:none;}" + a + ".structured-navigation-popup ul li a.active{font-weight:bold;background:" + i + ";color:" + g + ";}" + (m ? a + ".structured-navigation-popup ul li a.active:hover," : "") + a + ".structured-navigation-popup ul li a.active:active," + a + ".structured-navigation-popup ul li a.active:focus{background:" + h + ";}" + n
    }

    return{getStyle: a}
}(),ActiveText.namespace("ActiveText.UI.StructurePopupFactory"),ActiveText.UI.StructurePopupFactory = function () {
    "use strict";
    function a(a, c) {
        return a.atPopover({placement: "in top", trigger: "manual", html: !0, content: c, template: b()})
    }

    function b() {
        return $('<div><div class="at-popover"><div class="arrow"></div><div class="at-popover-inner"><div class="at-popover-content"><div></div></div></div></div></div>').html()
    }

    return{createPopup: a}
}(),ActiveText.namespace("ActiveText.UI.FontInjection"),ActiveText.UI.FontInjection = function (a) {
    "use strict";
    function b() {
        var b = a.SkinUtils.getPathToGlobalResource();
        $('<link rel="stylesheet" href="' + b + 'font/font-awesome.min.css">').appendTo("head"), $('<link rel="stylesheet" href="' + b + 'font/general_enclosed_foundicons.css">').appendTo("head"), $.browser.msie && parseInt($.browser.version, 10) < 8 && ($('<link rel="stylesheet" href="' + b + 'font/font-awesome-ie7.min.css">').appendTo("head"), $('<link rel="stylesheet" href="' + b + 'font/general_enclosed_foundicons_ie7.css">').appendTo("head")), d = !0
    }

    function c() {
        return d
    }

    var d = !1;
    return{injectFontTag: b, hasBeenAdded: c}
}(ActiveText),ActiveText.Keymap = {SPACE: 32, ENTER: 13, TAB: 9, BACKSPACE: 8, SHIFT: 16, CTRL: 17, ALT: 18, CAPS_LOCK: 20, NUM_LOCK: 144, SCROLL_LOCK: 145, LEFT: 37, UP: 38, RIGHT: 39, DOWN: 40, PAGE_UP: 33, PAGE_DOWN: 34, HOME: 36, END: 35, INSERT: 45, DELETE: 46, ESCAPE: 27, PAUSE: 19},ActiveText.KeyboardIntegration = function (a) {
    "use strict";
    function b(b) {
        function e() {
            b.options.containerElement.off("remove", e), $(window).off({keydown: c})
        }

        b && (d = a, d || (d = {}, d[ActiveText.Keymap.LEFT] = b.navigation.gotoPrevPage, d[ActiveText.Keymap.RIGHT] = b.navigation.gotoNextPage), b.options.containerElement.on("remove", e), $(window).on({keydown: c}))
    }

    function c(a) {
        var b = a.which;
        null !== d[b] && "function" == typeof d[b] && d[b]()
    }

    var d;
    return{init: b, key: "keyboardintegration"}
},ActiveText.SCORMIntegration = function (a) {
    "use strict";
    function b(b) {
        if (i = b, a && a.callAjax && "function" == typeof a.callAjax) {
            var c = this, d = a.callAjax;
            a.callAjax = function (b, f, g, h) {
                var i = d.apply(a, arguments);
                if ("bulkSet" === b)"true" === String(i) && c.gotSCORMData(e(h)); else if ("bulkGet" === b) {
                    var j = e(i);
                    c.gotSCORMData(j)
                } else debug.log("ActiveText.SCORMIntegration instance does not know how to handle operation " + b + ".")
            }
        } else debug.log("ActiveText.SCORMIntegration instance was not passed an object with a method callAjax to extend.", a)
    }

    function c(a) {
        for (var b = {}, c = 0, d = a.length; d > c; c++) {
            var e = a[c];
            void 0 === b[e.n] && (b[e.n] = {}), b[e.n][e.field] = e.fieldVal
        }
        return b
    }

    function d(a) {
        var b = {};
        for (var e in a) {
            var f = a[e];
            b[e] = $.isArray(f) ? c(f) : "object" == typeof f ? d(f) : f
        }
        return b
    }

    function e(a) {
        var b, e = {};
        return b = "string" == typeof a ? JSON.parse(a) : a, e = $.isArray(b) ? c(b) : "object" == typeof b ? d(b) : b
    }

    function f() {
        a.callAjax("bulkGet", null, null, null)
    }

    function g(a) {
        $(i).trigger(ActiveText.SCORMIntegration.SCORM_DATA_UPDATED, a)
    }

    function h(b) {
        a.callAjax("bulkSet", null, null, b)
    }

    var i;
    return{init: b, key: "scorm", getSCORMData: f, gotSCORMData: g, setSCORMData: h}
},ActiveText.SCORMIntegration.SCORM_DATA_UPDATED = "activetext.scorm.data_updated",ActiveText.namespace("ActiveText.CustomSettingsParser"),ActiveText.CustomSettingsParser = function () {
    "use strict";
    function a(a) {
        i = a, $(i).one(ActiveText.Events.CONTAINER_XML_LOADED, b)
    }

    function b() {
        var a = i.loader.getDataProvider().getPathToMETA() + "custom.json";
        $.ajax({url: a, dataType: "json", localCache: ActiveText.Constants.USE_LOCAL_CACHE, success: g, error: h})
    }

    function c(a) {
        if (void 0 !== a.width && void 0 !== a.height) {
            var b = parseInt(a.width, 10), c = parseInt(a.height, 10), d = b / c;
            i.view.model.setPageDimensions({width: b, height: c, aspectRatio: d}), i.view.model.setZoomAreaDimensions({width: b, height: c})
        }
    }

    function d(a) {
        var b = !i.options || i.options && void 0 === i.options.firstPageIsLeft;
        if (b && void 0 !== a.versoStart) {
            var c = Boolean(a.versoStart);
            i.settings.setFirstPageIsLeft(c)
        }
        if (a.versoStart !== d) {
            var d = parseInt(-a.numberingOffset + 1, 10);
            i.settings.setNumberingOffset(d)
        }
    }

    function e(a) {
        var b = Boolean(parseInt(a.shortManifest, 10));
        if (b) {
            var c = i.loader.getDataProvider().getOPFURL(), d = new RegExp(".opf", "gi"), e = c.replace(d, "-short.opf");
            i.loader.getDataProvider().setOPFURL(e)
        }
    }

    function f(a) {
        var b = !1;
        window.hasOwnProperty = window.hasOwnProperty || function (a) {
            return this[a] ? !0 : !1
        }, a.hasOwnProperty("cardMode") && (b = Boolean(a.cardMode), b && $(i).trigger(ActiveText.Commands.SWITCH_TO_SPS_VIEW)), i.view.model.setCardMode(b)
    }

    function g(a) {
        c(a), d(a), e(a), f(a), $(i).trigger(ActiveText.Settings.Events.LOADED, [a])
    }

    function h() {
        $(i).trigger(ActiveText.Settings.Events.LOAD_ERROR)
    }

    var i;
    return{init: a}
},ActiveText.OverlayData = function () {
    "use strict";
    function a(a) {
        l = a, m = this, n = [], $(l).one(ActiveText.Events.CONTAINER_XML_LOADED, b), $(l).on(ActiveText.Commands.LOAD_RESOURCE_FOR_CURRENT_INDEX, e)
    }

    function b() {
        var a = l.loader.getDataProvider().getPathToMETA() + "overlay-files.json";
        $.ajax({url: a, dataType: "json", localCache: ActiveText.Constants.USE_LOCAL_CACHE, success: c, error: d})
    }

    function c(a) {
        $.isArray(a) ? (o = a, p = !0) : debug.log("JSON overlay manifest loaded but data was not an array", a)
    }

    function d() {
    }

    function e() {
        for (var a = l.view.model.getDisplayedPages(), b = 0; a > b; b++)m.loadDataForIndex(b)
    }

    function f(a) {
        var b = l.model.getCurrentIndex() + a;
        g(b)
    }

    function g(a) {
        var b = l.loader.getDataProvider().getPathToMETA(), c = i(a);
        h(a) && (l.loader.addItemToQueue({index: a}), k(b + c, a))
    }

    function h(a) {
        var b = i(a);
        return!p || p && _.contains(o, b)
    }

    function i(a) {
        var b = l.loader.getDataProvider().getPathToPages();
        if (-1 === l.utils.getSourcePathForIndex(a).indexOf("about:blank")) {
            var c = l.utils.getSourcePathForIndex(a).split(b).join("").split(".");
            c.pop();
            var d = c.join(".") + ".json";
            return d
        }
        return l.utils.getSourcePathForIndex(a)
    }

    function j(a) {
        return n[a]
    }

    function k(a, b) {
        function c(a, c) {
            l.loader.removeItemFromQueue({index: b});
            var d = {index: b, data: a};
            n[b] = a, "error" === c ? $(l).trigger(ActiveText.Events.OVERLAY_DATA_FAIL, d) : $(l).trigger(ActiveText.Events.LOADED_OVERLAY_DATA, d)
        }

        "about:blank" !== a && $.ajax({url: a, dataType: "json", localCache: ActiveText.Constants.USE_LOCAL_CACHE, success: c, error: c})
    }

    var l, m, n, o, p = !1;
    return{init: a, loadDataForIndex: f, loadDataForPageIndex: g, getDataForIndex: j, hasOverlayDataForIndex: h, key: "overlaydataloader"}
},ActiveText.PageRangeHelper = function () {
    "use strict";
    function a(a, b) {
        var c = !1, d = a.options && void 0 !== a.options.pageRange && a.options.pageRange.toString().length;
        if (d) {
            var e = a.options.pageRange, f = typeof e;
            if ("number" === f)c = b === e; else if ("string" === f)for (var g = e.split(","), h = 0, i = g.length; i > h; h++)if (-1 === g[h].indexOf("-"))c = c || parseInt(g[h], 10) === b; else {
                var j = g[h].split("-"), k = parseInt(j.shift(), 10), l = parseInt(j.pop(), 10);
                b >= k && l >= b && (c = !0)
            }
        } else c = !0;
        return c
    }

    return{isAllowedPageNumber: a}
}();
var INVALID_EPUB_SPINE_MESSAGE = "No valid ePub spine", ERROR_LOADING_STRUCTURE = "An Error Occurred loading the eBook structure";
ActiveText.DataProvider = function (a) {
    "use strict";
    function b() {
        $(a).trigger(ActiveText.Commands.DISPLAY_ERROR, INVALID_EPUB_SPINE_MESSAGE)
    }

    function c(b, c, d) {
        D || debug.log("An Error Occurred", b, c, d), $(a).trigger(ActiveText.Events.RESOURCES_ERROR), $(a).trigger(ActiveText.Commands.DISPLAY_ERROR, d)
    }

    function d(a) {
        return"error" !== a
    }

    function e(b, e) {
        if ($(a).trigger(ActiveText.Commands.SHOW_LOADER), d(e)) {
            var f = n(b);
            $(a).trigger(ActiveText.Events.NAVMAP_LOADED, [f]), $(a).trigger(ActiveText.Commands.HIDE_LOADER)
        } else c()
    }

    function f(b, e) {
        if ($(a).trigger(ActiveText.Commands.SHOW_LOADER), $(a).trigger(ActiveText.Events.OPF_DATA_LOADED, b), d(e)) {
            var f = o(b), h = p(b);
            h.done(function (b) {
                if (void 0 !== b) {
                    $(a).trigger(ActiveText.Events.BOOK_STRUCTURE_LOADED, [b]), "" !== f && g(f);
                    var c = a.settings.getNumberingOffset();
                    a.settings.setNumberingOffset(c + F), F % 2 && a.settings.setFirstPageIsLeft(!a.settings.getFirstPageIsLeft()), 1 === b.length && (a.options.defaults = a.options.defaults || {}, a.options.defaults.pagesToDisplay = 1, $(a).trigger(ActiveText.Commands.SWITCH_TO_SPS_VIEW))
                }
            })
        } else debug.error("OPF Structure is not valid."), c()
    }

    function g(a) {
        return a ? (t(a), $.ajax({url: a, dataType: "text xml", localCache: E, success: e, error: c})) : debug.error("Unable to load NCX data file for ActiveText instance, because path was ", a), a
    }

    function h(a) {
        a ? (r(a), $.ajax({url: a, dataType: "text xml", localCache: E, success: f, error: c})) : debug.error("Unable to load OPF data file for ActiveText instance, because path was ", a)
    }

    function i() {
        var c = !1;
        return a && a.options ? ($(document).ready(function () {
            l()
        }), c = !0) : b(), c
    }

    function j() {
        var a = q();
        h(a)
    }

    function k(c) {
        if ($(a).trigger(ActiveText.Commands.SHOW_LOADER), c) {
            var d = $(c).find("container > rootfiles > rootfile");
            if ("application/oebps-package+xml" === d.attr("media-type")) {
                var e = a.options.pathToAssets + d.attr("full-path");
                r(e), $(a).one(ActiveText.Settings.Events.LOADED + " " + ActiveText.Settings.Events.LOAD_ERROR, j)
            } else b();
            $(a).trigger(ActiveText.Events.CONTAINER_XML_LOADED, c)
        } else debug.error("Unable to load container.xml file for title.")
    }

    function l() {
        var b = a.options.pathToAssets + "META-INF/container.xml";
        $.ajax({url: b, dataType: "text xml", localCache: E, success: k, error: c})
    }

    function m(b, c) {
        for (var d, e, f, g = a.settings.getNumberingOffset(), h = $(b).find("> navPoint"), i = [], j = 0, k = h.length; k > j; j++)d = $(h[j]), e = d.find("> content").attr("src"), f = parseInt(c.find('> pageTarget content[src="' + e + '"]').parent().attr("playOrder"), 10) + (g - 1), isNaN(f) && (f = parseInt(d.attr("playOrder"), 10) + (g - 1)), i.push({id: j, title: d.find("> navLabel text").text(), html_location: e, number: f, children: m(h[j], c)});
        return i
    }

    function n(a) {
        B = a;
        var b = $(a).find("navMap"), c = $(a).find("pageList");
        return m(b, c)
    }

    function o(a) {
        var b = "", c = $(a), d = c.find("spine").attr("toc");
        return void 0 !== d ? (A = !0, b = u() + c.find('manifest item[id="' + d + '"]').attr("href")) : A = !1, b
    }

    function p(b) {
        function c(b, e) {
            var f = $(i[e]).attr("idref"), h = g.find('item[id="' + f + '"]'), j = {id: e, index: e, title: A ? "" : f, html_location: h.attr("href")};
            if (ActiveText.PageRangeHelper.isAllowedPageNumber(a, ActiveText.NavigationUtils.pageIndexToPageNumber(a, e)) ? k.push(j) : 0 === k.length && F++, e += 1, e < b.length) {
                var l = function () {
                    c(b, e)
                };
                D || !ActiveText.BrowserUtils.isOldVersionOfInternetExplorer ? l() : requestAnimationFrame(l)
            } else d.resolve(k)
        }

        var d = $.Deferred(), e = $(b), f = e.find("spine"), g = e.find("manifest"), h = e.find("metadata"), i = f.find('itemref[linear!="no"]'), j = {}, k = [];
        return h = $(h).find(":not(meta)"), h.each(function (a) {
            var b = h[a].nodeName;
            b = b.replace(/(\/?)([^:>\s]*:)?([^>]+)/g, "$1$3"), j[b] = h[a].childNodes[0] ? h[a].childNodes[0].nodeValue : ""
        }), $(a).trigger(ActiveText.Events.OPF_META_LOADED, [j]), c(i, 0), d
    }

    function q() {
        return z || ""
    }

    function r(a) {
        z = a
    }

    function s() {
        return y || ""
    }

    function t(a) {
        y = a
    }

    function u() {
        var a = q().split("/");
        return a.pop(), a.join("/") + "/"
    }

    function v() {
        return a.options.pathToAssets + "META-INF/"
    }

    function w() {
        var b = new ActiveText.CustomSettingsParser;
        b.init(a), $(a).on(ActiveText.Events.NAVMAP_LOADED, x)
    }

    function x() {
        for (var b = a.data.getFlatListOfNavigation(), c = $(B).find("pageList > pageTarget > navLabel > text"), d = 0; d < b.length; d++)b[d].title = $(c[d]).text();
        $(a).trigger(ActiveText.Events.BOOK_STRUCTURE_LOADED, [b]), B = null
    }

    var y, z, A, B, C = navigator.userAgent, D = /phantom/i.test(C), E = ActiveText.Constants.USE_LOCAL_CACHE, F = 0;
    return C.match(/mozilla/i) && (E = !1), w(), {getSpineData: i, getOPFURL: q, setOPFURL: r, getNCXURL: s, setNCXURL: t, getPathToPages: u, getPathToMETA: v}
}, ActiveText.namespace("ActiveText.Hotspots"), ActiveText.Hotspots = function (a, b) {
    "use strict";
    function c(c) {
        function d() {
            $(c.options.containerElement).off("remove", d), e.teardown()
        }

        var e = ActiveText.Hotspots.Controller(c, a, b);
        e.init();
        var f = new ActiveText.ClickToPrompt;
        f.init(c), c.extensions.push(f), c.options && c.options.containerElement && $(c.options.containerElement).on("remove", d)
    }

    return{init: c, key: "hotspots"}
}, ActiveText.Hotspots = ActiveText.Hotspots || {}, ActiveText.Hotspots.Controller = function (a, b, c) {
    "use strict";
    function d() {
        n = new ActiveText.Widget.Controller(a), $(a).on(ActiveText.Events.LOADED_OVERLAY_DATA, h);
        var d = ActiveText.ResizeUtils.getProportionalResizeBehaviour(a, o);
        $(a).on(ActiveText.Events.RESIZE, d), b && "function" == typeof b || (b = ActiveText.Hotspots.Factory.createHotspotIcon);
        var e = new ActiveText.Hotspots.AutoLoadingWidgetsController(a, c);
        e.init(p)
    }

    function e() {
        $(a).off(ActiveText.Events.LOADED_OVERLAY_DATA, h);
        var b = ActiveText.ResizeUtils.getProportionalResizeBehaviour(a, o);
        $(a).off(ActiveText.Events.RESIZE, b)
    }

    function f(a) {
        return-1 !== a.indexOf("wdgt")
    }

    function g(a) {
        var b = a.keyCode ? a.keyCode : a.which;
        b === ActiveText.Keymap.ENTER && $(this).click()
    }

    function h(d, e) {
        var h, i, j, k = e.data, l = e.index, n = a.view.model.getZoomAreaDimensions(), p = [], q = k.length, r = "";
        (1 !== k.length || "description" !== k[0].type) && (h = ActiveText.LayerUtils.getOverlayForIndexByKey(a, l, o), h.empty());
        for (var s = 0; q > s; s++) {
            if (j = k[s], j.data && j.data.uri && (r = j.data.uri, j.data.parsedUri = ActiveText.DataUtils.parseURI(r)), j.widget = f(r), j.type && ("hotspot" === j.type.toLowerCase() || "audio" === j.type.toLowerCase() ? i = b(a, j, n, c) : "target-area" === j.type.toLowerCase() && (i = ActiveText.Hotspots.TargetAreaFactory.createTarget(j))), i && null !== i) {
                if ($.browser.msie && !Modernizr.svg) {
                    var t = $(i), u = t.attr("src");
                    t.attr("src", "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7").css("filter", 'progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled="true",sizingMethod="crop",src="' + u + '")')
                }
                i.data(j), $(a).trigger("activetext.hotspot.created", {hotspot: i, uri: r}), i.on({click: _.debounce(m, 500, !0), keypress: g}), 0 === i.find("polygon").length ? i.attr({tabindex: 100, role: "button", "aria-label": j.type}) : i.find("polygon").attr({tabindex: 100, role: "button", "aria-label": j.type}), p.push(i)
            }
            i = null
        }
        p.length > 0 && (Modernizr.csstransforms ? $(p).appendTo(h) : $(p).each(function () {
            var a = $('<div style="position:absolute;zoom:1;z-index:1;width:100%;filter:inherit"></div>');
            $(this).appendTo(a), a.appendTo(h)
        }), $(a).trigger(ActiveText.Events.RESIZE))
    }

    function i(a, b) {
        c && c.hotspotClickFunction && "function" == typeof c.hotspotClickFunction ? c.hotspotClickFunction(a, b) : debug.log("HotspotController click action called but no valid function attached.")
    }

    function j(b, c) {
        return a.options.containerElement.css({zIndex: -1}), n.openWidgetPopoverFromData(c)
    }

    function k(a, b) {
        var c = b.data.uri.toString(), d = ActiveText.Hotspots.Helper.returnCharacterFromUri(c), e = $(a.target);
        e.hasClass("charSelect") && (e = e.children(":first")), "character-selected" !== e.attr("class") && ActiveText.CharacterSelection.getCharacter() !== d ? ActiveText.CharacterSelection.setCharacter(e, d) : "character-selected" === e.attr("class") && ActiveText.CharacterSelection.getCharacter() === d && ActiveText.CharacterSelection.deselectCharacter(e, d)
    }

    function l(b, c) {
        for (var d, e, f, g = c.data.uri, h = a.data.getFlatListOfNavigation(), j = h.length, k = 0; j > k; k++)e = h[k].src, -1 !== e.indexOf(g) && (f = k);
        if (f) {
            var l = ActiveText.NavigationUtils.pageIndexToPageNumber(a, f);
            d = a.navigation.gotoPage(l)
        } else d = i(b, c);
        return d
    }

    function m(b) {
        var c, d, e, f = $(this).data();
        if (f.widget === !0)$(a).trigger(ActiveText.Hotspots.Events.CLICKED, f), c = j(b, f); else if (f.data && f.data.uri)if (d = f.data.uri.toLowerCase(), -1 !== d.indexOf("type=prompt"))e = ActiveText.ExtensionUtils.getExtensionByKey(a, "clicktoprompt"), e ? c = e.hotspotClickFunction(b, f) : debug.log("Click To Prompt Hotspot was clicked, but no ClickToPrompt controller was found."); else if (-1 !== d.indexOf("type=audio")) {
            e = ActiveText.ExtensionUtils.getExtensionByKey(a, "clicktoprompt");
            var g = ActiveText.ExtensionUtils.getAudioPlayback(a);
            e && g.playing() === !1 ? c = e.hotspotClickFunction(b, f) : debug.log("Click To Prompt Hotspot was clicked, but no ClickToPrompt controller was found.")
        } else-1 !== d.indexOf("character") ? c = k(b, f) : ($(a).trigger(ActiveText.Hotspots.Events.CLICKED, f), c = l(b, f)); else $(a).trigger(ActiveText.Hotspots.Events.CLICKED, f), c = i(b, f);
        return c
    }

    var n, o = "standalone_hotspots", p = {init: d, teardown: e, hotspotClickHandler: m};
    return p
}, ActiveText.Hotspots.Events = {CLICKED: "hotspot.clicked"}, ActiveText.namespace("ActiveText.Hotspots.Factory"), ActiveText.Hotspots.Factory = function () {
    "use strict";
    function a(a, b, c) {
        var d = 64, e = ActiveText.Hotspots.Helper.getDefaultFilenameFromHotspotData(b, "amiga"), f = "<img class='hotspot_icon noSwipe' src='" + ActiveText.SkinUtils.getPathToGlobalResource() + "img/" + e + "' width='" + d + "' height='" + d + "' />";
        return $(f).css(ActiveText.Hotspots.Helper.getHotspotPositioningStyles(b, d, c))
    }

    return{createHotspotIcon: a}
}(), ActiveText.Hotspots.TargetAreaFactory = function () {
    "use strict";
    function a(a) {
        var b, c, d = ActiveText.CharacterSelection.getCharacter(), e = "", f = 'id=""', g = 'class=""', h = "";
        if (a.data.uri && (b = a.data.uri.toString(), -1 !== b.indexOf("type=prompt") ? (h = "ctp noSwipe", f = 'id="' + e + '"') : -1 !== b.indexOf("character") ? (e = ActiveText.Hotspots.Helper.returnCharacterFromUri(b), f = 'id="' + e + '"', h = "charSelect") : h = "otherTA"), "" !== d && d === e && (g = 'class="character-selected"'), "polygon" === a.data.shape) {
            var i = $('<svg class="target-area noSwipe ' + h + '" version="1.1" xmlns="http://www.w3.org/2000/svg" width="' + a.data.width + '" height="' + a.data.height + '" viewBox="0 0 ' + a.data.width + " " + a.data.height + '"><polygon ' + f + " " + g + ' fill-opacity="0.5" fill="' + a.data.fill + '" stroke="' + a.data.stroke + '" points="' + a.data.points + '" visibility="visible" style="cursor:pointer;pointer-events:visible;"/></svg>');
            c = i, c.css({width: parseInt(a.data.width, 10), height: parseInt(a.data.height, 10), position: ActiveText.BrowserUtils.isOldVersionOfInternetExplorer ? "relative" : "absolute", marginTop: parseInt(a.data.y, 10), marginLeft: parseInt(a.data.x, 10), cursor: "default", pointerEvents: "none", overflow: "hidden"})
        } else c = $('<div class="target-area noSwipe ' + h + '"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" width="' + a.data.width + '"  height="' + a.data.height + '" ' + f + " " + g + " /></div>"), c.css({width: parseInt(a.data.width, 10), height: parseInt(a.data.height, 10), position: ActiveText.BrowserUtils.isOldVersionOfInternetExplorer ? "relative" : "absolute", marginTop: parseInt(a.data.y, 10), marginLeft: parseInt(a.data.x, 10), cursor: "pointer", pointerEvents: "all", overflow: "hidden"});
        return a.data && a.data.id && c.attr("id", a.data.id), c
    }

    return{createTarget: a}
}(), ActiveText.Hotspots.Helper = function () {
    "use strict";
    function a(a, b) {
        var c = a.data.point[0], d = a.data.point[1], e = "absolute";
        return ActiveText.BrowserUtils.isOldVersionOfInternetExplorer && (e = "relative"), {marginLeft: c - b / 2, marginTop: d - b / 2, pointerEvents: "all", position: e, zIndex: 1010, cursor: "pointer"}
    }

    function b(a, b) {
        var c = b;
        return a && a.data && a.data.icon && (c = a.data.icon), c + "-default.png"
    }

    function c(a) {
        return a.replace(/[\bcharacter\b]*[^\w-]/gi, "")
    }

    return{getHotspotPositioningStyles: a, getDefaultFilenameFromHotspotData: b, returnCharacterFromUri: c}
}(), ActiveText.Hotspots.AutoLoadingWidgetsController = function (a, b) {
    "use strict";
    function c(c) {
        if (f = c, b && b.autoPop && "function" == typeof b.autoPop) {
            var d = b.autoPop.call(this);
            Modernizr.csstransitions && Modernizr.csstransforms3d ? a.options.allowAnimation ? $(a).on(ActiveText.Events.ANIMATE_PAGE_END, function () {
                e(d)
            }) : $(a).on(ActiveText.Commands.GO_TO_PAGE, function () {
                e(d)
            }) : $(a).on(ActiveText.Events.FRAME_CONTENT_LOADED, function () {
                e(d)
            })
        }
    }

    function d(a) {
        return-1 !== a.indexOf("wdgt")
    }

    function e(b) {
        var c = a.model.getCurrentIndex();
        if (c === b.index && g === !1) {
            var e, h = b.data[0];
            h.data && h.data.uri && (e = h.data.uri, h.data.parsedUri = ActiveText.DataUtils.parseURI(e)), h.widget = d(e);
            var i = ActiveText.Hotspots.TargetAreaFactory.createTarget(h);
            i.data(h), f.hotspotClickHandler.apply(i, [
                {type: "click", currentTarget: i}
            ]), g = !0
        }
    }

    var f, g = !1;
    return b = b || a.options, {init: c}
}, ActiveText.Widget = ActiveText.Widget || {}, ActiveText.Widget.Controller = function (a) {
    "use strict";
    function b(b) {
        var c = d(b), g = f[c];
        if (void 0 === g) {
            var h = e.createWidgetFromData(a, b.data);
            h.dialog().dialog("widget").css({opacity: 0, transform: "scale(0.8)"}).on("dialogbeforeclose", function () {
                f[c] = void 0
            }), setTimeout(function () {
                h.dialog().dialog("widget").css({transform: "scale(1)", opacity: 1})
            }, 100), f[c] = h
        } else g.dialog("open"), requestAnimationFrame(function () {
            g.dialog().dialog("widget").css({transform: "scale(1.1)"}), setTimeout(function () {
                g.dialog().dialog("widget").css({transform: "scale(1)"})
            }, 300)
        });
        return!1
    }

    function c(a) {
        return f[a]
    }

    function d(a) {
        var b = a.data.id;
        return b || (b = a.data.uri), b
    }

    var e = ActiveText.Widget.Factory;
    e.insertCSS(a);
    var f = {};
    return{openWidgetPopoverFromData: b, getWidgetById: c}
}, ActiveText.Widget = ActiveText.Widget || {}, ActiveText.Widget.Helper = function (a) {
    "use strict";
    function b(a) {
        return"string" == typeof a && -1 === a.indexOf("px") && -1 === a.indexOf("%") && (a += "px"), a
    }

    function c(b) {
        b.bind("dialogdragstart dialogresizestart", function () {
            var b, c;
            a.BrowserUtils.isOldVersionOfInternetExplorer === !0 && (c = $('<div class="dialog-resize-modal"></div>'), c.fadeTo(0, 0), $(this).parent().before(c)), b = $(this).find(".hidden-dialog-overlay"), 0 === b.length ? (b = $('<div class="hidden-dialog-overlay"></div>'), b.appendTo(this)) : b.show()
        }).bind("dialogdragstop dialogresizestop", function () {
            var c = b.data();
            c.position = "absolute", c.x = b.css("left"), c.y = b.css("top"), c.w = c.width = b.css("width"), c.h = c.height = b.css("height"), b.data(c), a.BrowserUtils.isOldVersionOfInternetExplorer === !0 && $(this).parent().parent().find(".dialog-resize-modal").remove(), $(this).find(".hidden-dialog-overlay").hide()
        })
    }

    function d(a) {
        var b = !0;
        return void 0 !== a.resizable && a.resizable === !1 && (b = !1), void 0 !== a.size && (b = !1), b
    }

    function e(a) {
        var b = !1;
        return void 0 !== a.modal && Boolean(a.modal) === !0 && (b = !0), b
    }

    function f(a) {
        var b = a.chromeless && "true" === a.chromeless.toString() || a.transparent && "true" === a.transparent.toString();
        return b
    }

    function g(a) {
        var b = a.customClose && "true" === a.customClose.toString();
        return b
    }

    function h(a) {
        var b = "center";
        return(a.x || a.y) && (b = [a.x, a.y]), b
    }

    function i(a, b) {
        var c = j, d = k, e = b.plist, f = b.parsedUri || {};
        if (e && (e.Height && (d = parseInt(e.Height, 10)), e.Width && (c = parseInt(e.Width, 10))), f.height ? d = parseInt(f.height, 10) : f.h && (d = parseInt(f.h, 10)), f.width ? c = parseInt(f.width, 10) : f.w && (c = parseInt(f.w, 10)), f.size) {
            var g = c / d, h = parseInt(f.size, 10) / 100, i = l;
            ("true" === f.chromeless || "true" === f.transparent) && (i = 0), d = ($(a).height() - i) * h, c = d * g, c > $(a).width() && (c = $(a).width() * h, d = c / g)
        }
        return{width: c, height: d}
    }

    var j = 480, k = 320, l = 31;
    return{fixCoordinateValue: b, attachBehavioursToAllowSmoothResizeWithIFrameToDialog: c, parseResizeValue: d, parseModalValue: e, parseChromelessValue: f, parsePositionValue: h, calculateWidgetSize: i, parseCustomCloseValue: g}
}(ActiveText), ActiveText.Widget = ActiveText.Widget || {}, ActiveText.Widget.CloseButtonFactory = function () {
    "use strict";
    function a(a) {
        function b() {
            e.attr("src", j)
        }

        function c() {
            e.attr("src", i)
        }

        function d() {
            e.attr("src", h)
        }

        var e, f = ".chromeless-closebutton{-webkit-tap-highlight-color:rgba(0,0,0,0);width: 30px;height: 30px;margin-left: -15px;margin-right: -15px;margin-top: -15px;}";
        if (Modernizr.svg) {
            f += ".chromeless-closebutton svg:hover circle {fill:#666666;}.chromeless-closebutton svg:active circle {fill:#ff0000;}";
            var g = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"width="30.202px" height="30.201px" viewBox="0 0 30.202 30.201" enable-background="new 0 0 30.202 30.201" xml:space="preserve"><circle fill="#010101" stroke="#FFFFFF" stroke-width="2" stroke-miterlimit="10" cx="15.101" cy="15.101" r="14.101"/><g><path fill="#FFFFFF" d="M10.654,20.815L9.58,19.74c-0.451-0.454-0.451-0.866-0.039-1.279l3.389-3.391L9.541,11.68C9.129,11.267,9.129,10.855,9.58,10.4l1.074-1.076c0.455-0.453,0.891-0.475,1.303-0.061l3.391,3.391l3.391-3.391c0.412-0.414,0.824-0.414,1.28,0.041l1.072,1.075c0.477,0.476,0.477,0.888,0.061,1.3l-3.39,3.391l3.39,3.391c0.414,0.412,0.393,0.845-0.061,1.3l-1.074,1.076c-0.455,0.455-0.869,0.455-1.281,0.041l-3.39-3.39l-3.391,3.39C11.544,21.291,11.132,21.291,10.654,20.815z"/></g></svg>';
            e = $('<div class="chromeless-closebutton">' + g + "</div>")
        } else {
            var h = a + "img/close_button.png", i = a + "img/close_button_hover.png", j = a + "img/close_button_down.png";
            e = $('<img src="' + h + '" width="30" height="30" class="chromeless-closebutton" />'), e.on({mouseover: c, mouseout: d, mousedown: b, touchstart: b, touchend: d})
        }
        return ActiveText.CSSUtils.embedCSS(f, "chromeless-closebutton"), e
    }

    return{createCloseButton: a}
}(), ActiveText.Widget = ActiveText.Widget || {}, ActiveText.Widget.Factory = function () {
    "use strict";
    function a(a) {
        ActiveText.CSSUtils.embedCSS(ActiveText.DialogStyleText.getStyle(a), "standalone-widget")
    }

    function b() {
    }

    function c(a, c, e) {
        function f() {
            try {
                var a = $(this).dialog("widget"), b = $(this).data();
                i(a, b), h(), a.find(".ui-dialog-titlebar").removeClass("ui-corner-all").addClass("ui-corner-top"), a.removeClass("ui-corner-all").addClass("ui-corner-top"), a.find(".ui-widget-content").css("overflow", "hidden")
            } catch (c) {
            }
        }

        function g(b, c, e) {
            var f = {}, g = $(b), h = $(".ui-dialog");
            g.availHeight = ActiveText.ViewUtils.getUnscaledDPSTargetDimensions(a).availHeight, (h.height() > g.availHeight || e.coreWidget) && (ActiveText.ViewUtils.scaleHTMLElement(a, b, b.ratio.height), b.css("transformOrigin", "50% 50%")), (h.width() > c.width() || e.coreWidget) && (ActiveText.ViewUtils.scaleHTMLElement(a, b, b.ratio.width), b.css("transformOrigin", "50% 50%")), ("center" === e.position || void 0 === e.position) && (b.position.top = b.offset.top + (c.height() - b.height()) / 2 - 1, b.position.left = b.offset.left + (c.width() - b.width()) / 2), b.position.left && (f.left = d.fixCoordinateValue(b.position.left) + "px"), b.position.top && (b.position.top < 0 && g.hasClass("chromeless") && (b.position.top += 20), f.top = d.fixCoordinateValue(b.position.top) + "px"), g.css(f)
        }

        function h() {
            window.parent.postMessage("widget-opened", "*")
        }

        function i(b, c) {
            var e = $(window);
            a && (e = a.options.containerElement.find(".whiteboard-container")), b.offset = e.offset(), v && k(c);
            var f = c || {};
            b.position = {}, f.hasOwnProperty("parsedUri") && (b.position.left = f.parsedUri.x, b.position.top = f.parsedUri.y);
            var h = d.calculateWidgetSize(e, f), i = f.coreWidget ? b : b.find(".ui-widget-content");
            b.width(h.width), i.height(h.height), f.coreWidget = void 0 !== f.coreWidget ? f.coreWidget : !0, b.ratio = {width: e.width() / b.width(), height: e.height() / b.height()}, f.coreWidget && (b.ratio.width = Math.min(b.ratio.width, 1), b.ratio.height = Math.min(b.ratio.height, 1)), ("center" === f.position || void 0 === f.position) && (b.position.top = b.offset.top + (e.height() - b.height()) / 2 - 1, b.position.left = b.offset.left + (e.width() - b.width()) / 2);
            var j = {}, l = $(b);
            b.position.left && (j.left = d.fixCoordinateValue(b.position.left) + "px"), b.position.top && (b.position.top < 0 && l.hasClass("chromeless") && (b.position.top += 20), j.top = d.fixCoordinateValue(b.position.top) + "px"), l.css(j), setTimeout(function () {
                g(b, e, f)
            }, 500)
        }

        function j(a) {
            var c = a.split("/");
            c.pop();
            var d = c.join("/");
            $.ajax({url: d + "/Info.plist", dataType: "text xml", success: l, error: b})
        }

        function k(b) {
            if (b && b.plist) {
                var c, e, f, g = 15;
                void 0 !== b.plist.CloseBoxInsetX && (c = parseInt(b.plist.CloseBoxInsetX, 10) + g, v.css("left", c - 2 * g + "px")), void 0 !== b.plist.CloseBoxInsetY && (e = parseInt(b.plist.CloseBoxInsetY, 10) + g, v.css("top", e - 2 * g + "px"));
                var h = d.calculateWidgetSize(a.options.containerElement.find(".whiteboard-container"), b), i = parseInt(b.plist.Width, 10), j = parseInt(b.plist.Height, 10);
                void 0 !== i && void 0 !== c && h.width !== i && (f = h.width / i, v.css("left", (c - g) * f + "px")), void 0 !== j && void 0 !== e && h.height !== j && (f = h.height / j, v.css("top", (e - g) * f + "px"))
            }
        }

        function l(a) {
            for (var b = $(a).find("dict").children(), d = {}, e = 0, f = b.length; f > e; e++)d[$(b[e]).text()] = $(b[e + 1]).text(), e++;
            if (c.plist = d, E) {
                c.coreWidget = -1 !== d.CFBundleIdentifier.indexOf("com.Pearson"), E.data(c);
                var g = "true" !== c.parsedUri.transparent && "true" !== c.parsedUri.chromeless, h = void 0 !== d.CFBundleDisplayName;
                g && h && E.dialog("option", "title", d.CFBundleDisplayName);
                try {
                } catch (i) {
                }
            }
        }

        function m(a) {
            var b = a.data.dialog, c = b.data();
            if ("absolute" !== c.position)try {
                var d = b.dialog("widget");
                setTimeout(function () {
                    i(d, c)
                }, 500)
            } catch (e) {
            }
        }

        function n() {
            a.options.containerElement.css({zIndex: 1}), $(this).empty().dialog().dialog("destroy").remove()
        }

        function o() {
            $(this).css("visibility", "")
        }

        var p = a.loader.getDataProvider().getPathToPages(), q = c.widgetpath, r = p + q;
        q || void 0 === c.uri || (q = c.uri, r = "ATX-autoPop" === c.id ? q : p + q);
        var s = '<iframe id="widget-iframe" frameborder="0" allowtransparency="true" scrolling="no" width="100%" height="100%" seamless></iframe>', t = $(s).load(o).attr("src", r);
        ActiveText.BrowserUtils.isOldVersionOfInternetExplorer || t.css("visibility", "hidden");
        var u = $('<div class="activetext-widget" />');
        t.appendTo(u);
        var v, w = c.parsedUri, x = d.parseResizeValue(w), y = d.parseModalValue(w), z = d.parseChromelessValue(w), A = d.parseCustomCloseValue(w), B = d.parsePositionValue(w), C = e || "widget-dialog";
        z && (C += " chromeless", x = !1);
        var D = d.calculateWidgetSize(a.options.containerElement.find(".whiteboard-container"), c), E = u.dialog({width: D.width, height: D.height, title: w.title || void 0, modal: y, dialogClass: C, position: B, resizable: x, close: n, open: f, autoOpen: !1, closeOnEscape: z}).data(c);
        if (z && !A) {
            var F = ActiveText.SkinUtils.getPathToResources(a);
            v = ActiveText.Widget.CloseButtonFactory.createCloseButton(F), v.click(function () {
                E.dialog("close")
            }), E.parent().append(v)
        }
        return E.css({boxShadow: "none"}), d.attachBehavioursToAllowSmoothResizeWithIFrameToDialog(E), E.dialog("open"), j(r), $(a).on(ActiveText.Events.RESIZE, {dialog: E}, m), E
    }

    var d = ActiveText.Widget.Helper;
    return{insertCSS: a, createWidgetFromData: c}
}();
var ActiveLearn = ActiveLearn || {};
ActiveLearn.HotspotsFactory = function () {
    "use strict";
    function a(a, b, c) {
        ActiveText.CSSUtils.embedCSS(".hotspot_icon div{cursor:pointer !important;}", "activelearn-hotspots");
        var d = 60, e = ActiveText.Hotspots.Helper.getDefaultFilenameFromHotspotData(b, "activelearn-doc"), f = '<div class="hotspot_icon"><img class="hotspot_icon" src="' + ActiveText.SkinUtils.getPathToResources(a) + "img/activelearn/hotspots/" + e + '" width="' + d + '" height="' + d + '" /></div>', g = $(f), h = ActiveText.Hotspots.Helper.getHotspotPositioningStyles(b, d, c);
        return g.css(h), g
    }

    return{createResourceIcon: a}
}();
var ActiveLearn = ActiveLearn || {};
ActiveLearn.Controls = function (a) {
    "use strict";
    function b(a) {
        var b = new ActiveText.UI.BasicControls(a, {leftButtons: c, rightButtons: d, openByDefault: !0, overlay: !1, barHeight: 50, barStyles: {background: "#FCFCFC", lineHeight: "50px", fontSize: 0, borderTop: "1px solid #E6E5E5", borderBottom: "1px solid #E6E5E5"}, buttonStyles: {background: "#FCFCFC", borderRadius: 0, barClass: "activelearn", borderBottom: "1px solid #E6E5E5"}, hoverStyles: {background: "white"}, options: {contents: {popupnavwidth: 300, style: {width: 50, height: 49}}, pagenumber: {style: {borderLeft: "1px solid #E6E5E5"}}}});
        return a.extensions.push(b), $(a).one(ActiveText.Commands.INIT_WHITEBOARD, function () {
            var b = a.utils.isFullWindowScalingMode(), c = ActiveText.BrowserUtils.isMobileDevice;
            if (b && c) {
                var d = new ActiveText.ViewOrientationDetection;
                d.init(a), a.extensions.push(d)
            }
        }), void 0 === a.options.allowOverlap && (a.options.allowOverlap = !1), a.options.containerCoordinates = {top: 10, right: 0, bottom: 10, left: 0}, ActiveLearn.StylesHelper.embedStyles(a), b
    }

    a || (a = {});
    var c = a.leftButtons ? a.leftButtons : "drawing,note,viewtoggle,zoom", d = a.rightButtons ? a.rightButtons : "contents,pagenumber,previous,next";
    return{init: b, key: "activelearncontrols"}
};
var ActiveLearn = ActiveLearn || {};
ActiveLearn.LegacyControls = function (a) {
    "use strict";
    function b(a) {
        var b = ActiveText.SkinUtils.getPathToResources(a) + "img/activelearn/", e = new ActiveText.UI.BasicControls(a, {leftButtons: c, rightButtons: d, leftButtonOptions: {left: "10px"}, rightButtonOptions: {right: "10px"}, openByDefault: !0, overlay: !1, barHeight: 39, barStyles: {backgroundColor: "#4885A2", backgroundImage: "url(" + b + "bar_bg.png)", backgroundRepeat: "repeat-x", lineHeight: "30px"}, minWidth: 380, scaleMode: "scale", buttonStyles: {width: 32, height: 32, background: "transparent"}, hoverStyles: {background: "transparent"}, options: {drawing: {imageSrc: b + "drawing-up.png", hoverImageSrc: b + "drawing-over.png", downImageSrc: b + "drawing-down.png", toggleButtonImageSrc: b + "drawing-down.png", toggleButtonHoverImageSrc: b + "drawing-over.png", toggleButtonDownImageSrc: b + "drawing-down.png"}, note: {imageSrc: b + "note-up.png", hoverImageSrc: b + "note-over.png", downImageSrc: b + "note-down.png", toggleButtonImageSrc: b + "note-down.png", toggleButtonHoverImageSrc: b + "note-over.png", toggleButtonDownImageSrc: b + "note-down.png"}, viewtoggle: {imageSrc: b + "double-page-up.png", hoverImageSrc: b + "double-page-over.png", downImageSrc: b + "double-page-down.png", toggleButtonImageSrc: b + "single-page-up.png", toggleButtonHoverImageSrc: b + "single-page-over.png", toggleButtonDownImageSrc: b + "single-page-down.png"}, zoom: {imageSrc: b + "zoom-out-up.png", hoverImageSrc: b + "zoom-out-over.png", downImageSrc: b + "zoom-out-down.png", toggleButtonImageSrc: b + "zoom-in-up.png", toggleButtonHoverImageSrc: b + "zoom-in-over.png", toggleButtonDownImageSrc: b + "zoom-in-down.png"}, contents: {style: {width: 76, height: 32}, width: 76, height: 32, imageSrc: b + "contents-up.png", hoverImageSrc: b + "contents-over.png", downImageSrc: b + "contents-down.png", toggleButtonImageSrc: b + "contents-down.png", toggleButtonHoverImageSrc: b + "contents-over.png", toggleButtonDownImageSrc: b + "contents-down.png"}, quicknav: {style: {border: "none", background: "transparent url(" + b + "quicknav.png) 0 3px no-repeat", width: 108, padding: "11px 0 8px 0", "vertical-align": "middle"}, popupnavwidth: 293, textFormatSinglePage: "%%1 of %%2", textFormatMultiPage: "%%1/%%2 of %%3"}, previous: {style: {width: 33, height: 32}, imageSrc: b + "prev-up.png", hoverImageSrc: b + "prev-over.png", downImageSrc: b + "prev-down.png"}, next: {style: {width: 33, height: 32}, imageSrc: b + "next-up.png", hoverImageSrc: b + "next-over.png", downImageSrc: b + "next-down.png"}}});
        a.extensions.push(e), $(a).one(ActiveText.Commands.INIT_WHITEBOARD, function () {
            if (a.utils.isFullWindowScalingMode()) {
                var b = new ActiveText.ViewOrientationDetection;
                b.init(a), a.extensions.push(b)
            }
        }), void 0 === a.options.allowOverlap && (a.options.allowOverlap = !1), a.options.containerCoordinates = {top: 10, right: 0, bottom: 10, left: 0}, a.options.containerElement.css(Modernizr.multiplebgs ? {backgroundColor: "white", backgroundImage: "url(" + ActiveText.SkinUtils.getPathToResources(a) + "img/activelearn/page-left.png), url(" + ActiveText.SkinUtils.getPathToResources(a) + "img/activelearn/page-right.png)", backgroundPosition: "left top, right top", backgroundRepeat: "no-repeat"} : {backgroundColor: "white", backgroundImage: "url(" + ActiveText.SkinUtils.getPathToResources(a) + "img/activelearn/page-left.png)", backgroundPosition: "left top", backgroundRepeat: "no-repeat"});
        var f;
        return f = Modernizr.boxshadow ? ".whiteboard-container{-webkit-box-shadow: 0px 4px 7px 2px #999999;-moz-box-shadow: 0px 4px 7px 2px #999999;box-shadow: 0px 4px 7px 2px #999999}" : ".whiteboard-container{outline : 1px solid #ccc}", ActiveText.CSSUtils.embedCSS(f, "activelearn-styles"), e
    }

    a || (a = {});
    var c = a.leftButtons ? a.leftButtons : "drawing,note,viewtoggle,zoom", d = a.rightButtons ? a.rightButtons : "contents,quicknav,previous,next";
    return{init: b, key: "activelearncontrols"}
};
var ActiveLearn = ActiveLearn || {};
ActiveLearn.Player = function (a) {
    "use strict";
    function b(a, b, c) {
        var d, e = Boolean(ActiveText.ExtensionUtils.getExtensionByKey(a, b));
        if (!e)switch (b) {
            case"overlaydataloader":
                d = new ActiveText.OverlayData, d.init(a), a.extensions.push(d);
                break;
            case"hotspots":
                d = new ActiveText.Hotspots(ActiveLearn.HotspotsFactory.createResourceIcon, c), d.init(a), a.extensions.push(d);
                break;
            case"notes":
                d = new ActiveText.Notes, d.init(a), a.extensions.push(d);
                break;
            case"activelearncontrols":
                d = new ActiveLearn.Controls, d.init(a), a.extensions.push(d);
                break;
            case"keyboardintegration":
                d = new ActiveText.KeyboardIntegration, d.init(a), a.extensions.push(d);
                break;
            case"drawingtools":
                d = new ActiveText.DrawingTools, d.supported() && (d.init(a), a.extensions.push(d))
        }
    }

    function c(c) {
        ActiveText.BrowserUtils.isMobileDevice && (c.options.allowAnimation = !1);
        for (var d, e = ["overlaydataloader", "hotspots", "notes", "activelearncontrols", "keyboardintegration", "drawingtools"], f = 0, g = e.length; g > f; f++)d = e[f], b(c, d, a);
        $(c).one(ActiveText.Commands.INIT_WHITEBOARD, function () {
            var a = new ActiveText.ViewOrientationDetection;
            a.init(c), c.extensions.push(a)
        })
    }

    return{init: c, key: "activelearn"}
};
var ActiveLearn = ActiveLearn || {};
ActiveLearn.StylesHelper = function () {
    "use strict";
    function a(a) {
        a.options.scheme = {color: "#E6E5E5", textColor: "#C95116", controlColor: "#777E7D", controlHoverColor: "#C95116"}, a.options.containerElement.css({background: "#E6E5E5"});
        var b;
        b = Modernizr.boxshadow ? ".whiteboard-container{-webkit-box-shadow: 0px 4px 7px #777E7D;-moz-box-shadow: 0px 4px 7px #777E7D;box-shadow: 0px 4px 7px #777E7D}" : ".whiteboard-container{outline : 1px solid #777E7D}";
        var c = !ActiveText.BrowserUtils.isMobileDevice, d = a.options.containerElement.selector + " .controls-bar ";
        b += ".controls-bar,.controls-bar *{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;}.controls-bar .activelearn.button{width:50px;height:49px;border:0 solid #E6E5E5;border-left-width:1px;-webkit-border-radius:0;-moz-border-radius:0;-ms-border-radius:0;border-radius:0;font-size:22px;color:#777E7D;text-decoration:none;}.controls-bar .activelearn.button.active.viewtoggle,.controls-bar .activelearn.button.active.zoom{color:#777E7D;}.controls-bar .activelearn.button.active.viewtoggle:hover,.controls-bar .activelearn.button.active.zoom:hover{color:#C95116;}" + (c ? ".controls-bar .activelearn.button:hover," : "") + ".controls-bar .activelearn.button:focus,.controls-bar .activelearn.button.selected.next,.controls-bar .activelearn.button.selected.previous,.controls-bar .activelearn.button:active,.controls-bar .activelearn.button.active{color:#C95116;}.controls-bar .activelearn.button.contents.open{background:white;}.controls-bar .activelearn.button:active i{-webkit-transition: all .3s;-moz-transition: all .3s;-ms-transition: all .3s;-o-transition: all .3s;transition: all .3s;-webkit-transform:scale(0.8);-moz-transform:scale(0.8);transform:scale(0.8);}.controls-bar .control{font-size:12px;}.controls-bar .activelearn.button.next i,.controls-bar .activelearn.button.previous i{font-size:32px;vertical-align:middle;}.controls-bar .activelearn.button.note i{-webkit-transform:scaleY(-0.9);-moz-transform:scaleY(-0.9);-ms-transform:scaleY(-0.9);transform:scaleY(-0.9);}.controls-bar .activelearn.button.last{border-right-width:1px;}" + d + ".at-popover.top .arrow{border-left:none;border-right:none;width:49px;margin-left:-24px;border-top:7px solid #fff;}" + d + ".at-popover," + d + ".at-popover *{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;}" + d + ".list-container{margin:0;padding:0;}" + d + ".at-popover{padding:1px;padding-bottom:7px;}" + d + ".at-popover.top{margin-top:6px;}" + d + ".at-popover-inner{background:white;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;padding:0;-webkit-box-shadow: 0 -2px 7px rgba(0,0,0,.3);-moz-box-shadow: 0 -2px 7px rgba(0,0,0,.3);-ms-box-shadow: 0 -2px 7px rgba(0,0,0,.3);box-shadow: 0 -2px 7px rgba(0,0,0,.3);}" + d + ".structured-navigation-popup ul li{border-bottom:1px solid #E6E5E5;font-size:12px;}" + d + ".structured-navigation-popup ul li.last{border-bottom:none;}" + d + ".structured-navigation-popup ul li{margin:0;line-height: 26px;padding:3px 0;}" + d + ".structured-navigation-popup ul li a," + d + ".structured-navigation-popup ul li a:link," + d + ".structured-navigation-popup ul li a:visited{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;white-space: inherit;padding:0 10px;width:100%;-webkit-border-radius: 0;-moz-border-radius: 0;border-radius: 0;color:#333;}" + (c ? d + ".structured-navigation-popup ul li a:hover," : "") + d + ".structured-navigation-popup ul li a:active," + d + ".structured-navigation-popup ul li a:focus{color:#C95116;background:white;outline:none;}" + d + ".structured-navigation-popup ul li a.active{font-weight:normal;background:white;color:#C95116;}" + (c ? d + ".structured-navigation-popup ul li a.active:hover," : "") + d + ".structured-navigation-popup ul li a.active:active," + d + ".structured-navigation-popup ul li a.active:focus{background:white;}.quicknav.control{color:#777E7D;}.quicknav.control input{-webkit-appearance: none;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px;color:#333;background:#EAEAEA;padding:6px 0;border:1px solid #CFCECE;outline:none;text-align:center;}.list-container::-webkit-scrollbar-track{background-color: #F7F6F5;width:12px;border-top-left-radius:6px;}.list-container::-webkit-scrollbar{width: 12px;background-color: #F7F6F5;}.list-container::-webkit-scrollbar-thumb{border-radius:6px;background-color: #CFCECE;border:3px solid #F7F6F5;width: 6px;margin:3px 0;}.list-container::-webkit-scrollbar-thumb:hover{background-color: #000;}", ActiveText.CSSUtils.embedCSS(b, "activelearn-styles")
    }

    return{embedStyles: a}
}();
var Innovation = Innovation || {};
Innovation.Player = function (a) {
    "use strict";
    function b(a, b) {
        var c, d = Boolean(ActiveText.ExtensionUtils.getExtensionByKey(a, b));
        if (!d)switch (b) {
            case"keyboardintegration":
                c = new ActiveText.KeyboardIntegration, c.init(a), a.extensions.push(c)
        }
    }

    function c(a) {
        a.options.allowAnimation = !1, a.options.pageEdgeStyle = "none"
    }

    function d(d) {
        if (d && d.options && d.options.containerElement) {
            c(d), Innovation.StylesHelper.injectCSS(d);
            for (var e, f = ["keyboardintegration"], g = 0, h = f.length; h > g; g++)e = f[g], b(d, e, a);
            $(d).one(ActiveText.Commands.INIT_WHITEBOARD, function () {
                if (d.utils.isFullWindowScalingMode()) {
                    var a = new ActiveText.ViewOrientationDetection;
                    a.init(d), d.extensions.push(a)
                }
                var b = new Innovation.PageEdgeFactory(d);
                b.generateEdges(d.options.containerElement)
            })
        }
    }

    return{init: d, key: "innovation"}
}, Innovation.StylesHelper = function () {
    "use strict";
    function a(a) {
        var b = "#FB2B69", c = "#FF5B37";
        try {
            b = a.options.scheme.colors[1], c = a.options.scheme.colors[0]
        } catch (d) {
        }
        var e = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="0" height="0" viewBox="0 0 10 10" enable-background="new 0 0 10 10" xml:space="preserve"><linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="3.1816" y1="11.2905" x2="3.1816" y2="-1.091394e-10"><stop offset="0" style="stop-color:' + b + '"/><stop offset="1" style="stop-color:' + c + '"/></linearGradient></svg>';
        $("body").append(e), a.options.scheme = {textColor: "#000000", controlColor: "#000000", controlHoverColor: "" + c};
        var f = ActiveText.ColourUtils.convertHexToRGB(b, .75), g = ActiveText.ColourUtils.convertHexToRGB(c, .75), h = ActiveText.ColourUtils.convertHexToRGB(b, 1), i = ActiveText.ColourUtils.convertHexToRGB(c, 1), j = !ActiveText.BrowserUtils.isMobileDevice, k = a.options.containerElement.selector + " ", l = ".page-edge,.whiteboard-container{-webkit-transition: all .3s ease-in-out;-moz-transition: all .3s ease-in-out;-o-transition: all .3s ease-in-out;transition: all .3s ease-in-out;-webkit-touch-callout: none;-moz-user-select: none;-khtml-user-select: none;-webkit-user-select: none;-o-user-select: none; }" + (j ? k + ".page-edge a:hover," + k + ".controls-bar a.button:hover{background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0, " + g + "),color-stop(1, " + f + "));background-image: -o-linear-gradient(bottom, " + g + " 0%, " + f + " 100%);background-image: -moz-linear-gradient(bottom, " + g + " 0%, " + f + " 100%);background-image: -webkit-linear-gradient(bottom, " + g + " 0%, " + f + " 100%);background-image: -ms-linear-gradient(bottom, " + g + " 0%, " + f + " 100%);background-image: linear-gradient(to bottom, " + g + " 0%, " + f + " 100%);}" : "") + k + ".page-edge a:active," + k + ".page-edge a:focus," + k + ".controls-bar a.button.active," + k + ".controls-bar a.button:active," + k + ".controls-bar a.button:focus{background-image: -webkit-gradient(linear,left top,left bottom,color-stop(0, " + i + "),color-stop(1, " + h + "));background-image: -o-linear-gradient(bottom, " + i + " 0%, " + h + " 100%);background-image: -moz-linear-gradient(bottom, " + i + " 0%, " + h + " 100%);background-image: -webkit-linear-gradient(bottom, " + i + " 0%, " + h + " 100%);background-image: -ms-linear-gradient(bottom, " + i + " 0%, " + h + " 100%);background-image: linear-gradient(to bottom, " + i + " 0%, " + h + " 100%);}" + (j ? k + ".page-edge a:hover svg polygon," + k + ".controls-bar a.button:hover svg path," + k + ".controls-bar a.button:hover svg polygon," : "") + k + ".page-edge a:active svg polygon," + k + ".page-edge a:focus svg polygon," + k + ".controls-bar a.button:active svg polygon," + k + ".controls-bar a.button:focus svg polygon," + k + ".controls-bar a.button.active svg polygon," + k + ".page-edge a:active svg path," + k + ".page-edge a:focus svg path," + k + ".controls-bar a.button.active svg path," + k + ".controls-bar a.button:focus svg path," + k + ".controls-bar a.button:active svg path{fill:white;}" + k + "a.innovation-2014," + k + "a.innovation-2014:link," + k + "a.innovation-2014:visited," + k + "a.innovation-2014 svg polygon," + k + "a.innovation-2014:link svg polygon," + k + "a.innovation-2014:visited svg polygon {text-decoration:none;cursor:pointer;-webkit-touch-callout: none;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;-webkit-border-radius: 21px;-moz-border-radius: 21px;-ms-border-radius: 21px;-o-border-radius: 21px;border-radius: 21px;margin: 4px 0;width: 42px;height: 42px;line-height: 1.3em !important;display:inline-block}" + k + "a.innovation-2014:hover," + k + "a.innovation-2014:focus," + k + "a.innovation-2014:active," + k + "a.innovation-2014:hover svg polygon," + k + "a.innovation-2014:focus svg polygon," + k + "a.innovation-2014:active svg polygon {text-decoration:none;}.pull-right {float:right;}" + k + "a.innovation-2014.active," + k + "a.innovation-2014.active:link," + k + "a.innovation-2014.active:visited {background: red;}" + k + "a.innovation-2014.active:hover," + k + "a.innovation-2014.active:focus," + k + "a.innovation-2014.active:active {color:red;}" + k + "a.innovation-2014 i {position:absolute}" + k + ".controls-bar img {vertical-align:middle;}";
        ActiveText.CSSUtils.embedCSS(l, "page-edges")
    }

    return{injectCSS: a}
}(), Innovation.PageEdgeFactory = function (a) {
    "use strict";
    function b() {
        $(l).each(function (b, c) {
            var d = a.navigation.canGoToNextPage();
            d ? $(c).removeClass("disabled").attr("aria-disabled", !1).fadeIn() : $(c).addClass("disabled").attr("aria-disabled", !0).fadeOut()
        }), $(m).each(function (b, c) {
            var d = a.navigation.canGoToPreviousPage();
            d ? $(c).removeClass("disabled").attr("aria-disabled", !1).fadeIn() : $(c).addClass("disabled").attr("aria-disabled", !0).fadeOut()
        })
    }

    function c() {
        a.navigation.gotoNextPage(), b()
    }

    function d() {
        a.navigation.gotoPrevPage(), b()
    }

    function e() {
        var b = ActiveText.ViewUtils.getUnscaledDPSTargetDimensions(a), c = -(b.width - b.availWidth) / 2, d = $(h).add(i), e = 10;
        j > c ? (c = j, d.addClass("overlap")) : d.removeClass("overlap");
        var f = ActiveText.ViewUtils.getContainerCoordinates(a), g = ActiveText.ExtensionUtils.getExtensionByKey(a, "controls"), l = 0;
        g && (l = g.getBarHeight()), d.css({width: c, height: b.availHeight + f.top + (f.bottom - l)}), c > k && (e = (c - k) / 2, c = k), c === j && (h.width(c + 2 * e), i.width(c + 2 * e))
    }

    function f(f) {
        a.utils.isFullWindowScalingMode() || f.css({position: "relative"});
        var g = '<div class="left-edge page-edge" role="button" tabindex="0" title="Previous Page" aria-label="Previous Page"><a><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="33%" height="100%" viewBox="0 0 6.363 11.29" enable-background="new 0 0 6.363 11.29" xml:space="preserve" style="max-width:22px"><polygon fill="url(#SVGID_1_)" points="0.707,4.926 0,5.633 0.707,6.34 1.883,7.517 5.655,11.29 6.363,10.583 1.414,5.633 6.34,0.707 5.632,0 2.809,2.824 "/></svg></a></div>';
        h = $(g).css({left: 0, position: a.utils.isFullWindowScalingMode() ? "fixed" : "absolute", top: 0, zIndex: 1e3, cursor: "pointer"}), h.find("a").css({left: 0, right: 0, position: "absolute", top: 0, bottom: 0, textAlign: "center"}), h.find("i").css({display: "inline-block"}), m.push(h);
        var j = '<div class="right-edge page-edge" role="button" tabindex="1" title="Next Page" aria-label="Next Page"><a><svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="33%" height="100%" viewBox="0 0 6.364 11.29" enable-background="new 0 0 6.364 11.29" xml:space="preserve" style="max-width:22px"><polygon fill="url(#SVGID_1_)" points="5.657,6.364 6.364,5.657 5.657,4.95 4.48,3.773 0.707,0 0,0.707 4.95,5.657 0.023,10.583 0.73,11.29 3.554,8.467 "/></svg></a></div>';
        i = $(j).css({right: 0, position: a.utils.isFullWindowScalingMode() ? "fixed" : "absolute", top: 0, zIndex: 1e3, cursor: "pointer"}), i.find("a").css({left: 0, right: 0, position: "absolute", top: 0, bottom: 0, textAlign: "center"}), i.find("i").css({display: "inline-block"}), l.push(i), a.navigation.canGoToNextPage() || i.addClass("disabled").attr("aria-disabled", !0), a.navigation.canGoToPreviousPage() || h.addClass("disabled").attr("aria-disabled", !0), e();
        var k = f.find(".whiteboard-container");
        h.insertAfter(k), i.insertAfter(k), i.click(c), h.click(d), $(a).one(ActiveText.Events.BOOK_STRUCTURE_LOADED, b), $(a).on(ActiveText.Commands.GO_TO_PAGE, b), $(a).on(ActiveText.Events.RESIZE, e)
    }

    function g() {
        h.remove(), i.remove(), l = [], m = [], $(a).off(ActiveText.Events.BOOK_STRUCTURE_LOADED, b), $(a).off(ActiveText.Commands.GO_TO_PAGE, b), $(a).off(ActiveText.Events.RESIZE, e)
    }

    var h, i, j = 44, k = 100, l = [], m = [];
    return{generateEdges: f, removeEdges: g, minimumWidth: 64}
}, Innovation.Controls = function (a) {
    "use strict";
    function b(a) {
        a.options.defaults || (a.options.defaults = {}), a.options.defaults.generatePageEdges = !1, a.options.containerCoordinates = {top: 10, right: 10, bottom: 10, left: 10};
        var b = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="50%" height="50%" viewBox="0 0 54.988 10.596" enable-background="new 0 0 54.988 10.596" xml:space="preserve"><g><path fill="url(#SVGID_1_)" d="M7.554,1.005c0.693,0.67,1.079,1.431,1.155,2.283H7.383C7.235,2.641,6.941,2.128,6.5,1.75S5.44,1.183,4.644,1.183 c-0.971,0-1.755,0.348-2.353,1.043C1.693,2.921,1.395,3.988,1.395,5.424c0,1.177,0.27,2.131,0.809,2.863 c0.54,0.732,1.344,1.098,2.414,1.098c0.985,0,1.735-0.385,2.25-1.155c0.273-0.406,0.477-0.939,0.611-1.6h1.326 C8.688,7.688,8.3,8.575,7.643,9.29c-0.789,0.861-1.852,1.292-3.189,1.292c-1.153,0-2.122-0.354-2.906-1.06 C0.516,8.587,0,7.144,0,5.192C0,3.71,0.387,2.495,1.162,1.546C2,0.515,3.155,0,4.628,0C5.885,0,6.86,0.335,7.554,1.005z"/><path fill="url(#SVGID_1_)" d="M15.702,3.725c0.647,0.628,0.971,1.553,0.971,2.773c0,1.18-0.285,2.154-0.855,2.923c-0.57,0.77-1.455,1.154-2.654,1.154 c-1,0-1.794-0.34-2.383-1.021S9.898,7.959,9.898,6.812c0-1.229,0.31-2.208,0.93-2.937c0.62-0.729,1.453-1.093,2.498-1.093 C14.263,2.782,15.055,3.097,15.702,3.725z M14.938,8.59c0.3-0.617,0.45-1.303,0.45-2.059c0-0.683-0.108-1.238-0.325-1.666 c-0.342-0.674-0.933-1.011-1.771-1.011c-0.744,0-1.285,0.287-1.623,0.86s-0.507,1.266-0.507,2.076c0,0.778,0.169,1.427,0.507,1.946 s0.874,0.778,1.609,0.778C14.085,9.516,14.638,9.207,14.938,8.59z"/><path fill="url(#SVGID_1_)" d="M18.184,2.994h1.169v1.039c0.346-0.428,0.713-0.736,1.101-0.923s0.818-0.28,1.292-0.28c1.039,0,1.741,0.362,2.105,1.087 c0.201,0.396,0.301,0.964,0.301,1.702v4.696H22.9V5.701c0-0.447-0.066-0.807-0.198-1.08c-0.219-0.456-0.615-0.684-1.189-0.684 c-0.292,0-0.531,0.03-0.718,0.089c-0.337,0.1-0.633,0.301-0.889,0.602c-0.205,0.242-0.338,0.491-0.4,0.749 s-0.092,0.625-0.092,1.104v3.835h-1.23V2.994z"/><path fill="url(#SVGID_1_)" d="M26.216,0.95h1.244v2.044h1.169v1.005H27.46v4.778c0,0.255,0.086,0.426,0.26,0.513c0.096,0.05,0.255,0.075,0.479,0.075 c0.059,0,0.123-0.001,0.191-0.004s0.148-0.011,0.239-0.023v0.978c-0.141,0.041-0.288,0.071-0.441,0.089s-0.318,0.027-0.496,0.027 c-0.574,0-0.964-0.147-1.169-0.441s-0.308-0.676-0.308-1.145V3.999h-0.991V2.994h0.991V0.95z"/><path fill="url(#SVGID_1_)" d="M34.381,3.196c0.485,0.244,0.854,0.56,1.107,0.947c0.245,0.369,0.408,0.8,0.489,1.292c0.073,0.337,0.109,0.875,0.109,1.613 h-5.325c0.022,0.745,0.197,1.342,0.522,1.792c0.325,0.45,0.83,0.675,1.512,0.675c0.638,0,1.146-0.213,1.526-0.639 c0.212-0.247,0.363-0.533,0.452-0.858h1.21c-0.032,0.269-0.138,0.568-0.318,0.899s-0.381,0.601-0.603,0.81 c-0.371,0.365-0.83,0.611-1.377,0.738c-0.294,0.073-0.626,0.109-0.998,0.109c-0.906,0-1.673-0.332-2.303-0.995 c-0.63-0.663-0.944-1.592-0.944-2.786c0-1.176,0.317-2.13,0.951-2.864c0.634-0.734,1.463-1.101,2.486-1.101 C33.396,2.83,33.897,2.952,34.381,3.196z M34.822,6.07c-0.05-0.533-0.165-0.959-0.346-1.278c-0.334-0.592-0.893-0.889-1.674-0.889 c-0.561,0-1.03,0.204-1.41,0.612c-0.38,0.408-0.581,0.926-0.604,1.555H34.822z"/><path fill="url(#SVGID_1_)" d="M37.646,2.994h1.169v1.039c0.346-0.428,0.713-0.736,1.101-0.923s0.818-0.28,1.292-0.28c1.039,0,1.741,0.362,2.105,1.087 c0.201,0.396,0.301,0.964,0.301,1.702v4.696h-1.251V5.701c0-0.447-0.066-0.807-0.198-1.08c-0.219-0.456-0.615-0.684-1.189-0.684 c-0.292,0-0.531,0.03-0.718,0.089c-0.337,0.1-0.633,0.301-0.889,0.602c-0.205,0.242-0.338,0.491-0.4,0.749 s-0.092,0.625-0.092,1.104v3.835h-1.23V2.994z"/><path fill="url(#SVGID_1_)" d="M45.678,0.95h1.244v2.044h1.169v1.005h-1.169v4.778c0,0.255,0.086,0.426,0.26,0.513c0.096,0.05,0.255,0.075,0.479,0.075 c0.059,0,0.123-0.001,0.191-0.004S48,9.35,48.091,9.338v0.978c-0.141,0.041-0.288,0.071-0.441,0.089s-0.318,0.027-0.496,0.027 c-0.574,0-0.964-0.147-1.169-0.441s-0.308-0.676-0.308-1.145V3.999h-0.991V2.994h0.991V0.95z"/><path fill="url(#SVGID_1_)" d="M50.053,8.019c0.037,0.41,0.142,0.725,0.314,0.943c0.316,0.396,0.865,0.595,1.646,0.595c0.465,0,0.875-0.099,1.228-0.297 s0.53-0.505,0.53-0.919c0-0.314-0.141-0.554-0.424-0.718c-0.181-0.1-0.537-0.216-1.07-0.349l-0.994-0.246 c-0.634-0.155-1.102-0.328-1.403-0.52c-0.537-0.333-0.806-0.793-0.806-1.381c0-0.693,0.253-1.253,0.759-1.682 c0.505-0.428,1.186-0.643,2.04-0.643c1.118,0,1.923,0.324,2.417,0.971c0.31,0.41,0.46,0.852,0.451,1.326H53.58 c-0.023-0.276-0.124-0.528-0.301-0.754c-0.29-0.322-0.791-0.483-1.505-0.483c-0.476,0-0.836,0.088-1.081,0.266 c-0.245,0.177-0.367,0.411-0.367,0.702c0,0.318,0.161,0.572,0.483,0.763c0.186,0.114,0.459,0.214,0.822,0.3l0.829,0.198 c0.901,0.214,1.504,0.421,1.811,0.622c0.479,0.314,0.718,0.809,0.718,1.483c0,0.652-0.25,1.214-0.751,1.688 s-1.263,0.711-2.288,0.711c-1.103,0-1.883-0.247-2.342-0.742c-0.459-0.495-0.705-1.106-0.737-1.835H50.053z"/></g></svg>', e = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="50%" height="50%" viewBox="0 0 6.364 11.29" enable-background="new 0 0 6.364 11.29" xml:space="preserve"><polygon fill="url(#SVGID_1_)" points="5.657,6.364 6.364,5.657 5.657,4.95 4.48,3.773 0.707,0 0,0.707 4.95,5.657 0.023,10.583 0.73,11.29 3.554,8.467 "/></svg>', f = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="50%" height="50%" viewBox="0 0 6.363 11.29" enable-background="new 0 0 6.363 11.29" xml:space="preserve"><polygon fill="url(#SVGID_1_)" points="0.707,4.926 0,5.633 0.707,6.34 1.883,7.517 5.655,11.29 6.363,10.583 1.414,5.633 6.34,0.707 5.632,0 2.809,2.824 "/></svg>', g = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="50%" height="50%" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve"><path fill="url(#SVGID_1_)" d="M28,2v3.325v1.549l1.5,0.388c1.697,0.438,3.316,1.12,4.812,2.028l1.342,0.814l1.109-1.11l2.379-2.378 l4.242,4.242l-2.459,2.459l-1.083,1.082l0.763,1.328c0.846,1.473,1.479,3.067,1.879,4.739L42.852,22h1.577H48v6h-3.74h-1.523 l-0.405,1.468c-0.438,1.583-1.094,3.102-1.951,4.514l-0.814,1.343l1.11,1.109l2.708,2.708l-4.242,4.242l-2.789-2.788l-1.083-1.083 l-1.327,0.763c-1.377,0.792-2.872,1.398-4.442,1.803L28,42.465v1.55V48h-6v-3.985v-1.55l-1.501-0.387 c-1.57-0.405-3.065-1.011-4.442-1.803l-1.328-0.763l-1.082,1.083l-2.789,2.789l-4.242-4.243l2.708-2.708l1.11-1.109l-0.815-1.343 c-0.857-1.412-1.514-2.931-1.951-4.514L7.263,28H5.74H2v-6h3.57h1.577l0.368-1.533c0.4-1.672,1.033-3.267,1.879-4.739l0.763-1.328 l-1.083-1.082l-2.459-2.459l4.242-4.242l2.379,2.378l1.109,1.11l1.342-0.814c1.496-0.908,3.115-1.59,4.812-2.028L22,6.874V5.325V2 H28 M25,34.002c4.963,0,9-4.038,9-9.002c0-4.963-4.037-9.001-9-9.001S16,20.037,16,25C16,29.964,20.037,34.002,25,34.002 M30,0H20 v5.325c-1.91,0.493-3.705,1.257-5.35,2.255l-3.793-3.793l-7.07,7.071l3.873,3.873C6.726,16.358,6.019,18.127,5.57,20H0v10h5.74 c0.494,1.788,1.228,3.47,2.169,5.02l-4.122,4.122l7.07,7.072l4.203-4.204c1.531,0.88,3.188,1.554,4.94,2.005V50h10v-5.985 c1.751-0.451,3.408-1.125,4.939-2.005l4.203,4.203l7.07-7.071l-4.122-4.122c0.94-1.55,1.675-3.232,2.169-5.02H50V20h-5.57 c-0.449-1.873-1.155-3.642-2.09-5.269l3.873-3.873l-7.07-7.071L35.35,7.58C33.705,6.582,31.91,5.818,30,5.325V0L30,0z M25,32.002 c-3.867,0-7-3.135-7-7.002c0-3.867,3.133-7.001,7-7.001s7,3.134,7,7.001C32,28.867,28.867,32.002,25,32.002L25,32.002z"/></svg>', h = new ActiveText.UI.BasicControls(a, {leftButtons: c, rightButtons: d, leftButtonOptions: {left: "10px"}, rightButtonOptions: {right: "10px"}, openByDefault: !0, overlay: !1, barHeight: 74, barStyles: {backgroundColor: ActiveText.ColourUtils.convertHexToRGB("#000000", .8)}, minWidth: 530, scaleMode: "scale", buttonStyles: {width: 44, height: 44, barClass: "innovation-2014"}, options: {contents: {popupnavwidth: 280, svgData: b, style: {width: 119}}, next: {svgData: e}, previous: {svgData: f}, settings: {svgData: g}}});
        return a.extensions.push(h), h
    }

    a || (a = {});
    var c = a.leftButtons ? a.leftButtons : "settings", d = a.rightButtons ? a.rightButtons : "contents,previous,next";
    return{init: b, key: "innovationcontrols"}
};
var BugClub = BugClub || {};
BugClub.Player = function (a) {
    "use strict";
    function b(a, b, c) {
        var d, e = Boolean(ActiveText.ExtensionUtils.getExtensionByKey(a, b));
        if (!e)switch (b) {
            case"overlaydataloader":
                d = new ActiveText.OverlayData, d.init(a), a.extensions.push(d);
                break;
            case"bugclubhotspots":
                d = new BugClub.Hotspots(c), d.init(a), a.extensions.push(d);
                break;
            case"smildatamodel":
                d = new ActiveText.SMILDataModel, d.init(a), a.extensions.push(d);
                break;
            case"smildataloader":
                d = new ActiveText.SMILDataLoader, d.init(a), a.extensions.push(d);
                break;
            case"readtome":
                a.options.allowReadToMe !== !1 && (d = new ActiveText.ReadToMe, d.init(a), a.extensions.push(d));
                break;
            case"summaryscreen":
                d = new BugClub.SummaryScreen(c), d.init(a), a.extensions.push(d);
                break;
            case"soundeffects":
                d = new ActiveText.SoundEffects, d.init(a), a.extensions.push(d);
                break;
            case"keyboardintegration":
                d = new ActiveText.KeyboardIntegration, d.init(a), a.extensions.push(d);
                break;
            case"drawingtools":
                d = new ActiveText.DrawingTools, d.supported() && (d.init(a), a.extensions.push(d));
                break;
            case"readingcomplete":
                d = new ActiveText.ReadingComplete, d.init(a), a.extensions.push(d);
                break;
            case"bugclubactivitysummary":
                d = new BugClub.ActivitySummaryCollective, d.init(a), a.extensions.push(d);
                break;
            case"bugclubscorm":
                d = new BugClub.SCORM.ActivityData, d.init(a), a.extensions.push(d)
        }
    }

    function c(a) {
        function b(b) {
            var c = $(b.currentTarget).hasClass("complete");
            if (c)debug.log("Not launching activity because activity is completed."); else {
                var d = $(b.currentTarget).data(), e = d.data.uri, f = ActiveText.ExtensionUtils.getExtensionByKey(a, "pipwerks");
                f ? (debug.log("scormIntegrationExtension.launchActivity();", d), f.launchActivity(e)) : (debug.log("Launching Hotspot Activity : " + e), setTimeout(function () {
                    alert("Launching Hotspot Activity : " + e)
                }, 0))
            }
        }

        function c(b) {
            var c, d = ActiveText.ExtensionUtils.getExtensionByKey(a, "readtome");
            if (d) {
                var f = d.getState();
                e = f.shouldAutoPlay, void 0 === b ? c = f.shouldAutoPlay : f.shouldAutoPlay = Boolean(d.options && d.options.autoplay)
            }
            return c
        }

        ActiveText.BrowserUtils.isMobileDevice && (a.options.allowAnimation = !1);
        var d = ActiveText.SkinUtils.getPathToResources(a);
        a.options.containerElement.css(!Modernizr.svg || navigator.userAgent.match(/(msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i) ? {background: "url(" + d + "img/bugclub/backdrop.png) no-repeat center center", filter: 'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="' + d + 'img/bugclub/backdrop.png", sizingMethod="scale")', MsFilter: "'progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\"" + d + 'img/bugclub/backdrop.png", sizingMethod="scale")\'', backgroundSize: "cover"} : {background: "url(" + d + "img/bugclub/background.svg) no-repeat center center", backgroundSize: "cover"});
        var e;
        void 0 === a.options.allowOverlap && (a.options.allowOverlap = !1), void 0 === a.options.hotspotClickFunction && (a.options.hotspotClickFunction = b), void 0 === a.options.audioPlaybackController && (a.options.audioPlaybackController = c)
    }

    function d(a) {
        return ActiveText.ExtensionUtils.getExtensionByKey(a, "overlaydataloader")
    }

    function e(a) {
        var b = d(a);
        if (b)for (var c = 0, e = a.data.getFlatListOfNavigation().length; e > c; c++)b.loadDataForPageIndex(c)
    }

    function f(d) {
        c(d);
        for (var f, g = ["overlaydataloader", "bugclubactivitysummary", "bugclubscorm", "bugclubhotspots", "smildatamodel", "smildataloader", "readtome", "summaryscreen", "soundeffects", "keyboardintegration", "drawingtools", "readingcomplete"], h = 0, i = g.length; i > h; h++)f = g[h], b(d, f, a);
        $(d).one(ActiveText.Commands.INIT_WHITEBOARD, function () {
            if (d.utils.isFullWindowScalingMode()) {
                var a = new ActiveText.ViewOrientationDetection;
                a.init(d), d.extensions.push(a)
            }
        }), $(d).one(ActiveText.Events.BOOK_STRUCTURE_LOADED, function () {
            e(d)
        })
    }

    return{init: f, key: "bugclub"}
}, ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"), function (a) {
    "use strict";
    function b(b, c) {
        var e, f = a.UI.BasicControls.ToggleButtonFactory, g = f.createToggleButton(d, c), h = $("<div class='structure-container' style='width:" + g.outerWidth() + "px'></div>").append(g), i = new BugClub.StructurePopup;
        return c && c.options && c.options.popupnavwidth && (e = c.options.popupnavwidth), i.init(b, g, void 0, e), h
    }

    var c = "activitystructure", d = {title: "Contents", icon: "icon-reorder", className: c, accesskey: "C"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText), ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"), function (a) {
    "use strict";
    function b(b, c) {
        function e() {
            a.LayerUtils.setLayerVisibility(b, "standalone_hotspots", !0)
        }

        function f() {
            a.LayerUtils.setLayerVisibility(b, "standalone_hotspots", !1)
        }

        function g() {
            l ? (l = !1, o.toggle_button(!1), f()) : (l = !0, o.toggle_button(!0), e())
        }

        function h(a) {
            for (var b = [], c = 0, d = a.data.length; d > c; c++) {
                var e = a.data[c];
                "hotspot" === e.type && b.push(e)
            }
            return b.length
        }

        function i(a, b) {
            m[b.index] = 0, j()
        }

        function j() {
            for (var a = b.model.getCurrentIndex(), c = b.view.model.getDisplayedPages(), d = !1, e = a, f = a + c; f > e; e++)m[e] && m[e] > 0 && (d = !0);
            d ? o.enable() : o.disable()
        }

        function k(a, b) {
            m[b.index] = h(b), j()
        }

        var l = !0, m = [], n = a.UI.BasicControls.ToggleButtonFactory, o = n.createToggleButton(d, c);
        return o.toggle_button(!0), o.on({click: g}), $(b).on(a.Events.LOADED_OVERLAY_DATA, k), $(b).on(a.Events.OVERLAY_DATA_FAIL, i), o
    }

    var c = "bugclubhotspots", d = {title_on: "Show Hotspots", title_off: "Hide Hotspots", icon_off: "icon-eye-close", icon_on: "icon-eye-open", className: c, accesskey: "H"};
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText), ActiveText.namespace("BugClub.StructurePopup"), BugClub.StructurePopup = function () {
    "use strict";
    function a(a, b, c, e) {
        o = a, r = b, s = ActiveText.UI.StructurePopupFactory;
        var g = ActiveText.ExtensionUtils.getExtensionByKey(o, "bugclubactivitysummary");
        g && $(g).on(v, d), t = new ActiveText.UI.StructurePopupDisplayHelper, t.init(o, r, k), f(c, e), m()
    }

    function b(a) {
        var b = p.find("li"), c = a.status, d = ActiveText.NavigationUtils.pageIndexToPageNumber(o, a.pageIndex), e = b.find("> a[data-page=" + d + "]");
        if (e.length > 0) {
            var f = e.find(".status-icon").get(0);
            f && (f.className = "status-icon", $(f).addClass(c))
        }
    }

    function c(a) {
        if (p)if (a && $.isArray(a))for (var c = 0, d = a.length; d > c; c++) {
            var e = a[c];
            e.pageIndex = c, b(e)
        } else b(a)
    }

    function d(a, b) {
        c(b)
    }

    function e() {
        return q && 0 !== q.length || (q = r.parent()), q
    }

    function f(a, b) {
        var c;
        c = "string" == typeof a ? a + " " : o.options.containerElement.selector + " ";
        var d = BugClub.StructurePopup.Style.getStyle(o, c, o.theme, b);
        ActiveText.CSSUtils.embedCSS(d, c + "structure-popup")
    }

    function g() {
        t.hidePopup()
    }

    function h() {
        t.showPopup()
    }

    function i(a) {
        var b = "";
        if (a && $.isArray(a) && a.length > 0) {
            b += "<ul>";
            for (var c = 0, d = a.length; d > c; c++)b += i(a[c]);
            b += "</ul>"
        } else b += a && void 0 !== a.number && void 0 !== a.title ? '<li><a href="#" data-page="' + a.number + '"><div class="status-icon"></div><span>' + a.title + "</span></a></li>" : "";
        return b
    }

    function j(a) {
        var b = i(a);
        return'<div class="structured-navigation-popup"><div class="list-container scrollable">' + b + "</div></div>"
    }

    function k() {
        r.addClass("open"), r.toggle_button && r.toggle_button(!0);
        var a = ActiveText.ExtensionUtils.getExtensionByKey(o, "bugclubactivitysummary");
        if (a)var b = a.getData();
        var d = o.data.getNavigationStructure(), f = e(), g = j(d), h = o.model.getCurrentPageNumber();
        s.createPopup(f, g), setTimeout(function () {
            p = e().find(".at-popover-content"), p.find("a").click(l), t.highlightLinksForIndex(u, h, 0), a && c(b);
            new ScrollFix(p.find(".scrollable").get(0))
        }, 0)
    }

    function l(a) {
        var b = $(a.currentTarget).attr("data-page");
        return o.navigation.gotoPage(b), !1
    }

    function m() {
        $(o).on(ActiveText.Commands.GO_TO_PAGE, n)
    }

    function n(a, b) {
        t.removeHighlightFromAllLinks(), t.highlightLinksForIndex(u, b.toPage)
    }

    var o, p, q, r, s, t, u = 41, v = "change";
    return{init: a, createPopup: k, showPopup: h, hidePopup: g}
}, ActiveText.namespace("BugClub.StructurePopup.Style"), BugClub.StructurePopup.Style = function (a, b) {
    "use strict";
    function c(c, d, e, f) {
        var g = 20;
        d || (d = ""), e || (e = new a.Theme(c)), f || (f = 480);
        var h = a.SkinUtils.getPathToResources(c), i = e.getControlsOutlineColor(), j = e.getPopupBackgroundColor(), k = e.getControlsForegroundHoverColor(), l = e.getControlsForegroundHoverColor(.33), m = !a.BrowserUtils.isMobileDevice;
        return d + ".at-popover{position: absolute;top: 0;left: 0;z-index: 1040;display: none;padding: 5px;}" + d + ".at-popover.top{margin-top: -5px;}" + d + ".at-popover.right{margin-left: 5px;}" + d + ".at-popover.bottom{margin-top: 5px;}" + d + ".at-popover.left{margin-left: -5px;}" + d + ".at-popover.top .arrow{bottom: 0;left: 50%;margin-left: -5px;border-left: 5px solid transparent;border-right: 5px solid transparent;border-top: 5px solid " + i + ";}" + d + ".at-popover.right .arrow{top: 50%;left: 0;margin-top: -5px;border-top: 5px solid transparent;border-bottom: 5px solid transparent;border-right: 5px solid " + i + ";}" + d + ".at-popover.bottom .arrow{top: 0;left: 50%;margin-left: -5px;border-left: 5px solid transparent;border-right: 5px solid transparent;border-bottom: 5px solid " + i + ";}" + d + ".at-popover.left .arrow{top: 50%;right: 0;margin-top: -5px;border-top: 5px solid transparent;border-bottom: 5px solid transparent;border-left: 5px solid " + i + ";}" + d + ".at-popover .arrow{position: absolute;width: 0;height: 0;}" + d + ".at-popover-inner{padding: 3px;overflow: hidden;background: " + i + ";background: " + e.getControlsOutlineColor(.8) + ";-webkit-border-radius: 6px;-moz-border-radius: 6px;border-radius: 6px;-webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);-moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);}" + d + ".at-popover-content{padding: 0;background-color: " + j + ";-webkit-border-radius: 3px;-moz-border-radius: 3px;border-radius: 3px;-webkit-background-clip: padding-box;-moz-background-clip: padding-box;background-clip: padding-box;width:" + f + "px;}" + d + ".at-popover-content p," + d + ".at-popover-content ul," + d + ".at-popover-content ol{margin-bottom: 0; }.structured-navigation-popup ul {font-size:16px;line-height:2em;margin:0;padding:0}" + d + ".list-container{overflow: scroll;-webkit-overflow-scrolling: touch;overflow-x:hidden;overflow-y:auto;height:250px;padding:3px 0 4px;margin:0 4px;}" + d + ".structured-navigation-popup ul li{margin:0;text-align:left;list-style: none;line-height: 32px;}" + d + ".structured-navigation-popup ul ul li a{padding-left:30px !important;width:" + (f - 3 * g) + "px !important;}" + d + ".structured-navigation-popup ul ul ul li a{padding-left:50px !important;width:" + (f - 4 * g) + "px !important;}" + d + ".structured-navigation-popup ul ul ul ul li a{padding-left:70px !important;width:" + (f - 5 * g) + "px !important;}" + d + ".structured-navigation-popup ul ul ul ul ul li a{padding-left:90px !important;width:" + (f - 6 * g) + "px !important;}" + d + ".structured-navigation-popup ul li a," + d + ".structured-navigation-popup ul li a:link," + d + ".structured-navigation-popup ul li a:visited{text-decoration:none;white-space: nowrap;text-overflow: ellipsis;display:inline-block;padding:0 10px;width:" + (f - 2 * g) + "px;-webkit-border-radius: 3px;-moz-border-radius: 3px;border-radius: 3px;color:" + e.getTextColor() + ";-webkit-transition: background .3s;-moz-transition: background .3s;-ms-transition: background .3s;-o-transition: background .3s;transition: background .3s;-webkit-touch-callout: none;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}" + (m ? d + ".structured-navigation-popup ul li a:hover{background:" + l + ";-webkit-tap-highlight-color:" + l + ";}" : "") + d + ".structured-navigation-popup ul li a:active," + d + ".structured-navigation-popup ul li a:focus{background:" + k + ";}" + d + " .structured-navigation-popup ul li {line-height:41px;}" + d + " .status-icon{width:35px;height:35px;float:left;margin:3px 1ex 3px 0;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;}" + d + " .status-icon." + b.ActivitySummaryStates.INCOMPLETE + "{background:white url(" + h + "img/bugclub/legacy/ks2/KS2_ActivityToggle_yellow_1.png) center center no-repeat;}" + d + " .status-icon." + b.ActivitySummaryStates.PROGRESS + "{background:white url(" + h + "img/bugclub/legacy/ks2/KS2_ActivityToggle_yellow_2.png) center center no-repeat;}" + d + " .status-icon." + b.ActivitySummaryStates.COMPLETED + "{background:white url(" + h + "img/bugclub/legacy/ks2/KS2_ActivityToggle_Green_face_yellow_1.png) center center no-repeat;}" + d + " .status-icon." + b.ActivitySummaryStates.NONE + "{background:transparent}.structure-container{display:inline-block;position:relative}"
    }

    return{getStyle: c}
}(ActiveText, BugClub), ActiveText.namespace("BugClub.ActivitySummaryCollective"), BugClub.ActivitySummaryCollective = function () {
    "use strict";
    function a(a) {
        n = a, p = this, $(n).on(ActiveText.Events.LOADED_OVERLAY_DATA, c), $(n).on(ActiveText.Events.OVERLAY_DATA_FAIL, d), $(n).on(ActiveText.SCORMIntegration.SCORM_DATA_UPDATED, i)
    }

    function b(a, b, c) {
        var d = m();
        d[a] = {status: b, activityIds: c};
        var e = {pageIndex: a, status: b, activityIds: c};
        $(p).trigger(q, e)
    }

    function c(a, c) {
        var d = g(c.data), e = c.index, h = f(c.data);
        b(e, d, h)
    }

    function d(a, c) {
        var d = c.index;
        b(d, BugClub.ActivitySummaryStates.NONE, [])
    }

    function e(a) {
        var b = 0, c = ActiveText.ExtensionUtils.getExtensionByKey(n, "bugclubscorm"), d = c.getSCORMStateForKey(a);
        return d && void 0 !== d.completion_status && d && void 0 !== d.completion_status && ("incomplete" === d.completion_status ? b = 1 : "completed" === d.completion_status && (b = 2)), b
    }

    function f(a) {
        var b = [], c = ActiveText.ExtensionUtils.getExtensionByKey(n, "bugclubscorm"), d = BugClub.ActivitySummaryUtils.getValidActivities(c, a);
        if (d.length)for (var e = 0, f = d.length; f > e; e++)d[e].data.id && b.push(d[e].data.id);
        return b
    }

    function g(a) {
        for (var b = ActiveText.ExtensionUtils.getExtensionByKey(n, "bugclubscorm"), c = BugClub.ActivitySummaryUtils.getValidActivities(b, a), d = [], e = 0, f = c.length; f > e; e++)d.push(c[e].data.id);
        return h(d)
    }

    function h(a) {
        var b;
        if (a.length) {
            for (var c = 0, d = 0, f = a.length; f > d; d++)c += e(a[d]);
            b = c >= 2 * a.length ? BugClub.ActivitySummaryStates.COMPLETED : 0 === c ? BugClub.ActivitySummaryStates.INCOMPLETE : BugClub.ActivitySummaryStates.PROGRESS
        } else b = BugClub.ActivitySummaryStates.NONE;
        return b
    }

    function i(a, c) {
        var d;
        d = c && c.items ? c.items : c;
        var e, f, g;
        for (var i in d)f = d[i], g = j(i), e = h(o[g].activityIds), b(g, e, o[g].activityIds)
    }

    function j(a) {
        for (var b = 0, c = m(), d = 0, e = c.length; e > d; d++)for (var f = 0, g = c[d].activityIds.length; g > f; f++)if (c[d].activityIds[f] === a) {
            b = d;
            break
        }
        return b
    }

    function k() {
        for (var a = [], b = n.data.getFlatListOfNavigation().length, c = 0; b > c; c++)a.push({status: BugClub.ActivitySummaryStates.NONE, activityIds: []});
        return a
    }

    function l() {
        o = k(), $(p).trigger(q, o)
    }

    function m() {
        return o && 0 !== o.length || l(), o
    }

    var n, o, p, q = "change";
    return{init: a, fetchData: l, getData: m, key: "bugclubactivitysummary"}
}, BugClub.ActivitySummaryIndividual = function () {
    "use strict";
    function a(a) {
        g = a, i = this, $(g).off(ActiveText.Events.LOADED_OVERLAY_DATA, c).on(ActiveText.Events.LOADED_OVERLAY_DATA, c), $(g).off(ActiveText.SCORMIntegration.SCORM_DATA_UPDATED, d).on(ActiveText.SCORMIntegration.SCORM_DATA_UPDATED, d)
    }

    function b(a, b) {
        var c = f();
        c[a] = {status: b};
        var d = {activityId: a, status: b};
        $(i).trigger(j, d)
    }

    function c(a, c) {
        var d, f, h, i = ActiveText.ExtensionUtils.getExtensionByKey(g, "bugclubscorm"), j = BugClub.ActivitySummaryUtils.getValidActivities(i, c.data);
        for (d in j)h = j[d].data.id, h || (h = c.index + d, debug.warn("Activity Id is missing for hotspot on page " + c.index + ": Using an autogenerated one instead.")), f = i.getSCORMStateForKey(h), f ? b(h, e(f)) : b(h, BugClub.ActivitySummaryStates.INCOMPLETE)
    }

    function d(a, c) {
        var d, f;
        d = c && c.items ? c.items : c;
        for (f in d)b(f, e(d[f]))
    }

    function e(a) {
        var b = BugClub.ActivitySummaryStates.INCOMPLETE;
        return a && void 0 !== a.completion_status && ("incomplete" === a.completion_status ? b = BugClub.ActivitySummaryStates.PROGRESS : "completed" === a.completion_status && (b = BugClub.ActivitySummaryStates.COMPLETED)), b
    }

    function f() {
        return h && 0 !== h.length || (h = {}), h
    }

    var g, h, i, j = "change";
    return{init: a, getData: f}
}, ActiveText.namespace("BugClub.ActivitySummaryUtils"), BugClub.ActivitySummaryUtils = function (a) {
    "use strict";
    function b(b, c) {
        for (var d = [], e = 0, f = c.length; f > e; e++) {
            var g = c[e];
            if ("hotspot" === g.type) {
                if (g.data && g.data.uri) {
                    var h = a.DataUtils.parseURI(g.data.uri);
                    for (var i in h)g.data[i] = h[i]
                }
                d.push(g), b.setActivityById(g.data.seqid ? g.data.seqid : g.data.id, g)
            }
        }
        return d
    }

    return{getValidActivities: b}
}(ActiveText), ActiveText.namespace("BugClub.ActivitySummaryStates"), BugClub.ActivitySummaryStates = {NONE: "none", INCOMPLETE: "incomplete", PROGRESS: "progress", COMPLETED: "completed"}, ActiveText.namespace("BugClub.SummaryScreen"), BugClub.SummaryScreen = function (a) {
    "use strict";
    function b(b) {
        i = b, ActiveText.CSSUtils.embedCSS(BugClub.DialogStyleText.getStyle(i), "bugclub-dialog-styles"), ActiveText.CSSUtils.embedCSS(BugClub.SummaryScreen.DialogStyleText.getStyle(i), "bugclub-summary-screen-styles"), k = [], BugClub.SummaryScreenIconFactory.preloadIconImages(i, a), j = new BugClub.ActivitySummaryIndividual, j.init(b), $(j).on("change", c), $(i).on(ActiveText.Events.RESOURCES_LOADED, d)
    }

    function c(a, b) {
        b && b.activityId && (k[b.activityId] = BugClub.SummaryScreenIconFactory.getIconHTMLForStatus(i, b.status)), g()
    }

    function d() {
        var a = ActiveText.ExtensionUtils.getExtensionByKey(i, "overlaydataloader");
        if (a)for (var b = 0, c = i.data.getFlatListOfNavigation().length; c > b; b++)a.loadDataForPageIndex(b)
    }

    function e() {
        if ($(".exit").blur(), l)l.open(); else {
            h();
            var b, c = i.options.containerElement, e = ActiveText.ExtensionUtils.getExtensionByKey(i, "pipwerks");
            e && (b = e.closeEBook), l = BugClub.SummaryScreenDialogFactory.createDialog(i, c, a, b), l.on({dialogcreate: g, dialogclose: f}), d()
        }
        return!1
    }

    function f() {
        l = null
    }

    function g() {
        var a = !1;
        if (l) {
            var b = "";
            for (var c in k)b += k[c];
            var d = l.find(".summary-icons");
            d.html(b);
            var e = d.find(".icon"), f = d.width(), g = e.width(), h = e.length;
            e.css({margin: "15px " + Math.floor((f - h * g) / h) / 2 + "px"}), a = !0
        }
        return a
    }

    function h() {
        var a = !1;
        return l && (l.dialog("close"), a = !0), a
    }

    var i, j, k, l;
    return{init: b, openSummary: e, closeSummary: h, key: "summaryscreen"}
}, ActiveText.namespace("BugClub.SummaryScreenDialogFactory"), BugClub.SummaryScreenDialogFactory = function (a) {
    "use strict";
    function b(b, e, f, g) {
        function h() {
            $(x).parent().css({top: (e.height() - r) / 2, left: (e.width() - q) / 2})
        }

        function i() {
            $(this).dialog("destroy")
        }

        function j() {
            setTimeout(h, 0), $(x).focus(), $(b).on(a.Events.RESIZE, h)
        }

        function k() {
            return $(b).off(a.Events.RESIZE, h), $(x).dialog("close"), !1
        }

        function l() {
            return $(x).dialog("close"), g && "function" == typeof g && g(), !1
        }

        var m = a.UI.BasicControls.SimpleButtonFactory, n = a.SkinUtils.getPathToResources(b), o = {title: "Keep reading", tooltips: !1}, p = {title: "Close book", tooltips: !1}, q = d, r = c, s = n + "img/bugclub/", t = "png";
        Modernizr.svg && (t = "svg"), o.style = {width: 204, height: 50}, o.imageSrc = s + "keepreading." + t, o.hoverImageSrc = s + "keepreading-over." + t, o.downImageSrc = s + "keepreading-over." + t, p.style = {width: 204, height: 50}, p.imageSrc = s + "closebook." + t, p.hoverImageSrc = s + "closebook-over." + t, p.downImageSrc = s + "closebook-over." + t;
        var u = m.createSimpleButton(o).click(k);
        u.attr("tabindex", 100);
        var v = m.createSimpleButton(p).click(l);
        v.attr("tabindex", 100);
        var w = $('<div class="content"><div class="summary-icons"></div><div class="buttons"></div></div>');
        w.find(".buttons").append(u, v);
        var x = w.dialog({width: q, height: r, modal: !0, appendTo: e, dialogClass: "summary-screenSVG " + f, resizable: !1, close: i, create: j});
        return h(), x
    }

    var c = 280, d = 540;
    return{createDialog: b}
}(ActiveText), ActiveText.namespace("BugClub.SummaryScreenIconFactory"), BugClub.SummaryScreenIconFactory = function (a) {
    "use strict";
    function b(b) {
        function c(a) {
            var b;
            for (b in a)$("<img/>")[0].src = a[b]
        }

        var d = a.SkinUtils.getPathToResources(b) + "img/bugclub/legacy/ks2/";
        c([d + "KS2_ActivityToggle_Green_face_yellow_1.png", d + "KS2_ActivityToggle_yellow_2.png", d + "KS2_ActivityToggle_yellow_1.png"])
    }

    function c(b, c) {
        var d = "", e = a.SkinUtils.getPathToResources(b) + "img/bugclub/legacy/ks2/";
        return"completed" === c ? d = '<img class="icon" src="' + e + 'KS2_ActivityToggle_Green_face_yellow_1.png" width="35" height="36" />' : "progress" === c ? d = '<img class="icon" src="' + e + 'KS2_ActivityToggle_yellow_2.png" width="35" height="37" />' : "incomplete" === c && (d = '<img class="icon" src="' + e + 'KS2_ActivityToggle_yellow_1.png" width="35" height="37" />'), d
    }

    return{preloadIconImages: b, getIconHTMLForStatus: c}
}(ActiveText);
var BugClub = BugClub || {};
BugClub.Hotspots = function (a, b) {
    "use strict";
    function c(c) {
        function d() {
            $(c.options.containerElement).off("remove", d), e.teardown()
        }

        c.options.keyStage = a;
        var e = new ActiveText.Hotspots.Controller(c, BugClub.Hotspots.Factory.createResourceIcon, c.options);
        e.init(), BugClub.Hotspots.SCORMController(b, a, c);
        var f = ".bugclub_icon div{background:none !important;cursor:pointer !important;}";
        ActiveText.CSSUtils.embedCSS(BugClub.DialogStyleText.getStyle(c) + f, "bugclub-hotspots"), c.options && c.options.containerElement && $(c.options.containerElement).on("remove", d)
    }

    return{init: c, keyStage: a, key: "bugclubhotspots"}
}, ActiveText.namespace("BugClub.Hotspots.SCORMController"), BugClub.Hotspots.SCORMController = function (a, b, c) {
    "use strict";
    function d(a) {
        var b = ActiveText.DataUtils.parseURI(a), c = a;
        return b.id && (c = b.id), b.seqid && (c = b.seqid), c
    }

    function e() {
        var a = ActiveText.ExtensionUtils.getExtensionByKey(c, "bugclubscorm");
        a && ($(c).on(ActiveText.SCORMIntegration.SCORM_DATA_UPDATED, f), $(c).on("activetext.hotspot.created", function (b, c) {
            var e = d(c.uri);
            a.setIconForKey(e, c.hotspot), i(c.hotspot, e)
        }))
    }

    function f(a, b) {
        function d() {
            var a;
            for (var b in e)a = f.getHotspotWithId(b), a ? i(a, b) : debug.log("Error: Unable to find hotspot with Id of", b)
        }

        var e, f = ActiveText.ExtensionUtils.getExtensionByKey(c, "bugclubscorm");
        e = b.items ? b.items : b, d(), setTimeout(d, 0)
    }

    function g(a, b) {
        var c = b, d = a.split("-")[1];
        return d && (c = d), c
    }

    function h(a) {
        var b = 0, d = ActiveText.ExtensionUtils.getExtensionByKey(c, "bugclubscorm"), e = d.getSCORMStateForKey(a);
        return e && void 0 !== e.completion_status && ("incomplete" === e.completion_status ? b = 1 : "completed" === e.completion_status && (b = 2)), b
    }

    function i(a, d) {
        var e, f = ActiveText.SkinUtils.getPathToResources(c), i = h(d), j = a.data() && a.data().data && a.data().data.icon ? a.data().data.icon : "", k = "ks2" === g(j, b);
        if (k ? (e = [f + "img/bugclub/legacy/ks2/hotspots/state-2.png", f + "img/bugclub/legacy/ks2/hotspots/state-1.png", f + "img/bugclub/legacy/ks2/hotspots/state-0.png"], $(a).attr("src", e[i])) : (e = [f + "img/bugclub/legacy/ks1/hotspots/state-2.png", f + "img/bugclub/legacy/ks1/hotspots/state-1.png", f + "img/bugclub/legacy/ks1/hotspots/state-0.png"], $(a).attr("src", e[i])), $.browser.msie && !Modernizr.svg) {
            var l = $(a), m = l.attr("src");
            l.attr("src", "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7").css("filter", "progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled='true',sizingMethod='crop',src='" + m + "')")
        }
        $(a).removeClass("complete,progress,incomplete"), $(a).addClass(2 === i ? "complete" : 1 === i ? "progress" : "incomplete")
    }

    return e(), {}
}, ActiveText.namespace("BugClub.Hotspots.Factory"), BugClub.Hotspots.Factory = function () {
    "use strict";
    function a(a) {
        var b = ActiveText.DataUtils.parseURI(a), c = a;
        return b.id && (c = b.id), b.seqid && (c = b.seqid), c
    }

    function b(a, b) {
        var c = b, d = a.split("-")[1];
        return d && (c = d), c
    }

    function c(c, d, e, f) {
        var g = b(d.data.icon, f.keyStage), h = d.data.icon;
        d.data.id = a(d.data.uri);
        var i, j = d.data.id, k = d.data.point[0], l = d.data.point[1], m = ActiveText.SkinUtils.getPathToResources(c), n = "";
        i = "ks2" === g ? 60 : 118, n = "ks2" === g ? "<img class='bugclub_icon noSwipe' src='" + m + "img/bugclub/legacy/ks2/hotspots/state-2.png' width='" + i + "' height='" + i + "' />" : "<img class='bugclub_icon noSwipe' src='" + m + "img/bugclub/legacy/ks1/hotspots/state-2.png' width='" + i + "' height='" + i + "' />";
        var o = ActiveText.Hotspots.Helper.getHotspotPositioningStyles({data: {point: [k, l]}}, i, e), p = $(n).attr("data-resource-id", j).attr("data-type", h).css(o);
        return p.data(d), p
    }

    return{createResourceIcon: c}
}(), ActiveText.namespace("BugClub.SCORM.ActivityData"), BugClub.SCORM.ActivityData = function () {
    "use strict";
    function a() {
        m = {}, o = {}
    }

    function b(a) {
        c(a), $(a).on(ActiveText.Events.LOADED_OVERLAY_DATA, h), $(a).on(ActiveText.SCORMIntegration.SCORM_DATA_UPDATED, d)
    }

    function c(a) {
        $(a).off(ActiveText.Events.LOADED_OVERLAY_DATA, h), $(a).off(ActiveText.SCORMIntegration.SCORM_DATA_UPDATED, d)
    }

    function d(a, b) {
        var c;
        c = b.items ? b.items : b;
        for (var d in c)k(d, c[d])
    }

    function e(a) {
        for (var b, c = [], d = 0, e = a.data.length; e > d; d++) {
            var f = a.data[d];
            "hotspot" === f.type && c.push(f)
        }
        return b = $(c)
    }

    function f(a) {
        return n[a.toString()]
    }

    function g(a, b) {
        n || (n = {}), a && "" !== a && (n[a.toString()] = b)
    }

    function h(a, b) {
        var c = e(b);
        $(p).trigger(BugClub.SCORM.ActivityData.PARSED_DATA, {index: b.index, data: c})
    }

    function i(a) {
        return m[a]
    }

    function j(a, b) {
        m[a] = b
    }

    function k(a, b) {
        o[a] = b
    }

    function l(a) {
        return o[a]
    }

    var m, n, o;
    a();
    var p = {init: b, deregister: c, parseOverlayData: h, getHotspotWithId: i, setIconForKey: j, cacheSCORMStateForKey: k, getSCORMStateForKey: l, getActivityById: f, setActivityById: g, key: "bugclubscorm"};
    return p
}, ActiveText.namespace("BugClub.SCORM.ActivityData.PARSED_DATA"), BugClub.SCORM.ActivityData.PARSED_DATA = "bugclub.parsedData", ActiveText.namespace("BugClub.DialogStyleText"), BugClub.DialogStyleText = function (a) {
    "use strict";
    function b(b) {
        var c = a.SkinUtils.getPathToResources(b);
        return".ui-helper-hidden{display:none}.ui-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.ui-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.ui-helper-clearfix:before,.ui-helper-clearfix:after{content:'';display:table;border-collapse:collapse}.ui-helper-clearfix:after{clear:both}.ui-helper-clearfix{min-height:0}.ui-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.ui-front{z-index:1000}.ui-state-disabled{cursor:default!important}.ui-icon{display:block;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.ui-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.ui-resizable{position:relative}.ui-resizable-handle{position:absolute;font-size:.1px;display:block}.ui-resizable-disabled .ui-resizable-handle,.ui-resizable-autohide .ui-resizable-handle{display:none}.ui-resizable-n{cursor:n-resize;height:7px;width:100%;top:-5px;left:0}.ui-resizable-s{cursor:s-resize;height:7px;width:100%;bottom:-5px;left:0}.ui-resizable-e{cursor:e-resize;width:7px;right:-5px;top:0;height:100%}.ui-resizable-w{cursor:w-resize;width:7px;left:-5px;top:0;height:100%}.ui-resizable-se{cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.ui-resizable-sw{cursor:sw-resize;width:9px;height:9px;left:-5px;bottom:-5px}.ui-resizable-nw{cursor:nw-resize;width:9px;height:9px;left:-5px;top:-5px}.ui-resizable-ne{cursor:ne-resize;width:9px;height:9px;right:-5px;top:-5px}.ui-button{display:inline-block;position:relative;padding:0;line-height:normal;margin-right:.1em;cursor:pointer;vertical-align:middle;text-align:center;overflow:visible}.ui-button,.ui-button:link,.ui-button:visited,.ui-button:hover,.ui-button:active{text-decoration:none}.ui-button-icon-only{width:2.2em}button.ui-button-icon-only{width:2.4em}.ui-button-icons-only{width:3.4em}button.ui-button-icons-only{width:3.7em}.ui-button .ui-button-text{display:block;line-height:normal}.ui-button-text-only .ui-button-text{padding:.1em .2em}.ui-button-icon-only .ui-button-text,.ui-button-icons-only .ui-button-text{padding:.4em;text-indent:-9999999px}.ui-button-text-icon-primary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 1em .4em 2.1em}.ui-button-text-icon-secondary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 2.1em .4em 1em}.ui-button-text-icons .ui-button-text{padding-left:2.1em;padding-right:2.1em}input.ui-button{padding:.4em 1em}.ui-button-icon-only .ui-icon,.ui-button-text-icon-primary .ui-icon,.ui-button-text-icon-secondary .ui-icon,.ui-button-text-icons .ui-icon,.ui-button-icons-only .ui-icon{position:absolute;top:50%;margin-top:-8px}.ui-button-icon-only .ui-icon{left:50%;margin-left:-8px}.ui-button-text-icon-primary .ui-button-icon-primary,.ui-button-text-icons .ui-button-icon-primary,.ui-button-icons-only .ui-button-icon-primary{left:.5em}.ui-button-text-icon-secondary .ui-button-icon-secondary,.ui-button-text-icons .ui-button-icon-secondary,.ui-button-icons-only .ui-button-icon-secondary{right:.5em}.ui-buttonset{margin-right:7px}.ui-buttonset .ui-button{margin-left:0;margin-right:-.3em}input.ui-button::-moz-focus-inner,button.ui-button::-moz-focus-inner{border:0;padding:0}.ui-dialog{position:absolute;top:0;left:0;padding:0em;outline:0;-moz-box-shadow: 0 4px 8px rgba(0,0,0,0.5);-webkit-box-shadow: 0 4px 8px rgba(0,0,0,0.5);box-shadow: 0 4px 8px rgba(0,0,0,0.5);}.ui-dialog .ui-dialog-titlebar{padding:0 .2em;position:relative}.ui-dialog .ui-dialog-title{float:left;margin:.1em 0;white-space:nowrap;width:90%;overflow:hidden;text-overflow:ellipsis}.ui-dialog .ui-dialog-titlebar-close{position:absolute;right:.3em;top:50%;width:21px;margin:-10px 0 0 0;padding:1px;height:20px}.ui-dialog .ui-dialog-content{position:relative;border:0;padding:.5em;background:0;overflow:auto}.ui-dialog .ui-dialog-buttonpane{text-align:left;border-width:1px 0 0;background-image:none;margin-top:.5em;padding:.3em 1em .5em .4em}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset{float:right}.ui-dialog .ui-dialog-buttonpane button{margin:.5em .4em .5em 0;cursor:pointer}.ui-dialog .ui-resizable-se{width:12px;height:12px;right:-5px;bottom:-5px;background-position:16px 16px}.ui-draggable .ui-dialog-titlebar{cursor:move}.ui-widget .ui-widget{font-size:1em}.ui-widget input,.ui-widget select,.ui-widget textarea,.ui-widget button{font-family:Helvetica,Arial,sans-serif;font-size:1em}.ui-widget-content{border:1px solid #5693af;background:#649393;color:#222}.ui-widget-content .content{background:#fff;padding:.5em;}.ui-widget-content a{color:#222}.ui-widget-header{background:#649393 url(" + c + "img/bugclub/dialog/ui-bg_flat_0_649393_40x100.png) 50% 50% repeat-x;color:#fff;font-weight:bold}.ui-widget-header a{color:#fff}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default{border:1px solid #5693af;background:#c8eafc url(" + c + "img/bugclub/dialog/ui-bg_glass_100_c8eafc_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#000}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited{color:#000;text-decoration:none}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus{border:1px solid #5693af;background:#a9e0fa url(" + c + "img/bugclub/dialog/ui-bg_glass_100_a9e0fa_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#000}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited{color:#000;text-decoration:none}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active{border:1px solid #5693af;background:#ffc70b url(" + c + "img/bugclub/dialog/ui-bg_glass_100_ffc70b_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#000}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:#000;text-decoration:none}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid #f47721;background:#ffc70b url(" + c + "img/bugclub/dialog/ui-bg_glass_100_ffc70b_1x400.png) 50% 50% repeat-x;color:#000}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:#000}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:1px solid #cd0a0a;background:#fef1ec url(" + c + "img/bugclub/dialog/ui-bg_glass_95_fef1ec_1x400.png) 50% 50% repeat-x;color:#cd0a0a}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#cd0a0a}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#cd0a0a}.ui-priority-primary,.ui-widget-content .ui-priority-primary,.ui-widget-header .ui-priority-primary{font-weight:bold}.ui-priority-secondary,.ui-widget-content .ui-priority-secondary,.ui-widget-header .ui-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.ui-state-disabled,.ui-widget-content .ui-state-disabled,.ui-widget-header .ui-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.ui-state-disabled .ui-icon{filter:Alpha(Opacity=35)}.ui-icon{width:16px;height:16px}.ui-icon,.ui-widget-content .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_ffffff_256x240.png)}.ui-widget-header .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_91d0d0_256x240.png)}.ui-state-default .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_000000_256x240.png)}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_000000_256x240.png)}.ui-state-active .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_000000_256x240.png)}.ui-state-highlight .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_000000_256x240.png)}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_cd0a0a_256x240.png)}.ui-dialog .ui-dialog-titlebar-close {background:transparent !important;outline:none;width:26px;height:26px;margin-top:4px;margin-right:1px;top:0;}.ui-dialog .ui-dialog-titlebar-close.ui-button-icon-only .ui-icon {top:0;left:0;margin:0;padding:0;}.ui-icon-closethick {display:none;}.ui-dialog .ui-dialog-titlebar-close{width:26px;height:26px;background-size:contain;background:transparent url(" + c + "img/bugclub/closesmall.svg) top left no-repeat !important;border:none;margin:-10px;}.ui-dialog .ui-dialog-titlebar-close.ui-state-hover {background:transparent url(" + c + "img/bugclub/closesmall-over.svg) top left no-repeat !important;border:none;}.ui-icon-grip-dotted-vertical{background-position:0 -224px}.ui-icon-grip-dotted-horizontal{background-position:-16px -224px}.ui-icon-grip-solid-vertical{background-position:-32px -224px}.ui-icon-grip-solid-horizontal{background-position:-48px -224px}.ui-icon-gripsmall-diagonal-se{background-position:-64px -224px}.ui-icon-grip-diagonal-se{background-position:-80px -224px}.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{border-top-left-radius:6px}.ui-corner-all,.ui-corner-top,.ui-corner-right,.ui-corner-tr{border-top-right-radius:6px}.ui-corner-all,.ui-corner-bottom,.ui-corner-left,.ui-corner-bl{border-bottom-left-radius:6px}.ui-corner-all,.ui-corner-bottom,.ui-corner-right,.ui-corner-br{border-bottom-right-radius:6px}.ui-widget-overlay{background:#000 url(" + c + "img/bugclub/dialog/ui-bg_flat_50_000000_40x100.png) 50% 50% repeat-x;opacity:.3;filter:Alpha(Opacity=30)}.ui-widget-shadow{margin:-8px 0 0 -8px;padding:8px;background:#000 url(" + c + "img/bugclub/dialog/ui-bg_flat_50_000000_40x100.png) 50% 50% repeat-x;opacity:.25;filter:Alpha(Opacity=25);border-radius:8px}input[type=text]::-ms-clear{display:none;width:0;height:0}"
    }

    return{getStyle: b}
}(ActiveText), BugClub.SummaryScreen = BugClub.SummaryScreen || {}, BugClub.SummaryScreen.DialogStyleText = function (a) {
    "use strict";
    function b(b) {
        var c = a.SkinUtils.getPathToResources(b), d = "png";
        return Modernizr.svg && (d = "svg"), ".ui-widget-content.summary-screenSVG{background:url(" + c + "img/bugclub/popup1." + d + ") top left no-repeat transparent;z-index:2010;border:none;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;}.ui-widget-content.summary-screenSVG .content,.ui-widget-content.summary-screenSVG .ui-dialog-titlebar{background:transparent !important}.ui-widget-content.summary-screenSVG .buttons{margin-top:75px;}.ui-widget-content.summary-screenSVG .button{margin:26px 26px 0;}.ui-dialog,.ui-dialog *{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;}"
    }

    return{getStyle: b}
}(ActiveText), BugClub.StudentControlsKS1 = function (a) {
    "use strict";
    a || (a = {});
    var b = a.leftButtons ? a.leftButtons : "zoom", c = a.primary ? a.primary : "previous,readtome,next", d = a.rightButtons ? a.rightButtons : "exit";
    return a.leftButtons = b, a.primary = c, a.rightButtons = d, new BugClub.Controls(a)
}, BugClub.StudentControlsKS2 = function (a) {
    "use strict";
    a || (a = {});
    var b = a.leftButtons ? a.leftButtons : "zoom,viewtoggle", c = a.primary ? a.primary : "", d = a.rightButtons ? a.rightButtons : "activitystructure,previous,quicknav,next,exit";
    return a.leftButtons = b, a.primary = c, a.rightButtons = d, new BugClub.Controls(a)
}, BugClub.TeacherControlsKS1 = function (a) {
    "use strict";
    a || (a = {});
    var b = a.leftButtons ? a.leftButtons : "zoom,drawing,bugclubhotspots", c = a.primaryButtons ? a.primaryButtons : "previous,readtome,next", d = a.rightButtons ? a.rightButtons : "quicknav,exit";
    return a.leftButtons = b, a.primary = c, a.rightButtons = d, new BugClub.Controls(a)
}, BugClub.TeacherControlsKS2 = function (a) {
    "use strict";
    a || (a = {});
    var b = a.leftButtons ? a.leftButtons : "zoom,viewtoggle,drawing,bugclubhotspots", c = a.primary ? a.primary : "", d = a.rightButtons ? a.rightButtons : "activitystructure,previous,quicknav,next,exit";
    return a.leftButtons = b, a.primary = c, a.rightButtons = d, new BugClub.Controls(a)
}, ActiveText.namespace("BugClub.Controls"), BugClub.Controls = function (a) {
    "use strict";
    function b(b) {
        var c, d = ActiveText.ExtensionUtils.getExtensionByKey(b, "summaryscreen");
        d && (c = d.openSummary), a || (a = {});
        var e = a.leftButtons, f = a.primary, g = a.rightButtons;
        b.options.allowReadToMe === !1 && (e = _.without(e.split(","), "readtome", "readtomeExtended").toString(), void 0 !== f && (a.primary = _.without(a.primary.split(","), "readtome", "readtomeExtended").toString()), g = _.without(g.split(","), "readtome", "readtomeExtended").toString()), a.leftButtons = e, void 0 !== f && (a.primary = f), a.rightButtons = g;
        var h = ActiveText.SkinUtils.getPathToResources(b), i = ActiveText.SkinUtils.getPathToGlobalResource(), j = '@font-face{font-family:"heinemann-special";src:url("' + i + 'font/1cf6f702b2f7c3f363d7a7475b771ad2519c7ae2.eot");src:url("' + i + '/font/1cf6f702b2f7c3f363d7a7475b771ad2519c7ae2.eot?#iefix") format("embedded-opentype"),url("' + i + 'font/8780f55bdc4d11d74eb8c065b895b242730874ca.woff") format("woff");font-weight: bold;font-style: italic;}@font-face{font-family:"heinemann-special";src:url("' + i + 'font/be8783ef363b706a9d4e4a04dba99df31523ac38.eot");src:url("' + i + '/font/be8783ef363b706a9d4e4a04dba99df31523ac38.eot?#iefix") format("embedded-opentype"),url("' + i + 'font/74727931f38ae3d96fb103fa3e9f2ab609c07e0e.woff") format("woff");font-weight: normal;font-style: normal;}@font-face{font-family:"heinemann-special";src:url("' + i + 'font/a14bed103c175e7e5f080c8f2912687e34e02218.eot");src:url("' + i + '/font/a14bed103c175e7e5f080c8f2912687e34e02218.eot?#iefix") format("embedded-opentype"),url("' + i + 'font/e916834581bf5571da0e6c64ada6d4a578caa1ac.woff") format("woff");font-weight: normal;font-style: italic;}@font-face{font-family:"heinemann-special";src:url("' + i + 'font/d503710c5cb5a0c4ba67fcd57b8113bd9e6436cf.eot");src:url("' + i + '/font/d503710c5cb5a0c4ba67fcd57b8113bd9e6436cf.eot?#iefix") format("embedded-opentype"),url("' + i + 'font/f353d99d6d18eef861d08c4ccf61476a7e9996e3.woff") format("woff");font-weight: bold;font-style: normal;}.quicknav input{font-family:"heinemann-special";font-weight:normal;border: 3px solid #fff;background: #e6e6e6;background: -moz-linear-gradient(top, #e6e6e6 0%, #ffffff 100%);background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#e6e6e6), color-stop(100%,#ffffff));background: -webkit-linear-gradient(top, #e6e6e6 0%,#ffffff 100%);background: -o-linear-gradient(top, #e6e6e6 0%,#ffffff 100%);background: -ms-linear-gradient(top, #e6e6e6 0%,#ffffff 100%);background: linear-gradient(to bottom, #e6e6e6 0%,#ffffff 100%);' + ($.browser.msie && 9 === $.browser.version ? "" : "background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAxIDEiIHByZXNlcnZlQXNwZWN0UmF0aW89Im5vbmUiPgo8bGluZWFyR3JhZGllbnQgaWQ9Imc1MjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiB4MT0iMCUiIHkxPSIwJSIgeDI9IjAlIiB5Mj0iMTAwJSI+CjxzdG9wIHN0b3AtY29sb3I9IiNFNkU2RTYiIG9mZnNldD0iMCIvPjxzdG9wIHN0b3AtY29sb3I9IiNGRkZGRkYiIG9mZnNldD0iMC45Ii8+CjwvbGluZWFyR3JhZGllbnQ+CjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSIxIiBoZWlnaHQ9IjEiIGZpbGw9InVybCgjZzUyMSkiIC8+Cjwvc3ZnPg==);") + "font-size: 18px;}";
        ActiveText.CSSUtils.embedCSS(j, "bugclub-skin-styles");
        var k = h + "img/bugclub/", l = ".png";
        Modernizr.svg && (l = ".svg");
        var m = new ActiveText.UI.BasicControls(b, {primary: f, leftButtons: e, rightButtons: g, leftButtonOptions: {left: "10px"}, rightButtonOptions: {right: "10px"}, openByDefault: !0, overlay: !1, barHeight: 66, barStyles: {backgroundColor: "#9BCA3B", height: 66, fontSize: "18px"}, minWidth: 800, scaleMode: "scale", buttonStyles: {width: 50, height: 50, background: "transparent"}, hoverStyles: {background: "transparent"}, options: {readtomeExtended: {readtome: {style: {width: 186, height: 50}, imageSrc: k + "large-readtome" + l, hoverImageSrc: k + "large-readtome-over" + l, downImageSrc: k + "large-readtome-over" + l, disabledImageSrc: k + "large-readtome-disabled" + l, toggleButtonImageSrc: k + "large-readtome-active" + l, toggleButtonHoverImageSrc: k + "large-readtome-over" + l, enableBehaviour: "show"}, done: {style: {width: 104, height: 50}, imageSrc: k + "done-inactive" + l, hoverImageSrc: k + "done-inactive" + l, downImageSrc: k + "done-inactive" + l, toggleButtonImageSrc: k + "done" + l, toggleButtonHoverImageSrc: k + "done-over" + l, enableBehaviour: "show"}}, readtome: {style: {width: 186, height: 50}, imageSrc: k + "large-readtome" + l, hoverImageSrc: k + "large-readtome-over" + l, downImageSrc: k + "large-readtome-over" + l, disabledImageSrc: k + "large-readtome-disabled" + l, toggleButtonImageSrc: k + "large-readtome-active" + l, toggleButtonHoverImageSrc: k + "large-readtome-over" + l, enableBehaviour: "show"}, zoom: {imageSrc: k + "zoomout-active" + l, hoverImageSrc: k + "zoomout-over" + l, downImageSrc: k + "zoomout-over" + l, toggleButtonImageSrc: k + "zoomin" + l, toggleButtonDownImageSrc: k + "zoomin-over" + l, toggleButtonHoverImageSrc: k + "zoomin-over" + l}, bugclubhotspots: {imageSrc: k + "activitytoggle-disabled" + l, hoverImageSrc: k + "activitytoggle-disabled" + l, downImageSrc: k + "activitytoggle-disabled" + l, disabledImageSrc: k + "activitytoggle" + l, toggleButtonImageSrc: k + "activitytoggle" + l, toggleButtonHoverImageSrc: k + "activitytoggle-over" + l, enableBehaviour: "show"}, viewtoggle: {imageSrc: k + "dps" + l, hoverImageSrc: k + "dps-over" + l, downImageSrc: k + "dps-over" + l, toggleButtonImageSrc: k + "sps" + l, toggleButtonHoverImageSrc: k + "sps-over" + l, toggleButtonDownImageSrc: k + "sps-over" + l}, previous: {style: {width: 96, height: 50}, imageSrc: k + "back" + l, hoverImageSrc: k + "back-over" + l, downImageSrc: k + "back-over" + l, disabledImageSrc: k + "back-disabled" + l, enableBehaviour: "show"}, next: {style: {width: 96, height: 50}, imageSrc: k + "next" + l, hoverImageSrc: k + "next-over" + l, downImageSrc: k + "next-over" + l, disabledImageSrc: k + "next-disabled" + l, enableBehaviour: "show"}, drawing: {imageSrc: k + "drawing" + l, hoverImageSrc: k + "drawing-over" + l, downImageSrc: k + "drawing-over" + l, toggleButtonImageSrc: k + "drawing-active" + l, toggleButtonHoverImageSrc: k + "drawing-over" + l, toggleButtonDownImageSrc: k + "drawing-active" + l}, activitystructure: {style: {width: 122, height: 50}, imageSrc: k + "content" + l, hoverImageSrc: k + "content-over" + l, downImageSrc: k + "content-over" + l, toggleButtonImageSrc: k + "content-active" + l, toggleButtonHoverImageSrc: k + "content-over" + l, toggleButtonDownImageSrc: k + "content-over" + l}, quicknav: {style: {border: "", background: "", width: "auto", padding: "13px"}, popupnavwidth: 293, textFormatSinglePage: "%%1 of %%2", textFormatMultiPage: "%%1/%%2 of %%3"}, exit: {style: {width: 50, height: 50}, imageSrc: k + "close" + l, hoverImageSrc: k + "close-over" + l, downImageSrc: k + "close-over" + l, closeFunction: c}}});
        b.extensions.push(m)
    }

    return{init: b}
}, ActiveText.SCORM = ActiveText.SCORM || {}, ActiveText.SCORM.Pipwerks = function () {
    "use strict";
    function a(a) {
        i = a, b()
    }

    function b() {
        i && j && k && c()
    }

    function c() {
        if (!n) {
            var a = i.model.getCurrentPageNumber();
            if (j && j.savePageNumber)try {
                j.savePageNumber(a)
            } catch (b) {
                debug.log("Failed to save current page number:", b)
            }
            n = !0
        }
        o || (o = !0), $(i).on(ActiveText.Commands.GO_TO_PAGE, f);
        var c = ActiveText.ExtensionUtils.getExtensionByKey(i, "bugclubscorm");
        $(c).on(BugClub.SCORM.ActivityData.PARSED_DATA, d);
        var e = ActiveText.ExtensionUtils.getExtensionByKey(i, "overlaydataloader");
        if (e)for (var g = 0, h = i.data.getFlatListOfNavigation().length; h > g; g++)e.loadDataForPageIndex(g)
    }

    function d(a, b) {
        for (var c = {}, d = b.data, e = 0, f = d.length; f > e; e++)if (d[e].data.seqid) {
            var g = d[e].data.seqid, h = "cmi.objectives." + g + ".";
            c[g.toString()] = {completion_status: j.getScormValue(h + "completion_status"), progress_measure: j.getScormValue(h + "progress_measure"), score: {max: j.getScormValue(h + "score.max"), raw: j.getScormValue(h + "score.raw")}, success_status: j.getScormValue(h + "success_status")}
        }
        $(i).trigger(ActiveText.SCORMIntegration.SCORM_DATA_UPDATED, c)
    }

    function e(a) {
        k = a.ebookLauncher, j = k.scormClient, m || debug.log("ActiveText.SCORM.Pipwerks: SCORM interface is ready:", j, k), b()
    }

    function f(a, b) {
        j && j.savePageNumber && setTimeout(function () {
            try {
                j.savePageNumber(b.toPage)
            } catch (a) {
                debug.log("Failed to save current page number:", a)
            }
        }, 0)
    }

    function g(a) {
        k && "function" == typeof k.launchActivity ? k.launchActivity(a) : debug.debug("Unable to launch activity because ebookLauncher does not exist or ebookLauncher.launchActivity is not a function.", k)
    }

    function h() {
        k && "function" == typeof k.closeEbook ? k.closeEbook() : (window.open("", "_self", ""), window.close())
    }

    var i, j, k, l = navigator.userAgent, m = /phantom/i.test(l), n = !1, o = !1;
    return{init: a, key: "pipwerks", scormInterfaceReady: e, launchActivity: g, closeEBook: h}
};
var BugClubAus = BugClubAus || {};
BugClubAus.Player = function (a) {
    "use strict";
    function b(a, b, c) {
        var d, e = Boolean(ActiveText.ExtensionUtils.getExtensionByKey(a, b));
        if (!e)switch (b) {
            case"overlaydataloader":
                d = new ActiveText.OverlayData, d.init(a), a.extensions.push(d);
                break;
            case"bugclubhotspots":
                d = new BugClub.Hotspots(c), d.init(a), a.extensions.push(d);
                break;
            case"smildatamodel":
                d = new ActiveText.SMILDataModel, d.init(a), a.extensions.push(d);
                break;
            case"smildataloader":
                d = new ActiveText.SMILDataLoader, d.init(a), a.extensions.push(d);
                break;
            case"readtome":
                a.options.allowReadToMe !== !1 && (d = new ActiveText.ReadToMe, d.init(a), a.extensions.push(d));
                break;
            case"summaryscreen":
                d = new BugClubAus.SummaryScreen(c), d.init(a), a.extensions.push(d);
                break;
            case"soundeffects":
                d = new ActiveText.SoundEffects, d.init(a), a.extensions.push(d);
                break;
            case"keyboardintegration":
                d = new ActiveText.KeyboardIntegration, d.init(a), a.extensions.push(d);
                break;
            case"drawingtools":
                d = new ActiveText.DrawingTools, d.supported() && (d.init(a), a.extensions.push(d));
                break;
            case"readingcomplete":
                d = new ActiveText.ReadingComplete, d.init(a), a.extensions.push(d);
                break;
            case"bugclubactivitysummary":
                d = new BugClub.ActivitySummaryCollective, d.init(a), a.extensions.push(d);
                break;
            case"bugclubscorm":
                d = new BugClub.SCORM.ActivityData, d.init(a), a.extensions.push(d)
        }
    }

    function c(a) {
        function b(b) {
            var c = $(b.currentTarget).hasClass("complete");
            if (c)debug.log("Not launching activity because activity is completed."); else {
                var d = $(b.currentTarget).data(), e = d.data.uri, f = ActiveText.ExtensionUtils.getExtensionByKey(a, "pipwerks");
                f ? (debug.log("scormIntegrationExtension.launchActivity();", d), f.launchActivity(e)) : (debug.log("Launching Hotspot Activity : " + e), setTimeout(function () {
                    alert("Launching Hotspot Activity : " + e)
                }, 0))
            }
        }

        function c(b) {
            var c, d = ActiveText.ExtensionUtils.getExtensionByKey(a, "readtome");
            if (d) {
                var f = d.getState();
                e = f.shouldAutoPlay, void 0 === b ? c = f.shouldAutoPlay : f.shouldAutoPlay = Boolean(d.options && d.options.autoplay)
            }
            return c
        }

        ActiveText.BrowserUtils.isMobileDevice && (a.options.allowAnimation = !1);
        var d = ActiveText.SkinUtils.getPathToResources(a);
        a.options.containerElement.css(!Modernizr.svg || navigator.userAgent.match(/(msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i) ? {background: "url(" + d + "img/bugclub/backdrop.png) no-repeat center center", filter: 'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="' + d + 'img/bugclub/backdrop.png", sizingMethod="scale")', MsFilter: "'progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\"" + d + 'img/bugclub/backdrop.png", sizingMethod="scale")\'', backgroundSize: "cover"} : {background: "url(" + d + "img/bugclub/background.svg) no-repeat center center", backgroundSize: "cover"});
        var e;
        void 0 === a.options.allowOverlap && (a.options.allowOverlap = !1), void 0 === a.options.hotspotClickFunction && (a.options.hotspotClickFunction = b), void 0 === a.options.audioPlaybackController && (a.options.audioPlaybackController = c)
    }

    function d(d) {
        c(d);
        for (var e, f = ["overlaydataloader", "bugclubactivitysummary", "bugclubscorm", "bugclubhotspots", "smildatamodel", "smildataloader", "readtome", "summaryscreen", "soundeffects", "keyboardintegration", "drawingtools", "readingcomplete"], g = 0, h = f.length; h > g; g++)e = f[g], b(d, e, a);
        $(d).one(ActiveText.Commands.INIT_WHITEBOARD, function () {
            if (d.utils.isFullWindowScalingMode()) {
                var a = new ActiveText.ViewOrientationDetection;
                a.init(d), d.extensions.push(a)
            }
        })
    }

    return{init: d, key: "bugclubaus"}
}, ActiveText.namespace("BugClubAus.SummaryScreen"), BugClubAus.SummaryScreen = function (a) {
    "use strict";
    function b(b) {
        i = b, ActiveText.CSSUtils.embedCSS(BugClub.DialogStyleText.getStyle(i), "bugclubaus-dialog-styles"), ActiveText.CSSUtils.embedCSS(BugClubAus.SummaryScreen.DialogStyleText.getStyle(i), "bugclubaus-summary-screen-styles"), k = [], k[0] = "", BugClubAus.SummaryScreenIconFactory.preloadIconImages(i, a), j = new BugClub.ActivitySummaryIndividual, j.init(b), $(j).on("change", c), $(i).on(ActiveText.Events.RESOURCES_LOADED, d)
    }

    function c(b, c) {
        k[c.activityId] = BugClubAus.SummaryScreenIconFactory.getIconHTMLForStatus(i, c.status, a), g()
    }

    function d() {
        var a = ActiveText.ExtensionUtils.getExtensionByKey(i, "overlaydataloader");
        if (a)for (var b = 0, c = i.data.getFlatListOfNavigation().length; c > b; b++)a.loadDataForPageIndex(b)
    }

    function e() {
        if (l)l.open(); else {
            h();
            var b, c = i.options.containerElement, e = ActiveText.ExtensionUtils.getExtensionByKey(i, "pipwerks");
            e && (b = e.closeEBook), l = BugClubAus.SummaryScreenDialogFactory.createDialog(i, c, a, b), l.on({dialogcreate: g, dialogclose: f}), d()
        }
    }

    function f() {
        l = null
    }

    function g() {
        var a = !1;
        if (l) {
            var b = $(k.join("")), c = l.find(".summary-icons");
            c.html(b);
            var d = c.find(".icon"), e = c.width(), f = d.width(), g = d.length;
            d.css({margin: "15px " + Math.floor((e - g * f) / g) / 2 + "px"}), a = !0
        }
        return a
    }

    function h() {
        var a = !1;
        return l && (l.dialog("close"), a = !0), a
    }

    var i, j, k, l;
    return{init: b, openSummary: e, closeSummary: h, key: "summaryscreen"}
}, ActiveText.namespace("BugClubAus.SummaryScreenDialogFactory"), BugClubAus.SummaryScreenDialogFactory = function (a) {
    "use strict";
    function b(b, e, f, g) {
        function h() {
            $(y).parent().css({top: (e.height() - u) / 2, left: (e.width() - t) / 2})
        }

        function i() {
            $(this).dialog("destroy")
        }

        function j() {
            setTimeout(h, 0), $(b).on(a.Events.RESIZE, h)
        }

        function k() {
            $(b).off(a.Events.RESIZE, h), $(y).dialog("close"), $("body").find(".button.exit").blur()
        }

        function l() {
            $(y).dialog("close"), g && "function" == typeof g && g()
        }

        function m() {
            $(b).tooltip("hide"), $(".tooltip[role=tooltip]").remove()
        }

        var n, o = a.UI.BasicControls.SimpleButtonFactory, p = a.SkinUtils.getPathToResources(b), q = "", r = {title: "Keep reading"}, s = {title: "Close book"}, t = d, u = c;
        "ks1" === f ? (q = p + "img/bugclub/legacy/ks1/pupil/", n = "<img src='" + p + "img/bugclub/legacy/ks1/pupil/CloseBookDialog_image.png' width='106' height='118' />", r.style = {width: 260, height: 81}, r.imageSrc = q + "Button_keepReading_upSkin.png", r.hoverImageSrc = q + "Button_keepReading_overSkin.png", r.downImageSrc = q + "Button_keepReading_downSkin.png", s.style = {width: 260, height: 82}, s.imageSrc = q + "Button_closeBook_upSkin.png", s.hoverImageSrc = q + "Button_closeBook_overSkin.png", s.downImageSrc = q + "Button_closeBook_downSkin.png") : (q = p + "img/bugclub/legacy/ks2/", n = "<img src='" + p + "img/bugclub/legacy/ks2/bee.png' width='133' height='175' />", s.style = {width: 198, height: 49}, s.imageSrc = q + "KS2_Close_book_3.png", s.hoverImageSrc = q + "KS2_Close_book_1.png", s.downImageSrc = q + "KS2_Close_Book_2.png", r.style = {width: 198, height: 49}, r.imageSrc = q + "KS2_Keep_Reading_3.png", r.hoverImageSrc = q + "KS2_Keep_Reading_1.png", r.downImageSrc = q + "KS2_Keep_Reading_2.png");
        var v = o.createSimpleButton(r).click(k), w = o.createSimpleButton(s).click(l), x = $("<div class='content'><div class='summary-icons'></div><div class='bug'>" + n + "</div><div class='buttons'></div></div>");
        x.find(".buttons").append(v, w);
        var y = x.dialog({width: t, height: u, modal: !0, appendTo: e, dialogClass: "summary-screen " + f, resizable: !1, close: i, create: j, beforeClose: m});
        return h(), y
    }

    var c = 430, d = 730;
    return{createDialog: b}
}(ActiveText), ActiveText.namespace("BugClubAus.SummaryScreenIconFactory"), BugClubAus.SummaryScreenIconFactory = function (a) {
    "use strict";
    function b(b, c) {
        function d(a) {
            var b;
            for (b in a)$("<img/>")[0].src = a[b]
        }

        var e = a.SkinUtils.getPathToResources(b);
        d("ks1" === c ? [e + "img/bugclub/legacy/ks1/pupil/Canvas_bug.png", e + "img/bugclub/legacy/ks1/pupil/Canvas_bugOverlay.png"] : [e + "img/bugclub/legacy/ks2/KS2_ActivityToggle_Green_face_yellow_1.png", e + "img/bugclub/legacy/ks2/KS2_ActivityToggle_yellow_2.png", e + "img/bugclub/legacy/ks2/KS2_ActivityToggle_yellow_1.png"])
    }

    function c(b, c) {
        var d = "", e = a.SkinUtils.getPathToResources(b);
        return"completed" === c ? d = '<img class="icon" src="' + e + 'img/bugclub/legacy/ks2/KS2_ActivityToggle_Green_face_yellow_1.png" width="35" height="36" />' : "progress" === c ? d = '<img class="icon" src="' + e + 'img/bugclub/legacy/ks2/KS2_ActivityToggle_yellow_2.png" width="35" height="37" />' : "incomplete" === c && (d = '<img class="icon" src="' + e + 'img/bugclub/legacy/ks2/KS2_ActivityToggle_yellow_1.png" width="35" height="37" />'), d
    }

    return{preloadIconImages: b, getIconHTMLForStatus: c}
}(ActiveText), ActiveText.namespace("BugClubAus.DialogStyleText"), BugClubAus.DialogStyleText = function (a) {
    "use strict";
    function b(b) {
        var c = a.SkinUtils.getPathToResources(b);
        return'.ui-helper-hidden{display:none}.ui-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.ui-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.ui-helper-clearfix:before,.ui-helper-clearfix:after{content:"";display:table;border-collapse:collapse}.ui-helper-clearfix:after{clear:both}.ui-helper-clearfix{min-height:0}.ui-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.ui-front{z-index:1000}.ui-state-disabled{cursor:default!important}.ui-icon{display:block;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.ui-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.ui-resizable{position:relative}.ui-resizable-handle{position:absolute;font-size:.1px;display:block}.ui-resizable-disabled .ui-resizable-handle,.ui-resizable-autohide .ui-resizable-handle{display:none}.ui-resizable-n{cursor:n-resize;height:7px;width:100%;top:-5px;left:0}.ui-resizable-s{cursor:s-resize;height:7px;width:100%;bottom:-5px;left:0}.ui-resizable-e{cursor:e-resize;width:7px;right:-5px;top:0;height:100%}.ui-resizable-w{cursor:w-resize;width:7px;left:-5px;top:0;height:100%}.ui-resizable-se{cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.ui-resizable-sw{cursor:sw-resize;width:9px;height:9px;left:-5px;bottom:-5px}.ui-resizable-nw{cursor:nw-resize;width:9px;height:9px;left:-5px;top:-5px}.ui-resizable-ne{cursor:ne-resize;width:9px;height:9px;right:-5px;top:-5px}.ui-button{display:inline-block;position:relative;padding:0;line-height:normal;margin-right:.1em;cursor:pointer;vertical-align:initial;text-align:center;overflow:visible}.ui-button,.ui-button:link,.ui-button:visited,.ui-button:hover,.ui-button:active{text-decoration:none}.ui-button-icon-only{width:2.2em}button.ui-button-icon-only{width:2.4em}.ui-button-icons-only{width:3.4em}button.ui-button-icons-only{width:3.7em}.ui-button .ui-button-text{display:block;line-height:normal}.ui-button-text-only .ui-button-text{padding:.1em .2em}.ui-button-icon-only .ui-button-text,.ui-button-icons-only .ui-button-text{padding:.4em;text-indent:-9999999px}.ui-button-text-icon-primary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 1em .4em 2.1em}.ui-button-text-icon-secondary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 2.1em .4em 1em}.ui-button-text-icons .ui-button-text{padding-left:2.1em;padding-right:2.1em}input.ui-button{padding:.4em 1em}.ui-button-icon-only .ui-icon,.ui-button-text-icon-primary .ui-icon,.ui-button-text-icon-secondary .ui-icon,.ui-button-text-icons .ui-icon,.ui-button-icons-only .ui-icon{position:absolute;top:50%;margin-top:-8px}.ui-button-icon-only .ui-icon{left:50%;margin-left:-8px}.ui-button-text-icon-primary .ui-button-icon-primary,.ui-button-text-icons .ui-button-icon-primary,.ui-button-icons-only .ui-button-icon-primary{left:.5em}.ui-button-text-icon-secondary .ui-button-icon-secondary,.ui-button-text-icons .ui-button-icon-secondary,.ui-button-icons-only .ui-button-icon-secondary{right:.5em}.ui-buttonset{margin-right:7px}.ui-buttonset .ui-button{margin-left:0;margin-right:-.3em}input.ui-button::-moz-focus-inner,button.ui-button::-moz-focus-inner{border:0;padding:0}.ui-dialog{position:absolute;top:0;left:0;padding:0em;outline:0;-moz-box-shadow: 0 4px 8px rgba(0,0,0,0.5);-webkit-box-shadow: 0 4px 8px rgba(0,0,0,0.5);box-shadow: 0 4px 8px rgba(0,0,0,0.5);}img {vertical-align:initial;}.ui-dialog .ui-dialog-titlebar{padding:0 .2em;position:relative}.ui-dialog .ui-dialog-title{float:left;margin:.1em 0;white-space:nowrap;width:90%;overflow:hidden;text-overflow:ellipsis}.ui-dialog .ui-dialog-titlebar-close{position:absolute;right:.3em;top:50%;width:21px;margin:-10px 0 0 0;padding:1px;height:20px}.ui-dialog .ui-dialog-content{position:relative;border:0;padding:.5em;background:0;overflow:auto}.ui-dialog .ui-dialog-buttonpane{text-align:left;border-width:1px 0 0;background-image:none;margin-top:.5em;padding:.3em 1em .5em .4em}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset{float:right}.ui-dialog .ui-dialog-buttonpane button{margin:.5em .4em .5em 0;cursor:pointer}.ui-dialog .ui-resizable-se{width:12px;height:12px;right:-5px;bottom:-5px;background-position:16px 16px}.ui-draggable .ui-dialog-titlebar{cursor:move}.ui-widget .ui-widget{font-size:1em}.ui-widget input,.ui-widget select,.ui-widget textarea,.ui-widget button{font-family:Helvetica,Arial,sans-serif;font-size:1em}.ui-widget-content{border:1px solid #5693af;background:#649393;color:#222}.ui-widget-content .content{background:#fff;padding:.5em;}.ui-widget-content a{color:#222}.ui-widget-header{background:#649393 url(' + c + "img/bugclub/dialog/ui-bg_flat_0_649393_40x100.png) 50% 50% repeat-x;color:#fff;font-weight:bold}.ui-widget-header a{color:#fff}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default{border:1px solid #5693af;background:#c8eafc url(" + c + "img/bugclub/dialog/ui-bg_glass_100_c8eafc_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#000}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited{color:#000;text-decoration:none}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus{border:1px solid #5693af;background:#a9e0fa url(" + c + "img/bugclub/dialog/ui-bg_glass_100_a9e0fa_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#000}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited{color:#000;text-decoration:none}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active{border:1px solid #5693af;background:#ffc70b url(" + c + "img/bugclub/dialog/ui-bg_glass_100_ffc70b_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#000}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:#000;text-decoration:none}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid #f47721;background:#ffc70b url(" + c + "img/bugclub/dialog/ui-bg_glass_100_ffc70b_1x400.png) 50% 50% repeat-x;color:#000}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:#000}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:1px solid #cd0a0a;background:#fef1ec url(" + c + "img/bugclub/dialog/ui-bg_glass_95_fef1ec_1x400.png) 50% 50% repeat-x;color:#cd0a0a}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#cd0a0a}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#cd0a0a}.ui-priority-primary,.ui-widget-content .ui-priority-primary,.ui-widget-header .ui-priority-primary{font-weight:bold}.ui-priority-secondary,.ui-widget-content .ui-priority-secondary,.ui-widget-header .ui-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.ui-state-disabled,.ui-widget-content .ui-state-disabled,.ui-widget-header .ui-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.ui-state-disabled .ui-icon{filter:Alpha(Opacity=35)}.ui-icon{width:16px;height:16px}.ui-icon,.ui-widget-content .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_ffffff_256x240.png)}.ui-widget-header .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_91d0d0_256x240.png)}.ui-state-default .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_000000_256x240.png)}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_000000_256x240.png)}.ui-state-active .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_000000_256x240.png)}.ui-state-highlight .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_000000_256x240.png)}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url(" + c + "img/bugclub/dialog/ui-icons_cd0a0a_256x240.png)}.ui-dialog .ui-dialog-titlebar-close {background:transparent !important;outline:none;width:26px;height:26px;margin-top:4px;margin-right:1px;top:0;}.ui-dialog .ui-dialog-titlebar-close.ui-button-icon-only .ui-icon {top:0;left:0;margin:0;padding:0;}.ui-icon-closethick,.ui-dialog .ui-dialog-titlebar-close{width:26px;height:26px;background-size:contain;background:transparent url(" + c + "img/bugclub/legacy/ks1/pupil/Button_smallteacherClose_upSkin.png) top left no-repeat !important;margin-top:2px;border:none;}.ui-icon-closethick:hover,.ui-icon-closethick.ui-state-hover,.ui-dialog .ui-dialog-titlebar-close.ui-state-hover{background:transparent url(" + c + "img/bugclub/legacy/ks1/pupil/Button_smallteacherClose_overSkin.png) top left no-repeat !important;border:none;}.ui-icon-grip-dotted-vertical{background-position:0 -224px}.ui-icon-grip-dotted-horizontal{background-position:-16px -224px}.ui-icon-grip-solid-vertical{background-position:-32px -224px}.ui-icon-grip-solid-horizontal{background-position:-48px -224px}.ui-icon-gripsmall-diagonal-se{background-position:-64px -224px}.ui-icon-grip-diagonal-se{background-position:-80px -224px}.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{border-top-left-radius:6px}.ui-corner-all,.ui-corner-top,.ui-corner-right,.ui-corner-tr{border-top-right-radius:6px}.ui-corner-all,.ui-corner-bottom,.ui-corner-left,.ui-corner-bl{border-bottom-left-radius:6px}.ui-corner-all,.ui-corner-bottom,.ui-corner-right,.ui-corner-br{border-bottom-right-radius:6px}.ui-widget-overlay{background:#000 url(" + c + "img/bugclub/dialog/ui-bg_flat_50_000000_40x100.png) 50% 50% repeat-x;opacity:.3;filter:Alpha(Opacity=30)}.ui-widget-shadow{margin:-8px 0 0 -8px;padding:8px;background:#000 url(" + c + "img/bugclub/dialog/ui-bg_flat_50_000000_40x100.png) 50% 50% repeat-x;opacity:.25;filter:Alpha(Opacity=25);border-radius:8px}.ui-widget-content.summary-screen{background:url(" + c + "img/bugclub/legacy/ks1/pupil/Canvas_closeBook_backgroundSkin.png) top left no-repeat;z-index:2010;border:none;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;}.ui-widget-content.summary-screen .ui-dialog-titlebar,.ui-widget-content.summary-screen .ui-dialog-buttonpane{background:transparent;}.ui-widget-content.summary-screen .ui-dialog-content{background:transparent;}.ui-widget-content.summary-screen .ui-dialog-titlebar-close{display:none;}.ui-widget-content.summary-screen .content .summary-icons{position:absolute;top:56px;left:50px;right:50px;height:64px;}.ui-widget-content.summary-screen.ks1 .content .bug{margin:220px 0 0 30px;}.ui-widget-content.summary-screen.ks2 .content .bug{margin:180px 0 0 50px;}.ui-widget-content.summary-screen .content .button-close{margin-left:1em;}.ui-widget-content.summary-screen .content .button-keep-reading{background:url(" + c + "img/bugclub/legacy/ks1/pupil/Button_keepReading_downSkin.png) top left no-repeat;width:260px;height:81px;}.ui-widget-content.summary-screen.ks1 .content .buttons{position:absolute;bottom:70px;right:30px;}.ui-widget-content.summary-screen.ks2 .content .buttons{position:absolute;bottom:90px;right:80px;}.ui-widget-content.summary-screen .content .buttons a{margin-left:1em;outline:0;border:none;}"
    }

    return{getStyle: b}
}(ActiveText), BugClubAus.SummaryScreen = BugClubAus.SummaryScreen || {}, BugClubAus.SummaryScreen.DialogStyleText = function (a) {
    "use strict";
    function b(b) {
        var c = a.SkinUtils.getPathToResources(b);
        return".ui-widget-content.summary-screen{background:url(" + c + "img/bugclub/legacy/ks1/pupil/Canvas_closeBook_backgroundSkin.png) top left no-repeat;z-index:2010;border:none;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;}.ui-widget-content.summary-screen .ui-dialog-titlebar,.ui-widget-content.summary-screen .ui-dialog-buttonpane{background:transparent;}.ui-widget-content.summary-screen .ui-dialog-content{background:transparent;}.ui-widget-content.summary-screen .ui-dialog-titlebar-close{display:none;}.ui-widget-content.summary-screen .content .summary-icons{position:absolute;top:56px;left:50px;right:50px;height:64px;}.ui-widget-content.summary-screen.ks1 .content .bug{margin:220px 0 0 30px;}.ui-widget-content.summary-screen.ks2 .content .bug{margin:180px 0 0 50px;}.ui-widget-content.summary-screen .content .button-close{margin-left:1em;}.ui-widget-content.summary-screen .content .button-keep-reading{background:url(" + c + "img/bugclub/legacy/ks1/pupil/Button_keepReading_downSkin.png) top left no-repeat;width:260px;height:81px;}.ui-widget-content.summary-screen.ks1 .content .buttons{position:absolute;bottom:70px;right:30px;}.ui-widget-content.summary-screen.ks2 .content .buttons{position:absolute;bottom:90px;right:80px;}.ui-widget-content.summary-screen .content .buttons a{margin-left:1em;outline:0;border:none;}.ui-dialog,.ui-dialog *{-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;}"
    }

    return{getStyle: b}
}(ActiveText), BugClubAus.StudentControlsKS1 = function (a) {
    "use strict";
    a || (a = {});
    var b = a.rightButtons ? a.rightButtons : "previous,readtome,next", c = "/ks1/pupil/";
    return a.primary = b, a.skinName = "student-ks1", a.skinPathPrefix = c, new BugClubAus.Controls(a)
}, BugClubAus.StudentControlsKS2 = function (a) {
    "use strict";
    a || (a = {});
    var b = a.leftButtons ? a.leftButtons : "zoom,viewtoggle", c = a.rightButtons ? a.rightButtons : "activitystructure,previous,quicknav,next,exit", d = "/ks2/";
    return a.leftButtons = b, a.rightButtons = c, a.skinName = "student-ks2", a.skinPathPrefix = d, new BugClubAus.Controls(a)
}, BugClubAus.TeacherControlsKS1 = function (a) {
    "use strict";
    a || (a = {});
    var b = a.leftButtons ? a.leftButtons : "readtome,drawing,zoom,bugclubhotspots", c = a.rightButtons ? a.rightButtons : "previous,quicknav,next,exit", d = "/ks1/teacher/";
    return a.leftButtons = b, a.rightButtons = c, a.skinName = "teacher-ks1", a.skinPathPrefix = d, new BugClubAus.Controls(a)
}, BugClubAus.TeacherControlsKS2 = function (a) {
    "use strict";
    a || (a = {});
    var b = a.leftButtons ? a.leftButtons : "bugclubhotspots,zoom,viewtoggle,drawing", c = a.rightButtons ? a.rightButtons : "activitystructure,previous,quicknav,next,exit";
    return a.leftButtons = b, a.rightButtons = c, a.skinName = "teacher-ks2", a.skinPathPrefix = "/ks2/", new BugClubAus.Controls(a)
}, BugClubAus.Controls = function (a) {
    "use strict";
    function b(b) {
        var c, d = ActiveText.ExtensionUtils.getExtensionByKey(b, "summaryscreen");
        d && (c = d.openSummary), a || (a = {});
        var e = a.leftButtons ? a.leftButtons : "zoom", f = a.primary ? a.primary : null, g = a.rightButtons ? a.rightButtons : "exit";
        b.options.allowReadToMe === !1 && (e = _.without(e.split(","), "readtome", "readtomeExtended").toString(), null !== f && (a.primary = _.without(a.primary.split(","), "readtome", "readtomeExtended").toString()), g = _.without(g.split(","), "readtome", "readtomeExtended").toString()), a.leftButtons = e, null !== f && (a.primary = f), a.rightButtons = g;
        var h, i, j = ActiveText.SkinUtils.getPathToResources(b), k = j + "img/bugclub/legacy/" + a.skinPathPrefix, l = a.skinName;
        "student-ks1" === l ? h = new ActiveText.UI.BasicControls(b, {primary: f, leftButtons: e, rightButtons: g, leftButtonOptions: {left: "10px", top: "0"}, rightButtonOptions: {right: "10px"}, openByDefault: !0, overlay: !1, barHeight: 102, barStyles: {backgroundColor: "#a3ca43", backgroundImage: "url(" + k + "Canvas_backgroundSkin.png)", backgroundRepeat: "repeat-x", filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader( src='" + k + "Canvas_backgroundSkin.png', sizingMethod='scale')"}, minWidth: 670, scaleMode: "scale", buttonStyles: {width: 94, height: 95, margin: "0", background: "transparent"}, hoverStyles: {background: "transparent"}, options: {readtome: {style: {width: 174, height: 95}, imageSrc: k + "Button_readMe_upSkin.png", hoverImageSrc: k + "Button_readMe_overSkin.png", downImageSrc: k + "Button_readMe_downSkin.png", toggleButtonImageSrc: k + "Button_readMe_selectedSkin.png", toggleButtonHoverImageSrc: k + "Button_readMe_selectedSkin.png"}, zoom: {imageSrc: k + "Button_zoomOut_upSkin.png", hoverImageSrc: k + "Button_zoomOut_overSkin.png", downImageSrc: k + "Button_zoomOut_downSkin.png", toggleButtonImageSrc: k + "Button_zoomIn_upSkin.png", toggleButtonDownImageSrc: k + "Button_zoomIn_downSkin.png", toggleButtonHoverImageSrc: k + "Button_zoomIn_overSkin.png"}, previous: {style: {width: 120, height: 92}, imageSrc: k + "Button_backArrow_upSkin.png", hoverImageSrc: k + "Button_backArrow_overSkin.png", downImageSrc: k + "Button_backArrow_downSkin.png", enableBehaviour: "hide"}, next: {style: {width: 120, height: 92}, imageSrc: k + "Button_forArrow_upSkin.png", hoverImageSrc: k + "Button_forArrow_overSkin.png", downImageSrc: k + "Button_forArrow_downSkin.png", enableBehaviour: "hide"}, exit: {style: {width: 50, height: 51}, imageSrc: k + "Button_Close_upSkin.png", hoverImageSrc: k + "Button_Close_overSkin.png", downImageSrc: k + "Button_Close_downSkin.png", closeFunction: c}}}) : "student-ks2" === l ? (i = ".quicknav{background:transparent url(" + k + "text-input-background.png) center center no-repeat;width:128px;}.quicknav input{background:transparent;}", ActiveText.CSSUtils.embedCSS(i, "bugclub-skin-styles"), h = new ActiveText.UI.BasicControls(b, {leftButtons: e, rightButtons: g, leftButtonOptions: {left: "10px", top: "0"}, rightButtonOptions: {right: "10px"}, openByDefault: !0, overlay: !1, barHeight: 51, barStyles: {backgroundColor: "#92c7c6", backgroundImage: "url(" + k + "bar.png)", backgroundRepeat: "repeat-x", lineHeight: "46px"}, minWidth: 545, scaleMode: "scale", buttonStyles: {width: 41, height: 41, background: "transparent", margin: "0"}, options: {readtome: {imageSrc: k + "button-volume-on-up.png", hoverImageSrc: k + "button-volume-on-hover.png", downImageSrc: k + "button-volume-on-down.png", toggleButtonImageSrc: k + "button-volume-on-up-toggle.png", toggleButtonHoverImageSrc: k + "button-volume-on-hover-toggle.png", toggleButtonDownImageSrc: k + "button-volume-on-down-toggle.png"}, edittext: {imageSrc: k + "button-edittext-up.png", hoverImageSrc: k + "button-edittext-hover.png", toggleButtonImageSrc: k + "button-edittext-up-toggle.png", toggleButtonHoverImageSrc: k + "button-edittext-hover-toggle.png", toggleButtonDownImageSrc: k + "button-edittext-down-toggle.png"}, drawing: {imageSrc: k + "button-drawing-up.png", hoverImageSrc: k + "button-drawing-hover.png", downImageSrc: k + "button-drawing-down.png", toggleButtonImageSrc: k + "button-drawing-up-toggle.png", toggleButtonHoverImageSrc: k + "button-drawing-hover-toggle.png", toggleButtonDownImageSrc: k + "button-drawing-down-toggle.png"}, zoom: {imageSrc: k + "button-zoom-out-up-toggle.png", hoverImageSrc: k + "button-zoom-out-hover-toggle.png", downImageSrc: k + "button-zoom-out-down-toggle.png", toggleButtonImageSrc: k + "button-zoom-in-up.png", toggleButtonHoverImageSrc: k + "button-zoom-in-hover.png", toggleButtonDownImageSrc: k + "button-zoom-in-down.png"}, viewtoggle: {imageSrc: k + "button-dps-view-up.png", hoverImageSrc: k + "button-dps-view-hover.png", downImageSrc: k + "button-dps-view-down.png", toggleButtonImageSrc: k + "button-sps-view-up.png", toggleButtonHoverImageSrc: k + "button-sps-view-hover.png", toggleButtonDownImageSrc: k + "button-sps-view-down.png"}, previous: {style: {width: 49, height: 43}, imageSrc: k + "button-left-up.png", hoverImageSrc: k + "button-left-hover.png", enableBehaviour: "hide"}, next: {style: {width: 49, height: 43}, imageSrc: k + "button-right-up.png", hoverImageSrc: k + "button-right-hover.png", enableBehaviour: "hide"}, quicknav: {style: {border: "none", width: 152, padding: "12px 12px 14px 12px"}, popupnavwidth: 293, textFormatSinglePage: "%%1 of %%2", textFormatMultiPage: "%%1/%%2 of %%3"}, activitystructure: {style: {width: 102, height: 41}, imageSrc: k + "button-contents-up.png", hoverImageSrc: k + "button-contents-hover.png", downImageSrc: k + "button-contents-down.png", toggleButtonImageSrc: k + "button-contents-up.png", toggleButtonHoverImageSrc: k + "button-contents-hover.png", toggleButtonDownImageSrc: k + "button-contents-down.png"}, exit: {style: {width: 36, height: 36}, imageSrc: k + "button-exit-up.png", hoverImageSrc: k + "button-exit-hover.png", downImageSrc: k + "button-exit-down.png", closeFunction: c}}})) : "teacher-ks1" === l ? (i = ".quicknav{background:transparent url(" + k + "Canvas_teacherButtonBar_TextInput.png) center center no-repeat;}.quicknav input{background:transparent;}", ActiveText.CSSUtils.embedCSS(i, "bugclub-skin-styles"), h = new ActiveText.UI.BasicControls(b, {leftButtons: e, rightButtons: g, leftButtonOptions: {left: "10px", top: "0"}, rightButtonOptions: {right: "10px"}, openByDefault: !0, overlay: !1, barHeight: 101, barStyles: {backgroundColor: "#456b68", backgroundImage: "url(" + k + "Element_Background2.png)", backgroundRepeat: "repeat-x"}, minWidth: 670, scaleMode: "scale", buttonStyles: {width: 64, height: 64, margin: "0", background: "transparent"}, hoverStyles: {background: "transparent"}, options: {readtome: {imageSrc: k + "Button_readMe_upSkin.png", hoverImageSrc: k + "Button_readMe_overSkin.png", downImageSrc: k + "Button_readMe_downSkin.png", toggleButtonImageSrc: k + "Button_readMe_selectedSkin.png", toggleButtonHoverImageSrc: k + "Button_readMe_selectedSkin.png"}, drawing: {imageSrc: k + "Button_userTools_upSkin.png", hoverImageSrc: k + "Button_userTools_overSkin.png", downImageSrc: k + "Button_userTools_downSkin.png", toggleButtonImageSrc: k + "Button_userTools_selectedSkin.png", toggleButtonHoverImageSrc: k + "Button_userTools_selectedSkin.png"}, zoom: {imageSrc: k + "Button_zoomOut_upSkin.png", hoverImageSrc: k + "Button_zoomOut_overSkin.png", downImageSrc: k + "Button_zoomOut_downSkin.png", toggleButtonImageSrc: k + "Button_zoomIn_upSkin.png", toggleButtonDownImageSrc: k + "Button_zoomIn_downSkin.png", toggleButtonHoverImageSrc: k + "Button_zoomIn_overSkin.png"}, bugclubhotspots: {imageSrc: k + "Button_activityToggle_disabledSkin.png", hoverImageSrc: k + "Button_activityToggle_disabledSkin.png", downImageSrc: k + "Button_activityToggle_downButton.png", toggleButtonImageSrc: k + "Button_activityToggle_upSkin.png", toggleButtonHoverImageSrc: k + "Button_activityToggle_overSkin.png", enableBehaviour: "show"}, previous: {style: {width: 80, height: 60}, imageSrc: k + "Button_backArrow_upSkin.png", hoverImageSrc: k + "Button_backArrow_overSkin.png", downImageSrc: k + "Button_backArrow_downSkin.png", enableBehaviour: "hide"}, next: {style: {width: 80, height: 60}, imageSrc: k + "Button_forArrow_upSkin.png", hoverImageSrc: k + "Button_forArrow_overSkin.png", downImageSrc: k + "Button_forArrow_downSkin.png", enableBehaviour: "hide"}, quicknav: {style: {border: "none", width: 120, padding: "18px 12px"}, popupnavwidth: 293, textFormatSinglePage: "%%1 of %%2", textFormatMultiPage: "%%1/%%2 of %%3"}, exit: {style: {width: 53, height: 53, margin: "0"}, imageSrc: k + "Button_teacherClose_upSkin.png", hoverImageSrc: k + "Button_teacherClose_overSkin.png", downImageSrc: k + "Button_teacherClose_downSkin.png", closeFunction: c}}})) : "teacher-ks2" === l && (i = ".quicknav{background:transparent url(" + k + "text-input-background.png) center center no-repeat;width:128px;}.quicknav input{background:transparent;}", ActiveText.CSSUtils.embedCSS(i, "bugclub-skin-styles"), h = new ActiveText.UI.BasicControls(b, {leftButtons: e, rightButtons: g, leftButtonOptions: {left: "10px", top: "0"}, rightButtonOptions: {right: "10px"}, openByDefault: !0, overlay: !1, barHeight: 51, barStyles: {backgroundColor: "#92c7c6", backgroundImage: "url(" + k + "bar.png)", backgroundRepeat: "repeat-x", lineHeight: "46px"}, minWidth: 645, scaleMode: "scale", buttonStyles: {width: 41, height: 41, background: "transparent"}, hoverStyles: {background: "transparent"}, options: {readtome: {imageSrc: k + "button-volume-on-up.png", hoverImageSrc: k + "button-volume-on-hover.png", downImageSrc: k + "button-volume-on-down.png", toggleButtonImageSrc: k + "button-volume-on-up-toggle.png", toggleButtonHoverImageSrc: k + "button-volume-on-hover-toggle.png", toggleButtonDownImageSrc: k + "button-volume-on-down-toggle.png"}, edittext: {imageSrc: k + "button-edittext-up.png", hoverImageSrc: k + "button-edittext-hover.png", toggleButtonImageSrc: k + "button-edittext-up-toggle.png", toggleButtonHoverImageSrc: k + "button-edittext-hover-toggle.png", toggleButtonDownImageSrc: k + "button-edittext-down-toggle.png"}, drawing: {imageSrc: k + "button-drawing-up.png", hoverImageSrc: k + "button-drawing-hover.png", downImageSrc: k + "button-drawing-down.png", toggleButtonImageSrc: k + "button-drawing-up-toggle.png", toggleButtonHoverImageSrc: k + "button-drawing-hover-toggle.png", toggleButtonDownImageSrc: k + "button-drawing-down-toggle.png"}, zoom: {imageSrc: k + "button-zoom-out-up-toggle.png", hoverImageSrc: k + "button-zoom-out-hover-toggle.png", downImageSrc: k + "button-zoom-out-down-toggle.png", toggleButtonImageSrc: k + "button-zoom-in-up.png", toggleButtonHoverImageSrc: k + "button-zoom-in-hover.png", toggleButtonDownImageSrc: k + "button-zoom-in-down.png"}, bugclubhotspots: {imageSrc: k + "button-hotspots-up-disabled.png", hoverImageSrc: k + "button-hotspots-hover-disabled.png", downImageSrc: k + "button-hotspots-down-disabled.png", toggleButtonImageSrc: k + "button-hotspots-up.png", toggleButtonHoverImageSrc: k + "button-hotspots-hover.png", toggleButtonDownImageSrc: k + "button-hotspots-down.png", enableBehaviour: "show"}, viewtoggle: {imageSrc: k + "button-dps-view-up.png", hoverImageSrc: k + "button-dps-view-hover.png", downImageSrc: k + "button-dps-view-down.png", toggleButtonImageSrc: k + "button-sps-view-up.png", toggleButtonHoverImageSrc: k + "button-sps-view-hover.png", toggleButtonDownImageSrc: k + "button-sps-view-down.png"}, previous: {style: {width: 49, height: 43}, imageSrc: k + "button-left-up.png", hoverImageSrc: k + "button-left-hover.png", enableBehaviour: "hide"}, next: {style: {width: 49, height: 43}, imageSrc: k + "button-right-up.png", hoverImageSrc: k + "button-right-hover.png", enableBehaviour: "hide"}, quicknav: {style: {border: "none", width: 152, padding: "12px 12px 14px 12px"}, popupnavwidth: 293, textFormatSinglePage: "%%1 of %%2", textFormatMultiPage: "%%1/%%2 of %%3"}, activitystructure: {style: {width: 102, height: 41}, imageSrc: k + "button-contents-up.png", hoverImageSrc: k + "button-contents-hover.png", downImageSrc: k + "button-contents-down.png", toggleButtonImageSrc: k + "button-contents-up.png", toggleButtonHoverImageSrc: k + "button-contents-hover.png", toggleButtonDownImageSrc: k + "button-contents-down.png"}, exit: {style: {width: 36, height: 36}, imageSrc: k + "button-exit-up.png", hoverImageSrc: k + "button-exit-hover.png", downImageSrc: k + "button-exit-down.png", closeFunction: c}}})), b.extensions.push(h)
    }

    return{init: b}
};
var JDPlays = JDPlays || {};
JDPlays.Player = function (a) {
    "use strict";
    function b(a, b, c) {
        function e(b, c) {
            if (void 0 === b) {
                if (d(a)) {
                    var e = ActiveText.ExtensionUtils.getExtensionByKey(a, "readtome"), f = ActiveText.CharacterSelection.getCharacter(), g = e.getState().getActiveCharacter();
                    return!(f === g)
                }
                return c === ActiveText.Commands.GO_TO_PAGE ? !1 : !0
            }
        }

        a.options.audioPlaybackController = e;
        var f, g = Boolean(ActiveText.ExtensionUtils.getExtensionByKey(a, b));
        if (!g)switch (b) {
            case"overlaydataloader":
                f = new ActiveText.OverlayData, f.init(a), a.extensions.push(f);
                break;
            case"bugclubhotspots":
                f = new BugClub.Hotspots(c), f.init(a), a.extensions.push(f);
                break;
            case"smildatamodel":
                f = new ActiveText.SMILDataModel, f.init(a), a.extensions.push(f);
                break;
            case"smildataloader":
                f = new ActiveText.SMILDataLoader, f.init(a), a.extensions.push(f);
                break;
            case"texthighlightaudiosync":
                a.options.allowReadToMe !== !1 && (f = new ActiveText.TextHighlightAudioSync, f.init(a), a.extensions.push(f));
                break;
            case"summaryscreen":
                f = new BugClub.SummaryScreen(c), f.init(a), a.extensions.push(f);
                break;
            case"soundeffects":
                f = new ActiveText.SoundEffects, f.init(a), a.extensions.push(f);
                break;
            case"keyboardintegration":
                f = new ActiveText.KeyboardIntegration, f.init(a), a.extensions.push(f);
                break;
            case"drawingtools":
                f = new ActiveText.DrawingTools, f.supported() && (f.init(a), a.extensions.push(f));
                break;
            case"clicktoprompt":
                f = new ActiveText.ClickToPrompt, f.init(a), a.extensions.push(f);
                break;
            case"readingcomplete":
                f = new ActiveText.ReadingComplete, f.init(a), a.extensions.push(f);
                break;
            case"bugclubactivitysummary":
                f = new BugClub.ActivitySummaryCollective, f.init(a), a.extensions.push(f);
                break;
            case"bugclubscorm":
                f = new BugClub.SCORM.ActivityData, f.init(a), a.extensions.push(f)
        }
    }

    function c(a) {
        function b(b) {
            var c = $(b.currentTarget).hasClass("complete");
            if (c)debug.log("Not launching activity because activity is completed."); else {
                var d = $(b.currentTarget).data(), e = ActiveText.ExtensionUtils.getExtensionByKey(a, "pipwerks");
                e ? (debug.log("scormIntegrationExtension.launchActivity();", d), e.launchActivity(d.data.uri)) : (debug.log("Launching Hotspot Activity : " + d.data.uri), alert("Launching Hotspot Activity : " + d.data.uri))
            }
        }

        var c = ActiveText.SkinUtils.getPathToResources(a);
        a.options.containerElement.css(!Modernizr.svg || navigator.userAgent.match(/(msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i) ? {background: "url(" + c + "img/bugclub/backdrop.png) no-repeat center center", filter: 'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="' + c + 'img/bugclub/backdrop.png", sizingMethod="scale")', MsFilter: "'progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\"" + c + 'img/bugclub/backdrop.png", sizingMethod="scale")\'', backgroundSize: "cover"} : {background: "url(" + c + "img/bugclub/background.svg) no-repeat center center", backgroundSize: "cover"}), void 0 === a.options.allowOverlap && (a.options.allowOverlap = !1), void 0 === a.options.hotspotClickFunction && (a.options.hotspotClickFunction = b), ActiveText.BrowserUtils.isMobileDevice && (a.options.allowAnimation = !1), void 0 === a.options.autoPop && (a.options.autoPop = function () {
            var a = {index: 2, data: [
                {type: "target-area", data: {id: "ATX-autoPop", shape: "rectangle", uri: c + "wdgt/JDPlays.wdgt/index.html?transparent=true", x: -1, y: -1, width: 1, height: 1}}
            ]};
            return a
        })
    }

    function d(a) {
        var b = ActiveText.CharacterSelection.getCharacter();
        return"" !== b ? a.model.getCurrentPageNumber() >= 4 : !1
    }

    function e(d) {
        c(d);
        for (var e, f = ["overlaydataloader", "bugclubactivitysummary", "bugclubscorm", "bugclubhotspots", "smildatamodel", "smildataloader", "texthighlightaudiosync", "summaryscreen", "soundeffects", "keyboardintegration", "drawingtools", "clicktoprompt", "readingcomplete"], g = 0, h = f.length; h > g; g++)e = f[g], b(d, e, a);
        $(d).one(ActiveText.Commands.INIT_WHITEBOARD, function () {
            if (d.utils.isFullWindowScalingMode()) {
                var a = new ActiveText.ViewOrientationDetection;
                a.init(d), d.extensions.push(a)
            }
        })
    }

    return{init: e, isInPerformanceMode: d, key: "jdplays"}
};
var JDPlays = JDPlays || {};
JDPlays.StudentControls = function (a) {
    "use strict";
    a || (a = {});
    var b = a.leftButtons ? a.leftButtons : "zoom", c = a.primary ? a.primary : "previous,readtomeExtended,next", d = a.rightButtons ? a.rightButtons : "exit";
    return a.leftButtons = b, a.primary = c, a.rightButtons = d, new BugClub.Controls(a)
};
var JDPlays = JDPlays || {};
JDPlays.TeacherControls = function (a) {
    "use strict";
    a || (a = {});
    var b = a.leftButtons ? a.leftButtons : "zoom,drawing,bugclubhotspots", c = a.primaryButtons ? a.primaryButtons : "previous,readtomeExtended,next", d = a.rightButtons ? a.rightButtons : "quicknav,exit";
    return a.leftButtons = b, a.primary = c, a.rightButtons = d, new BugClub.Controls(a)
};
var Rapid = Rapid || {};
Rapid.Player = function () {
    "use strict";
    function a(a, b, c) {
        var d, e = Boolean(ActiveText.ExtensionUtils.getExtensionByKey(a, b));
        if (!e)switch (b) {
            case"overlaydataloader":
                d = new ActiveText.OverlayData, d.init(a), a.extensions.push(d);
                break;
            case"bugclubhotspots":
                d = new BugClub.Hotspots(c), d.init(a), a.extensions.push(d);
                break;
            case"smildatamodel":
                d = new ActiveText.SMILDataModel, d.init(a), a.extensions.push(d);
                break;
            case"smildataloader":
                d = new ActiveText.SMILDataLoader, d.init(a), a.extensions.push(d);
                break;
            case"recordandplay":
                d = new ActiveText.RecordAndPlay, d.init(a), a.extensions.push(d);
                break;
            case"texthighlightaudiosync":
                a.options.allowReadToMe !== !1 && (d = new ActiveText.TextHighlightAudioSync({selectionModeHighlightByDefault: !0}), d.init(a), a.extensions.push(d));
                break;
            case"summaryscreen":
                d = new BugClub.SummaryScreen(c), d.init(a), a.extensions.push(d);
                break;
            case"closebook":
                d = new Rapid.CloseBook, d.init(a), a.extensions.push(d);
                break;
            case"soundeffects":
                d = new ActiveText.SoundEffects, d.init(a), a.extensions.push(d);
                break;
            case"keyboardintegration":
                d = new ActiveText.KeyboardIntegration, d.init(a), a.extensions.push(d);
                break;
            case"drawingtools":
                d = new ActiveText.DrawingTools, d.supported() && (d.init(a), a.extensions.push(d));
                break;
            case"clicktoprompt":
                d = new ActiveText.ClickToPrompt, d.init(a), a.extensions.push(d);
                break;
            case"readingcomplete":
                d = new ActiveText.ReadingComplete, d.init(a), a.extensions.push(d);
                break;
            case"bugclubactivitysummary":
                d = new BugClub.ActivitySummaryCollective, d.init(a), a.extensions.push(d);
                break;
            case"bugclubscorm":
                d = new BugClub.SCORM.ActivityData, d.init(a), a.extensions.push(d)
        }
    }

    function b(a, b) {
        return void 0 === a ? b === ActiveText.Commands.GO_TO_PAGE ? !1 : !0 : void 0
    }

    function c(a) {
        function c(b) {
            var c = $(b.currentTarget).hasClass("complete");
            if (c)debug.log("Not launching activity because activity is completed."); else {
                var d = $(b.currentTarget).data(), e = d.data.uri, f = ActiveText.ExtensionUtils.getExtensionByKey(a, "pipwerks");
                f ? (debug.log("scormIntegrationExtension.launchActivity();", d), f.launchActivity(e)) : (debug.log("Launching Hotspot Activity : " + e), setTimeout(function () {
                    alert("Launching Hotspot Activity : " + e)
                }, 0))
            }
        }

        void 0 === a.options.audioPlaybackController && (a.options.audioPlaybackController = b), void 0 === a.options.hotspotClickFunction && (a.options.hotspotClickFunction = c), void 0 === a.options.allowOverlap && (a.options.allowOverlap = !1), void 0 === a.options.allowAnimation && (a.options.allowAnimation = !1)
    }

    function d(a) {
        var b = ActiveText.CharacterSelection.getCharacter();
        return"" !== b ? a.model.getCurrentPageNumber() >= 4 : !1
    }

    function e(a) {
        var b = ActiveText.SkinUtils.getPathToResources(a), c = ["green", "orange", "purple", "blue"][Math.floor(4 * Math.random())];
        a.options.containerElement.css(!Modernizr.svg || navigator.userAgent.match(/(msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i) ? {background: "url(" + b + "/img/rapid/background-" + c + ".png) no-repeat center center", filter: 'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="' + b + "/img/rapid/background-" + c + '.png", sizingMethod="scale")', MsFilter: "'progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\"" + b + "/img/rapid/background-" + c + '.png", sizingMethod="scale")\'', backgroundSize: "cover"} : {background: "url(" + b + "img/rapid/background-" + c + ".svg) no-repeat center center", backgroundSize: "cover"})
    }

    return function () {
        function b(b) {
            e(b), c(b);
            for (var d, f = ["overlaydataloader", "bugclubactivitysummary", "bugclubscorm", "bugclubhotspots", "smildatamodel", "smildataloader", "texthighlightaudiosync", "closebook", "soundeffects", "keyboardintegration", "drawingtools", "clicktoprompt", "recordandplay", "readingcomplete"], g = 0, h = f.length; h > g; g++)d = f[g], a(b, d);
            $(b).one(ActiveText.Commands.INIT_WHITEBOARD, function () {
                if (b.utils.isFullWindowScalingMode()) {
                    var a = new ActiveText.ViewOrientationDetection;
                    a.init(b), b.extensions.push(a)
                }
            })
        }

        return{init: b, isInPerformanceMode: d, key: "rapid"}
    }
}();
var Rapid = Rapid || {};
Rapid.Controls = function (a) {
    "use strict";
    function b(b) {
        var c, d = ActiveText.ExtensionUtils.getExtensionByKey(b, "closebook");
        d && (c = d.open), a || (a = {});
        var e = ActiveText.SkinUtils.getPathToResources(b), f = e + "img/rapid/", g = ".png";
        Modernizr.svg && (g = ".svg");
        var h = new ActiveText.UI.BasicControls(b, {primary: a.primary, leftButtons: a.leftButtons, rightButtons: a.rightButtons, leftButtonOptions: {left: "10px"}, rightButtonOptions: {right: "10px"}, openByDefault: !0, overlay: !1, barHeight: 50, barStyles: {backgroundColor: "#000000"}, minWidth: 670, scaleMode: "scale", buttonStyles: {width: 41, height: 41, tooltips: !1, background: "transparent", display: "inline-block", "vertical-align": "top"}, hoverStyles: {background: "transparent"}, options: {readtome: {style: {width: 157, height: 41}, imageSrc: f + "ReadToMeUp" + g, hoverImageSrc: f + "ReadToMeOver" + g, downImageSrc: f + "ReadToMeDown" + g, toggleButtonImageSrc: f + "ReadToMeActive" + g, toggleButtonDownImageSrc: f + "ReadToMeActiveDown" + g, toggleButtonHoverImageSrc: f + "ReadToMeActiveOver" + g}, zoom: {imageSrc: f + "ZoomActive" + g, hoverImageSrc: f + "ZoomActiveOver" + g, downImageSrc: f + "ZoomActiveDown" + g, toggleButtonImageSrc: f + "ZoomUp" + g, toggleButtonDownImageSrc: f + "ZoomDown" + g, toggleButtonHoverImageSrc: f + "ZoomOver" + g}, bugclubhotspots: {imageSrc: f + "HeadActive" + g, hoverImageSrc: f + "HeadActiveOver" + g, downImageSrc: f + "HeadActiveDown" + g, toggleButtonImageSrc: f + "HeadUp" + g, toggleButtonHoverImageSrc: f + "HeadOver" + g, toggleButtonDownImageSrc: f + "HeadDown" + g}, previous: {style: {width: 69, height: 45}, imageSrc: f + "LeftArrowUp" + g, hoverImageSrc: f + "LeftArrowOver" + g, enableBehaviour: "hide"}, next: {style: {width: 69, height: 45}, imageSrc: f + "RightArrowUp" + g, hoverImageSrc: f + "RightArrowOver" + g, downImageSrc: f + "RightArrowDown" + g, enableBehaviour: "hide"}, record: {imageSrc: f + "RecordUp" + g, hoverImageSrc: f + "RecordOver" + g, downImageSrc: f + "RecordDown" + g, toggleButtonImageSrc: f + "StopUp" + g, toggleButtonHoverImageSrc: f + "StopOver" + g, toggleButtonDownImageSrc: f + "StopDown" + g}, play: {imageSrc: f + "PlayUp" + g, hoverImageSrc: f + "PlayOver" + g, downImageSrc: f + "PlayDown" + g, disabledImageSrc: f + "PlayDisabled" + g, toggleButtonImageSrc: f + "PauseUp" + g, toggleButtonHoverImageSrc: f + "PauseOver" + g, toggleButtonDownImageSrc: f + "PauseDown" + g}, exit: {imageSrc: f + "CloseUp" + g, hoverImageSrc: f + "CloseOver" + g, downImageSrc: f + "CloseDown" + g, closeFunction: c}}});
        b.extensions.push(h)
    }

    return{init: b}
};
var Rapid = Rapid || {};
Rapid.StudentControls = function (a) {
    "use strict";
    function b(b) {
        a || (a = {});
        var c = a.primary ? a.primary : "previous,readtome,next", d = a.leftButtons ? a.leftButtons : "zoom", e = a.rightButtons ? a.rightButtons : "record,play,exit";
        b.options.allowReadToMe === !1 && (c = _.without(c.split(","), "readtome", "readtomeExtended").toString()), a.primary = c, a.leftButtons = d, a.rightButtons = e;
        var f = new Rapid.Controls(a);
        f.init(b), b.extensions.push(f)
    }

    return{init: b}
};
var Rapid = Rapid || {};
Rapid.TeacherControls = function (a) {
    "use strict";
    function b(b) {
        a || (a = {});
        var c = a.primary ? a.primary : "previous,readtome,next", d = a.leftButtons ? a.leftButtons : "bugclubhotspots,zoom", e = a.rightButtons ? a.rightButtons : "record,play,exit";
        b.options.allowReadToMe === !1 && (c = _.without(c.split(","), "readtome", "readtomeExtended").toString()), a.primary = c, a.leftButtons = d, a.rightButtons = e;
        var f = new Rapid.Controls(a);
        f.init(b), b.extensions.push(f)
    }

    return{init: b}
};
var Rapid = Rapid || {};
Rapid.CloseBook = function () {
    "use strict";
    function a() {
        function a() {
            $(this).dialog("destroy"), k = null
        }

        function b() {
            setTimeout(c, 0), $(k).focus(), $(i).on(ActiveText.Events.RESIZE, c)
        }

        var f = "png";
        Modernizr.svg && (f = "svg");
        var g = {title: "Keep reading", className: "button-keep-reading", tooltips: !1, style: {width: 198, height: 42}, width: 198, height: 42, imageSrc: l + "keepReadingUp." + f, hoverImageSrc: l + "keepReadingOver." + f, downImageSrc: l + "keepReadingUp." + f}, h = {title: "Close book", className: "button-close", tooltips: !1, style: {width: 198, height: 42}, width: 198, height: 42, imageSrc: l + "closeBookUp." + f, hoverImageSrc: l + "closeBookOver." + f, downImageSrc: l + "closeBookUp." + f}, m = ActiveText.UI.BasicControls.SimpleButtonFactory, p = m.createSimpleButton(g).click(d);
        p.attr("tabindex", 100);
        var q = m.createSimpleButton(h).click(e);
        q.attr("tabindex", 100);
        var r = $('<div class="content"><div class="buttons"></div></div>');
        r.find(".buttons").append(p, q), k = r.dialog({width: o, height: n, modal: !0, appendTo: j, dialogClass: "close-book", resizable: !1, close: a, create: b}), c()
    }

    function b(a) {
        a = a ? -1 : 999, $(".recordingWidget").css("z-index", a)
    }

    function c() {
        $(k).parent().css({top: (j.height() - n) / 2, left: (j.width() - o) / 2})
    }

    function d() {
        $(i).off(ActiveText.Events.RESIZE, c), b(!1), $(k).dialog("close")
    }

    function e() {
        d(), m && "function" == typeof m && m()
    }

    function f() {
        ActiveText.CSSUtils.embedCSS(Rapid.CloseBook.DialogStyleText.getStyle(i), "rapid-close-screen")
    }

    function g(a) {
        a && a.options && a.options.containerElement && (i = a, j = i.options.containerElement, l = ActiveText.SkinUtils.getPathToResources(i) + "img/rapid/", f())
    }

    function h() {
        if (k)$(k).dialog("open"); else {
            var c = ActiveText.ExtensionUtils.getExtensionByKey(i, "pipwerks");
            c && (m = c.closeEBook), a()
        }
        b(!0)
    }

    var i, j, k, l, m, n = 194, o = 416;
    return{init: g, open: h, key: "closebook"}
};
var Rapid = Rapid || {};
Rapid.CloseBook = Rapid.CloseBook || {}, Rapid.CloseBook.DialogStyleText = function (a) {
    "use strict";
    function b(b) {
        var c = a.SkinUtils.getPathToResources(b) + "img/rapid/", d = "png";
        return Modernizr.svg && (d = "svg"), ".ui-widget-content.close-book{background: url(" + c + "closeBookPanel." + d + ") top left no-repeat;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;z-index:2010;border:none;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;}.ui-widget-content.close-book .ui-dialog-titlebar,.ui-widget-content.close-book .ui-dialog-buttonpane{background:transparent;}.ui-widget-content.close-book .ui-dialog-content{background:transparent;}.ui-widget-content.close-book .ui-dialog-titlebar-close{display:none;}.ui-widget-content.close-book .content .button-close{margin-bottom: 10px;}.ui-widget-content.close-book .content .buttons{position:absolute;width:198px;top:0;right:20px;line-height:65px;}.ui-widget-content.close-book .content .buttons a{font-size:0;}"
    }

    return{getStyle: b}
}(ActiveText);
var RapidPlays = RapidPlays || {};
RapidPlays.Player = function () {
    "use strict";
    function a(a, b) {
        function c(b, c) {
            if (void 0 === b) {
                if (d(a)) {
                    var e = ActiveText.ExtensionUtils.getExtensionByKey(a, "readtome"), f = ActiveText.CharacterSelection.getCharacter(), g = e.getState().getActiveCharacter();
                    return!(f === g)
                }
                return c === ActiveText.Commands.GO_TO_PAGE ? !1 : !0
            }
        }

        a.options.audioPlaybackController = c;
        var e, f = Boolean(ActiveText.ExtensionUtils.getExtensionByKey(a, b));
        if (!f)switch (b) {
            case"overlaydataloader":
                e = new ActiveText.OverlayData, e.init(a), a.extensions.push(e);
                break;
            case"hotspots":
                e = new ActiveText.Hotspots, e.init(a), a.extensions.push(e);
                break;
            case"smildatamodel":
                e = new ActiveText.SMILDataModel, e.init(a), a.extensions.push(e);
                break;
            case"smildataloader":
                e = new ActiveText.SMILDataLoader, e.init(a), a.extensions.push(e);
                break;
            case"recordandplay":
                e = new ActiveText.RecordAndPlay, e.init(a), a.extensions.push(e);
                break;
            case"texthighlightaudiosync":
                a.options.allowReadToMe !== !1 && (e = new ActiveText.TextHighlightAudioSync({selectionModeHighlightByDefault: !0}), e.init(a), a.extensions.push(e));
                break;
            case"closebook":
                e = new RapidPlays.CloseBook, e.init(a), a.extensions.push(e);
                break;
            case"soundeffects":
                e = new ActiveText.SoundEffects, e.init(a), a.extensions.push(e);
                break;
            case"keyboardintegration":
                e = new ActiveText.KeyboardIntegration, e.init(a), a.extensions.push(e);
                break;
            case"drawingtools":
                e = new ActiveText.DrawingTools, e.supported() && (e.init(a), a.extensions.push(e));
                break;
            case"clicktoprompt":
                e = new ActiveText.ClickToPrompt, e.init(a), a.extensions.push(e);
                break;
            case"readingcomplete":
                e = new ActiveText.ReadingComplete, e.init(a), a.extensions.push(e)
        }
    }

    function b(a, b) {
        return void 0 === a ? b === ActiveText.Commands.GO_TO_PAGE ? !1 : !0 : void 0
    }

    function c(a) {
        var c = ActiveText.SkinUtils.getPathToResources(a);
        void 0 === a.options.audioPlaybackController && (a.options.audioPlaybackController = b), void 0 === a.options.allowOverlap && (a.options.allowOverlap = !1), void 0 === a.options.allowAnimation && (a.options.allowAnimation = !1), void 0 === a.options.autoPop && (a.options.autoPop = function () {
            var a = {index: 0, data: [
                {type: "target-area", data: {id: "ATX-autoPop", shape: "rectangle", uri: c + "wdgt/RapidPlays.wdgt/index.html?transparent=true", x: -1, y: -1, width: 1, height: 1}}
            ]};
            return a
        })
    }

    function d(a) {
        var b = ActiveText.CharacterSelection.getCharacter();
        return"" !== b ? a.model.getCurrentPageNumber() >= 3 : !1
    }

    function e(a) {
        var b = ActiveText.SkinUtils.getPathToResources(a), c = ["green", "orange", "purple", "blue"][Math.floor(4 * Math.random())];
        a.options.containerElement.css(!Modernizr.svg || navigator.userAgent.match(/(msie|trident)\/?\s*(\.?\d+(\.\d+)*)/i) ? {background: "url(" + b + "/img/rapid/background-" + c + ".png) no-repeat center center", filter: 'progid:DXImageTransform.Microsoft.AlphaImageLoader(src="' + b + "/img/rapid/background-" + c + '.png", sizingMethod="scale")', MsFilter: "'progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\"" + b + "/img/rapid/background-" + c + '.png", sizingMethod="scale")\'', backgroundSize: "cover"} : {background: "url(" + b + "img/rapid/background-" + c + ".svg) no-repeat center center", backgroundSize: "cover"})
    }

    return function () {
        function b(b) {
            e(b), c(b);
            for (var d, f = ["overlaydataloader", "hotspots", "smildatamodel", "smildataloader", "texthighlightaudiosync", "closebook", "soundeffects", "keyboardintegration", "drawingtools", "clicktoprompt", "recordandplay", "readingcomplete"], g = 0, h = f.length; h > g; g++)d = f[g], a(b, d);
            $(b).one(ActiveText.Commands.INIT_WHITEBOARD, function () {
                if (b.utils.isFullWindowScalingMode()) {
                    var a = new ActiveText.ViewOrientationDetection;
                    a.init(b), b.extensions.push(a)
                }
            })
        }

        return{init: b, isInPerformanceMode: d, key: "rapidplays"}
    }
}();
var RapidPlays = RapidPlays || {};
RapidPlays.Controls = function (a) {
    "use strict";
    function b(b) {
        var c, d = ActiveText.ExtensionUtils.getExtensionByKey(b, "closebook");
        d && (c = d.open), a || (a = {});
        var e = ActiveText.SkinUtils.getPathToResources(b), f = e + "img/rapid/", g = ".png";
        Modernizr.svg && (g = ".svg");
        var h = new ActiveText.UI.BasicControls(b, {primary: a.primary, leftButtons: a.leftButtons, rightButtons: a.rightButtons, leftButtonOptions: {left: "10px"}, rightButtonOptions: {right: "10px"}, openByDefault: !0, overlay: !1, barHeight: 50, barStyles: {backgroundColor: "#000000"}, minWidth: 670, scaleMode: "scale", buttonStyles: {width: 41, height: 41, tooltips: !1, background: "transparent", display: "inline-block", "vertical-align": "top"}, hoverStyles: {background: "transparent"}, options: {readtomeExtended: {readtome: {style: {width: 157, height: 41, tooltips: !1}, imageSrc: f + "large-readtome" + g, hoverImageSrc: f + "large-readtome-over" + g, downImageSrc: f + "large-readtome-over" + g, disabledImageSrc: f + "large-readtome-disabled" + g, toggleButtonImageSrc: f + "large-readtome-active" + g, toggleButtonHoverImageSrc: f + "large-readtome-over" + g, enableBehaviour: "show"}, done: {style: {width: 93, height: 41, tooltips: !1}, imageSrc: f + "done-inactive" + g, hoverImageSrc: f + "done-inactive" + g, downImageSrc: f + "done-inactive" + g, toggleButtonImageSrc: f + "done" + g, toggleButtonHoverImageSrc: f + "done-over" + g, enableBehaviour: "show"}}, readtome: {style: {width: 157, height: 41}, imageSrc: f + "ReadToMeUp" + g, hoverImageSrc: f + "ReadToMeOver" + g, downImageSrc: f + "ReadToMeDown" + g, toggleButtonImageSrc: f + "ReadToMeActive" + g, toggleButtonDownImageSrc: f + "ReadToMeActiveDown" + g, toggleButtonHoverImageSrc: f + "ReadToMeActiveOver" + g}, zoom: {imageSrc: f + "ZoomActive" + g, hoverImageSrc: f + "ZoomActiveOver" + g, downImageSrc: f + "ZoomActiveDown" + g, toggleButtonImageSrc: f + "ZoomUp" + g, toggleButtonDownImageSrc: f + "ZoomDown" + g, toggleButtonHoverImageSrc: f + "ZoomOver" + g}, bugclubhotspots: {imageSrc: f + "HeadActive" + g, hoverImageSrc: f + "HeadActiveOver" + g, downImageSrc: f + "HeadActiveDown" + g, toggleButtonImageSrc: f + "HeadUp" + g, toggleButtonHoverImageSrc: f + "HeadOver" + g, toggleButtonDownImageSrc: f + "HeadDown" + g}, previous: {style: {width: 69, height: 45}, imageSrc: f + "LeftArrowUp" + g, hoverImageSrc: f + "LeftArrowOver" + g, enableBehaviour: "hide"}, next: {style: {width: 69, height: 45}, imageSrc: f + "RightArrowUp" + g, hoverImageSrc: f + "RightArrowOver" + g, downImageSrc: f + "RightArrowDown" + g, enableBehaviour: "hide"}, record: {imageSrc: f + "RecordUp" + g, hoverImageSrc: f + "RecordOver" + g, downImageSrc: f + "RecordDown" + g, toggleButtonImageSrc: f + "StopUp" + g, toggleButtonHoverImageSrc: f + "StopOver" + g, toggleButtonDownImageSrc: f + "StopDown" + g}, play: {imageSrc: f + "PlayUp" + g, hoverImageSrc: f + "PlayOver" + g, downImageSrc: f + "PlayDown" + g, disabledImageSrc: f + "PlayDisabled" + g, toggleButtonImageSrc: f + "PauseUp" + g, toggleButtonHoverImageSrc: f + "PauseOver" + g, toggleButtonDownImageSrc: f + "PauseDown" + g}, exit: {imageSrc: f + "CloseUp" + g, hoverImageSrc: f + "CloseOver" + g, downImageSrc: f + "CloseDown" + g, closeFunction: c}}});
        b.extensions.push(h)
    }

    return{init: b}
};
var RapidPlays = RapidPlays || {};
RapidPlays.StudentControls = function (a) {
    "use strict";
    function b(b) {
        a || (a = {});
        var c = a.primary ? a.primary : "previous,readtomeExtended,next", d = a.leftButtons ? a.leftButtons : "zoom", e = a.rightButtons ? a.rightButtons : "record,play,exit";
        b.options.allowReadToMe === !1 && (c = _.without(c.split(","), "readtome", "readtomeExtended").toString()), a.primary = c, a.leftButtons = d, a.rightButtons = e;
        var f = new RapidPlays.Controls(a);
        f.init(b), b.extensions.push(f)
    }

    return{init: b}
};
var RapidPlays = RapidPlays || {};
RapidPlays.TeacherControls = function (a) {
    "use strict";
    function b(b) {
        a || (a = {});
        var c = a.primary ? a.primary : "previous,readtomeExtended,next", d = a.leftButtons ? a.leftButtons : "bugclubhotspots,zoom", e = a.rightButtons ? a.rightButtons : "record,play,exit";
        b.options.allowReadToMe === !1 && (c = _.without(c.split(","), "readtome", "readtomeExtended").toString()), a.primary = c, a.leftButtons = d, a.rightButtons = e;
        var f = new RapidPlays.Controls(a);
        f.init(b), b.extensions.push(f)
    }

    return{init: b}
};
var RapidPlays = RapidPlays || {};
RapidPlays.CloseBook = function () {
    "use strict";
    function a() {
        function a() {
            $(this).dialog("destroy"), k = null
        }

        function b() {
            setTimeout(c, 0), $(k).focus(), $(i).on(ActiveText.Events.RESIZE, c)
        }

        var f = "png";
        Modernizr.svg && (f = "svg");
        var g = {title: "Keep reading", className: "button-keep-reading", tooltips: !1, style: {width: 198, height: 42}, width: 198, height: 42, imageSrc: l + "keepReadingUp." + f, hoverImageSrc: l + "keepReadingOver." + f, downImageSrc: l + "keepReadingUp." + f}, h = {title: "Close book", className: "button-close", tooltips: !1, style: {width: 198, height: 42}, width: 198, height: 42, imageSrc: l + "closeBookUp." + f, hoverImageSrc: l + "closeBookOver." + f, downImageSrc: l + "closeBookUp." + f}, m = ActiveText.UI.BasicControls.SimpleButtonFactory, p = m.createSimpleButton(g).click(d);
        p.attr("tabindex", 100);
        var q = m.createSimpleButton(h).click(e);
        q.attr("tabindex", 100);
        var r = $('<div class="content"><div class="buttons"></div></div>');
        r.find(".buttons").append(p, q), k = r.dialog({width: o, height: n, modal: !0, appendTo: j, dialogClass: "close-book", resizable: !1, close: a, create: b}), c()
    }

    function b(a) {
        a = a ? -1 : 999, $(".recordingWidget").css("z-index", a)
    }

    function c() {
        $(k).parent().css({top: (j.height() - n) / 2, left: (j.width() - o) / 2})
    }

    function d() {
        $(i).off(ActiveText.Events.RESIZE, c), b(!1), $(k).dialog("close")
    }

    function e() {
        d(), m && "function" == typeof m && m()
    }

    function f() {
        ActiveText.CSSUtils.embedCSS(RapidPlays.CloseBook.DialogStyleText.getStyle(i), "rapid-close-screen")
    }

    function g(a) {
        a && a.options && a.options.containerElement && (i = a, j = i.options.containerElement, l = ActiveText.SkinUtils.getPathToResources(i) + "img/rapid/", f())
    }

    function h() {
        if (k)$(k).dialog("open"); else {
            var c = ActiveText.ExtensionUtils.getExtensionByKey(i, "pipwerks");
            c && (m = c.closeEBook), a()
        }
        b(!0)
    }

    var i, j, k, l, m, n = 194, o = 416;
    return{init: g, open: h, key: "closebook"}
};
var RapidPlays = RapidPlays || {};
RapidPlays.CloseBook = RapidPlays.CloseBook || {}, RapidPlays.CloseBook.DialogStyleText = function (a) {
    "use strict";
    function b(b) {
        var c = a.SkinUtils.getPathToResources(b) + "img/rapid/", d = "png";
        return Modernizr.svg && (d = "svg"), ".ui-widget-content.close-book{background: url(" + c + "closeBookPanel." + d + ") top left no-repeat;-webkit-background-size:cover;-moz-background-size:cover;-o-background-size:cover;background-size:cover;z-index:2010;border:none;-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;}.ui-widget-content.close-book .ui-dialog-titlebar,.ui-widget-content.close-book .ui-dialog-buttonpane{background:transparent;}.ui-widget-content.close-book .ui-dialog-content{background:transparent;}.ui-widget-content.close-book .ui-dialog-titlebar-close{display:none;}.ui-widget-content.close-book .content .button-close{margin-bottom: 10px;}.ui-widget-content.close-book .content .buttons{position:absolute;width:198px;top:0;right:20px;line-height:65px;}.ui-widget-content.close-book .content .buttons a{font-size:0;}"
    }

    return{getStyle: b}
}(ActiveText), ActiveText.namespace("WordSmith.Layers.Hotspots.Factory"), WordSmith.Layers.Hotspots.Factory = function () {
    "use strict";
    function a() {
        c || $("<style>.wordsmith_icon div{cursor:pointer !important;}</style>").appendTo("head"), c = !0
    }

    function b(b, c, d) {
        a();
        var e = c.data.icon, f = c.data.id, g = ActiveText.SkinUtils.getPathToResources(b), h = ActiveText.Hotspots.Helper.getDefaultFilenameFromHotspotData(c, "wordsmith-paw"), i = 118;
        i *= 1.33;
        var j = "<div class='wordsmith_icon noSwipe'><img class='wordsmith_icon' src='" + g + "img/wordsmith/hotspots/" + h + "' width='" + i + "' height='" + i + "'/></div>", k = $(j).attr("data-resource-id", f).attr("data-type", e).css(ActiveText.Hotspots.Helper.getHotspotPositioningStyles(c, i, d));
        return k.data(c), k
    }

    var c = !1;
    return{createResourceIcon: b}
}(), WordSmith.Controls = function (a) {
    "use strict";
    function b(a) {
        ActiveText.BrowserUtils.isMobileDevice && (a.options.defaults || (a.options.defaults = {}), a.options.defaults.generatePageEdges = !1, a.options.allowAnimation = !1);
        var b = a.options.containerElement.selector + " ", c = "" + b + ".controls-bar a{vertical-align:middle;}" + b + ".controls-bar a img{vertical-align:top;}";
        ActiveText.CSSUtils.embedCSS(c, "wordsmith-skin-styles");
        var f = ActiveText.SkinUtils.getPathToResources(a) + "img/wordsmith/", g = new ActiveText.UI.BasicControls(a, {leftButtons: d, rightButtons: e, leftButtonOptions: {left: "10px"}, rightButtonOptions: {right: "10px"}, openByDefault: !0, overlay: !1, barHeight: 74, barStyles: {backgroundColor: "#000000"}, minWidth: 530, scaleMode: "scale", buttonStyles: {width: 44, height: 44, background: "transparent"}, hoverStyles: {background: "transparent"}, options: {drawing: {imageSrc: f + "Button_PencilUp.png", hoverImageSrc: f + "Button_PencilHoverSelected.png", downImageSrc: f + "Button_PencilDown.png", toggleButtonImageSrc: f + "Button_PencilHoverSelected.png", toggleButtonHoverImageSrc: f + "Button_PencilHoverSelected.png", toggleButtonDownImageSrc: f + "Button_PencilDown.png"}, viewtoggle: {imageSrc: f + "Button_DpageUp.png", hoverImageSrc: f + "Button_DpageHoverSelected.png", downImageSrc: f + "Button_DpageDown.png", toggleButtonImageSrc: f + "Button_SpageUp.png", toggleButtonHoverImageSrc: f + "Button_SpageHoverSelected.png", toggleButtonDownImageSrc: f + "Button_SpageDown.png"}, zoom: {imageSrc: f + "Button_MagMinusUp.png", hoverImageSrc: f + "Button_MagMinusHoverSelected.png", downImageSrc: f + "Button_MagMinusDown.png", toggleButtonImageSrc: f + "Button_MagUp.png", toggleButtonHoverImageSrc: f + "Button_MagHoverSelected.png", toggleButtonDownImageSrc: f + "Button_MagDown.png"}, animations: {imageSrc: f + "Button_PauseUp.png", hoverImageSrc: f + "Button_PauseHoverSelected.png", downImageSrc: f + "Button_PauseDown.png", toggleButtonImageSrc: f + "Button_PlayUp.png", toggleButtonHoverImageSrc: f + "Button_PlayHoverSelected.png", toggleButtonDownImageSrc: f + "Button_PLayDown.png"}, contents: {style: {width: 119, height: 33}, width: 119, height: 33, imageSrc: f + "Button_ContentsUp.png", hoverImageSrc: f + "Button_ContentsHoverSelected.png", downImageSrc: f + "Button_ContentsDown.png", toggleButtonImageSrc: f + "Button_ContentsHoverSelected.png", toggleButtonHoverImageSrc: f + "Button_ContentsHoverSelected.png", toggleButtonDownImageSrc: f + "Button_ContentsDown.png"}, quicknav: {style: {border: "none", background: "transparent url(" + f + "PageNav.png) 0 3px no-repeat", width: 119, padding: "11px 0px 9px 0px", "vertical-align": "middle"}, popupnavwidth: 293, textFormatSinglePage: "%%title%%", textFormatMultiPage: "%%title%%  %%title2%%"}, previous: {imageSrc: f + "Button_BckArrowUp.png", hoverImageSrc: f + "Button_BckArrowHoverSelected.png", downImageSrc: f + "Button_BckArrowDown.png"}, next: {imageSrc: f + "Button_ForwArrowUp.png", hoverImageSrc: f + "Button_ForwArrowHoverSelected.png", downImageSrc: f + "Button_ForwArrowDown.png"}}});
        a.extensions.push(g)
    }

    a || (a = {});
    var c = "";
    a && void 0 !== a.displayAnimationControl && a.displayAnimationControl && (c = ",animations");
    var d = a.leftButtons ? a.leftButtons : "wslogo,drawing,viewtoggle,zoom" + c, e = a.rightButtons ? a.rightButtons : "contents,quicknav,previous,next";
    return{init: b, key: "wordsmithcontrols"}
}, WordSmith.FictionControl = function (a) {
    "use strict";
    a || (a = {});
    var b = a.leftButtons ? a.leftButtons : "drawing,viewtoggle,zoom", c = a.rightButtons ? a.rightButtons : "quicknav,previous,next";
    return a.leftButtons = b, a.rightButtons = c, new WordSmith.Controls(a)
}, WordSmith.NonFictionControl = function (a) {
    "use strict";
    a || (a = {});
    var b = a.leftButtons ? a.leftButtons : "drawing,viewtoggle,zoom", c = a.rightButtons ? a.rightButtons : "previous,next";
    return a.leftButtons = b, a.rightButtons = c, new WordSmith.Controls(a)
}, ActiveText.namespace("WordSmith.Player"), WordSmith.Player = function () {
    "use strict";
    function a(a, b, c) {
        var d, e = Boolean(ActiveText.ExtensionUtils.getExtensionByKey(a, b));
        if (!e)switch (b) {
            case"overlaydataloader":
                d = new ActiveText.OverlayData, d.init(a), a.extensions.push(d);
                break;
            case"hotspots":
                d = new ActiveText.Hotspots(WordSmith.Layers.Hotspots.Factory.createResourceIcon, c), d.init(a), a.extensions.push(d);
                break;
            case"soundeffects":
                d = new ActiveText.SoundEffects, d.init(a), a.extensions.push(d);
                break;
            case"wordsmithcontrols":
                d = new WordSmith.Controls(c), d.init(a), a.extensions.push(d);
                break;
            case"keyboardintegration":
                d = new ActiveText.KeyboardIntegration, d.init(a), a.extensions.push(d);
                break;
            case"drawingtools":
                d = new ActiveText.DrawingTools, d.supported() && (d.init(a), a.extensions.push(d))
        }
    }

    function b(a) {
        a.options.scheme = {color: "#000000", backgroundColor: "#d78c23", textColor: "#000000", controlColor: "#000000", controlHoverColor: "#d78c23", altControlHoverColor: "#d78c23", widgetBackgroundColour: "#000000", widgetBorderColour: "#d78c23", widgetCloseBackgroundColour: "#d78c23", widgetCloseBorderColour: "#000000", widgetTitleColour: "#d78c23"}, a.options.containerElement.css("background", "#d38e00")
    }

    return function (c) {
        function d(d) {
            b(d);
            for (var e, f = ["overlaydataloader", "hotspots", "soundeffects", "wordsmithcontrols", "keyboardintegration", "drawingtools"], g = 0, h = f.length; h > g; g++)e = f[g], a(d, e, c);
            $(d).one(ActiveText.Commands.INIT_WHITEBOARD, function () {
                if (d.utils.isFullWindowScalingMode()) {
                    var a = new ActiveText.ViewOrientationDetection;
                    a.init(d), d.extensions.push(a)
                }
            })
        }

        return{init: d, key: "wordsmith"}
    }
}(), ActiveText.namespace("ActiveText.UI.BasicControls.AvailableControls"), function (a) {
    "use strict";
    function b() {
        var a = $('<div class="ws-logo">' + d + "</div>").css({margin: 8, lineHeight: 0, display: "inline-block", "float": "left"});
        return a
    }

    var c = "wslogo", d = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px"width="57.398px" height="57.819px" viewBox="0 0 57.398 57.819" enable-background="new 0 0 57.398 57.819" xml:space="preserve">    <g>    <path fill="none" d="M10.703,51.028c0,0-0.002,0.021-0.006,0.06c0.002-0.021,0.003-0.041,0.009-0.06H10.703z"/>    <radialGradient id="SVGID_1_" cx="28.6992" cy="28.9097" r="28.8046" gradientUnits="userSpaceOnUse">    <stop  offset="0.7975" style="stop-color:#F7B131"/>    <stop  offset="1" style="stop-color:#A44F24"/>    </radialGradient><ellipse fill-rule="evenodd" clip-rule="evenodd" fill="url(#SVGID_1_)" cx="28.699" cy="28.909" rx="28.699" ry="28.91"/>    <g>    <path d="M28.293,50.828c-0.061-0.155-0.145-0.287-0.213-0.421c-0.393-0.85-0.771-1.427-1.107-2.118c-0.012-0.033-0.024-0.062-0.037-0.089l1.744,0.604l-0.584-2.896l-1.672,0.915c-0.721-2.645,1.125-1.821,2.41-1.608c4.412,0.716,12.895,1.079,17.429-3.849c0.188-0.206,0.364-0.397,0.532-0.583c0.34,0.189,0.73,0.301,1.146,0.301c1.304,0,2.359-1.065,2.359-2.381c0-1.312-1.056-2.376-2.359-2.376c-1.119,0-2.055,0.784-2.298,1.837c-0.229,0.027-0.429,0.049-0.608,0.069c-0.391,0.035-0.961,0.083-1.701,0.128c-0.057,0.004-0.115,0.008-0.176,0.011c-0.53,0.029-1.137,0.056-1.814,0.073c0.814-1.045,3.117-3.721,3.117-8.654c0-1.552-0.265-3.046-0.752-4.447c0.157-0.061,0.327-0.111,0.508-0.154c0.563-0.081,4.48-1.261,4.825-5.786c0.181-2.351,0.053-4.034-0.102-5.658c-0.118-1.235-0.131-1.663-0.229-2.348c-0.071-0.491,0-1.289-1.114-0.88c-0.373,0.141-0.899,0.743-2.186,1.777c-1.934,1.556-4.499,3.786-5.258,5.203c-0.376,0.699-0.636,1.186-0.82,1.534c-1.97-1.677-4.401-2.91-7.103-3.522c0.874-0.405,1.591-0.599,1.591-0.599s-1.326-1.159-4.094-0.238c-1.236,0.408,3.322-1.842,3.046-1.908c-1.155-0.265-2.731-0.422-5.606,0.897c0,0,0.573-1.002,3.443-1.962c1.334-0.45-5.303-0.785-8.299,2.19c-1.621,1.604-2.031,2.64-2.238,3.268c-0.4,0.219-0.789,0.451-1.166,0.698c-0.58,0.413-0.738,0.118-0.848-0.141c-0.129-0.326-0.264-0.7-0.408-1.147c-0.828-2.587-1.066-4.879-1.515-6.083c-0.282-1.07-0.836-1.67-1.934-1.555c-4.435,0.458-5.334,4.302-7.489,8.156c-2.154,3.859,0.602,2.564,0.602,2.564s1.997-0.729,4.34-2.63c1.199,1.916,2.637,4.233,2.711,5.477l-0.718,1.227c-0.917,1.849-1.435,3.901-1.435,6.067c0,5.92,3.832,11.019,9.352,13.351c0.047,0.057,0.096,0.117,0.141,0.178c0.338,0.457,0.609,0.915,0.818,1.373c0.322,0.728,0.486,1.451,0.527,2.159l-2.358-0.822l0.75,3.524l1.417-0.777c-0.266,1.013-0.765,1.955-1.411,2.779c-0.638,0.814-1.694,2.107-2.871,3.336c3.057,1.19,6.371,1.864,9.831,1.923C28.902,55.938,29.291,53.352,28.293,50.828z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.31,26.334"/>    <path fill="#FFFFFF" d="M23.643,40.903c-0.705-1.291-1.27-0.053-0.72,0.763c1.478,2.19,5.524,1.875,6.651,1.645C29.574,43.311,24.83,43.085,23.643,40.903z"/><path fill="#FFFFFF" d="M23.395,21.789c-3.466,0.288-6.039,3.357-5.748,6.848c0.29,3.49,3.334,6.078,6.797,5.79c3.465-0.293,6.04-3.359,5.747-6.852C29.901,24.089,26.859,21.495,23.395,21.789z M24.117,30.494c-1.311,0.109-2.461-0.87-2.568-2.188c-0.076-0.9,0.352-1.725,1.046-2.191c-0.115-0.161-0.183-0.358-0.183-0.572c0-0.542,0.438-0.982,0.976-0.982c0.538,0,0.974,0.441,0.974,0.982c0,0.07-0.008,0.14-0.021,0.206c1.034,0.189,1.858,1.051,1.949,2.156C26.398,29.225,25.427,30.383,24.117,30.494z"/><path d="M24.34,25.749c-0.094,0.442-0.484,0.777-0.952,0.777c-0.328,0-0.616-0.162-0.793-0.411c-0.694,0.467-1.122,1.291-1.046,2.191c0.107,1.317,1.258,2.297,2.568,2.188c1.31-0.111,2.281-1.27,2.172-2.589C26.198,26.8,25.374,25.938,24.34,25.749z"/><path fill="#FFFFFF" d="M42.332,30.364c-0.217-2.586-2.471-4.509-5.039-4.29c-2.569,0.219-4.479,2.488-4.262,5.076c0.215,2.59,2.471,4.513,5.04,4.294C40.64,35.226,42.547,32.951,42.332,30.364z M37.35,33.037c-1.225,0.102-2.303-0.815-2.402-2.05c-0.065-0.769,0.264-1.478,0.816-1.931c-0.021-0.081-0.033-0.165-0.033-0.256c0-0.539,0.438-0.982,0.977-0.982c0.473,0,0.869,0.344,0.955,0.797c0.92,0.212,1.636,1.001,1.72,1.998C39.483,31.846,38.576,32.933,37.35,33.037z"/><path d="M37.662,28.616c0.011,0.061,0.018,0.124,0.018,0.185c0,0.545-0.438,0.986-0.973,0.986c-0.453,0-0.832-0.31-0.943-0.73c-0.553,0.453-0.882,1.162-0.816,1.931c0.1,1.235,1.178,2.151,2.402,2.05c1.227-0.105,2.134-1.191,2.032-2.423C39.298,29.617,38.582,28.828,37.662,28.616z"/><path fill="#FFFFFF" d="M23.388,26.526c0.468,0,0.858-0.335,0.952-0.777c0.014-0.066,0.021-0.136,0.021-0.206c0-0.542-0.435-0.982-0.974-0.982c-0.538,0-0.976,0.441-0.976,0.982c0,0.214,0.067,0.411,0.183,0.572C22.771,26.364,23.06,26.526,23.388,26.526z"/><path fill="#FFFFFF" d="M36.707,29.787c0.535,0,0.973-0.441,0.973-0.986c0-0.061-0.007-0.124-0.018-0.185c-0.086-0.453-0.482-0.797-0.955-0.797c-0.539,0-0.977,0.442-0.977,0.982c0,0.091,0.012,0.175,0.033,0.256C35.875,29.478,36.254,29.787,36.707,29.787z"/><path fill="#FFFFFF" d="M23.528,18.101c1.67,0.115,3.14,0.969,3.14,0.969s-1.648-1.411-4.004-1.472c-1.119-0.031-1.881,0.376-2.397,0.933c-0.971,1.035-1.083,2.586-1.092,2.723c0.009-0.039,0.072-0.218,0.525-1.071c0.318-0.604,0.807-1.079,1.363-1.424C21.836,18.28,22.742,18.05,23.528,18.101z"/><path fill="#FFFFFF" d="M40.846,25.236c0.758,0.726,1.117,1.731,1.117,1.731s-0.22-1.348-1.33-2.322c-1.516-1.335-3.074,0.289-3.162,0.385c0.019-0.019,0.121-0.079,0.688-0.312C39.107,24.321,40.23,24.655,40.846,25.236z"/><path fill="#FFFFFF" d="M19.253,20.749V20.74C19.248,20.749,19.253,20.749,19.253,20.749z"/>    <line fill="none" stroke="#FFFFFF" stroke-width="0" stroke-linecap="round" stroke-linejoin="round" x1="37.506" y1="24.837" x2="37.51" y2="24.831"/>    <g>    <path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M18.504,34.807c0.174,0.011,0.306,0.159,0.295,0.333c-0.011,0.174-0.156,0.305-0.328,0.294c-0.17-0.01-0.302-0.157-0.293-0.326C18.187,34.933,18.334,34.797,18.504,34.807z"/><path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M17.57,35.329c0.234,0.014,0.418,0.214,0.405,0.455c-0.013,0.239-0.217,0.424-0.454,0.409c-0.237-0.011-0.42-0.216-0.406-0.456C17.129,35.495,17.329,35.315,17.57,35.329z"/><path fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M18.652,36.013c0.141,0.006,0.247,0.125,0.242,0.268c-0.01,0.141-0.129,0.25-0.27,0.242c-0.14-0.005-0.248-0.126-0.24-0.271C18.393,36.111,18.512,36.002,18.652,36.013z"/></g><path opacity="0.33" fill-rule="evenodd" clip-rule="evenodd" fill="#FFFFFF" d="M45.438,38.163c0,0-2.618,0.351-7.017,0.299c-4.067-0.042-7.046-2.254-7.046-2.254s1.996,2.516,7.046,2.872c2.983,0.212,7.011-0.566,7.011-0.566L45.438,38.163z"/>    <g><path fill="#FFFFFF" d="M23.643,40.903c-0.705-1.291-1.27-0.053-0.72,0.763c1.478,2.19,5.524,1.875,6.651,1.645C29.574,43.311,24.83,43.085,23.643,40.903z"/></g></g></g></svg>';
    a.UI.BasicControls.AvailableControls[c] = {create: b}
}(ActiveText), ActiveText.DialogStyleText = function () {
    "use strict";
    function a(a) {
        var c = ActiveText.SkinUtils.getPathToGlobalResource(a), d = a.theme.getWidgetBackgroundColour(), e = a.theme.getWidgetBorderColour(), f = a.theme.getWidgetCloseBackgroundColour(), g = a.theme.getWidgetCloseBorderColour(), h = a.theme.getWidgetCloseHoverColour(), i = a.theme.getWidgetTitleColour();
        return'.ui-helper-hidden{display:none}.ui-helper-hidden-accessible{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.ui-helper-reset{margin:0;padding:0;border:0;outline:0;line-height:1.3;text-decoration:none;font-size:100%;list-style:none}.ui-helper-clearfix:before,.ui-helper-clearfix:after{content:"";display:table;border-collapse:collapse}.ui-helper-clearfix:after{clear:both}.ui-helper-clearfix{min-height:0}.ui-helper-zfix{width:100%;height:100%;top:0;left:0;position:absolute;opacity:0;filter:Alpha(Opacity=0)}.ui-front{z-index:1000}.ui-state-disabled{cursor:default!important}.ui-icon{display:block;text-indent:-99999px;overflow:hidden;background-repeat:no-repeat}.ui-widget-overlay{position:fixed;top:0;left:0;width:100%;height:100%}.ui-resizable{position:relative}.ui-resizable-handle{position:absolute;font-size:.1px;display:block}.ui-resizable-disabled .ui-resizable-handle,.ui-resizable-autohide .ui-resizable-handle{display:none}.ui-resizable-n{cursor:n-resize;height:7px;width:100%;top:-5px;left:0}.ui-resizable-s{cursor:s-resize;height:7px;width:100%;bottom:-5px;left:0}.ui-resizable-e{cursor:e-resize;width:7px;right:-5px;top:0;height:100%}.ui-resizable-w{cursor:w-resize;width:7px;left:-5px;top:0;height:100%}.ui-resizable-se{cursor:se-resize;width:12px;height:12px;right:1px;bottom:1px}.ui-resizable-sw{cursor:sw-resize;width:9px;height:9px;left:-5px;bottom:-5px}.ui-resizable-nw{cursor:nw-resize;width:9px;height:9px;left:-5px;top:-5px}.ui-resizable-ne{cursor:ne-resize;width:9px;height:9px;right:-5px;top:-5px}.ui-button{display:inline-block;position:relative;padding:0;line-height:normal;margin-right:.1em;cursor:pointer;vertical-align:middle;text-align:center;overflow:visible}.ui-button,.ui-button:link,.ui-button:visited,.ui-button:hover,.ui-button:active{text-decoration:none}.ui-button-icon-only{width:2.2em}button.ui-button-icon-only{width:2.4em}.ui-button-icons-only{width:3.4em}button.ui-button-icons-only{width:3.7em}.ui-button .ui-button-text{display:block;line-height:normal}.ui-button-text-only .ui-button-text{padding:.1em .2em}.ui-button-icon-only .ui-button-text,.ui-button-icons-only .ui-button-text{padding:.4em;text-indent:-9999999px}.ui-button-text-icon-primary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 1em .4em 2.1em}.ui-button-text-icon-secondary .ui-button-text,.ui-button-text-icons .ui-button-text{padding:.4em 2.1em .4em 1em}.ui-button-text-icons .ui-button-text{padding-left:2.1em;padding-right:2.1em}input.ui-button{padding:.4em 1em}.ui-button-icon-only .ui-icon,.ui-button-text-icon-primary .ui-icon,.ui-button-text-icon-secondary .ui-icon,.ui-button-text-icons .ui-icon,.ui-button-icons-only .ui-icon{position:absolute;top:50%;margin-top:-8px}.ui-button-icon-only .ui-icon{left:50%;margin-left:-8px}.ui-button-text-icon-primary .ui-button-icon-primary,.ui-button-text-icons .ui-button-icon-primary,.ui-button-icons-only .ui-button-icon-primary{left:.5em}.ui-button-text-icon-secondary .ui-button-icon-secondary,.ui-button-text-icons .ui-button-icon-secondary,.ui-button-icons-only .ui-button-icon-secondary{right:.5em}.ui-buttonset{margin-right:7px}.ui-buttonset .ui-button{margin-left:0;margin-right:-.3em}input.ui-button::-moz-focus-inner,button.ui-button::-moz-focus-inner{border:0;padding:0}.ui-dialog{position:absolute;top:0;left:0;padding:0em;outline:0;-moz-box-shadow: 0 4px 8px rgba(0,0,0,0.5);-webkit-box-shadow: 0 4px 8px rgba(0,0,0,0.5);box-shadow: 0 4px 8px rgba(0,0,0,0.5);-webkit-transform-origin: 50% 50%;-moz-transform-origin: 50% 50%;-ms-transform-origin: 50% 50%;-o-transform-origin: 50% 50%;transform-origin: 50% 50%;-webkit-transition: opacity 0.3s cubic-bezier(0.250, 0.460, 0.450, 0.940), -webkit-transform 0.3s cubic-bezier(0.250, 0.460, 0.450, 0.940);-moz-transition: opacity 0.3s cubic-bezier(0.250, 0.460, 0.450, 0.940), -moz-transform 0.3s cubic-bezier(0.250, 0.460, 0.450, 0.940);-ms-transition: opacity 0.3s cubic-bezier(0.250, 0.460, 0.450, 0.940), -ms-transform 0.3s cubic-bezier(0.250, 0.460, 0.450, 0.940);-o-transition: opacity 0.3s cubic-bezier(0.250, 0.460, 0.450, 0.940), -o-transform 0.3s cubic-bezier(0.250, 0.460, 0.450, 0.940);transition: opacity 0.3s cubic-bezier(0.250, 0.460, 0.450, 0.940), transform 0.3s cubic-bezier(0.250, 0.460, 0.450, 0.940);}.ui-dialog .ui-dialog-titlebar{z-index:1;padding:0 .2em;position:relative}.ui-dialog .ui-dialog-title{float:left;margin:.1em 0;white-space:nowrap;width:90%;overflow:hidden;text-overflow:ellipsis;color:' + i + "}.ui-dialog .ui-dialog-titlebar-close{position:absolute;right:.3em;top:50%;width:21px;margin:-10px 0 0 0;padding:1px;height:20px}.ui-dialog .ui-dialog-content{position:relative;border:0;padding:0;background:0;overflow:hidden}.ui-dialog.scrollable .ui-dialog-content{overflow:auto}.ui-dialog .ui-dialog-buttonpane{text-align:left;border-width:1px 0 0;background-image:none;margin-top:.5em;padding:.3em 1em .5em .4em}.ui-dialog .ui-dialog-buttonpane .ui-dialog-buttonset{float:right}.ui-dialog .ui-dialog-buttonpane button{margin:.5em .4em .5em 0;cursor:pointer}.ui-dialog .ui-resizable-se{width:12px;height:12px;right:-5px;bottom:-5px;background-position:16px 16px}.ui-draggable .ui-dialog-titlebar{cursor:move}.ui-widget .ui-widget{font-size:1em}.ui-widget input,.ui-widget select,.ui-widget textarea,.ui-widget button{font-family:Helvetica,Arial,sans-serif;font-size:1em}.ui-widget-content{border:1px solid " + e + ";background:" + d + ";color:#222}.ui-widget-content .content{background:#fff;padding:.5em;}.ui-widget-content a{color:#222}.ui-widget-header{background:" + d + " url(" + c + "img/dialog/ui-bg_flat_0_ffffff_40x100.png) 50% 50% repeat-x;color:#fff;font-weight:bold}.ui-widget-header a{color:#fff}.ui-state-default,.ui-widget-content .ui-state-default,.ui-widget-header .ui-state-default{border:1px solid " + g + ";background:#c8eafc url(" + c + "img/dialog/ui-bg_glass_100_c8eafc_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#000}.ui-state-default a,.ui-state-default a:link,.ui-state-default a:visited{color:#000;text-decoration:none}.ui-state-hover,.ui-widget-content .ui-state-hover,.ui-widget-header .ui-state-hover,.ui-state-focus,.ui-widget-content .ui-state-focus,.ui-widget-header .ui-state-focus{border:1px solid " + g + ";background:#a9e0fa url(" + c + "img/dialog/ui-bg_glass_100_a9e0fa_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#000}.ui-state-hover a,.ui-state-hover a:hover,.ui-state-hover a:link,.ui-state-hover a:visited{color:#000;text-decoration:none}.ui-state-active,.ui-widget-content .ui-state-active,.ui-widget-header .ui-state-active{border:1px solid " + g + ";background:#ffc70b url(" + c + "img/dialog/ui-bg_glass_100_ffc70b_1x400.png) 50% 50% repeat-x;font-weight:normal;color:#000}.ui-state-active a,.ui-state-active a:link,.ui-state-active a:visited{color:#000;text-decoration:none}.ui-state-highlight,.ui-widget-content .ui-state-highlight,.ui-widget-header .ui-state-highlight{border:1px solid #f47721;background:#ffc70b url(" + c + "img/dialog/ui-bg_glass_100_ffc70b_1x400.png) 50% 50% repeat-x;color:#000}.ui-state-highlight a,.ui-widget-content .ui-state-highlight a,.ui-widget-header .ui-state-highlight a{color:#000}.ui-state-error,.ui-widget-content .ui-state-error,.ui-widget-header .ui-state-error{border:1px solid #cd0a0a;background:#fef1ec url(" + c + "img/dialog/ui-bg_glass_95_fef1ec_1x400.png) 50% 50% repeat-x;color:#cd0a0a}.ui-state-error a,.ui-widget-content .ui-state-error a,.ui-widget-header .ui-state-error a{color:#cd0a0a}.ui-state-error-text,.ui-widget-content .ui-state-error-text,.ui-widget-header .ui-state-error-text{color:#cd0a0a}.ui-priority-primary,.ui-widget-content .ui-priority-primary,.ui-widget-header .ui-priority-primary{font-weight:bold}.ui-priority-secondary,.ui-widget-content .ui-priority-secondary,.ui-widget-header .ui-priority-secondary{opacity:.7;filter:Alpha(Opacity=70);font-weight:normal}.ui-state-disabled,.ui-widget-content .ui-state-disabled,.ui-widget-header .ui-state-disabled{opacity:.35;filter:Alpha(Opacity=35);background-image:none}.ui-state-disabled .ui-icon{filter:Alpha(Opacity=35)}.ui-icon{width:16px;height:16px}.ui-icon,.ui-widget-content .ui-icon{background-image:url(" + c + "img/dialog/ui-icons_ffffff_256x240.png)}.ui-widget-header .ui-icon{background-image:url(" + c + "img/dialog/ui-icons_91d0d0_256x240.png)}.ui-state-default .ui-icon{background-image:url(" + c + "img/dialog/ui-icons_000000_256x240.png)}.ui-state-hover .ui-icon,.ui-state-focus .ui-icon{background-image:url(" + c + "img/dialog/ui-icons_000000_256x240.png)}.ui-state-active .ui-icon{background-image:url(" + c + "img/dialog/ui-icons_000000_256x240.png)}.ui-state-highlight .ui-icon{background-image:url(" + c + "img/dialog/ui-icons_000000_256x240.png)}.ui-state-error .ui-icon,.ui-state-error-text .ui-icon{background-image:url(" + c + "img/dialog/ui-icons_cd0a0a_256x240.png)}.ui-dialog .ui-dialog-titlebar-close {background: " + f + " !important;outline:none;position: absolute;right: .3em;top: 50%;width: 21px;margin: -10px 0 0 0;padding: 1px;height: 20px;-webkit-transition: 0.3s all ease;-moz-transition: 0.3s all ease;-ms-transition: 0.3s all ease;-o-transition: 0.3s all ease;transition: 0.3s all ease;}.ui-dialog .ui-dialog-titlebar-close.ui-state-hover {background:" + h + " !important;border:1px solid " + g + ";}.ui-dialog .ui-dialog-titlebar-close.ui-button-icon-only .ui-icon {top:0;left:0;margin:0;padding:0;}.ui-dialog .ui-dialog-titlebar-close.ui-button-icon-only .ui-icon.ui-icon-closethick {top:1px;left:1px;margin:0;padding:0;}.ui-icon-closethick{background-position: -96px -128px;}.ui-icon-grip-dotted-vertical{background-position:0 -224px}.ui-icon-grip-dotted-horizontal{background-position:-16px -224px}.ui-icon-grip-solid-vertical{background-position:-32px -224px}.ui-icon-grip-solid-horizontal{background-position:-48px -224px}.ui-icon-gripsmall-diagonal-se{background-position:-64px -224px}.ui-icon-grip-diagonal-se{background-position:-80px -224px}.ui-corner-all,.ui-corner-top,.ui-corner-left,.ui-corner-tl{border-top-left-radius:6px}.ui-corner-all,.ui-corner-top,.ui-corner-right,.ui-corner-tr{border-top-right-radius:6px}.ui-corner-all,.ui-corner-bottom,.ui-corner-left,.ui-corner-bl{border-bottom-left-radius:6px}.ui-corner-all,.ui-corner-bottom,.ui-corner-right,.ui-corner-br{border-bottom-right-radius:6px}.ui-widget-overlay{background:#000 url(" + c + "img/dialog/ui-bg_flat_50_000000_40x100.png) 50% 117% repeat-x;opacity:" + b + ";filter:Alpha(Opacity=" + 100 * b + ")}.ui-widget-shadow{margin:-8px 0 0 -8px;padding:8px;background:#000 url(" + c + "img/dialog/ui-bg_flat_50_000000_40x100.png) 50% 50% repeat-x;opacity:.25;filter:Alpha(Opacity=25);border-radius:8px}.widget-dialog.chromeless{-moz-box-shadow: none;-webkit-box-shadow: none;box-shadow: none;}.widget-dialog.chromeless,.widget-dialog.chromeless .ui-widget-header{background:transparent;border:none;display:none}.widget-dialog.chromeless .ui-button{display:none}.widget-dialog{z-index:2010;}.ui-dialog .ui-dialog-content .widget-widget,.ui-dialog.chromeless .ui-dialog-content .widget-widget{overflow:hidden}.widget-widget iframe{width:100%;height:100%}.chromeless-closebutton{position:absolute;cursor:pointer;top:0;right:0}.hidden-dialog-overlay{position:absolute;top:0;left:0;right:0;bottom:0;z-order:100000;}.dialog-resize-modal{position:fixed;top:0;left:0;height:100%;width:100%;background-color:#000;}"
    }

    var b = .6;
    return{getStyle: a}
}();
//# sourceMappingURL=/static/interactivetool/js-source/activetext.min.js.map